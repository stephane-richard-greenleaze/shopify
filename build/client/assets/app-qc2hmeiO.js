import{r as m,R as o,g as g_,d as Ai,e as $n,j as gr}from"./index-D0piyJ7G.js";import{r as mt,i as Fs,s as Mb,x as se,u as Fb,d as T,v as Be,y as Ca,a as te,T as G,z as Er,C as Db,p as de,B as rt,A as Ns,D as Hb,F as Pd,G as Ad,H as le,J as Td,K as ha,U as Cr,N as Wt,e as tr,O as b_,Q as vr,R as it,V as qs,b as Nn,W as nt,X as Tn,Y as Rd,Z as ts,_ as Sr,c as ye,$ as Fo,a0 as Gt,a1 as Xs,a2 as an,a3 as rr,a4 as nn,a5 as y_,w as Bb,a6 as Wb,E as $t,a7 as Hu,o as Ub,a8 as v_,a9 as E_,aa as S_,ab as Do,ac as __,ad as Ys,ae as jb,af as Zs,ag as Qs,ah as Bt,ai as C_,aj as w_,ak as P_,al as A_,am as T_,an as R_,ao as ei,ap as Ho,aq as Ga,ar as rs,as as Bu,at as k_,au as x_,av as lo,aw as I_,ax as $_,ay as N_,az as Ff,aA as O_,aB as qb,aC as Vb,S as L_,k as M_,l as F_,m as D_,I as H_,L as B_,M as W_,j as U_,aD as Kb,aE as j_,aF as q_,aG as V_,aH as K_,aI as z_,aJ as G_,aK as J_,aL as X_,aM as Y_,aN as Z_,P as Q_,aO as eC,aP as tC,aQ as rC,aR as nC}from"./Page-BXg2R-om.js";import{S as kd,a as aC,F as ti,b as xd,I as sC,c as iC,m as oC,P as zb,d as lC,E as cC,A as uC,p as dC}from"./styles-Di6RmNJN.js";import{B as hC,L as Gb,a as fC}from"./List-DMgMadGi.js";import{T as Jb,L as pC}from"./Layout-CYn5_LOs.js";import{q as mC,D as gC,s as bC,t as yC,V as vC,v as EC,w as SC,x as _C,y as CC,A as wC,I as PC,z as AC,B as TC,C as Id,n as RC,R as Xb,E as kC,F as xC,G as Wu,L as IC,H as $C,M as NC,N as OC,J as LC,K as MC,O as Yb,P as FC,Q as DC,T as HC,S as BC,U as Df,W as WC,X as UC,i as jC,Y as qC,m as VC,Z as KC,$ as zC,a0 as GC,a1 as JC,a2 as XC,a as YC,a3 as ZC,a4 as QC,a5 as ew,a6 as tw,a7 as rw,a8 as nw,a9 as aw,aa as sw,ab as iw,ac as ow,c as Zb,e as lw,ad as cw,ae as uw,af as dw,u as hw,ag as fw,ah as pw,ai as mw,aj as gw,ak as bw,al as yw,j as Qb,am as vw,an as Ew,ao as Sw,b as _w}from"./components-B1afT1Y1.js";import{c as Cw,s as ww,a as Pw,R as Aw}from"./browser-Box22kee.js";import{S as Tw}from"./scroll-restoration-bAUtMBxn.js";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Rw=Iw,kw=$w,xw=Object.prototype.toString,Ti=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Iw(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},a=n.decode||Nw,s=0;s<e.length;){var i=e.indexOf("=",s);if(i===-1)break;var l=e.indexOf(";",s);if(l===-1)l=e.length;else if(l<i){s=e.lastIndexOf(";",i-1)+1;continue}var c=e.slice(s,i).trim();if(r[c]===void 0){var u=e.slice(i+1,l).trim();u.charCodeAt(0)===34&&(u=u.slice(1,-1)),r[c]=Mw(u,a)}s=l+1}return r}function $w(e,t,r){var n=r||{},a=n.encode||Ow;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!Ti.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!Ti.test(s))throw new TypeError("argument val is invalid");var i=e+"="+s;if(n.maxAge!=null){var l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(l)}if(n.domain){if(!Ti.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!Ti.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){var c=n.expires;if(!Lw(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+c.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority){var u=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(u){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i}function Nw(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function Ow(e){return encodeURIComponent(e)}function Lw(e){return xw.call(e)==="[object Date]"||e instanceof Date}function Mw(e,t){try{return t(e)}catch{return e}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Hf={};function ey(e,t){!e&&!Hf[t]&&(Hf[t]=!0,console.warn(t))}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Fw=({sign:e,unsign:t})=>(r,n={})=>{let{secrets:a=[],...s}={path:"/",sameSite:"lax",...n};return jw(r,s.expires),{get name(){return r},get isSigned(){return a.length>0},get expires(){return typeof s.maxAge<"u"?new Date(Date.now()+s.maxAge*1e3):s.expires},async parse(i,l){if(!i)return null;let c=Rw(i,{...s,...l});return r in c?c[r]===""?"":await Hw(t,c[r],a):null},async serialize(i,l){return kw(r,i===""?"":await Dw(e,i,a),{...s,...l})}}},$d=e=>e!=null&&typeof e.name=="string"&&typeof e.isSigned=="boolean"&&typeof e.parse=="function"&&typeof e.serialize=="function";async function Dw(e,t,r){let n=Bw(t);return r.length>0&&(n=await e(n,r[0])),n}async function Hw(e,t,r){if(r.length>0){for(let n of r){let a=await e(t,n);if(a!==!1)return Bf(a)}return null}return Bf(t)}function Bw(e){return btoa(Uw(encodeURIComponent(JSON.stringify(e))))}function Bf(e){try{return JSON.parse(decodeURIComponent(Ww(atob(e))))}catch{return{}}}function Ww(e){let t=e.toString(),r="",n=0,a,s;for(;n<t.length;)a=t.charAt(n++),/[\w*+\-./@]/.exec(a)?r+=a:(s=a.charCodeAt(0),s<256?r+="%"+Wf(s,2):r+="%u"+Wf(s,4).toUpperCase());return r}function Wf(e,t){let r=e.toString(16);for(;r.length<t;)r="0"+r;return r}function Uw(e){let t=e.toString(),r="",n=0,a,s;for(;n<t.length;){if(a=t.charAt(n++),a==="%"){if(t.charAt(n)==="u"){if(s=t.slice(n+1,n+5),/^[\da-f]{4}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=5;continue}}else if(s=t.slice(n,n+2),/^[\da-f]{2}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=2;continue}}r+=a}return r}function jw(e,t){ey(!t,`The "${e}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}function Bo(e){const t=unescape(encodeURIComponent(e));return Uint8Array.from(t,(r,n)=>t.charCodeAt(n))}function qw(e){const t=String.fromCharCode.apply(null,e);return decodeURIComponent(escape(t))}function co(...e){const t=new Uint8Array(e.reduce((n,a)=>n+a.length,0));let r=0;for(const n of e)t.set(n,r),r+=n.length;return t}function Vw(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Uf(e){return e instanceof Uint8Array?t=>e[t]:e}function _c(e,t,r,n,a){const s=Uf(e),i=Uf(r);for(let l=0;l<a;++l)if(s(t+l)!==i(n+l))return!1;return!0}function Kw(e){const t=new Array(256).fill(e.length);if(e.length>1)for(let r=0;r<e.length-1;r++)t[e[r]]=e.length-1-r;return t}const en=Symbol("Match");class Nd{constructor(t){this._lookbehind=new Uint8Array,typeof t=="string"?this._needle=t=Bo(t):this._needle=t,this._lastChar=t[t.length-1],this._occ=Kw(t)}feed(t){let r=0,n;const a=[];for(;r!==t.length;)[r,...n]=this._feed(t,r),a.push(...n);return a}end(){const t=this._lookbehind;return this._lookbehind=new Uint8Array,t}_feed(t,r){const n=[];let a=-this._lookbehind.length;if(a<0){for(;a<0&&a<=t.length-this._needle.length;){const s=this._charAt(t,a+this._needle.length-1);if(s===this._lastChar&&this._memcmp(t,a,this._needle.length-1))return a>-this._lookbehind.length&&n.push(this._lookbehind.slice(0,this._lookbehind.length+a)),n.push(en),this._lookbehind=new Uint8Array,[a+this._needle.length,...n];a+=this._occ[s]}if(a<0)for(;a<0&&!this._memcmp(t,a,t.length-a);)a++;if(a>=0)n.push(this._lookbehind),this._lookbehind=new Uint8Array;else{const s=this._lookbehind.length+a;return s>0&&(n.push(this._lookbehind.slice(0,s)),this._lookbehind=this._lookbehind.slice(s)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+t.length),(i,l)=>this._charAt(t,l-this._lookbehind.length)),[t.length,...n]}}for(a+=r;a<=t.length-this._needle.length;){const s=t[a+this._needle.length-1];if(s===this._lastChar&&t[a]===this._needle[0]&&_c(this._needle,0,t,a,this._needle.length-1))return a>r&&n.push(t.slice(r,a)),n.push(en),[a+this._needle.length,...n];a+=this._occ[s]}if(a<t.length){for(;a<t.length&&(t[a]!==this._needle[0]||!_c(t,a,this._needle,0,t.length-a));)++a;a<t.length&&(this._lookbehind=t.slice(a))}return a>0&&n.push(t.slice(r,a<t.length?a:t.length)),[t.length,...n]}_charAt(t,r){return r<0?this._lookbehind[this._lookbehind.length+r]:t[r]}_memcmp(t,r,n){return _c(this._charAt.bind(this,t),r,this._needle,0,n)}}class zw{constructor(t,r){this._readableStream=r,this._search=new Nd(t)}async*[Symbol.asyncIterator](){const t=this._readableStream.getReader();try{for(;;){const n=await t.read();if(n.done)break;yield*this._search.feed(n.value)}const r=this._search.end();r.length&&(yield r)}finally{t.releaseLock()}}}const Gw=Function.prototype.apply.bind(co,void 0),ty=Bo("--"),Ds=Bo(`\r
`);function Jw(e){const t=e.split(";").map(n=>n.trim());if(t.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(t)+"`");const r={};for(const n of t){const a=n.split("=",2);if(a.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+e+"`");const[s,i]=a;if(i[0]==='"'&&i[i.length-1]==='"')r[s]=i.slice(1,-1).replace(/\\"/g,'"');else if(i[0]!=='"'&&i[i.length-1]!=='"')r[s]=i;else if(i[0]==='"'&&i[i.length-1]!=='"'||i[0]!=='"'&&i[i.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+e+"`")}if(!r.name)throw new Error("malformed content-disposition header: missing field name in `"+e+"`");return r}function Xw(e){const t=[];let r=!1,n;for(;typeof(n=e.shift())<"u";){const a=n.indexOf(":");if(a===-1)throw new Error("malformed multipart-form header: missing colon");const s=n.slice(0,a).trim().toLowerCase(),i=n.slice(a+1).trim();switch(s){case"content-disposition":r=!0,t.push(...Object.entries(Jw(i)));break;case"content-type":t.push(["contentType",i])}}if(!r)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(t)}async function Yw(e,t){let r=!0,n=!1;const a=[[]],s=new Nd(Ds);for(;;){const i=await e.next();if(i.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(r&&i.value!==en&&Vw(i.value.slice(0,2),ty))return[void 0,new Uint8Array];let l;if(i.value!==en)l=i.value;else if(!n)l=t;else throw new Error("malformed multipart-form data: unexpected boundary");if(!l.length)continue;r&&(r=!1);const c=s.feed(l);for(const[u,d]of c.entries()){const h=d===en;if(!(!h&&!d.length)){if(n&&h)return c.push(s.end()),[a.filter(f=>f.length).map(Gw).map(qw),co(...c.slice(u+1).map(f=>f===en?Ds:f))];(n=h)?a.push([]):a[a.length-1].push(d)}}}}async function*Zw(e,t){const r=co(ty,Bo(t)),n=new zw(r,e)[Symbol.asyncIterator]();for(;;){const s=await n.next();if(s.done)return;if(s.value===en)break}const a=new Nd(Ds);for(;;){let u=function(p){const g=[];for(const b of a.feed(p))c&&g.push(Ds),(c=b===en)||g.push(b);return co(...g)};const[s,i]=await Yw(n,r);if(!s)return;async function l(){const p=await n.next();if(p.done)throw new Error("malformed multipart-form data: unexpected end of stream");return p}let c=!1,d=!1;async function h(){const p=await l();let g;if(p.value!==en)g=p.value;else if(!c)g=Ds;else return d=!0,{value:a.end()};return{value:u(g)}}const f=[{value:u(i)}];for(yield{...Xw(s),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){const p=f.shift();if(!p)break;if(p.value.length>0)return p}for(;;){if(d)return{done:d,value:void 0};const p=await h();if(p.value.length>0)return p}}}};!d;)f.push(await h())}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qw(...e){return async t=>{for(let r of e){let n=await r(t);if(typeof n<"u"&&n!==null)return n}}}async function eP(e,t){let r=e.headers.get("Content-Type")||"",[n,a]=r.split(/\s*;\s*boundary=/);if(!e.body||!a||n!=="multipart/form-data")throw new TypeError("Could not parse content as FormData.");let s=new FormData,i=Zw(e.body,a);for await(let l of i){if(l.done)break;typeof l.filename=="string"&&(l.filename=l.filename.split(/[/\\]/).pop());let c=await t(l);typeof c<"u"&&c!==null&&s.append(l.name,c)}return s}/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dt.apply(this,arguments)}var jf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jf||(jf={}));function Ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Od(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tP(){return Math.random().toString(36).substr(2,8)}function qf(e,t,r,n){return r===void 0&&(r=null),dt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ri(t):t,{state:r,key:t&&t.key||n||tP()})}function Uu(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ri(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var ze;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ze||(ze={}));const rP=new Set(["lazy","caseSensitive","path","id","index","children"]);function nP(e){return e.index===!0}function ry(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((a,s)=>{let i=[...r,s],l=typeof a.id=="string"?a.id:i.join("-");if(Ht(a.index!==!0||!a.children,"Cannot specify children on an index route"),Ht(!n[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),nP(a)){let c=dt({},a,t(a),{id:l});return n[l]=c,c}else{let c=dt({},a,t(a),{id:l,children:void 0});return n[l]=c,a.children&&(c.children=ry(a.children,t,i,n)),c}})}function ju(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?ri(t):t,a=Wo(n.pathname||"/",r);if(a==null)return null;let s=ny(e);aP(s);let i=null;for(let l=0;i==null&&l<s.length;++l){let c=gP(a);i=fP(s[l],c)}return i}function ny(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,i,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};c.relativePath.startsWith("/")&&(Ht(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Hs([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(Ht(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ny(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:dP(u,s.index),routesMeta:d})};return e.forEach((s,i)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,i);else for(let c of ay(s.path))a(s,i,c)}),t}function ay(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=ay(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function aP(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hP(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const sP=/^:[\w-]+$/,iP=3,oP=2,lP=1,cP=10,uP=-2,Vf=e=>e==="*";function dP(e,t){let r=e.split("/"),n=r.length;return r.some(Vf)&&(n+=uP),t&&(n+=oP),r.filter(a=>!Vf(a)).reduce((a,s)=>a+(sP.test(s)?iP:s===""?lP:cP),n)}function hP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function fP(e,t){let{routesMeta:r}=e,n={},a="/",s=[];for(let i=0;i<r.length;++i){let l=r[i],c=i===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=pP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u);if(!d)return null;Object.assign(n,d.params);let h=l.route;s.push({params:n,pathname:Hs([a,d.pathname]),pathnameBase:SP(Hs([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=Hs([a,d.pathnameBase]))}return s}function pP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mP(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let b=l[h]||"";i=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[h];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function mP(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Od(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function gP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Od(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function bP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ri(e):e;return{pathname:r?r.startsWith("/")?r:yP(r,t):t,search:_P(n),hash:CP(a)}}function yP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Cc(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sy(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vP(e,t){let r=sy(e);return t?r.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function EP(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ri(e):(a=dt({},e),Ht(!a.pathname||!a.pathname.includes("?"),Cc("?","pathname","search",a)),Ht(!a.pathname||!a.pathname.includes("#"),Cc("#","pathname","hash",a)),Ht(!a.search||!a.search.includes("#"),Cc("#","search","hash",a)));let s=e===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let h=t.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=bP(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Hs=e=>e.join("/").replace(/\/\/+/g,"/"),SP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_P=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,CP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ld=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r,a=new Headers(n.headers);return a.has("Content-Type")||a.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),dt({},n,{headers:a}))};class Kf extends Error{}class wP{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Ht(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((s,i)=>n=i),this.controller=new AbortController;let a=()=>n(new Kf("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",a),this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((s,i)=>{let[l,c]=i;return Object.assign(s,{[l]:this.trackPromise(l,c)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(a=>this.onSettle(n,t,void 0,a),a=>this.onSettle(n,t,a));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,a){if(this.controller.signal.aborted&&n instanceof Kf)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);if(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n===void 0&&a===void 0){let s=new Error('Deferred data for key "'+r+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>s}),this.emit(!1,r),Promise.reject(s)}return a===void 0?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>a}),this.emit(!1,r),a)}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(a=>{this.subscribe(s=>{t.removeEventListener("abort",n),(s||this.done)&&a(s)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Ht(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,a]=r;return Object.assign(t,{[n]:AP(a)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function PP(e){return e instanceof Promise&&e._tracked===!0}function AP(e){if(!PP(e))return e;if(e._error)throw e._error;return e._data}const TP=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r;return new wP(t,n)},iy=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let a=new Headers(n.headers);return a.set("Location",t),new Response(null,dt({},n,{headers:a}))},RP=(e,t)=>{let r=iy(e,t);return r.headers.set("X-Remix-Reload-Document","true"),r};class Md{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function On(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oy=["post","put","patch","delete"],kP=new Set(oy),xP=["get",...oy],IP=new Set(xP),$P=new Set([301,302,303,307,308]),NP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OP=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),uo=Symbol("deferred");function LP(e,t){Ht(e.length>0,"You must provide a non-empty routes array to createStaticHandler");let r={},n=(t?t.basename:null)||"/",a;if(t!=null&&t.mapRouteProperties)a=t.mapRouteProperties;else if(t!=null&&t.detectErrorBoundary){let f=t.detectErrorBoundary;a=p=>({hasErrorBoundary:f(p)})}else a=OP;let s=dt({v7_relativeSplatPath:!1,v7_throwAbortReason:!1},t?t.future:null),i=ry(e,a,void 0,r);async function l(f,p){let{requestContext:g}=p===void 0?{}:p,b=new URL(f.url),y=f.method,v=qf("",Uu(b),null,"default"),E=ju(i,v,n);if(!Yf(y)&&y!=="HEAD"){let _=pr(405,{method:y}),{matches:R,route:x}=Xf(i);return{basename:n,location:v,matches:R,loaderData:{},actionData:null,errors:{[x.id]:_},statusCode:_.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}else if(!E){let _=pr(404,{pathname:v.pathname}),{matches:R,route:x}=Xf(i);return{basename:n,location:v,matches:R,loaderData:{},actionData:null,errors:{[x.id]:_},statusCode:_.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let S=await u(f,v,E,g);return Va(S)?S:dt({location:v,basename:n},S)}async function c(f,p){let{routeId:g,requestContext:b}=p===void 0?{}:p,y=new URL(f.url),v=f.method,E=qf("",Uu(y),null,"default"),S=ju(i,E,n);if(!Yf(v)&&v!=="HEAD"&&v!=="OPTIONS")throw pr(405,{method:v});if(!S)throw pr(404,{pathname:E.pathname});let _=g?S.find(w=>w.route.id===g):Zf(S,E);if(g&&!_)throw pr(403,{pathname:E.pathname,routeId:g});if(!_)throw pr(404,{pathname:E.pathname});let R=await u(f,E,S,b,_);if(Va(R))return R;let x=R.errors?Object.values(R.errors)[0]:void 0;if(x!==void 0)throw x;if(R.actionData)return Object.values(R.actionData)[0];if(R.loaderData){var C;let w=Object.values(R.loaderData)[0];return(C=R.activeDeferreds)!=null&&C[_.route.id]&&(w[uo]=R.activeDeferreds[_.route.id]),w}}async function u(f,p,g,b,y){Ht(f.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(jP(f.method.toLowerCase()))return await d(f,g,y||Zf(g,p),b,y!=null);let v=await h(f,g,b,y);return Va(v)?v:dt({},v,{actionData:null,actionHeaders:{}})}catch(v){if(UP(v)){if(v.type===ze.error)throw v.response;return v.response}if(WP(v))return v;throw v}}async function d(f,p,g,b,y){let v;if(!g.route.action&&!g.route.lazy){let _=pr(405,{method:f.method,pathname:new URL(f.url).pathname,routeId:g.route.id});if(y)throw _;v={type:ze.error,error:_}}else v=await Jf("action",f,g,p,r,a,n,s.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:y,requestContext:b}),f.signal.aborted&&zf(f,y,s);if(uy(v))throw new Response(null,{status:v.status,headers:{Location:v.location}});if(cy(v)){let _=pr(400,{type:"defer-action"});if(y)throw _;v={type:ze.error,error:_}}if(y){if(qu(v))throw v.error;return{matches:[g],loaderData:{},actionData:{[g.route.id]:v.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(qu(v)){let _=ly(p,g.route.id),R=await h(f,p,b,void 0,{[_.route.id]:v.error});return dt({},R,{statusCode:On(v.error)?v.error.status:500,actionData:null,actionHeaders:dt({},v.headers?{[g.route.id]:v.headers}:{})})}let E=new Request(f.url,{headers:f.headers,redirect:f.redirect,signal:f.signal}),S=await h(E,p,b);return dt({},S,v.statusCode?{statusCode:v.statusCode}:{},{actionData:{[g.route.id]:v.data},actionHeaders:dt({},v.headers?{[g.route.id]:v.headers}:{})})}async function h(f,p,g,b,y){let v=b!=null;if(v&&!(b!=null&&b.route.loader)&&!(b!=null&&b.route.lazy))throw pr(400,{method:f.method,pathname:new URL(f.url).pathname,routeId:b==null?void 0:b.route.id});let S=(b?[b]:DP(p,Object.keys(y||{})[0])).filter(w=>w.route.loader||w.route.lazy);if(S.length===0)return{matches:p,loaderData:p.reduce((w,P)=>Object.assign(w,{[P.route.id]:null}),{}),errors:y||null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let _=await Promise.all([...S.map(w=>Jf("loader",f,w,p,r,a,n,s.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:v,requestContext:g}))]);f.signal.aborted&&zf(f,v,s);let R=new Map,x=HP(p,S,_,y,R),C=new Set(S.map(w=>w.route.id));return p.forEach(w=>{C.has(w.route.id)||(x.loaderData[w.route.id]=null)}),dt({},x,{matches:p,activeDeferreds:R.size>0?Object.fromEntries(R.entries()):null})}return{dataRoutes:i,query:l,queryRoute:c}}function MP(e,t,r){return dt({},t,{statusCode:On(r)?r.status:500,errors:{[t._deepestRenderedBoundaryId||e[0].id]:r}})}function zf(e,t,r){if(r.v7_throwAbortReason&&e.signal.reason!==void 0)throw e.signal.reason;let n=t?"queryRoute":"query";throw new Error(n+"() call aborted: "+e.method+" "+e.url)}function FP(e,t,r,n,a,s,i,l){let c,u;if(i){c=[];for(let h of t)if(c.push(h),h.route.id===i){u=h;break}}else c=t,u=t[t.length-1];let d=EP(a||".",vP(c,s),Wo(e.pathname,r)||e.pathname,l==="path");return a==null&&(d.search=e.search,d.hash=e.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!dy(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:Hs([r,d.pathname])),Uu(d)}function DP(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}async function Gf(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let a=r[e.id];Ht(a,"No route found in manifest");let s={};for(let i in n){let c=a[i]!==void 0&&i!=="hasErrorBoundary";Od(!c,'Route "'+a.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!c&&!rP.has(i)&&(s[i]=n[i])}Object.assign(a,s),Object.assign(a,dt({},t(a),{lazy:void 0}))}async function Jf(e,t,r,n,a,s,i,l,c){c===void 0&&(c={});let u,d,h,f=b=>{let y,v=new Promise((E,S)=>y=S);return h=()=>y(),t.signal.addEventListener("abort",h),Promise.race([b({request:t,params:r.params,context:c.requestContext}),v])};try{let b=r.route[e];if(r.route.lazy)if(b){let y,v=await Promise.all([f(b).catch(E=>{y=E}),Gf(r.route,s,a)]);if(y)throw y;d=v[0]}else if(await Gf(r.route,s,a),b=r.route[e],b)d=await f(b);else if(e==="action"){let y=new URL(t.url),v=y.pathname+y.search;throw pr(405,{method:t.method,pathname:v,routeId:r.route.id})}else return{type:ze.data,data:void 0};else if(b)d=await f(b);else{let y=new URL(t.url),v=y.pathname+y.search;throw pr(404,{pathname:v})}Ht(d!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(b){u=ze.error,d=b}finally{h&&t.signal.removeEventListener("abort",h)}if(Va(d)){let b=d.status;if($P.has(b)){let v=d.headers.get("Location");if(Ht(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!NP.test(v))v=FP(new URL(t.url),n.slice(0,n.indexOf(r)+1),i,!0,v,l);else if(!c.isStaticRequest){let E=new URL(t.url),S=v.startsWith("//")?new URL(E.protocol+v):new URL(v),_=Wo(S.pathname,i)!=null;S.origin===E.origin&&_&&(v=S.pathname+S.search+S.hash)}if(c.isStaticRequest)throw d.headers.set("Location",v),d;return{type:ze.redirect,status:b,location:v,revalidate:d.headers.get("X-Remix-Revalidate")!==null,reloadDocument:d.headers.get("X-Remix-Reload-Document")!==null}}if(c.isRouteRequest)throw{type:u===ze.error?ze.error:ze.data,response:d};let y;try{let v=d.headers.get("Content-Type");v&&/\bapplication\/json\b/.test(v)?d.body==null?y=null:y=await d.json():y=await d.text()}catch(v){return{type:ze.error,error:v}}return u===ze.error?{type:u,error:new Md(b,d.statusText,y),headers:d.headers}:{type:ze.data,data:y,statusCode:d.status,headers:d.headers}}if(u===ze.error)return{type:u,error:d};if(BP(d)){var p,g;return{type:ze.deferred,deferredData:d,statusCode:(p=d.init)==null?void 0:p.status,headers:((g=d.init)==null?void 0:g.headers)&&new Headers(d.init.headers)}}return{type:ze.data,data:d}}function HP(e,t,r,n,a){let s={},i=null,l,c=!1,u={};return r.forEach((d,h)=>{let f=t[h].route.id;if(Ht(!uy(d),"Cannot handle redirect results in processLoaderData"),qu(d)){let p=ly(e,f),g=d.error;n&&(g=Object.values(n)[0],n=void 0),i=i||{},i[p.route.id]==null&&(i[p.route.id]=g),s[f]=void 0,c||(c=!0,l=On(d.error)?d.error.status:500),d.headers&&(u[f]=d.headers)}else cy(d)?(a.set(f,d.deferredData),s[f]=d.deferredData.data):s[f]=d.data,d.statusCode!=null&&d.statusCode!==200&&!c&&(l=d.statusCode),d.headers&&(u[f]=d.headers)}),n&&(i=n,s[Object.keys(n)[0]]=void 0),{loaderData:s,errors:i,statusCode:l||200,loaderHeaders:u}}function ly(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Xf(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function pr(e,t){let{pathname:r,routeId:n,method:a,type:s}=t===void 0?{}:t,i="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(i="Bad Request",a&&r&&n?l="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):e===403?(i="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):e===404?(i="Not Found",l='No route matches URL "'+r+'"'):e===405&&(i="Method Not Allowed",a&&r&&n?l="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(l='Invalid request method "'+a.toUpperCase()+'"')),new Md(e||500,i,new Error(l),!0)}function cy(e){return e.type===ze.deferred}function qu(e){return e.type===ze.error}function uy(e){return(e&&e.type)===ze.redirect}function BP(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Va(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function WP(e){if(!Va(e))return!1;let t=e.status,r=e.headers.get("Location");return t>=300&&t<=399&&r!=null}function UP(e){return e&&Va(e.response)&&(e.type===ze.data||e.type===ze.error)}function Yf(e){return IP.has(e.toLowerCase())}function jP(e){return kP.has(e.toLowerCase())}function dy(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Zf(e,t){let r=typeof t=="string"?ri(t).search:t.search;if(e[e.length-1].route.index&&dy(r||""))return e[e.length-1];let n=sy(e);return n[n.length-1]}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let rn=function(e){return e.Development="development",e.Production="production",e.Test="test",e}({});function qP(e){return e===rn.Development||e===rn.Production||e===rn.Test}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(e,t){if(e instanceof Error&&t!==rn.Development){let r=new Error("Unexpected Server Error");return r.stack=void 0,r}return e}function Qf(e,t){return Object.entries(e).reduce((r,[n,a])=>Object.assign(r,{[n]:Fd(a,t)}),{})}function Uo(e,t){let r=Fd(e,t);return{message:r.message,stack:r.stack}}function ep(e,t){if(!e)return null;let r=Object.entries(e),n={};for(let[a,s]of r)if(On(s))n[a]={...s,__type:"RouteErrorResponse"};else if(s instanceof Error){let i=Fd(s,t);n[a]={message:i.message,stack:i.stack,__type:"Error",...i.name!=="Error"?{__subType:i.name}:{}}}else n[a]=s;return n}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const jo=(e,t={})=>Ld(e,t),hy=(e,t={})=>TP(e,t),Dd=(e,t=302)=>iy(e,t),fy=(e,t=302)=>RP(e,t);function VP(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function fa(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}const KP=new Set([301,302,303,307,308]);function py(e){return KP.has(e)}function zP(e){return py(e.status)}function GP(e){return e!=null&&typeof e.then=="function"&&e._tracked===!0}const JP="__deferred_promise:";function XP(e,t,r){let n=new TextEncoder;return new ReadableStream({async start(s){let i={},l=[];for(let[u,d]of Object.entries(e.data))GP(d)?(i[u]=`${JP}${u}`,(typeof d._data<"u"||typeof d._error<"u")&&l.push(u)):i[u]=d;s.enqueue(n.encode(JSON.stringify(i)+`

`));for(let u of l)tp(s,n,u,e.data[u],r);let c=e.subscribe((u,d)=>{d&&tp(s,n,d,e.data[d],r)});await e.resolveData(t),c(),s.close()}})}function tp(e,t,r,n,a){"_error"in n?e.enqueue(t.encode("error:"+JSON.stringify({[r]:n._error instanceof Error?Uo(n._error,a):n._error})+`

`)):e.enqueue(t.encode("data:"+JSON.stringify({[r]:n._data??null})+`

`))}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function YP(e){return Object.keys(e).reduce((t,r)=>(t[r]=e[r].module,t),{})}var qo={exports:{}},Wa={decodeValues:!0,map:!1,silent:!1};function Vu(e){return typeof e=="string"&&!!e.trim()}function Ku(e,t){var r=e.split(";").filter(Vu),n=r.shift(),a=ZP(n),s=a.name,i=a.value;t=t?Object.assign({},Wa,t):Wa;try{i=t.decodeValues?decodeURIComponent(i):i}catch(c){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+i+"'. Set options.decodeValues to false to disable this feature.",c)}var l={name:s,value:i};return r.forEach(function(c){var u=c.split("="),d=u.shift().trimLeft().toLowerCase(),h=u.join("=");d==="expires"?l.expires=new Date(h):d==="max-age"?l.maxAge=parseInt(h,10):d==="secure"?l.secure=!0:d==="httponly"?l.httpOnly=!0:d==="samesite"?l.sameSite=h:l[d]=h}),l}function ZP(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function my(e,t){if(t=t?Object.assign({},Wa,t):Wa,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(a){return a.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},Wa,t):Wa,t.map){var n={};return e.filter(Vu).reduce(function(a,s){var i=Ku(s,t);return a[i.name]=i,a},n)}else return e.filter(Vu).map(function(a){return Ku(a,t)})}function QP(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,a,s,i,l;function c(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function u(){return a=e.charAt(r),a!=="="&&a!==";"&&a!==","}for(;r<e.length;){for(n=r,l=!1;c();)if(a=e.charAt(r),a===","){for(s=r,r+=1,c(),i=r;r<e.length&&u();)r+=1;r<e.length&&e.charAt(r)==="="?(l=!0,r=i,t.push(e.substring(n,s)),n=r):r=s+1}else r+=1;(!l||r>=e.length)&&t.push(e.substring(n,e.length))}return t}qo.exports=my;qo.exports.parse=my;qo.exports.parseString=Ku;var eA=qo.exports.splitCookiesString=QP;/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tA(e,t){let r=t.errors?t.matches.findIndex(s=>t.errors[s.route.id]):-1,n=r>=0?t.matches.slice(0,r+1):t.matches,a;if(r>=0){let{actionHeaders:s,actionData:i,loaderHeaders:l,loaderData:c}=t;t.matches.slice(r).some(u=>{let d=u.route.id;return s[d]&&(!i||i[d]===void 0)?a=s[d]:l[d]&&c[d]===void 0&&(a=l[d]),a!=null})}return n.reduce((s,i,l)=>{let{id:c}=i.route,u=e.routes[c].module,d=t.loaderHeaders[c]||new Headers,h=t.actionHeaders[c]||new Headers,f=a!=null&&l===n.length-1,p=f&&a!==d&&a!==h;if(u.headers==null){let b=new Headers(s);return p&&Vn(a,b),Vn(h,b),Vn(d,b),b}let g=new Headers(u.headers?typeof u.headers=="function"?u.headers({loaderHeaders:d,parentHeaders:s,actionHeaders:h,errorHeaders:f?a:void 0}):u.headers:void 0);return p&&Vn(a,g),Vn(h,g),Vn(d,g),Vn(s,g),g},new Headers)}function Vn(e,t){let r=e.get("Set-Cookie");r&&eA(r).forEach(a=>{t.append("Set-Cookie",a)})}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rp(e,t){if(e===!1||e===null||typeof e>"u")throw console.error("The following error is a bug in Remix; please open an issue! https://github.com/remix-run/remix/issues/new"),new Error(t)}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rA(e,t,r){let n=ju(e,t,r);return n?n.map(a=>({params:a.params,pathname:a.pathname,route:a.route})):null}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function nA({loadContext:e,action:t,params:r,request:n,routeId:a}){let s=await t({request:by(gy(n)),context:e,params:r});if(s===void 0)throw new Error(`You defined an action for route "${a}" but didn't return anything from your \`action\` function. Please return a value or \`null\`.`);return fa(s)?s:jo(s)}async function aA({loadContext:e,loader:t,params:r,request:n,routeId:a}){let s=await t({request:by(gy(n)),context:e,params:r});if(s===void 0)throw new Error(`You defined a loader for route "${a}" but didn't return anything from your \`loader\` function. Please return a value or \`null\`.`);return VP(s)?s.init&&py(s.init.status||200)?Dd(new Headers(s.init.headers).get("Location"),s.init):s:fa(s)?s:jo(s)}function gy(e){let t=new URL(e.url),r=t.searchParams.getAll("index");t.searchParams.delete("index");let n=[];for(let s of r)s&&n.push(s);for(let s of n)t.searchParams.append("index",s);let a={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return a.body&&(a.duplex="half"),new Request(t.href,a)}function by(e){let t=new URL(e.url);t.searchParams.delete("_data");let r={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return r.body&&(r.duplex="half"),new Request(t.href,r)}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yy(e){let t={};return Object.values(e).forEach(r=>{let n=r.parentId||"";t[n]||(t[n]=[]),t[n].push(r)}),t}function vy(e,t="",r=yy(e)){return(r[t]||[]).map(n=>({...n,children:vy(e,n.id,r)}))}function Ey(e,t,r="",n=yy(e)){return(n[r]||[]).map(a=>{let s={hasErrorBoundary:a.id==="root"||a.module.ErrorBoundary!=null,id:a.id,path:a.path,loader:a.module.loader?i=>aA({request:i.request,params:i.params,loadContext:i.context,loader:a.module.loader,routeId:a.id}):void 0,action:a.module.action?i=>nA({request:i.request,params:i.params,loadContext:i.context,action:a.module.action,routeId:a.id}):void 0,handle:a.module.handle};return a.index?{index:!0,...s}:{caseSensitive:a.caseSensitive,children:Ey(e,t,a.id,n),...s}})}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sA={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},iA=/[&><\u2028\u2029]/g;function oA(e){return e.replace(iA,t=>sA[t])}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function np(e){return oA(JSON.stringify(e))}var lA={};/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function cA(e,t){if(t??(t=lA.REMIX_DEV_ORIGIN),!t)throw Error("Dev server origin not set");let r=new URL(t);r.pathname="ping";let n=await fetch(r.href,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buildHash:e.assets.version})}).catch(a=>{throw console.error(`Could not reach Remix dev server at ${r}`),a});if(!n.ok)throw console.error(`Could not reach Remix dev server at ${r} (${n.status})`),Error(await n.text())}function uA(e){console.log(`[REMIX DEV] ${e.assets.version} ready`)}const Sy="__remix_devServerHooks";function dA(e){globalThis[Sy]=e}function ap(){return globalThis[Sy]}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(e,t){var r,n;let a=vy(e.routes),s=Ey(e.routes,e.future),i=qP(t)?t:rn.Production,l=LP(s,{basename:e.basename,future:{v7_relativeSplatPath:((r=e.future)===null||r===void 0?void 0:r.v3_relativeSplatPath)===!0,v7_throwAbortReason:((n=e.future)===null||n===void 0?void 0:n.v3_throwAbortReason)===!0}}),c=e.entry.module.handleError||((u,{request:d})=>{i!==rn.Test&&!d.signal.aborted&&console.error(On(u)&&u.error?u.error:u)});return{routes:a,dataRoutes:s,serverMode:i,staticHandler:l,errorHandler:c}}const hA=(e,t)=>{let r,n,a,s,i;return async function(c,u={}){if(r=typeof e=="function"?await e():e,t??(t=r.mode),typeof e=="function"){let v=sp(r,t);n=v.routes,a=v.serverMode,s=v.staticHandler,i=v.errorHandler}else if(!n||!a||!s||!i){let v=sp(r,t);n=v.routes,a=v.serverMode,s=v.staticHandler,i=v.errorHandler}let d=new URL(c.url),h=rA(n,d.pathname,r.basename),f=v=>{if(t===rn.Development){var E,S;(E=ap())===null||E===void 0||(S=E.processRequestError)===null||S===void 0||S.call(E,v)}i(v,{context:u,params:h&&h.length>0?h[0].params:{},request:c})},p;if(d.searchParams.has("_data")){let v=d.searchParams.get("_data");if(p=await fA(a,r,s,v,c,u,f),r.entry.module.handleDataRequest){var g;p=await r.entry.module.handleDataRequest(p,{context:u,params:(h==null||(g=h.find(E=>E.route.id==v))===null||g===void 0?void 0:g.params)||{},request:c})}}else if(h&&h[h.length-1].route.module.default==null&&h[h.length-1].route.module.ErrorBoundary==null)p=await mA(a,s,h.slice(-1)[0].route.id,c,u,f);else{var b,y;let v=t===rn.Development?await((b=ap())===null||b===void 0||(y=b.getCriticalCss)===null||y===void 0?void 0:y.call(b,r,d.pathname)):void 0;p=await pA(a,r,s,c,u,f,v)}return c.method==="HEAD"?new Response(null,{headers:p.headers,status:p.status,statusText:p.statusText}):p}};async function fA(e,t,r,n,a,s,i){try{let l=await r.queryRoute(a,{routeId:n,requestContext:s});if(zP(l)){let c=new Headers(l.headers),u=c.get("Location");return c.set("X-Remix-Redirect",t.basename&&Wo(u,t.basename)||u),c.set("X-Remix-Status",l.status),c.delete("Location"),l.headers.get("Set-Cookie")!==null&&c.set("X-Remix-Revalidate","yes"),new Response(null,{status:204,headers:c})}if(uo in l){let c=l[uo],u=XP(c,a.signal,e),d=c.init||{},h=new Headers(d.headers);return h.set("Content-Type","text/remix-deferred"),h.set("X-Remix-Response","yes"),d.headers=h,new Response(u,d)}return l.headers.set("X-Remix-Response","yes"),l}catch(l){if(fa(l))return l.headers.set("X-Remix-Catch","yes"),l;if(On(l))return l&&i(l),_y(l,e);let c=l instanceof Error||l instanceof DOMException?l:new Error("Unexpected Server Error");return i(c),Ld(Uo(c,e),{status:500,headers:{"X-Remix-Error":"yes"}})}}async function pA(e,t,r,n,a,s,i){let l;try{l=await r.query(n,{requestContext:a})}catch(h){return s(h),new Response(null,{status:500})}if(fa(l))return l;l.errors&&(Object.values(l.errors).forEach(h=>{(!On(h)||h.error)&&s(h)}),l.errors=Qf(l.errors,e));let c=tA(t,l),u={manifest:t.assets,routeModules:YP(t.routes),staticHandlerContext:l,criticalCss:i,serverHandoffString:np({url:l.location.pathname,basename:t.basename,criticalCss:i,state:{loaderData:l.loaderData,actionData:l.actionData,errors:ep(l.errors,e)},future:t.future,isSpaMode:t.isSpaMode}),future:t.future,isSpaMode:t.isSpaMode,serializeError:h=>Uo(h,e)},d=t.entry.module.default;try{return await d(n,l.statusCode,c,u,a)}catch(h){s(h);let f=h;if(fa(h)){let p;try{let g=h.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?h.body==null?p=null:p=await h.json():p=await h.text(),f=new Md(h.status,h.statusText,p)}catch{}}l=MP(r.dataRoutes,l,f),l.errors&&(l.errors=Qf(l.errors,e)),u={...u,staticHandlerContext:l,serverHandoffString:np({url:l.location.pathname,basename:t.basename,state:{loaderData:l.loaderData,actionData:l.actionData,errors:ep(l.errors,e)},future:t.future,isSpaMode:t.isSpaMode})};try{return await d(n,l.statusCode,c,u,a)}catch(p){return s(p),Cy(p,e)}}}async function mA(e,t,r,n,a,s){try{let i=await t.queryRoute(n,{routeId:r,requestContext:a});return rp(!(uo in i),`You cannot return a \`defer()\` response from a Resource Route.  Did you forget to export a default UI component from the "${r}" route?`),rp(fa(i),"Expected a Response to be returned from queryRoute"),i}catch(i){return fa(i)?(i.headers.set("X-Remix-Catch","yes"),i):On(i)?(i&&s(i),_y(i,e)):(s(i),Cy(i,e))}}function _y(e,t){return Ld(Uo(e.error||new Error("Unexpected Server Error"),t),{status:e.status,statusText:e.statusText,headers:{"X-Remix-Error":"yes"}})}function Cy(e,t){let r="Unexpected Server Error";return t!==rn.Production&&(r+=`

${String(e)}`),new Response(r,{status:500,headers:{"Content-Type":"text/plain"}})}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wc(e){return`__flash_${e}__`}const Hd=(e={},t="")=>{let r=new Map(Object.entries(e));return{get id(){return t},get data(){return Object.fromEntries(r)},has(n){return r.has(n)||r.has(wc(n))},get(n){if(r.has(n))return r.get(n);let a=wc(n);if(r.has(a)){let s=r.get(a);return r.delete(a),s}},set(n,a){r.set(n,a)},flash(n,a){r.set(wc(n),a)},unset(n){r.delete(n)}}},gA=e=>e!=null&&typeof e.id=="string"&&typeof e.data<"u"&&typeof e.has=="function"&&typeof e.get=="function"&&typeof e.set=="function"&&typeof e.flash=="function"&&typeof e.unset=="function",bA=e=>({cookie:t,createData:r,readData:n,updateData:a,deleteData:s})=>{let i=$d(t)?t:e((t==null?void 0:t.name)||"__session",t);return wy(i),{async getSession(l,c){let u=l&&await i.parse(l,c),d=u&&await n(u);return Hd(d||{},u||"")},async commitSession(l,c){let{id:u,data:d}=l,h=(c==null?void 0:c.maxAge)!=null?new Date(Date.now()+c.maxAge*1e3):(c==null?void 0:c.expires)!=null?c.expires:i.expires;return u?await a(u,d,h):u=await r(d,h),i.serialize(u,c)},async destroySession(l,c){return await s(l.id),i.serialize("",{...c,maxAge:void 0,expires:new Date(0)})}}};function wy(e){ey(e.isSigned,`The "${e.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://remix.run/utils/cookies#signing-cookies for more information.`)}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yA=e=>({cookie:t}={})=>{let r=$d(t)?t:e((t==null?void 0:t.name)||"__session",t);return wy(r),{async getSession(n,a){return Hd(n&&await r.parse(n,a)||{})},async commitSession(n,a){let s=await r.serialize(n.data,a);if(s.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+s.length);return s},async destroySession(n,a){return r.serialize("",{...a,maxAge:void 0,expires:new Date(0)})}}};/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const vA=e=>({cookie:t}={})=>{let r=new Map;return e({cookie:t,async createData(n,a){let s=Math.random().toString(36).substring(2,10);return r.set(s,{data:n,expires:a}),s},async readData(n){if(r.has(n)){let{data:a,expires:s}=r.get(n);if(!s||s>new Date)return a;s&&r.delete(n)}return null},async updateData(n,a,s){r.set(n,{data:a,expires:s})},async deleteData(n){r.delete(n)}})};/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */class Py extends Error{constructor(t,r){super(`Field "${t}" exceeded upload size of ${r} bytes.`),this.field=t,this.maxBytes=r}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EA({filter:e,maxPartSize:t=3e6}={}){return async({filename:r,contentType:n,name:a,data:s})=>{if(e&&!await e({filename:r,contentType:n,name:a}))return;let i=0,l=[];for await(let c of s){if(i+=c.byteLength,i>t)throw new Py(a,t);l.push(c)}return typeof r=="string"?new File(l,r,{type:n}):await new Blob(l,{type:n}).text()}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const SA=Object.freeze(Object.defineProperty({__proto__:null,MaxPartSizeExceededError:Py,broadcastDevReady:cA,createCookieFactory:Fw,createCookieSessionStorageFactory:yA,createMemorySessionStorageFactory:vA,createRequestHandler:hA,createSession:Hd,createSessionStorageFactory:bA,defer:hy,isCookie:$d,isSession:gA,json:jo,logDevReady:uA,redirect:Dd,redirectDocument:fy,unstable_composeUploadHandlers:Qw,unstable_createMemoryUploadHandler:EA,unstable_parseMultipartFormData:eP,unstable_setDevServerHooks:dA},Symbol.toStringTag,{value:"Module"}));function _A({context:e,router:t,hydrate:r=!0,nonce:n}){t&&e||mC(!1);let a={router:t,navigator:PA(),static:!0,staticContext:e,basename:e.basename||"/"},s=new Map,i="";if(r!==!1){let c={loaderData:e.loaderData,actionData:e.actionData,errors:wA(e.errors)};i=`window.__staticRouterHydrationData = JSON.parse(${xA(JSON.stringify(JSON.stringify(c)))});`}let{state:l}=a.router;return m.createElement(m.Fragment,null,m.createElement(gC.Provider,{value:a},m.createElement(bC.Provider,{value:l},m.createElement(yC.Provider,{value:s},m.createElement(vC.Provider,{value:{isTransitioning:!1}},m.createElement(EC,{basename:a.basename,location:l.location,navigationType:l.historyAction,navigator:a.navigator,static:a.static,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},m.createElement(CA,{routes:t.routes,future:t.future,state:l})))))),i?m.createElement("script",{suppressHydrationWarning:!0,nonce:n,dangerouslySetInnerHTML:{__html:i}}):null)}function CA({routes:e,future:t,state:r}){return SC(e,void 0,r,t)}function wA(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,a]of t)_C(a)?r[n]={...a,__type:"RouteErrorResponse"}:a instanceof Error?r[n]={message:a.message,__type:"Error",...a.name!=="Error"?{__subType:a.name}:{}}:r[n]=a;return r}function PA(){return{createHref:Ay,encodeLocation:Ty,push(e){throw new Error(`You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)})\` somewhere in your app.`)},replace(e){throw new Error(`You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)}, { replace: true })\` somewhere in your app.`)},go(e){throw new Error(`You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${e})\` somewhere in your app.`)},back(){throw new Error("You cannot use navigator.back() on the server because it is a stateless environment.")},forward(){throw new Error("You cannot use navigator.forward() on the server because it is a stateless environment.")}}}function AA(e,t,r={}){let n={},a=CC(e,RC,void 0,n),s=t.matches.map(l=>{let c=n[l.route.id]||l.route;return{...l,route:c}}),i=l=>`You cannot use router.${l}() on the server because it is a stateless environment`;return{get basename(){return t.basename},get future(){var l,c;return{v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:((l=r.future)==null?void 0:l.v7_partialHydration)===!0,v7_prependBasename:!1,v7_relativeSplatPath:((c=r.future)==null?void 0:c.v7_relativeSplatPath)===!0}},get state(){return{historyAction:wC.Pop,location:t.location,matches:s,loaderData:t.loaderData,actionData:t.actionData,errors:t.errors,initialized:!0,navigation:PC,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",fetchers:new Map,blockers:new Map}},get routes(){return a},get window(){},initialize(){throw i("initialize")},subscribe(){throw i("subscribe")},enableScrollRestoration(){throw i("enableScrollRestoration")},navigate(){throw i("navigate")},fetch(){throw i("fetch")},revalidate(){throw i("revalidate")},createHref:Ay,encodeLocation:Ty,getFetcher(){return AC},deleteFetcher(){throw i("deleteFetcher")},dispose(){throw i("dispose")},getBlocker(){return TC},deleteBlocker(){throw i("deleteBlocker")},_internalFetchControllers:new Map,_internalActiveDeferreds:new Map,_internalSetRoutes(){throw i("_internalSetRoutes")}}}function Ay(e){return typeof e=="string"?e:Id(e)}function Ty(e){let t=typeof e=="string"?e:Id(e);t=t.replace(/ $/,"%20");let r=TA.test(t)?new URL(t):new URL(t,"http://localhost");return{pathname:r.pathname,search:r.search,hash:r.hash}}const TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RA={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},kA=/[&><\u2028\u2029]/g;function xA(e){return e.replace(kA,t=>RA[t])}/**
 * @remix-run/react v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IA({context:e,url:t,abortDelay:r}){typeof t=="string"&&(t=new URL(t));let{manifest:n,routeModules:a,criticalCss:s,serverHandoffString:i}=e,l=Cw(n.routes,a,e.future,e.isSpaMode);e.staticHandlerContext.loaderData={...e.staticHandlerContext.loaderData};for(let u of e.staticHandlerContext.matches){let d=u.route.id,h=a[d],f=e.manifest.routes[d];h&&ww(f,h,e.isSpaMode)&&(h.HydrateFallback||!f.hasLoader)&&(e.staticHandlerContext.loaderData[d]=void 0)}let c=AA(l,e.staticHandlerContext,{future:{v7_partialHydration:!0,v7_relativeSplatPath:e.future.v3_relativeSplatPath}});return m.createElement(Xb.Provider,{value:{manifest:n,routeModules:a,criticalCss:s,serverHandoffString:i,future:e.future,isSpaMode:e.isSpaMode,serializeError:e.serializeError,abortDelay:r}},m.createElement(Pw,{location:c.state.location},m.createElement(_A,{router:c,context:e.staticHandlerContext,hydrate:!1})))}/**
 * @remix-run/react v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const $A=Object.freeze(Object.defineProperty({__proto__:null,Await:kC,Form:xC,Link:Wu,Links:IC,LiveReload:$C,Meta:NC,NavLink:OC,Navigate:LC,get NavigationType(){return MC},Outlet:Yb,PrefetchPageLinks:FC,RemixBrowser:Aw,RemixServer:IA,Route:DC,Routes:HC,Scripts:BC,ScrollRestoration:Tw,UNSAFE_RemixContext:Xb,createPath:Id,createRoutesFromChildren:Df,createRoutesFromElements:Df,createSearchParams:WC,defer:hy,generatePath:UC,isRouteErrorResponse:jC,json:jo,matchPath:qC,matchRoutes:VC,parsePath:KC,redirect:Dd,redirectDocument:fy,renderMatches:zC,resolvePath:GC,unstable_usePrompt:JC,unstable_useViewTransitionState:XC,useActionData:YC,useAsyncError:ZC,useAsyncValue:QC,useBeforeUnload:ew,useBlocker:tw,useFetcher:rw,useFetchers:nw,useFormAction:aw,useHref:sw,useInRouterContext:iw,useLinkClickHandler:ow,useLoaderData:Zb,useLocation:lw,useMatch:cw,useMatches:uw,useNavigate:dw,useNavigation:hw,useNavigationType:fw,useOutlet:pw,useOutletContext:mw,useParams:gw,useResolvedPath:bw,useRevalidator:yw,useRouteError:Qb,useRouteLoaderData:vw,useRoutes:Ew,useSearchParams:Sw,useSubmit:_w},Symbol.toStringTag,{value:"Module"})),NA="en",OA=["cs","da","de","en","es","fi","fr","it","ja","ko","nb","nl","pl","pt-BR","pt-PT","sv","th","tr","vi","zh-CN","zh-TW"];function Ot(e,t,r){return e<t?t:e>r?r:e}function aa(e,t){const r=+`${e}e${t}`;return+`${Math.round(r)}e-${t}`}function Ry(e){const{red:t,green:r,blue:n}=e;return"alpha"in e?`rgba(${t}, ${r}, ${n}, ${e.alpha})`:`rgb(${t}, ${r}, ${n})`}const LA=Ry;function ky({red:e,green:t,blue:r}){return`#${Pc(e)}${Pc(t)}${Pc(r)}`}function Pc(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function MA(e){return ky(Vo(e))}function xy(e,t){const r=e/60,n=1-Math.abs(r%2-1),a=t*n;let s=0,i=0,l=0;return r>=0&&r<=1&&(s=t,i=a,l=0),r>=1&&r<=2&&(s=a,i=t,l=0),r>=2&&r<=3&&(s=0,i=t,l=a),r>=3&&r<=4&&(s=0,i=a,l=t),r>=4&&r<=5&&(s=a,i=0,l=t),r>=5&&r<=6&&(s=t,i=0,l=a),{red:s,green:i,blue:l}}function Vo(e){const{hue:t,saturation:r,brightness:n,alpha:a=1}=e,s=n*r;let{red:i,green:l,blue:c}=xy(t,s);const u=n-s;return i+=u,l+=u,c+=u,{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:a}}function FA(e){const{hue:t,saturation:r,lightness:n,alpha:a=1}=e,s=(1-Math.abs(2*(n/100)-1))*(r/100);let{red:i,green:l,blue:c}=xy(t,s);const u=n/100-s/2;return i+=u,l+=u,c+=u,{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:a}}function Iy(e,t="b"){const{alpha:r=1}=e,n=e.red/255,a=e.green/255,s=e.blue/255,i=Math.max(n,a,s),l=Math.min(n,a,s),c=i-l,u=(i+l)/2;let d=0;if(i===0)d=0;else if(t==="b")d=c/i;else if(t==="l"){const g=u>.5?c/(2-i-l):c/(i+l);d=isNaN(g)?0:g}let h=0;switch(i){case n:h=(a-s)/c+(a<s?6:0);break;case a:h=(s-n)/c+2;break;case s:h=(n-a)/c+4}const f=h/6*360,p=Ot(f,0,360);return{hue:p?aa(p,2):0,saturation:aa(Ot(d,0,1),4),brightness:aa(Ot(i,0,1),4),lightness:aa(u,4),alpha:aa(r,4)}}function DA(e){const{hue:t,saturation:r,brightness:n,alpha:a=1}=Iy(e,"b");return{hue:t,saturation:r,brightness:n,alpha:a}}function HA(e){const{hue:t,saturation:r,lightness:n,alpha:a=1}=Iy(e,"l"),s=aa(r*100,2),i=aa(n*100,2);return{hue:t,saturation:s,lightness:i,alpha:a}}function BA(e){if(e.length===4){const a=(c,u)=>e.slice(c,u).repeat(2),s=parseInt(a(1,2),16),i=parseInt(a(2,3),16),l=parseInt(a(3,4),16);return{red:s,green:i,blue:l}}const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return{red:t,green:r,blue:n}}function WA(e={}){const{defaultValue:t="",timeout:r=1500}=e,[n,a]=m.useState("inactive"),s=m.useCallback(i=>{navigator.clipboard.writeText(typeof i=="string"?i:t).then(()=>a("copied"),()=>a("failed")).catch(l=>{throw l})},[t]);return m.useEffect(()=>{if(n==="inactive")return;const i=setTimeout(()=>a("inactive"),r);return()=>clearTimeout(i)},[n,r]),[s,n]}function UA(e){const[t,r]=m.useState(!1),n=m.useCallback(()=>r(!0),[]),a=m.useCallback(()=>r(!1),[]);return mt("focus",n,e),mt("blur",a,e),t}function jA(e){const[t,r]=m.useState(!1),n=m.useRef(null),a=m.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),r(!0)},[]),s=m.useCallback(()=>{n.current=setTimeout(()=>{r(!1)},0)},[]);return mt("focusin",a,e),mt("focusout",s,e),m.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),t}function qA(e){const[t,r]=m.useState(!1),n=m.useCallback(()=>r(!0),[]),a=m.useCallback(()=>r(!1),[]);return mt("mouseenter",n,e),mt("mouseleave",a,e),t}const $y={touch:"(hover: none) and (pointer: coarse)",stylus:"(hover: none) and (pointer: fine)",pointer:"(hover) and (pointer: coarse)",mouse:"(hover) and (pointer: fine)"},VA=e=>Object.prototype.hasOwnProperty.call($y,e);function KA(e,t={}){const{defaultValue:r=!1,initializeWithValue:n=!1}=t,a=VA(e)?$y[e]:e,s=m.useCallback(u=>Fs?r:window.matchMedia(u).matches,[r]),[i,l]=m.useState(()=>n?s(a):r),c=m.useCallback(()=>{l(s(a))},[s,a]);return Mb(()=>{const u=window.matchMedia(a);return c(),u.addListener?u.addListener(c):u.addEventListener("change",c),()=>{u.removeListener?u.removeListener(c):u.removeEventListener("change",c)}},[a]),i}let bn;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(bn||(bn={}));function ip(e){if("id"in e)return e.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function zA(e,{selectedResources:t=[],allResourcesSelected:r=!1,resourceIDResolver:n=ip,resourceFilter:a=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:ip,resourceFilter:void 0}){const[s,i]=m.useState(t),[l,c]=m.useState(r),u=m.useCallback((f,p,g,b)=>{switch(f===bn.All?c(p):l&&c(!1),f){case bn.Single:i(y=>p?[...y,g]:y.filter(v=>v!==g));break;case bn.All:case bn.Page:if(a){const y=e.filter(a);i(p&&s.length<y.length?y.map(n):[])}else i(p?e.map(n):[]);break;case bn.Multi:if(!g)break;i(y=>{const v=[],E=a?e.filter(a):e;for(let S=g[0];S<=g[1];S++)if(E.includes(e[S])){const _=n(e[S]);(p&&!y.includes(_)||!p&&y.includes(_))&&v.push(_)}return p?[...y,...v]:y.filter(S=>!v.includes(S))});break;case bn.Range:if(!g)break;i(y=>{const S=(a?e.filter(a):e).map(n).slice(Number(g[0]),Number(g[1])+1),_=S.some(w=>s.includes(w));return!S.every(w=>s.includes(w))&&(p||_)?[...new Set([...y,...S]).values()]:y.filter(w=>!S.includes(w))});break}},[l,a,s,e,n]),d=m.useCallback(()=>{i([]),c(!1)},[]),h=m.useCallback(f=>{const g=[...s].filter(b=>!f.includes(b));i(g),g.length===0&&c(!1)},[s]);return{selectedResources:s,allResourcesSelected:l,handleSelectionChange:u,clearSelection:d,removeSelectedResources:h}}var Ny=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10 6a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),o.createElement("path",{d:"M11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),o.createElement("path",{fillRule:"evenodd",d:"M11.237 3.177a1.75 1.75 0 0 0-2.474 0l-5.586 5.585a1.75 1.75 0 0 0 0 2.475l5.586 5.586a1.75 1.75 0 0 0 2.474 0l5.586-5.586a1.75 1.75 0 0 0 0-2.475l-5.586-5.585Zm-1.414 1.06a.25.25 0 0 1 .354 0l5.586 5.586a.25.25 0 0 1 0 .354l-5.586 5.585a.25.25 0 0 1-.354 0l-5.586-5.585a.25.25 0 0 1 0-.354l5.586-5.586Z"}))};Ny.displayName="AlertDiamondIcon";var Bd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10 6.75a.75.75 0 0 1 .75.75v3.5a.75.75 0 1 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),o.createElement("path",{d:"M11 13.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),o.createElement("path",{fillRule:"evenodd",d:"M10 3.5c-1.045 0-1.784.702-2.152 1.447a449.26 449.26 0 0 1-2.005 3.847l-.028.052a403.426 403.426 0 0 0-2.008 3.856c-.372.752-.478 1.75.093 2.614.57.863 1.542 1.184 2.464 1.184h7.272c.922 0 1.895-.32 2.464-1.184.57-.864.465-1.862.093-2.614-.21-.424-1.113-2.147-2.004-3.847l-.032-.061a429.497 429.497 0 0 1-2.005-3.847c-.368-.745-1.107-1.447-2.152-1.447Zm-.808 2.112c.404-.816 1.212-.816 1.616 0 .202.409 1.112 2.145 2.022 3.88a418.904 418.904 0 0 1 2.018 3.875c.404.817 0 1.633-1.212 1.633h-7.272c-1.212 0-1.617-.816-1.212-1.633.202-.408 1.113-2.147 2.023-3.883a421.932 421.932 0 0 0 2.017-3.872Z"}))};Bd.displayName="AlertTriangleIcon";var Oy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M10 3.5a.75.75 0 0 1 .75.75v9.69l2.72-2.72a.75.75 0 0 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l2.72 2.72v-9.69a.75.75 0 0 1 .75-.75Z"}))};Oy.displayName="ArrowDownIcon";var Ly=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M3.5 10a.75.75 0 0 1 .75-.75h9.69l-2.72-2.72a.75.75 0 1 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06l2.72-2.72h-9.69a.75.75 0 0 1-.75-.75Z"}))};Ly.displayName="ArrowRightIcon";var My=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M10 16.5a.75.75 0 0 1-.75-.75v-9.69l-2.72 2.72a.75.75 0 1 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06l-2.72-2.72v9.69a.75.75 0 0 1-.75.75Z"}))};My.displayName="ArrowUpIcon";var Ko=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};Ko.displayName="CheckIcon";var Fy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M13.28 8.78a.75.75 0 0 0-1.06-1.06l-2.97 2.97-1.22-1.22a.75.75 0 0 0-1.06 1.06l1.75 1.75a.75.75 0 0 0 1.06 0l3.5-3.5Z"}),o.createElement("path",{fillRule:"evenodd",d:"M6.25 3.5a2.75 2.75 0 0 0-2.75 2.75v7.5a2.75 2.75 0 0 0 2.75 2.75h7.5a2.75 2.75 0 0 0 2.75-2.75v-7.5a2.75 2.75 0 0 0-2.75-2.75h-7.5Zm-1.25 2.75c0-.69.56-1.25 1.25-1.25h7.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25h-7.5c-.69 0-1.25-.56-1.25-1.25v-7.5Z"}))};Fy.displayName="CheckboxIcon";var Dy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M11.5 8.25a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0v-4.25a.75.75 0 0 1 .75-.75Z"}),o.createElement("path",{d:"M9.25 9a.75.75 0 0 0-1.5 0v4.25a.75.75 0 0 0 1.5 0v-4.25Z"}),o.createElement("path",{fillRule:"evenodd",d:"M7.25 5.25a2.75 2.75 0 0 1 5.5 0h3a.75.75 0 0 1 0 1.5h-.75v5.45c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311c-.642.327-1.482.327-3.162.327h-.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311c-.327-.642-.327-1.482-.327-3.162v-5.45h-.75a.75.75 0 0 1 0-1.5h3Zm1.5 0a1.25 1.25 0 1 1 2.5 0h-2.5Zm-2.25 1.5h7v5.45c0 .865-.001 1.423-.036 1.848-.033.408-.09.559-.128.633a1.5 1.5 0 0 1-.655.655c-.074.038-.225.095-.633.128-.425.035-.983.036-1.848.036h-.4c-.865 0-1.423-.001-1.848-.036-.408-.033-.559-.09-.633-.128a1.5 1.5 0 0 1-.656-.655c-.037-.074-.094-.225-.127-.633-.035-.425-.036-.983-.036-1.848v-5.45Z"}))};Dy.displayName="DeleteIcon";var Hy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M11.25 8.5c-.414 0-.75.336-.75.75v1.25h-1.25c-.414 0-.75.336-.75.75s.336.75.75.75h1.25v1.25c0 .414.336.75.75.75s.75-.336.75-.75v-1.25h1.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-1.25v-1.25c0-.414-.336-.75-.75-.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M8.75 16.5c-1.438 0-2.618-1.104-2.74-2.51-1.406-.122-2.51-1.302-2.51-2.74v-5c0-1.519 1.231-2.75 2.75-2.75h5c1.438 0 2.618 1.104 2.74 2.51 1.406.122 2.51 1.302 2.51 2.74v5c0 1.519-1.231 2.75-2.75 2.75h-5Zm0-10.5c-1.519 0-2.75 1.231-2.75 2.75v3.725c-.57-.116-1-.62-1-1.225v-5c0-.69.56-1.25 1.25-1.25h5c.605 0 1.11.43 1.225 1h-3.725Zm0 1.5c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h5c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25h-5Z"}))};Hy.displayName="DuplicateIcon";var By=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M15.655 4.344a2.695 2.695 0 0 0-3.81 0l-.599.599-.009-.009-1.06 1.06.008.01-5.88 5.88a2.75 2.75 0 0 0-.805 1.944v1.922a.75.75 0 0 0 .75.75h1.922a2.75 2.75 0 0 0 1.944-.806l7.54-7.539a2.695 2.695 0 0 0 0-3.81Zm-4.409 2.72-5.88 5.88a1.25 1.25 0 0 0-.366.884v1.172h1.172c.331 0 .65-.132.883-.366l5.88-5.88-1.689-1.69Zm2.75.629.599-.599a1.195 1.195 0 1 0-1.69-1.689l-.598.599 1.69 1.689Z"}))};By.displayName="EditIcon";var Wy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M9.75 3c-1.243 0-2.25 1.007-2.25 2.25 0 .414.336.75.75.75s.75-.336.75-.75.336-.75.75-.75h3.5c.69 0 1.25.56 1.25 1.25v8.5c0 .69-.56 1.25-1.25 1.25h-3.5c-.414 0-.75-.336-.75-.75s-.336-.75-.75-.75-.75.336-.75.75c0 1.243 1.007 2.25 2.25 2.25h3.5c1.519 0 2.75-1.231 2.75-2.75v-8.5c0-1.519-1.231-2.75-2.75-2.75h-3.5Z"}),o.createElement("path",{d:"M12.25 10.75c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-5.69l.97-.97c.293-.293.293-.767 0-1.06-.293-.293-.767-.293-1.06 0l-2.25 2.25c-.141.14-.22.331-.22.53s.079.39.22.53l2.25 2.25c.293.293.767.293 1.06 0 .293-.293.293-.767 0-1.06l-.97-.97h5.69Z"}))};Wy.displayName="ExitIcon";var Uy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M3 6a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{d:"M6.75 14a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{d:"M5.5 9.25a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-9Z"}))};Uy.displayName="FilterIcon";var Wd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10 14a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-.75.75Z"}),o.createElement("path",{d:"M9 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z"}),o.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};Wd.displayName="InfoIcon";var Ud=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M3 6.75c0-2.071 1.679-3.75 3.75-3.75h6.5c2.071 0 3.75 1.679 3.75 3.75v6.5c0 2.071-1.679 3.75-3.75 3.75h-6.5c-2.071 0-3.75-1.679-3.75-3.75v-6.5Zm3.75-2.25c-1.243 0-2.25 1.007-2.25 2.25v6.5c0 1.243 1.007 2.25 2.25 2.25h.5v-11h-.5Zm4.5 11h-2.5v-11h2.5v11Zm1.5 0h.5c1.243 0 2.25-1.007 2.25-2.25v-6.5c0-1.243-1.007-2.25-2.25-2.25h-.5v11Z"}))};Ud.displayName="LayoutColumns3Icon";var jy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M3 4.75a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M3 10a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M3 15.25a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}))};jy.displayName="MenuIcon";var qy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"}))};qy.displayName="MinusIcon";var Vy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M15.375 8.485c1.167.674 1.167 2.358 0 3.031l-7.5 4.33c-1.167.674-2.625-.168-2.625-1.515v-8.66c0-1.348 1.458-2.19 2.625-1.516l7.5 4.33Zm-.75 1.732a.25.25 0 0 0 0-.433l-7.5-4.33a.25.25 0 0 0-.375.217v8.66a.25.25 0 0 0 .375.216l7.5-4.33Z"}))};Vy.displayName="PlayIcon";var jd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"}))};jd.displayName="PlusIcon";var ho=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),o.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};ho.displayName="SortAscendingIcon";var fo=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),o.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};fo.displayName="SortDescendingIcon";var Ky=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M7.75 6.06v7.69a.75.75 0 0 1-1.5 0v-7.69l-1.72 1.72a.75.75 0 0 1-1.06-1.06l3-3a.75.75 0 0 1 1.06 0l3 3a.75.75 0 1 1-1.06 1.06l-1.72-1.72Z"}),o.createElement("path",{d:"M13.75 6.25a.75.75 0 0 0-1.5 0v7.69l-1.72-1.72a.75.75 0 1 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72v-7.69Z"}))};Ky.displayName="SortIcon";var qd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M16.5 6.26a.75.75 0 0 1-1.5 0v-.51a.75.75 0 0 0-.75-.75h-8.5a.75.75 0 0 0-.75.75v.51a.75.75 0 0 1-1.5 0v-.51a2.25 2.25 0 0 1 2.25-2.25h8.5a2.25 2.25 0 0 1 2.25 2.25v.51Z"}),o.createElement("path",{d:"M10.75 16.01a.75.75 0 0 1-1.5 0v-6.69l-1.72 1.72a.75.75 0 1 1-1.06-1.06l3-3a.75.75 0 0 1 1.06 0l3 3a.75.75 0 1 1-1.06 1.06l-1.72-1.72v6.69Z"}))};qd.displayName="UploadIcon";var ni=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};ni.displayName="XIcon";var pa=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};pa.displayName="XSmallIcon";var Ac={SettingAction:"Polaris-SettingAction",Setting:"Polaris-SettingAction__Setting",Action:"Polaris-SettingAction__Action"};function zy({action:e,children:t}){return o.createElement("div",{className:Ac.SettingAction},o.createElement("div",{className:Ac.Setting},t),o.createElement("div",{className:Ac.Action},e))}var Tr={Avatar:"Polaris-Avatar",imageHasLoaded:"Polaris-Avatar--imageHasLoaded",Text:"Polaris-Avatar__Text",long:"Polaris-Avatar--long",hidden:"Polaris-Avatar--hidden",sizeXs:"Polaris-Avatar--sizeXs",sizeSm:"Polaris-Avatar--sizeSm",sizeMd:"Polaris-Avatar--sizeMd",sizeLg:"Polaris-Avatar--sizeLg",sizeXl:"Polaris-Avatar--sizeXl",styleOne:"Polaris-Avatar--styleOne",styleTwo:"Polaris-Avatar--styleTwo",styleThree:"Polaris-Avatar--styleThree",styleFour:"Polaris-Avatar--styleFour",styleFive:"Polaris-Avatar--styleFive",styleSix:"Polaris-Avatar--styleSix",styleSeven:"Polaris-Avatar--styleSeven",Image:"Polaris-Avatar__Image",Initials:"Polaris-Avatar__Initials",Svg:"Polaris-Avatar__Svg"};function Fr({alt:e,sourceSet:t,source:r,crossOrigin:n,onLoad:a,className:s,...i}){const l=t?t.map(({source:u,descriptor:d})=>`${u} ${d}`).join(","):null,c=m.useCallback(()=>{a&&a()},[a]);return o.createElement("img",Object.assign({alt:e,src:r,crossOrigin:n,className:s,onLoad:c},l?{srcSet:l}:{},i))}var $r;(function(e){e.Pending="PENDING",e.Loaded="LOADED",e.Errored="ERRORED"})($r||($r={}));const Tc=["one","two","three","four","five","six","seven"],op={xs:"3",sm:"2.5",md:"2.5",lg:"2.5",xl:"2"};function GA(e){let t=0;for(const r of e)t^=r.charCodeAt(0);return t}function JA(e){return e?Tc[GA(e)%Tc.length]:Tc[0]}function Vd({name:e,source:t,onError:r,initials:n,customer:a,size:s="md",accessibilityLabel:i}){const l=se(),c=Fb(),[u,d]=m.useState($r.Pending);m.useEffect(()=>{d($r.Pending)},[t]);const h=m.useCallback(()=>{d($r.Errored),r&&r()},[r]),f=m.useCallback(()=>{d($r.Loaded)},[]),p=t&&u!==$r.Errored,g=e||n;let b;if(i)b=i;else if(e)b=e;else if(n){const w=n.split("").join(" ");b=l.translate("Polaris.Avatar.labelWithInitials",{initials:w})}const y=T(Tr.Avatar,s&&Tr[Be("size",s)],p&&u===$r.Loaded&&Tr.imageHasLoaded,!a&&!p&&Tr[Be("style",JA(g))]),v=T(Tr.Text,((n==null?void 0:n.length)||0)>2&&Tr.long),E=T(Tr.Image,u!==$r.Loaded&&Tr.hidden),S=t&&c&&u!==$r.Errored?o.createElement(Fr,{className:E,source:t,alt:"",role:"presentation",onLoad:f,onError:h}):null,_="0.35em",R=o.createElement(o.Fragment,null,o.createElement("path",{fill:"none",d:"M25.5 13.5C25.5 16.5376 23.0376 19 20 19C16.9624 19 14.5 16.5376 14.5 13.5C14.5 10.4624 16.9624 8 20 8C23.0376 8 25.5 10.4624 25.5 13.5Z",stroke:"currentColor",strokeWidth:op[s]}),o.createElement("path",{fill:"none",d:"M10.3433 29.682L9.47 31.254C9.03481 32.0373 9.60125 33 10.4974 33H29.5026C30.3988 33 30.9652 32.0373 30.53 31.254L29.6567 29.682C27.7084 26.175 24.0119 24 20 24C15.9882 24 12.2916 26.175 10.3433 29.682Z",stroke:"currentColor",strokeWidth:op[s],strokeLinecap:"round",strokeLinejoin:"round"})),x=a||!n?R:o.createElement("text",{className:v,x:"50%",y:"50%",dy:_,fill:"currentColor",textAnchor:"middle"},n),C=p?null:o.createElement("span",{className:Tr.Initials},o.createElement("svg",{className:Tr.Svg,viewBox:"0 0 40 40"},x));return o.createElement("span",{"aria-label":b,role:b?"img":"presentation",className:y},C,S)}function XA({connected:e=!1,action:t,avatarUrl:r,accountName:n="",title:a,details:s,termsOfService:i}){const l=Ca(),c=n?n.split(/\s+/).map(b=>b[0]).join(""):void 0,u=e?o.createElement("span",null,o.createElement(Vd,{accessibilityLabel:"",name:n,initials:c,source:r})):null,d=a||n,h=o.createElement(G,{as:"h2",variant:"headingSm"},d),f=s?o.createElement(G,{as:"span",variant:"bodyMd",tone:"subdued"},s):null,p=i?o.createElement(te,{paddingBlockStart:l.mdUp?"400":"500"},o.createElement(G,{as:"span",variant:"bodyMd"},i)):null,g=t?Er(t,{variant:e?void 0:"primary"}):null;return o.createElement(Db,null,o.createElement(zy,{action:g},o.createElement(de,{gap:"400"},u,o.createElement(rt,{gap:"100"},h,f))),p)}function zu(e){return typeof e[0]=="object"&&Object.prototype.hasOwnProperty.call(e[0],"options")}var YA={Loading:"Polaris-Autocomplete__Loading",SectionWrapper:"Polaris-Autocomplete__SectionWrapper"},Ri={Content:"Polaris-Autocomplete-MappedOption__Content",Media:"Polaris-Autocomplete-MappedOption__Media",singleSelectionMedia:"Polaris-Autocomplete-MappedOption--singleSelectionMedia",disabledMedia:"Polaris-Autocomplete-MappedOption--disabledMedia"},ZA={Listbox:"Polaris-Listbox"};const Kd=m.createContext(void 0),zd=m.createContext({}),Gd=m.createContext({});function Gy(){const e=m.useContext(Kd);if(!e)throw new Error("No Combobox was provided. Your component must be wrapped in a <Combobox> component.");return e}function QA(){return m.useContext(zd)}function eT(e,t){const r=t.scrollTop,n=r+t.clientHeight,{offsetHeight:a}=e,{offsetTop:s}=e,i=s+a;if(!(s>r&&i<n)){let c=0;i>n?c=i+a*.85-n:s<r&&(c=s-a*.15-r),requestAnimationFrame(()=>{t.scrollBy({top:c,behavior:"auto"})})}}const Jy=m.createContext(void 0),Xy=m.createContext(!1),Jd=m.createContext(!1);var Kn={TextOption:"Polaris-Listbox-TextOption",allowMultiple:"Polaris-Listbox-TextOption--allowMultiple",isAction:"Polaris-Listbox-TextOption--isAction",disabled:"Polaris-Listbox-TextOption--disabled",selected:"Polaris-Listbox-TextOption--selected",Content:"Polaris-Listbox-TextOption__Content",Checkbox:"Polaris-Listbox-TextOption__Checkbox"},Rr={Checkbox:"Polaris-Checkbox",ChoiceLabel:"Polaris-Checkbox__ChoiceLabel",Backdrop:"Polaris-Checkbox__Backdrop",Input:"Polaris-Checkbox__Input","Input-indeterminate":"Polaris-Checkbox__Input--indeterminate",Icon:"Polaris-Checkbox__Icon",animated:"Polaris-Checkbox--animated",toneMagic:"Polaris-Checkbox--toneMagic",hover:"Polaris-Checkbox--hover",error:"Polaris-Checkbox--error",checked:"Polaris-Checkbox--checked",pathAnimation:"Polaris-Checkbox--pathAnimation"},qr={Choice:"Polaris-Choice",labelHidden:"Polaris-Choice--labelHidden",Label:"Polaris-Choice__Label",Control:"Polaris-Choice__Control",disabled:"Polaris-Choice--disabled",toneMagic:"Polaris-Choice--toneMagic",Descriptions:"Polaris-Choice__Descriptions",HelpText:"Polaris-Choice__HelpText"};function Yy({id:e,label:t,disabled:r,error:n,children:a,labelHidden:s,helpText:i,onClick:l,labelClassName:c,fill:u,bleed:d,bleedBlockStart:h,bleedBlockEnd:f,bleedInlineStart:p,bleedInlineEnd:g,tone:b}){const y=T(qr.Choice,s&&qr.labelHidden,r&&qr.disabled,b&&qr[Be("tone",b)],c),v={...Ns("choice","bleed-block-end","space",f||d),...Ns("choice","bleed-block-start","space",h||d),...Ns("choice","bleed-inline-start","space",p||d),...Ns("choice","bleed-inline-end","space",g||d),...Object.fromEntries(Object.entries(Hb("choice","fill",u)).map(([x,C])=>[x,C?"100%":"auto"]))},E=o.createElement("label",{className:y,htmlFor:e,onClick:l,style:Pd(v)},o.createElement("span",{className:qr.Control},a),o.createElement("span",{className:qr.Label},o.createElement(G,{as:"span",variant:"bodyMd"},t))),S=i?o.createElement("div",{className:qr.HelpText,id:Xd(e)},o.createElement(G,{as:"span",tone:r?void 0:"subdued"},i)):null,_=n&&typeof n!="boolean"&&o.createElement("div",{className:qr.Error},o.createElement(Ad,{message:n,fieldID:e})),R=S||_?o.createElement("div",{className:qr.Descriptions},_,S):null;return R?o.createElement("div",null,E,R):E}function Xd(e){return`${e}HelpText`}const Ln=m.forwardRef(function({ariaControls:t,ariaDescribedBy:r,label:n,labelHidden:a,checked:s=!1,helpText:i,disabled:l,id:c,name:u,value:d,error:h,onChange:f,onFocus:p,onBlur:g,labelClassName:b,fill:y,bleed:v,bleedBlockStart:E,bleedBlockEnd:S,bleedInlineStart:_,bleedInlineEnd:R,tone:x},C){const w=m.useRef(null),P=m.useId(),$=c??P,N=m.useContext(Xy);m.useImperativeHandle(C,()=>({focus:()=>{w.current&&w.current.focus()}}));const M=()=>{g&&g()},k=()=>{f==null||w.current==null||l||(f(w.current.checked,$),w.current.focus())},A=[];h&&typeof h!="boolean"&&A.push(Td($)),i&&A.push(Xd($)),r&&A.push(r);const O=A.length?A.join(" "):void 0,L=T(Rr.Checkbox,h&&Rr.error),F=s==="indeterminate",I=!F&&!!s,D=F?{indeterminate:"true","aria-checked":"mixed"}:{"aria-checked":I},B=o.createElement("svg",{viewBox:"0 0 16 16",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision"},o.createElement("path",{className:T(s&&Rr.checked),d:"M1.5,5.5L3.44655,8.22517C3.72862,8.62007,4.30578,8.64717,4.62362,8.28044L10.5,1.5",transform:"translate(2 2.980376)",opacity:"0",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",pathLength:"1"})),U=T(Rr.Input,F&&Rr["Input-indeterminate"],x&&Rr[Be("tone",x)]),V={helpText:i,error:h,bleed:v,bleedBlockStart:E,bleedBlockEnd:S,bleedInlineStart:_,bleedInlineEnd:R};return o.createElement(Yy,Object.assign({id:$,label:n,labelHidden:a,disabled:l,labelClassName:T(Rr.ChoiceLabel,b),fill:y,tone:x},V),o.createElement("span",{className:L},o.createElement("input",Object.assign({ref:w,id:$,name:u,value:d,type:"checkbox",checked:I,disabled:l,className:U,onBlur:M,onChange:tT,onClick:k,onFocus:p,"aria-invalid":h!=null,"aria-controls":t,"aria-describedby":O,role:N?"presentation":"checkbox"},D)),o.createElement("span",{className:Rr.Backdrop,onClick:lp,onKeyUp:lp}),o.createElement("span",{className:T(Rr.Icon,!F&&Rr.animated)},F?o.createElement(le,{source:qy}):B)))});function tT(){}function lp(e){e.stopPropagation()}const Yd=m.memo(function({children:t,selected:r,disabled:n}){const{allowMultiple:a}=m.useContext(Gd),s=m.useContext(Jd),i=T(Kn.TextOption,r&&!a&&Kn.selected,n&&Kn.disabled,a&&Kn.allowMultiple,s&&Kn.isAction),l=r?o.createElement(te,{width:"100%"},o.createElement(de,{wrap:!1,align:"space-between",gap:"200"},t,o.createElement(de,{align:"end"},o.createElement(le,{source:Ko})))):o.createElement(o.Fragment,null,t);return o.createElement("div",{className:i},o.createElement("div",{className:Kn.Content},a&&!s?o.createElement("div",{className:Kn.Checkbox},o.createElement(Ln,{disabled:n,checked:r,label:t})):l))});var cp={ListItem:"Polaris-Listbox-Loading__ListItem",Loading:"Polaris-Listbox-Loading"};function Zy(){const e=m.useContext(Jy);if(!e)throw new Error("No Listbox was provided. Listbox components must be wrapped in a Listbox");return e}const rT=m.memo(function({children:t,accessibilityLabel:r}){const{setLoading:n}=Zy();return m.useEffect(()=>(n(r),()=>{n(void 0)}),[r,n]),o.createElement("li",{className:cp.ListItem,role:"presentation"},t||o.createElement("div",{className:cp.Loading},o.createElement(ha,{size:"small",accessibilityLabel:r})))}),nT={props:{"data-polaris-listbox-section-item":!0},selector:"[data-polaris-listbox-section-item]"},aT={attribute:"data-polaris-listbox-within-section-item"},Qy=m.createContext(null);var up={SectionGroup:"Polaris-Listbox-Section__SectionGroup",noDivider:"Polaris-Listbox-Section--noDivider"};function sT({children:e,divider:t=!0,title:r}){const n=m.useId();return o.createElement(Qy.Provider,{value:n},o.createElement("li",Object.assign({role:"presentation"},nT.props),r,o.createElement("ul",{role:"group","aria-labelledby":n,className:T(up.SectionGroup,!t&&up.noDivider)},e)))}function ev(){return m.useContext(Qy)}function iT({children:e}){const t=ev()||"",r=typeof e=="string"?o.createElement(te,{paddingBlockStart:"200",paddingInlineStart:"400",paddingBlockEnd:"200",paddingInlineEnd:"400"},o.createElement(G,{as:"span",variant:"headingSm",tone:"subdued"},e)):e;return o.createElement("div",{"aria-hidden":!0,id:t},r)}var Rc={Action:"Polaris-Listbox-Action",ActionDivider:"Polaris-Listbox-Action__ActionDivider",Icon:"Polaris-Listbox-Action__Icon"},dp={Option:"Polaris-Listbox-Option",divider:"Polaris-Listbox-Option--divider"};const tv=m.createContext({}),rv=m.memo(function({value:t,children:r,selected:n,disabled:a=!1,accessibilityLabel:s,divider:i}){const{onOptionSelect:l}=Zy(),c=m.useContext(Jd),{role:u,url:d,external:h,onAction:f,destructive:p}=m.useContext(tv),g=m.useRef(null),b=m.useId(),v=!!ev(),E=m.useCallback(w=>{w.preventDefault(),w.stopPropagation(),f&&f(),g.current&&!f&&l({domId:b,value:t,element:g.current,disabled:a})},[b,l,t,a,f]),S=w=>{w.preventDefault()},_=typeof r=="string"?o.createElement(Yd,{selected:n,disabled:a},r):r,R={[aT.attribute]:v},x=u||"option",C=d?o.createElement(Cr,{url:d,external:h},_):_;return o.createElement("li",Object.assign({},R,{"data-listbox-option":!0,"data-listbox-option-action":c,"data-listbox-option-value":t,"data-listbox-option-destructive":p,"data-within-section":v,className:T(dp.Option,i&&dp.divider),id:b,ref:g,tabIndex:-1,role:x,"aria-label":s,"aria-selected":n,"aria-disabled":a,onClick:a?void 0:E,onKeyDown:a?void 0:E,onMouseDown:S}),C)});function oT(e){const{selected:t,disabled:r,children:n,icon:a,divider:s}=e,i=a&&o.createElement("div",{className:Rc.Icon},o.createElement(le,{tone:"subdued",source:a})),l=T(Rc.Action,s&&Rc.ActionDivider);return o.createElement(Jd.Provider,{value:!0},o.createElement(rv,e,o.createElement("div",{className:l},o.createElement(Yd,{selected:t,disabled:r},i,n))))}let Sn;(function(e){e.FirstSelected="FIRST_SELECTED",e.First="FIRST",e.None="NONE"})(Sn||(Sn={}));const lT="[data-listbox-option]",kc="data-listbox-option-value",cT="data-listbox-option-action",hp="data-focused";function ot({children:e,autoSelection:t=Sn.FirstSelected,enableKeyboardControl:r,accessibilityLabel:n,customListId:a,onSelect:s,onActiveOptionChange:i}){const[l,c]=m.useState(),[u,d]=m.useState(),[h,f]=m.useState(!1),[p,g]=m.useState([]),{value:b,setTrue:y,setFalse:v}=Wt(!!r),E=m.useId(),S=a||E,_=m.useRef(null),R=m.useRef(null),{listboxId:x,textFieldLabelId:C,textFieldFocused:w,willLoadMoreOptions:P,setActiveOptionId:$,setListboxId:N,onOptionSelected:M,onKeyToBottom:k}=QA(),A=!!$;m.useEffect(()=>{N&&!x&&N(S)},[N,x,S]);const O=m.useCallback(()=>R.current?[...new Set(R.current.querySelectorAll(lT))]:[],[]),L=m.useCallback(z=>{const ae=z.some(be=>be.getAttribute("aria-selected")==="true");let we=0;const he=z.find((be,ie)=>{const pe=be.getAttribute("aria-disabled")!=="true";let Ae;return ae&&t===Sn.FirstSelected?Ae=be.getAttribute("aria-selected")==="true"&&pe:Ae=pe,Ae&&(we=ie),Ae});if(he)return{element:he,index:we}},[t]),F=m.useCallback(z=>{const{current:ae}=_;ae&&eT(z.element,ae)},[]),I=tr(F,50),D=m.useCallback(()=>{if(k)return f(!0),Promise.resolve(k())},[k]),B=m.useCallback(z=>{if(!z)return d(void 0);u==null||u.element.removeAttribute(hp),z.element.setAttribute(hp,"true"),I(z),d(z),$==null||$(z.domId),i==null||i(z.value,z.domId)},[u,$,i,I]),U=m.useCallback((z,ae)=>({element:z,index:ae,domId:z.id,value:z.getAttribute(kc)||"",disabled:z.getAttribute("aria-disabled")==="true",isAction:z.getAttribute(cT)==="true"}),[]),V=m.useCallback(()=>{let z;const ae=O(),we=L(ae);if(ae.length===0&&p.length>0){g(ae),B();return}if(we){const{element:Fe,index:me}=we;z=U(Fe,me)}const he=u!==void 0&&(z==null?void 0:z.domId)===(u==null?void 0:u.domId),be=(u==null?void 0:u.isAction)&&(z==null?void 0:z.isAction)&&(z==null?void 0:z.value)!==(u==null?void 0:u.value),ie=p.map(Fe=>Fe.getAttribute(kc)),pe=ae.map(Fe=>Fe.getAttribute(kc)),Ae=pe.length===ie.length&&pe.every((Fe,me)=>ie[me]===Fe),qe=ie.length!==0&&pe.length>ie.length&&ie.every((Fe,me)=>pe[me]===Fe);if(Ae){he&&be&&(g(ae),B(z));return}if(qe){g(ae);return}if(g(ae),h){f(!1);return}B(z)},[h,p,u,L,O,U,B]);m.useEffect(()=>{t!==Sn.None&&!l&&e&&m.Children.count(e)>0&&V()},[e,t,u,l,V]),m.useEffect(()=>{R.current&&(_.current=R.current.closest(b_.selector))},[]),m.useEffect(()=>{r&&!b&&y()},[r,b,y]);const W=m.useCallback(z=>{B(z),M&&M(),s&&s(z.value)},[B,s,M]),H=m.useCallback((z,ae,we)=>{let he;return we==="down"?z===ae?he=P?z+1:0:he=z+1:he=z===0?ae:z-1,he},[P]),Y=m.useCallback(async z=>{const ae=p.length-1;let we=(u==null?void 0:u.index)||0,he=0,be=u==null?void 0:u.element,ie=-1;if(!u&&t===Sn.None){const pe=O(),Ae=L(pe);return g(pe),{element:Ae==null?void 0:Ae.element,nextIndex:(Ae==null?void 0:Ae.index)||0}}for(;ie++<ae;){he=H(we,ae,z),be=p[he];const pe=he>=ae,Ae=(be==null?void 0:be.getAttribute("aria-disabled"))==="true";if(pe&&P&&await D(),Ae){we=he,be=void 0;continue}break}return{element:be,nextIndex:he}},[t,p,u,P,H,D,L,O]),j=m.useCallback(async(z,ae)=>{ae.preventDefault();const{element:we,nextIndex:he}=await Y(z);if(!we)return;const be=U(we,he);B(be)},[U,Y,B]),J=m.useCallback(z=>{j("down",z)},[j]),ge=m.useCallback(z=>{j("up",z)},[j]),Oe=m.useCallback(z=>{z.preventDefault(),z.stopPropagation(),u&&W(u)},[u,W]),Ce=m.useCallback(()=>{r||y()},[r,y]),De=m.useCallback(z=>{if(z.stopPropagation(),b){const ae=L(p);if(ae){const{element:we,index:he}=ae,be=U(we,he);B(be)}}r||v()},[r,p,b,v,L,U,B]),je=b||w?o.createElement(o.Fragment,null,o.createElement(vr,{keyEvent:"keydown",keyCode:it.DownArrow,handler:J}),o.createElement(vr,{keyEvent:"keydown",keyCode:it.UpArrow,handler:ge}),o.createElement(vr,{keyEvent:"keydown",keyCode:it.Enter,handler:Oe})):null,Le=m.useMemo(()=>({onOptionSelect:W,setLoading:c}),[W]);return o.createElement(o.Fragment,null,je,o.createElement(G,{as:"span",visuallyHidden:!0},o.createElement("div",{"aria-live":"polite"},l||null)),o.createElement(Jy.Provider,{value:Le},o.createElement(Xy.Provider,{value:!0},e?o.createElement("ul",{tabIndex:0,role:"listbox",className:ZA.Listbox,"aria-label":A?void 0:n,"aria-labelledby":C,"aria-busy":!!l,"aria-activedescendant":u&&u.domId,id:S,onFocus:A?void 0:Ce,onBlur:A?void 0:De,ref:R},e):null)))}ot.Option=rv;ot.TextOption=Yd;ot.Loading=rT;ot.Section=sT;ot.Header=iT;ot.Action=oT;const uT=m.memo(function({label:t,value:r,disabled:n,media:a,selected:s,singleSelection:i}){const l=T(Ri.Media,n&&Ri.disabledMedia,i&&Ri.singleSelectionMedia),c=a?o.createElement("div",{className:l},a):null,u=typeof t=="string"?t:void 0;return o.createElement(ot.Option,{accessibilityLabel:u,key:r,selected:s,value:r,disabled:n},o.createElement(ot.TextOption,{selected:s,disabled:n},o.createElement("div",{className:Ri.Content},c,t)))});var dT={Listbox:"Polaris-Combobox__Listbox"};function hT({value:e,id:t,type:r="text",ariaAutocomplete:n="list",onFocus:a,onBlur:s,onChange:i,...l}){const c=Gy(),{activeOptionId:u,listboxId:d,expanded:h,setTextFieldFocused:f,setTextFieldLabelId:p,onTextFieldFocus:g,onTextFieldChange:b,onTextFieldBlur:y}=c,v=m.useId(),E=m.useMemo(()=>t||v,[v,t]),S=m.useMemo(()=>qs(t||v),[v,t]);m.useEffect(()=>{p&&p(S)},[S,p]);const _=m.useCallback(C=>{a&&a(C),g&&g(),f&&f(!0)},[a,g,f]),R=m.useCallback(C=>{s&&s(C),y&&y(),f&&f(!1)},[s,y,f]),x=m.useCallback((C,w)=>{i&&i(C,w),b&&b(C)},[i,b]);return o.createElement(Nn,Object.assign({},l,{value:e,id:E,type:r,ariaAutocomplete:n,"aria-haspopup":"listbox",ariaActiveDescendant:u,ariaControls:d,role:"combobox",ariaExpanded:h,onFocus:_,onBlur:R,onChange:x}))}function zo({activator:e,allowMultiple:t,children:r,preferredPosition:n="below",willLoadMoreOptions:a,height:s,onScrolledToBottom:i,onClose:l}){const[c,u]=m.useState(!1),[d,h]=m.useState(),[f,p]=m.useState(),[g,b]=m.useState(),[y,v]=m.useState(!1),E=!c,S=c&&m.Children.count(r)>0,_=m.useRef(null),R=m.useCallback(()=>{u(!1),l==null||l(),h(void 0)},[l]),x=m.useCallback(()=>{u(!0),h(void 0)},[]),C=m.useCallback(()=>{var A;if(!t){R(),h(void 0);return}(A=_.current)==null||A.forceUpdatePosition()},[t,R]),w=m.useCallback(()=>{E&&x()},[E,x]),P=m.useCallback(()=>{E&&x()},[E,x]),$=m.useCallback(()=>{c&&R()},[c,R]),N=m.useMemo(()=>({activeOptionId:d,expanded:c,listboxId:g,setTextFieldFocused:v,setTextFieldLabelId:p,onTextFieldFocus:w,onTextFieldChange:P,onTextFieldBlur:$}),[d,c,g,v,p,w,P,$]),M=m.useMemo(()=>({allowMultiple:t}),[t]),k=m.useMemo(()=>({listboxId:g,textFieldLabelId:f,textFieldFocused:y,willLoadMoreOptions:a,onOptionSelected:C,setActiveOptionId:h,setListboxId:b,onKeyToBottom:i}),[g,f,y,a,C,h,b,i]);return o.createElement(nt,{ref:_,active:S,activator:o.createElement(Kd.Provider,{value:N},e),autofocusTarget:"none",preventFocusOnClose:!0,fullWidth:!0,preferInputActivator:!1,preferredPosition:n,onClose:R},m.Children.count(r)>0?o.createElement(nt.Pane,{onScrolledToBottom:i,height:s},o.createElement(zd.Provider,{value:k},o.createElement(Gd.Provider,{value:M},o.createElement("div",{className:dT.Listbox},r)))):null)}zo.TextField=hT;var ar={ActionContainer:"Polaris-Autocomplete-MappedAction__ActionContainer",Action:"Polaris-Autocomplete-MappedAction__Action",destructive:"Polaris-Autocomplete-MappedAction--destructive",selected:"Polaris-Autocomplete-MappedAction--selected",disabled:"Polaris-Autocomplete-MappedAction--disabled",Prefix:"Polaris-Autocomplete-MappedAction__Prefix",Suffix:"Polaris-Autocomplete-MappedAction__Suffix",Content:"Polaris-Autocomplete-MappedAction__Content",Text:"Polaris-Autocomplete-MappedAction__Text"};function fT({active:e,content:t,disabled:r,icon:n,image:a,prefix:s,suffix:i,ellipsis:l,role:c,url:u,external:d,onAction:h,destructive:f,badge:p,helpText:g,wrapOverflow:b=!1}){const y=se();let v=null;s?v=o.createElement("div",{className:ar.Prefix},s):n?v=o.createElement("div",{className:ar.Prefix},o.createElement(le,{source:n})):a&&(v=o.createElement("div",{role:"presentation",className:ar.Prefix,style:{backgroundImage:`url(${a}`}}));const E=p&&o.createElement("span",{className:ar.Suffix},o.createElement(Tn,{tone:p.tone},p.content)),S=i&&o.createElement("span",{className:ar.Suffix},i),_=l&&t?y.translate("Polaris.Autocomplete.ellipsis",{content:t}):t,R=o.createElement("div",{className:ar.Text},o.createElement(G,{as:"p",variant:"bodyMd",breakWord:b},_),g?o.createElement(G,{as:"p",variant:"bodyMd",tone:"subdued"},g):null),x=m.useMemo(()=>({role:c,url:u,external:d,onAction:h,destructive:f}),[c,u,d,h,f]),C=T(ar.Action,r&&ar.disabled,f&&ar.destructive,e&&ar.selected);return o.createElement(tv.Provider,{value:x},o.createElement("div",{className:ar.ActionContainer},o.createElement(ot.Action,{selected:e,disabled:r,value:t||""},o.createElement("div",{className:C},o.createElement("div",{className:ar.Content},v,R,E,S)))))}const nv=function({options:t,selected:r,textField:n,preferredPosition:a,listTitle:s,allowMultiple:i,loading:l,actionBefore:c,willLoadMoreResults:u,emptyState:d,onSelect:h,onLoadMoreResults:f}){const p=se(),g=m.useCallback(R=>R.map(x=>o.createElement(uT,Object.assign({key:x.id||x.value},x,{selected:r.includes(x.value),singleSelection:!i}))),[r,i]),b=m.useMemo(()=>{const R=l&&!u?[]:t;if(zu(R)){if(R.every(({options:P})=>P.length===0))return null;const w=R.map(({options:P,title:$})=>{if(P.length===0)return null;const N=g(P);return o.createElement(ot.Section,{divider:!1,title:o.createElement(ot.Header,null,$),key:$},N)});return o.createElement("div",{className:YA.SectionWrapper},w)}const x=R.length>0?g(R):null;return s?o.createElement(ot.Section,{divider:!1,title:o.createElement(ot.Header,null,s)},x):x},[s,l,t,u,g]),y=l?o.createElement(ot.Loading,{accessibilityLabel:p.translate("Polaris.Autocomplete.spinnerAccessibilityLabel")}):null,v=m.useCallback(R=>{if(c&&R===c.content){c.onAction&&c.onAction();return}i?r.includes(R)?h(r.filter(x=>x!==R)):h([...r,R]):h([R])},[i,h,r,c]),E=c&&o.createElement(fT,c),S=d&&t.length<1&&!l&&o.createElement("div",{role:"status"},d),_=c?Sn.First:void 0;return o.createElement(zo,{activator:n,allowMultiple:i,onScrolledToBottom:f,preferredPosition:a,willLoadMoreOptions:u},E||b||y||S?o.createElement(ot,{autoSelection:_,onSelect:v},E,b&&(!l||u)?b:null,y,S):null)};nv.TextField=zo.TextField;var xc={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function pT(){const e=m.useContext(kd);if(!e)throw new Rd("No ScrollLockManager was provided.");return e}function Go(e){const t=pT();return m.useEffect(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function Jo(e){const{onClick:t,onTouchStart:r,belowNavigation:n,transparent:a,setClosing:s}=e,i=T(xc.Backdrop,n&&xc.belowNavigation,a&&xc.transparent),l=()=>{s&&s(!0)},c=()=>{s&&s(!1),t&&t()};return o.createElement(o.Fragment,null,o.createElement(Go,null),o.createElement("div",{className:i,onClick:c,onTouchStart:r,onMouseDown:l}))}var la={Banner:"Polaris-Banner",keyFocused:"Polaris-Banner--keyFocused",withinContentContainer:"Polaris-Banner--withinContentContainer",withinPage:"Polaris-Banner--withinPage",DismissIcon:"Polaris-Banner__DismissIcon","text-success-on-bg-fill":"Polaris-Banner--textSuccessOnBgFill","text-success":"Polaris-Banner__text--success","text-warning-on-bg-fill":"Polaris-Banner--textWarningOnBgFill","text-warning":"Polaris-Banner__text--warning","text-critical-on-bg-fill":"Polaris-Banner--textCriticalOnBgFill","text-critical":"Polaris-Banner__text--critical","text-info-on-bg-fill":"Polaris-Banner--textInfoOnBgFill","text-info":"Polaris-Banner__text--info","icon-secondary":"Polaris-Banner__icon--secondary"};const Ic={success:{withinPage:{background:"bg-fill-success",text:"text-success-on-bg-fill",icon:"text-success-on-bg-fill"},withinContentContainer:{background:"bg-surface-success",text:"text-success",icon:"text-success"},icon:Ko},warning:{withinPage:{background:"bg-fill-warning",text:"text-warning-on-bg-fill",icon:"text-warning-on-bg-fill"},withinContentContainer:{background:"bg-surface-warning",text:"text-warning",icon:"text-warning"},icon:Bd},critical:{withinPage:{background:"bg-fill-critical",text:"text-critical-on-bg-fill",icon:"text-critical-on-bg-fill"},withinContentContainer:{background:"bg-surface-critical",text:"text-critical",icon:"text-critical"},icon:Ny},info:{withinPage:{background:"bg-fill-info",text:"text-info-on-bg-fill",icon:"text-info-on-bg-fill"},withinContentContainer:{background:"bg-surface-info",text:"text-info",icon:"text-info"},icon:Wd}};function mT(e){const t=m.useRef(null),[r,n]=m.useState(!1);return m.useImperativeHandle(e,()=>({focus:()=>{var l;(l=t.current)==null||l.focus(),n(!0)}}),[]),{wrapperRef:t,handleKeyUp:l=>{l.target===t.current&&n(!0)},handleBlur:()=>n(!1),handleMouseUp:l=>{l.currentTarget.blur(),n(!1)},shouldShowFocus:r}}const gT=m.forwardRef(function(t,r){const{tone:n,stopAnnouncements:a}=t,s=m.useContext(ts),{wrapperRef:i,handleKeyUp:l,handleBlur:c,handleMouseUp:u,shouldShowFocus:d}=mT(r),h=T(la.Banner,d&&la.keyFocused,s?la.withinContentContainer:la.withinPage);return o.createElement(hC.Provider,{value:!0},o.createElement("div",{className:h,tabIndex:0,ref:i,role:n==="warning"||n==="critical"?"alert":"status","aria-live":a?"off":"polite",onMouseUp:u,onKeyUp:l,onBlur:c},o.createElement(bT,t)))});function bT({tone:e="info",icon:t,hideIcon:r,onDismiss:n,action:a,secondaryAction:s,title:i,children:l}){const c=se(),u=m.useContext(ts),d=!i&&!u,h=Object.keys(Ic).includes(e)?e:"info",f=Ic[h][u?"withinContentContainer":"withinPage"],p={backgroundColor:f.background,textColor:f.text,bannerTitle:i?o.createElement(G,{as:"h2",variant:"headingSm",breakWord:!0},i):null,bannerIcon:r?null:o.createElement("span",{className:la[f.icon]},o.createElement(le,{source:t??Ic[h].icon})),actionButtons:a||s?o.createElement(Sr,null,a&&o.createElement(ye,Object.assign({onClick:a.onAction},a),a.content),s&&o.createElement(ye,Object.assign({onClick:s.onAction},s),s.content)):null,dismissButton:n?o.createElement(ye,{variant:"tertiary",icon:o.createElement("span",{className:la[d?"icon-secondary":f.icon]},o.createElement(le,{source:ni})),onClick:n,accessibilityLabel:c.translate("Polaris.Banner.dismissButton")}):null},g=l?o.createElement(G,{as:"span",variant:"bodyMd"},l):null;return u?o.createElement(ET,p,g):d?o.createElement(vT,p,g):o.createElement(yT,p,g)}function yT({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:a,dismissButton:s,children:i}){const{smUp:l}=Ca(),c=i||a;return o.createElement(te,{width:"100%"},o.createElement(rt,{align:"space-between"},o.createElement(te,{background:e,color:t,borderStartStartRadius:l?"300":void 0,borderStartEndRadius:l?"300":void 0,borderEndStartRadius:!c&&l?"300":void 0,borderEndEndRadius:!c&&l?"300":void 0,padding:"300"},o.createElement(de,{align:"space-between",blockAlign:"center",gap:"200",wrap:!1},o.createElement(de,{gap:"100",wrap:!1},n,r),s)),c&&o.createElement(te,{padding:{xs:"300",md:"400"},paddingBlockStart:"300"},o.createElement(rt,{gap:"200"},o.createElement("div",null,i),a))))}function vT({backgroundColor:e,bannerIcon:t,actionButtons:r,dismissButton:n,children:a}){const[s,i]=m.useState("center"),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),d=m.useCallback(()=>{var p,g,b;const h=(p=l.current)==null?void 0:p.offsetHeight,f=((g=c.current)==null?void 0:g.offsetHeight)||((b=u.current)==null?void 0:b.offsetHeight);!h||!f||(h>f?i("start"):i("center"))},[]);return m.useEffect(()=>d(),[d]),mt("resize",d),o.createElement(te,{width:"100%",padding:"300",borderRadius:"300"},o.createElement(de,{align:"space-between",blockAlign:s,wrap:!1},o.createElement(te,{width:"100%"},o.createElement(de,{gap:"200",wrap:!1,blockAlign:s},t?o.createElement("div",{ref:c},o.createElement(te,{background:e,borderRadius:"200",padding:"100"},t)):null,o.createElement(te,{ref:l,width:"100%"},o.createElement(rt,{gap:"200"},o.createElement("div",null,a),r)))),o.createElement("div",{ref:u,className:la.DismissIcon},n)))}function ET({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:a,dismissButton:s,children:i}){return o.createElement(te,{width:"100%",background:e,padding:"200",borderRadius:"200",color:t},o.createElement(de,{align:"space-between",blockAlign:"start",wrap:!1,gap:"200"},o.createElement(de,{gap:"150",wrap:!1},n,o.createElement(te,{width:"100%"},o.createElement(rt,{gap:"200"},o.createElement(rt,{gap:"050"},r,o.createElement("div",null,i)),a))),s))}function fp(e=[],t,r,n){const a=r.reduce((c,u)=>c+u,0),s=e.map((c,u)=>u),i=[],l=[];if(n>a)i.push(...s);else{let c=0,u=!1;s.forEach(d=>{const h=r[d];if(c+h>=n-t||u){l.push(d),u=!0;return}i.push(d),c+=h})}return{visiblePromotedActions:i,hiddenPromotedActions:l}}function ST(e){const t=e.filter(r=>r.items);return e.length===t.length}function _T(e){const t=e.filter(r=>!r.items);return e.length===t.length}function Gu(e){return"title"in e&&"actions"in e}function CT(e){return"items"in e}function wT(e){if(!(!e||e.length===0)){if(ST(e))return e;if(_T(e))return[{items:e}]}}function pp(e){var t;if(!e)return!1;for(const r of e)for(const n of r.items)if(((t=n.badge)==null?void 0:t.tone)==="new")return!0;return!1}var Jr={BulkActionsOuterLayout:"Polaris-BulkActions__BulkActionsOuterLayout",BulkActionsSelectAllWrapper:"Polaris-BulkActions__BulkActionsSelectAllWrapper",BulkActionsPromotedActionsWrapper:"Polaris-BulkActions__BulkActionsPromotedActionsWrapper",BulkActionsLayout:"Polaris-BulkActions__BulkActionsLayout","BulkActionsLayout--measuring":"Polaris-BulkActions--bulkActionsLayoutMeasuring",BulkActionsMeasurerLayout:"Polaris-BulkActions__BulkActionsMeasurerLayout",BulkActionButton:"Polaris-BulkActions__BulkActionButton",disabled:"Polaris-BulkActions--disabled",AllAction:"Polaris-BulkActions__AllAction"},mp={Indicator:"Polaris-Indicator",pulseIndicator:"Polaris-Indicator--pulseIndicator"};function Zd({pulse:e=!0}){const t=T(mp.Indicator,e&&mp.pulseIndicator);return o.createElement("span",{className:t})}function Ka({handleMeasurement:e,url:t,external:r,onAction:n,content:a,disclosure:s,accessibilityLabel:i,disabled:l,destructive:c,indicator:u,showContentInButton:d,size:h}){const f=m.useRef(null);Fo(()=>{if(e&&f.current){const y=f.current.getBoundingClientRect().width;e(y)}});const p=s&&!d,g=p?void 0:a,b=o.createElement(ye,{external:r,url:t,accessibilityLabel:p?a:i,tone:c?"critical":void 0,disclosure:s&&d,onClick:n,disabled:l,size:h,icon:p?o.createElement(le,{source:Xs,tone:"base"}):void 0},g);return o.createElement("div",{className:Jr.BulkActionButton,ref:f},p?o.createElement(Gt,{content:a,preferredPosition:"below"},b):b,u&&o.createElement(Zd,null))}function PT({title:e,actions:t,isNewBadgeInBadgeActions:r,size:n}){const{value:a,toggle:s}=Wt(!1);return o.createElement(o.Fragment,null,o.createElement(nt,{active:a,activator:o.createElement(Ka,{disclosure:!0,showContentInButton:!0,onAction:s,content:e,indicator:r,size:n}),onClose:s,preferInputActivator:!0},o.createElement(an,{items:t,onActionAnyItem:s})))}var $c={CheckableButton:"Polaris-CheckableButton",Checkbox:"Polaris-CheckableButton__Checkbox",Label:"Polaris-CheckableButton__Label"};const Qd=m.forwardRef(function({accessibilityLabel:t,label:r="",onToggleAll:n,selected:a,disabled:s,ariaLive:i},l){const c=m.useRef(null);function u(){var d;(d=c==null?void 0:c.current)==null||d.focus()}return m.useImperativeHandle(l,()=>({focus:u})),o.createElement("div",{className:$c.CheckableButton,onClick:n},o.createElement("div",{className:$c.Checkbox},o.createElement(Ln,{label:t,labelHidden:!0,checked:a,disabled:s,onChange:n,ref:c})),r?o.createElement("span",{className:$c.Label,"aria-live":i},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},r)):null)}),AT=4;function TT({promotedActions:e=[],disabled:t,buttonSize:r,handleMeasurement:n}){const a=se(),s=m.useRef(null),i=a.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),l=o.createElement(Ka,{disclosure:!0,content:i}),c=m.useCallback(()=>{if(!s.current)return;const d=s.current.offsetWidth,h=s.current.children,p=Array.from(h).map(b=>Math.ceil(b.getBoundingClientRect().width)+AT),g=p.pop()||0;n({containerWidth:d,disclosureWidth:g,hiddenActionsWidths:p})},[n]);m.useEffect(()=>{c()},[c,e]);const u=e.map((d,h)=>Gu(d)?o.createElement(Ka,{key:h,disclosure:!0,showContentInButton:!0,content:d.title,size:r}):o.createElement(Ka,Object.assign({key:h,disabled:t},d,{size:r})));return mt("resize",c),o.createElement("div",{className:Jr.BulkActionsMeasurerLayout,ref:s},u,l)}const eh=m.forwardRef(function({promotedActions:t,actions:r,disabled:n,buttonSize:a,paginatedSelectAllAction:s,paginatedSelectAllText:i,label:l,accessibilityLabel:c,selected:u,onToggleAll:d,onMoreActionPopoverToggle:h,width:f,selectMode:p},g){const b=se(),[y,v]=m.useState(!1),[E,S]=m.useReducer((j,J)=>({...j,...J}),{disclosureWidth:0,containerWidth:1/0,actionsWidths:[],visiblePromotedActions:[],hiddenPromotedActions:[],hasMeasured:!1}),{visiblePromotedActions:_,hiddenPromotedActions:R,containerWidth:x,disclosureWidth:C,actionsWidths:w,hasMeasured:P}=E;m.useEffect(()=>{if(x===0||!t||t.length===0)return;const{visiblePromotedActions:j,hiddenPromotedActions:J}=fp(t,C,w,x);S({visiblePromotedActions:j,hiddenPromotedActions:J,hasMeasured:x!==1/0})},[x,C,t,w]);const $=!t||t&&_.length===0?b.translate("Polaris.ResourceList.BulkActions.actionsActivatorLabel"):b.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),N=s?o.createElement(rr,{className:Jr.AllAction,onClick:s.onAction,size:"slim",disabled:n},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},s.content)):null,M=i&&s,A={accessibilityLabel:c,label:M?i:l,selected:u,onToggleAll:d,disabled:n,ariaLive:M?"polite":void 0,ref:g},O=m.useCallback(()=>{h==null||h(y),v(j=>!j)},[h,y]),L=m.useCallback(j=>{const{hiddenActionsWidths:J,containerWidth:ge,disclosureWidth:Oe}=j;if(!t||t.length===0)return;const{visiblePromotedActions:Ce,hiddenPromotedActions:De}=fp(t,Oe,J,ge);S({visiblePromotedActions:Ce,hiddenPromotedActions:De,actionsWidths:J,containerWidth:ge,disclosureWidth:Oe,hasMeasured:!0})},[t]),F=wT(r),I=t?t.filter((j,J)=>!!_.includes(J)).map((j,J)=>Gu(j)?o.createElement(PT,Object.assign({key:J},j,{isNewBadgeInBadgeActions:pp(F),size:a})):o.createElement(Ka,Object.assign({key:J,disabled:n},j,{size:a}))):null,U={items:R.map(j=>t==null?void 0:t[j]).reduce((j,J)=>J?Gu(J)?j.concat(J.actions):j.concat(J):j,[])},V=m.useMemo(()=>{if(F)return F;if(!r)return[];let j=!0;return r.filter(J=>J).reduce((J,ge)=>{if(CT(ge))return j=!1,J.concat(ge);if(j){if(J.length===0)return[{items:[ge]}];const Oe=J[J.length-1];return J.splice(J.length-1,1,{items:[...Oe.items,ge]}),J}return j=!0,J.concat({items:[ge]})},[])},[r,F]),W=o.createElement(Ka,{disclosure:!0,showContentInButton:!I,onAction:O,content:$,disabled:n,indicator:pp(F),size:a}),H=V.length>0?o.createElement(nt,{active:y,activator:W,preferredAlignment:"right",onClose:O},o.createElement(an,{sections:U.items.length>0?[U,...V]:V,onActionAnyItem:O})):null,Y=o.createElement(TT,{promotedActions:t,disabled:n,buttonSize:a,handleMeasurement:L});return o.createElement("div",{className:Jr.BulkActions,style:f?{width:f}:void 0},o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement("div",{className:Jr.BulkActionsSelectAllWrapper},o.createElement(Qd,A),N),p?o.createElement("div",{className:Jr.BulkActionsPromotedActionsWrapper},o.createElement(de,{gap:"100",blockAlign:"center"},o.createElement("div",{className:Jr.BulkActionsOuterLayout},Y,o.createElement("div",{className:T(Jr.BulkActionsLayout,!P&&Jr["BulkActionsLayout--measuring"])},I)),H)):null))});var Vr={CalloutCard:"Polaris-CalloutCard",Image:"Polaris-CalloutCard__Image",DismissImage:"Polaris-CalloutCard__DismissImage",Content:"Polaris-CalloutCard__Content",Title:"Polaris-CalloutCard__Title",Buttons:"Polaris-CalloutCard__Buttons",Container:"Polaris-CalloutCard__Container",Dismiss:"Polaris-CalloutCard__Dismiss",hasDismiss:"Polaris-CalloutCard--hasDismiss"},lt={LegacyCard:"Polaris-LegacyCard",Section:"Polaris-LegacyCard__Section",subdued:"Polaris-LegacyCard--subdued","Section-hideOnPrint":"Polaris-LegacyCard__Section--hideOnPrint",hideOnPrint:"Polaris-LegacyCard--hideOnPrint",Header:"Polaris-LegacyCard__Header","Section-fullWidth":"Polaris-LegacyCard__Section--fullWidth","Section-flush":"Polaris-LegacyCard__Section--flush","Section-subdued":"Polaris-LegacyCard__Section--subdued",SectionHeader:"Polaris-LegacyCard__SectionHeader",Subsection:"Polaris-LegacyCard__Subsection",Footer:"Polaris-LegacyCard__Footer",LeftJustified:"Polaris-LegacyCard__LeftJustified",FirstSectionPadding:"Polaris-LegacyCard__FirstSectionPadding",LastSectionPadding:"Polaris-LegacyCard__LastSectionPadding"};function av({children:e,title:t,actions:r}){const n=r?o.createElement(Sr,null,nn(r,{variant:"plain"})):null,a=m.isValidElement(t)?t:o.createElement(G,{variant:"headingSm",as:"h2"},t),s=n||e?o.createElement(de,{wrap:!1,gap:"200",align:"space-between",blockAlign:"center"},a,o.createElement(de,{wrap:!1,gap:"400",blockAlign:"center"},n,e)):a;return o.createElement("div",{className:lt.Header},s)}var yn={LegacyStack:"Polaris-LegacyStack",Item:"Polaris-LegacyStack__Item",noWrap:"Polaris-LegacyStack--noWrap",spacingNone:"Polaris-LegacyStack--spacingNone",spacingExtraTight:"Polaris-LegacyStack--spacingExtraTight",spacingTight:"Polaris-LegacyStack--spacingTight",spacingBaseTight:"Polaris-LegacyStack--spacingBaseTight",spacingLoose:"Polaris-LegacyStack--spacingLoose",spacingExtraLoose:"Polaris-LegacyStack--spacingExtraLoose",distributionLeading:"Polaris-LegacyStack--distributionLeading",distributionTrailing:"Polaris-LegacyStack--distributionTrailing",distributionCenter:"Polaris-LegacyStack--distributionCenter",distributionEqualSpacing:"Polaris-LegacyStack--distributionEqualSpacing",distributionFill:"Polaris-LegacyStack--distributionFill",distributionFillEvenly:"Polaris-LegacyStack--distributionFillEvenly",alignmentLeading:"Polaris-LegacyStack--alignmentLeading",alignmentTrailing:"Polaris-LegacyStack--alignmentTrailing",alignmentCenter:"Polaris-LegacyStack--alignmentCenter",alignmentFill:"Polaris-LegacyStack--alignmentFill",alignmentBaseline:"Polaris-LegacyStack--alignmentBaseline",vertical:"Polaris-LegacyStack--vertical","Item-fill":"Polaris-LegacyStack__Item--fill"};function sv({children:e,fill:t}){const r=T(yn.Item,t&&yn["Item-fill"]);return o.createElement("div",{className:r},e)}const _r=m.memo(function({children:t,vertical:r,spacing:n,distribution:a,alignment:s,wrap:i}){const l=T(yn.LegacyStack,r&&yn.vertical,n&&yn[Be("spacing",n)],a&&yn[Be("distribution",a)],s&&yn[Be("alignment",s)],i===!1&&yn.noWrap),c=y_(t).map((u,d)=>Bb(u,sv,{key:d}));return o.createElement("div",{className:l},c)});_r.Item=sv;function iv({children:e,title:t,subdued:r,flush:n,fullWidth:a,actions:s,hideOnPrint:i}){const l=T(lt.Section,n&&lt["Section-flush"],r&&lt["Section-subdued"],a&&lt["Section-fullWidth"],i&&lt["Section-hideOnPrint"]),c=s?o.createElement(Sr,null,nn(s,{variant:"plain"})):null,u=typeof t=="string"?o.createElement(G,{variant:"headingSm",as:"h3",fontWeight:"medium"},t):t,d=u||c?o.createElement("div",{className:lt.SectionHeader},c?o.createElement(_r,{alignment:"baseline"},o.createElement(_r.Item,{fill:!0},u),c):u):null;return o.createElement("div",{className:l},d,e)}function RT({children:e}){return o.createElement("div",{className:lt.Subsection},e)}const Rn=function({children:t,hideOnPrint:r,title:n,subdued:a,sectioned:s,actions:i,primaryFooterAction:l,secondaryFooterActions:c,secondaryFooterActionsDisclosureText:u,footerActionAlignment:d="right"}){const h=se(),{value:f,toggle:p}=Wt(!1),g=kT(),b=T(lt.LegacyCard,a&&lt.subdued,r&&lt.hideOnPrint),y=n||i?o.createElement(av,{actions:i,title:n}):null,v=s?o.createElement(iv,null,t):t,E=l?Er(l,{variant:"primary"}):null;let S=null;c&&c.length&&(c.length===1?S=Er(c[0]):S=o.createElement(o.Fragment,null,o.createElement(nt,{active:f,activator:o.createElement(ye,{disclosure:!0,onClick:p},u||h.translate("Polaris.Common.more")),onClose:p},o.createElement(an,{items:c}))));const _=E||S?o.createElement("div",{className:T(lt.Footer,d==="left"&&lt.LeftJustified)},d==="right"?o.createElement(Sr,null,S,E):o.createElement(Sr,null,E,S)):null;return o.createElement(ts.Provider,{value:!0},o.createElement("div",{className:b,ref:g},y,v,_))};Rn.Header=av;Rn.Section=iv;Rn.Subsection=RT;function kT(){const e=m.useRef(null);return m.useEffect(()=>{const t=e.current;let r,n;if(t){const a=()=>{var u,d;Ia(r,"top",!1),Ia(n,"bottom",!1);const i=t.querySelectorAll(`.${lt.Section}, .${lt.Header}, .${lt.Footer}`);if(!(i!=null&&i.length))return;const l=i[0],c=xT(i);(u=t.firstChild)!=null&&u.contains(l)&&(r=l,Ia(r,"top",!0)),(d=t.lastChild)!=null&&d.contains(c)&&(n=c,Ia(n,"bottom",!0))};a();const s=new MutationObserver(a);return s.observe(t,{childList:!0,subtree:!0}),()=>{Ia(r,"top",!1),Ia(n,"bottom",!1),s.disconnect()}}},[]),e}function Ia(e,t,r){if(!(!e||e.className.includes(lt["Section-flush"])))switch(t){case"top":e.classList.toggle(lt.FirstSectionPadding,r);return;case"bottom":e.classList.toggle(lt.LastSectionPadding,r)}}function xT(e){let t=e[0];return e.forEach(r=>{t.contains(r)||(t=r)}),t}function IT({title:e,children:t,illustration:r,primaryAction:n,secondaryAction:a,onDismiss:s}){const i=Er(n),l=a?Er(a,{variant:a.variant??"tertiary"}):null,c=l?o.createElement(Sr,null,i,l):i,u=s?o.createElement("div",{className:Vr.Dismiss},o.createElement(ye,{variant:"plain",icon:pa,onClick:s,accessibilityLabel:"Dismiss card"})):null,d=T(Vr.Image,s&&Vr.DismissImage),h=T(Vr.Container,s&&Vr.hasDismiss);return o.createElement(Rn,null,o.createElement("div",{className:h},u,o.createElement(Rn.Section,null,o.createElement("div",{className:Vr.CalloutCard},o.createElement("div",{className:Vr.Content},o.createElement("div",{className:Vr.Title},o.createElement(G,{variant:"headingSm",as:"h2"},e)),o.createElement(G,{as:"span",variant:"bodyMd"},o.createElement(rt,null,t)),o.createElement("div",{className:Vr.Buttons},c)),o.createElement(Fr,{alt:"",className:d,source:r})))))}var $T={ChoiceChildren:"Polaris-ChoiceList__ChoiceChildren"},bs={RadioButton:"Polaris-RadioButton",Input:"Polaris-RadioButton__Input",Backdrop:"Polaris-RadioButton__Backdrop",ChoiceLabel:"Polaris-RadioButton__ChoiceLabel",toneMagic:"Polaris-RadioButton--toneMagic"};function ov({ariaDescribedBy:e,label:t,labelHidden:r,helpText:n,checked:a,disabled:s,onChange:i,onFocus:l,onBlur:c,id:u,name:d,value:h,fill:f,bleed:p,bleedBlockStart:g,bleedBlockEnd:b,bleedInlineStart:y,bleedInlineEnd:v,tone:E}){const S=m.useId(),_=u??S,R=d||_,x=m.useRef(null),C=()=>{c&&c()};function w({currentTarget:k}){i&&i(k.checked,_)}const P=[];n&&P.push(Xd(_)),e&&P.push(e);const $=P.length?P.join(" "):void 0,N=T(bs.Input,E&&bs[Be("tone",E)]),M={helpText:n,bleed:p,bleedBlockStart:g,bleedBlockEnd:b,bleedInlineStart:y,bleedInlineEnd:v};return o.createElement(Yy,Object.assign({label:t,labelHidden:r,disabled:s,id:_,labelClassName:bs.ChoiceLabel,fill:f},M,a?{tone:E}:{}),o.createElement("span",{className:bs.RadioButton},o.createElement("input",{id:_,name:R,value:h,type:"radio",checked:a,disabled:s,className:N,onChange:w,onFocus:l,onBlur:C,"aria-describedby":$,ref:x}),o.createElement("span",{className:bs.Backdrop})))}function lv({title:e,titleHidden:t,allowMultiple:r,choices:n,selected:a,onChange:s=NT,error:i,disabled:l=!1,name:c,tone:u}){const d=r?Ln:ov,h=m.useId(),f=c??h,p=r?`${f}[]`:f,g=e?o.createElement(te,{as:"legend",paddingBlockEnd:{xs:"0",md:"100"}},o.createElement(G,{as:"span",variant:"bodyMd",visuallyHidden:t},e)):null,b=n.map(v=>{const{value:E,id:S,label:_,helpText:R,disabled:x,describedByError:C}=v;function w(M){s(OT(v,M,a,r),f)}const P=gp(v,a),$=v.renderChildren?v.renderChildren(P):null,N=$?o.createElement("div",{className:$T.ChoiceChildren},o.createElement(te,{paddingBlockStart:{xs:"400",md:"0"}},$)):null;return o.createElement("li",{key:E},o.createElement(Wb,{marginBlockEnd:R?{xs:"100",md:"0"}:{xs:"0"}},o.createElement(d,{name:p,value:E,id:S,label:_,disabled:x||l,fill:{xs:!0,sm:!1},checked:gp(v,a),helpText:R,onChange:w,ariaDescribedBy:i&&C?Td(p):null,tone:u}),N))}),y=i&&o.createElement(te,{paddingBlockStart:{xs:"0",md:"100"},paddingBlockEnd:"200"},o.createElement(Ad,{message:i,fieldID:p}));return o.createElement(rt,{as:"fieldset",gap:{xs:"400",md:"0"},"aria-invalid":i!=null,id:p},g,o.createElement(rt,{as:"ul",gap:{xs:"400",md:"0"}},b),y)}function NT(){}function gp({value:e},t){return t.includes(e)}function OT({value:e},t,r,n=!1){return t?n?[...r,e]:[e]:r.filter(a=>a!==e)}var Nc={Collapsible:"Polaris-Collapsible",isFullyClosed:"Polaris-Collapsible--isFullyClosed",expandOnPrint:"Polaris-Collapsible--expandOnPrint"};function Xo({id:e,expandOnPrint:t,open:r,transition:n=!0,children:a,onAnimationEnd:s}){const[i,l]=m.useState(0),[c,u]=m.useState(r),[d,h]=m.useState("idle"),f=m.useRef(null),p=d==="idle"&&r&&c,g=d==="idle"&&!r&&!c,b=t||!g?a:null,y=T(Nc.Collapsible,g&&Nc.isFullyClosed,t&&Nc.expandOnPrint),v=MT(n),S={...typeof n=="object"&&{transitionDuration:n.duration,transitionTimingFunction:n.timingFunction},maxHeight:p?"none":`${i}px`,overflow:p?"visible":"hidden"},_=m.useCallback(({target:x})=>{x===f.current&&(h("idle"),u(r),s&&s())},[s,r]),R=m.useCallback(()=>{v?(u(r),h("idle"),r&&f.current?l(f.current.scrollHeight):l(0)):h("measuring")},[r,v]);return m.useEffect(()=>{r!==c&&R()},[r,c]),m.useEffect(()=>{!r||!f.current||l(f.current.scrollHeight)},[]),m.useEffect(()=>{if(f.current)switch(d){case"idle":break;case"measuring":l(f.current.scrollHeight),h("animating");break;case"animating":l(r?f.current.scrollHeight:0)}},[d,r,c]),o.createElement("div",{id:e,style:S,ref:f,className:y,onTransitionEnd:_,"aria-hidden":!r},b)}const LT=/^0(ms|s)$/;function MT(e){if(typeof e=="boolean")return!e;const{duration:t}=e;return!!(t&&LT.test(t.trim()))}var tn={ColorPicker:"Polaris-ColorPicker",MainColor:"Polaris-ColorPicker__MainColor",fullWidth:"Polaris-ColorPicker--fullWidth",Dragger:"Polaris-ColorPicker__Dragger",ColorLayer:"Polaris-ColorPicker__ColorLayer",HuePicker:"Polaris-ColorPicker__HuePicker",AlphaPicker:"Polaris-ColorPicker__AlphaPicker",Slidable:"Polaris-ColorPicker__Slidable"};const po=13;function FT(e,t,r){const n=BT(e,t,r);return Ot(n,0,t)}function DT(e,t){const r=Ot(e,0,t);return HT(r,t)}function HT(e,t){const r=e-po,n=t-po*2;return Ot(1-r/n,0,1)}function BT(e,t,r){const n=t-(r+po);return Ot((1-e)*n+po,0,t-r)}let Ju=!1;Fs||window.addEventListener("touchmove",e=>{Ju&&e.preventDefault()},{passive:!1});class th extends m.PureComponent{constructor(...t){super(...t),this.state={dragging:!1},this.node=null,this.draggerNode=null,this.setDraggerNode=r=>{this.draggerNode=r},this.setNode=r=>{this.node=r},this.startDrag=r=>{UT(r)&&this.handleDraggerMove(r.clientX,r.clientY),Ju=!0,this.setState({dragging:!0})},this.handleDragEnd=()=>{Ju=!1,this.setState({dragging:!1})},this.handleMove=r=>{if(r.stopImmediatePropagation(),r.stopPropagation(),r.cancelable&&r.preventDefault(),WT(r)){this.handleDraggerMove(r.clientX,r.clientY);return}this.handleDraggerMove(r.touches[0].clientX,r.touches[0].clientY)},this.handleDraggerMove=(r,n)=>{if(this.node==null)return;const{onChange:a}=this.props,s=this.node.getBoundingClientRect(),i=r-s.left,l=n-s.top;a({x:i,y:l})}}componentDidMount(){const{onDraggerHeight:t}=this.props;if(t==null)return;const{draggerNode:r}=this;r!=null&&t(r.clientWidth)}render(){const{dragging:t}=this.state,{draggerX:r=0,draggerY:n=0}=this.props,a={transform:`translate3d(${r}px, ${n}px, 0)`},s=t?o.createElement($t,{event:"mousemove",handler:this.handleMove,passive:!1}):null,i=t?o.createElement($t,{event:"touchmove",handler:this.handleMove,passive:!1}):null,l=t?o.createElement($t,{event:"mouseup",handler:this.handleDragEnd}):null,c=t?o.createElement($t,{event:"touchend",handler:this.handleDragEnd}):null,u=t?o.createElement($t,{event:"touchcancel",handler:this.handleDragEnd}):null;return o.createElement("div",{ref:this.setNode,className:tn.Slidable,onMouseDown:this.startDrag,onTouchStart:this.startDrag},l,s,i,c,u,o.createElement("div",{style:a,className:tn.Dragger,ref:this.setDraggerNode}))}}function WT(e){return e.type==="mousemove"}function UT(e){return e.type==="mousedown"}class jT extends m.PureComponent{constructor(...t){super(...t),this.state={sliderHeight:0,draggerHeight:0},this.setSliderHeight=r=>{r!=null&&this.setState({sliderHeight:r.clientHeight})},this.setDraggerHeight=r=>{this.setState({draggerHeight:r})},this.handleChange=({y:r})=>{const{onChange:n}=this.props,{sliderHeight:a}=this.state,s=DT(r,a);n(s)}}render(){const{color:t,alpha:r}=this.props,{sliderHeight:n,draggerHeight:a}=this.state,s=FT(r,n,a),i=qT(t);return o.createElement("div",{className:tn.AlphaPicker,ref:this.setSliderHeight},o.createElement("div",{className:tn.ColorLayer,style:{background:i}}),o.createElement(th,{draggerY:s,draggerX:0,onChange:this.handleChange,onDraggerHeight:this.setDraggerHeight}))}}function qT(e){const{red:t,green:r,blue:n}=Vo(e),a=`${t}, ${r}, ${n}`;return`linear-gradient(to top, rgba(${a}, 0) 18px, rgba(${a}, 1) calc(100% - 18px))`}const mo=13;function VT(e,t,r){const n=GT(e,t,r);return Ot(n,0,t)}function KT(e,t){const r=Ot(e,0,t);return zT(r,t)}function zT(e,t){const r=e-mo,n=t-mo*2;return Ot(r/n*360,0,360)}function GT(e,t,r){const n=t-(r+mo);return Ot(e/360*n+mo,0,t-r)}class JT extends m.PureComponent{constructor(...t){super(...t),this.state={sliderHeight:0,draggerHeight:0},this.setSliderHeight=r=>{r!=null&&this.setState({sliderHeight:r.clientHeight})},this.setDraggerHeight=r=>{this.setState({draggerHeight:r})},this.handleChange=({y:r})=>{const{onChange:n}=this.props,{sliderHeight:a}=this.state,s=KT(r,a);n(s)}}render(){const{hue:t}=this.props,{sliderHeight:r,draggerHeight:n}=this.state,a=VT(t,r,n);return o.createElement("div",{className:tn.HuePicker,ref:this.setSliderHeight},o.createElement(th,{draggerY:a,draggerX:0,onChange:this.handleChange,onDraggerHeight:this.setDraggerHeight}))}}const bp=200;class XT extends m.PureComponent{constructor(...t){super(...t),this.state={pickerSize:{width:0,height:0}},this.colorNode=null,this.handleResize=tr(()=>{const{colorNode:r}=this;r!=null&&this.setState({pickerSize:{width:r.clientWidth,height:r.clientHeight}})},bp,{leading:!0,trailing:!0,maxWait:bp}),this.setColorNode=r=>{this.colorNode=r},this.handleHueChange=r=>{const{color:{brightness:n,saturation:a,alpha:s=1},onChange:i}=this.props;i({hue:r,brightness:n,saturation:a,alpha:s})},this.handleAlphaChange=r=>{const{color:{hue:n,brightness:a,saturation:s},onChange:i}=this.props;i({hue:n,brightness:a,saturation:s,alpha:r})},this.handleDraggerMove=({x:r,y:n})=>{const{pickerSize:a}=this.state,{color:{hue:s,alpha:i=1},onChange:l}=this.props,c=Ot(r/a.width,0,1),u=Ot(1-n/a.height,0,1);l({hue:s,saturation:c,brightness:u,alpha:i})},this.handlePickerDrag=r=>{r.preventDefault()}}componentDidMount(){const{colorNode:t}=this;t!=null&&this.setState({pickerSize:{width:t.clientWidth,height:t.clientHeight}})}render(){const{id:t,color:r,allowAlpha:n,fullWidth:a}=this.props,{hue:s,saturation:i,brightness:l,alpha:c}=r,{pickerSize:u}=this.state,d=c!=null&&n?c:1,{red:h,green:f,blue:p}=Vo({hue:s,saturation:1,brightness:1}),g=`rgba(${h}, ${f}, ${p}, ${d})`,b=Ot(i*u.width,0,u.width),y=Ot(u.height-l*u.height,0,u.height),v=n?o.createElement(jT,{alpha:d,color:r,onChange:this.handleAlphaChange}):null,E=T(tn.ColorPicker,a&&tn.fullWidth);return o.createElement("div",{className:E,id:t,onMouseDown:this.handlePickerDrag},o.createElement("div",{ref:this.setColorNode,className:tn.MainColor},o.createElement("div",{className:tn.ColorLayer,style:{backgroundColor:g}}),o.createElement(th,{onChange:this.handleDraggerMove,draggerX:b,draggerY:y})),o.createElement(JT,{hue:s,onChange:this.handleHueChange}),v,o.createElement($t,{event:"resize",handler:this.handleResize}))}}var YT={InlineGrid:"Polaris-InlineGrid"};function go({children:e,columns:t,gap:r,alignItems:n}){const a={...Hb("inline-grid","grid-template-columns",ZT(t)),...Ns("inline-grid","gap","space",r),"--pc-inline-grid-align-items":n};return o.createElement("div",{className:YT.InlineGrid,style:Pd(a)},e)}function ZT(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,r])=>[t,yp(r)])):yp(e)}function yp(e){if(e)return typeof e=="number"||!isNaN(Number(e))?`repeat(${Number(e)}, minmax(0, 1fr))`:typeof e=="string"?e:e.map(t=>{switch(t){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const ai=m.createContext(void 0);function wa(){const e=m.useContext(ai);if(!e)throw new Error("No Frame context was provided. Your component must be wrapped in a <Frame> component. See https://polaris.shopify.com/components/internal-only/frame for implementation instructions.");return e}const QT=m.memo(function({message:t,saveAction:r,discardAction:n,alignContentFlush:a,fullWidth:s,contextControl:i,secondaryMenu:l}){const{setContextualSaveBar:c,removeContextualSaveBar:u}=wa();return m.useEffect(()=>{c({message:t,saveAction:r,discardAction:n,alignContentFlush:a,fullWidth:s,contextControl:i,secondaryMenu:l})},[t,r,n,a,c,s,i,l]),m.useEffect(()=>u,[u]),null});var e1=typeof Element<"u",t1=typeof Map=="function",r1=typeof Set=="function",n1=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Yi(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Yi(e[n],t[n]))return!1;return!0}var s;if(t1&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!Yi(n.value[1],t.get(n.value[0])))return!1;return!0}if(r1&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(n1&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(e1&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!Yi(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var a1=function(t,r){try{return Yi(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const wn=g_(a1);function s1(e){return function(t,r){const{firstVisibleColumnIndex:n,tableLeftVisibleEdge:a,tableRightVisibleEdge:s}=e,i=t.offsetLeft,l=i+t.offsetWidth,c=vp(i,a,s,"left"),u=vp(l,a,s,"right"),d=c||u,h=t.offsetWidth;return d&&(e.firstVisibleColumnIndex=Math.min(n,r)),{leftEdge:i,rightEdge:l,isVisible:d,width:h,index:r}}}function vp(e,t,r,n){return e>=t+(n==="left"?0:30)&&e<=r-30}function i1(e,t){const{firstVisibleColumnIndex:r}=e,n=Math.max(r-1,0),a=t[n],s=t[r];return{previousColumn:a,currentColumn:s}}var ce={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function ys({content:e,contentType:t,nthColumn:r,firstColumn:n,truncate:a,header:s,total:i,totalInFooter:l,sorted:c,sortable:u,sortDirection:d,inFixedNthColumn:h,verticalAlign:f="top",defaultSortDirection:p="ascending",onSort:g,colSpan:b,setRef:y=()=>{},stickyHeadingCell:v=!1,stickyCellWidth:E,hovered:S=!1,handleFocus:_=()=>{},hasFixedNthColumn:R=!1,fixedCellVisible:x=!1,firstColumnMinWidth:C,style:w,lastFixedFirstColumn:P}){const $=se(),N=t==="numeric",M=T(ce.Cell,ce[`Cell-${Be("verticalAlign",f)}`],n&&ce["Cell-firstColumn"],a&&ce["Cell-truncated"],s&&ce["Cell-header"],i&&ce["Cell-total"],l&&ce["Cell-total-footer"],N&&ce["Cell-numeric"],u&&ce["Cell-sortable"],c&&ce["Cell-sorted"],v&&ce.StickyHeaderCell,S&&ce["Cell-hovered"],P&&h&&x&&ce["Cell-separate"],r&&h&&v&&ce.FixedFirstColumn),k=T(s&&ce.Heading,s&&t==="text"&&ce["Heading-left"]),A=T(u&&ce.Icon),O=c&&d?d:p,L=O==="descending"?fo:ho,F=d==="ascending"?"descending":"ascending",I=$.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:c?F:O}),D=o.createElement("span",{className:A},o.createElement(le,{source:L,accessibilityLabel:I})),B=!(v&&R&&r&&!h),V=u?o.createElement("button",{className:k,onClick:g,onFocus:_,tabIndex:B?0:-1},D,e):e,W=b&&b>1?{colSpan:b}:{},H=r&&C?{minWidth:C}:{minWidth:E},Y=o.createElement("th",Object.assign({ref:y},Hu.props,W,{className:M,"aria-sort":d,style:{...w,...H},"data-index-table-sticky-heading":!0}),V),j=s?o.createElement("th",Object.assign({},Hu.props,{"aria-sort":d},W,{ref:y,className:M,scope:"col",style:{...H}}),V):o.createElement("th",Object.assign({},W,{ref:y,className:M,scope:"row",style:{...H}}),a?o.createElement(o1,{className:ce.TooltipContent},e):e),J=s||n||r?j:o.createElement("td",Object.assign({className:M},W),e);return v?Y:J}const o1=({children:e,className:t=""})=>{const r=m.useRef(null),{current:n}=r,a=o.createElement("span",{ref:r,className:t},e);return(n==null?void 0:n.scrollWidth)>(n==null?void 0:n.offsetWidth)?o.createElement(Gt,{content:r.current.innerText},a):a};function cv({children:e,onMount:t,fallback:r=null}){const n=Fb(),a=n?e:r;return m.useEffect(()=>{n&&t&&t()},[n,t]),o.createElement(o.Fragment,null,a)}function l1(){const e=m.useContext(Ub);if(!e)throw new Rd("No StickyManager was provided.");return e}class c1 extends m.Component{constructor(...t){super(...t),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=r=>{this.placeHolderNode=r},this.setStickyNode=r=>{this.stickyNode=r},this.handlePositioning=(r,n=0,a=0,s=0)=>{const{isSticky:i}=this.state;(r&&!i||!r&&i)&&(this.adjustPlaceHolderNode(r),this.setState({isSticky:!i},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!i),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const l=r?{position:"fixed",top:n,left:a,width:s}:{};this.setState({style:l})},this.adjustPlaceHolderNode=r=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=r?`${v_(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:t,offset:r=!1,disableWhenStacked:n=!1,stickyManager:a}=this.props;!this.stickyNode||!this.placeHolderNode||a.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:r,boundingElement:t,disableWhenStacked:n})}componentWillUnmount(){const{stickyManager:t}=this.props;this.stickyNode&&t.unregisterStickyItem(this.stickyNode)}render(){const{style:t,isSticky:r}=this.state,{children:n}=this.props,a=u1(n)?n(r):n;return o.createElement("div",null,o.createElement("div",{ref:this.setPlaceHolderNode}),o.createElement("div",{ref:this.setStickyNode,style:t},a))}}function u1(e){return typeof e=="function"}function Yo(e){const t=l1();return o.createElement(c1,Object.assign({},e,{stickyManager:t}))}function d1({columnVisibilityData:e,isScrolledFarthestLeft:t,isScrolledFarthestRight:r,navigateTableLeft:n,navigateTableRight:a,fixedFirstColumns:s,setRef:i=()=>{}}){const l=se(),c=e.map((h,f)=>{if(f<s)return;const p=T(ce.Pip,h.isVisible&&ce["Pip-visible"]);return o.createElement("div",{className:p,key:`pip-${f}`})}),u=l.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),d=l.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return o.createElement("div",{className:ce.Navigation,ref:i},o.createElement(ye,{variant:"tertiary",icon:E_,disabled:t,accessibilityLabel:u,onClick:n}),c,o.createElement(ye,{variant:"tertiary",icon:S_,disabled:r,accessibilityLabel:d,onClick:a}))}const Ep=e=>{const t=[];return e&&e.forEach(r=>{t.push(r.clientHeight)}),t};class h1 extends m.PureComponent{constructor(...t){super(...t),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=m.createRef(),this.scrollContainer=m.createRef(),this.table=m.createRef(),this.stickyTable=m.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=tr(()=>{const{table:{current:r},scrollContainer:{current:n}}=this;let a=!1;r&&n&&(a=r.scrollWidth>n.clientWidth+1),this.setState({condensed:a,...this.calculateColumnVisibilityData(a)})}),this.setCellRef=({ref:r,index:n,inStickyHeader:a})=>{if(r!=null)if(a){this.stickyHeadings[n]=r;const s=r.querySelector("button");if(s==null)return;s.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[n]=r,this.tableHeadingWidths[n]=r.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:r,stickyHeadings:n,stickyNav:a,headerNav:s}=this,i=n.findIndex(p=>{var g;return p===((g=document.activeElement)==null?void 0:g.parentElement)}),l=r.findIndex(p=>{var g;return p===((g=document.activeElement)==null?void 0:g.parentElement)}),c=a==null?void 0:a.querySelectorAll("button"),u=s==null?void 0:s.querySelectorAll("button");let d=-1;c==null||c.forEach((p,g)=>{p===document.activeElement&&(d=g)});let h=-1;if(u==null||u.forEach((p,g)=>{p===document.activeElement&&(h=g)}),i<0&&l<0&&d<0&&h<0)return null;let f;if(i>=0?f=r[i].querySelector("button"):l>=0&&(f=n[l].querySelector("button")),d>=0?f=u==null?void 0:u[d]:h>=0&&(f=c==null?void 0:c[h]),f==null)return null;f.style.visibility="visible",f.focus(),f.style.removeProperty("visibility")},this.calculateColumnVisibilityData=r=>{const n=this.fixedFirstColumns(),{table:{current:a},scrollContainer:{current:s},dataTable:{current:i}}=this,{stickyHeader:l}=this.props;if((l||r)&&a&&s&&i){const c=a.querySelectorAll(Hu.selector),u=c[n-1],d=n?u.offsetLeft+u.offsetWidth:0;if(c.length>0){const h=c.length-1,f=s.scrollLeft+d,p=s.scrollLeft+i.offsetWidth,g={firstVisibleColumnIndex:h,tableLeftVisibleEdge:f,tableRightVisibleEdge:p},b=[...c].map(s1(g)),y=b[b.length-1],v=n?f===d:f===0;return{columnVisibilityData:b,...i1(g,b),isScrolledFarthestLeft:v,isScrolledFarthestRight:y.rightEdge<=p}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=r=>{var f;const n=this.fixedFirstColumns();if(this.scrollContainer.current==null||r.target==null||this.state.columnVisibilityData.length===0)return;const s=r.target.parentNode,i=this.scrollContainer.current.scrollLeft,l=this.scrollContainer.current.offsetWidth,c=i+l,u=this.state.columnVisibilityData.length>0?(f=this.state.columnVisibilityData[n])==null?void 0:f.rightEdge:0,d=s.offsetLeft,h=s.offsetLeft+s.offsetWidth;i>d-u&&(this.scrollContainer.current.scrollLeft=d-u),h>c&&(this.scrollContainer.current.scrollLeft=h-l)},this.stickyHeaderScrolling=()=>{const{current:r}=this.stickyTable,{current:n}=this.scrollContainer;r==null||n==null||(r.scrollLeft=n.scrollLeft)},this.scrollListener=()=>{var r;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(n=>({...this.calculateColumnVisibilityData(n.condensed)}))},100),this.setState({isScrolledFarthestLeft:((r=this.scrollContainer.current)==null?void 0:r.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=r=>()=>{this.setState({rowHovered:r})},this.handleFocus=r=>{var u;const n=this.fixedFirstColumns();if(this.scrollContainer.current==null||r.target==null)return;const a=r.target.parentNode,i=this.props?(u=this.state.columnVisibilityData[n])==null?void 0:u.rightEdge:0,c=a.offsetLeft-i;this.scrollContainer.current.scrollLeft>c&&(this.scrollContainer.current.scrollLeft=c)},this.navigateTable=r=>{var d;const n=this.fixedFirstColumns(),{currentColumn:a,previousColumn:s}=this.state,i=(d=this.state.columnVisibilityData[n-1])==null?void 0:d.rightEdge;if(!a||!s)return;let l=0;for(let h=0;h<a.index;h++)l+=this.state.columnVisibilityData[h].width;const{current:c}=this.scrollContainer;return()=>{let h=0;n?h=r==="right"?l-i+a.width:l-s.width-i:h=r==="right"?a.rightEdge:s.leftEdge,c&&(c.scrollLeft=h,requestAnimationFrame(()=>{this.setState(f=>({...this.calculateColumnVisibilityData(f.condensed)}))}))}},this.renderHeading=({heading:r,headingIndex:n,inFixedNthColumn:a,inStickyHeader:s})=>{var w;const{sortable:i,truncate:l=!1,columnContentTypes:c,defaultSortDirection:u,initialSortColumnIndex:d=0,verticalAlign:h,firstColumnMinWidth:f}=this.props,p=this.fixedFirstColumns(),{sortDirection:g=u,sortedColumnIndex:b=d,isScrolledFarthestLeft:y}=this.state;let v;const E=`heading-cell-${n}`,S=`stickyheader-${n}`,_=s?S:E;if(i){const P=i[n],$=P&&b===n;v={defaultSortDirection:u,sorted:$,sortable:P,sortDirection:$?g:"none",onSort:this.defaultOnSort(n),fixedNthColumn:p,inFixedNthColumn:p}}const R=s?this.tableHeadingWidths[n]:void 0,x=!y,C={header:!0,stickyHeadingCell:s,content:r,contentType:c[n],nthColumn:n<p,fixedFirstColumns:p,truncate:l,headingIndex:n,...v,verticalAlign:h,handleFocus:this.handleFocus,stickyCellWidth:R,fixedCellVisible:x,firstColumnMinWidth:f};return a&&s?[o.createElement(ys,Object.assign({key:_},C,{setRef:P=>{this.setCellRef({ref:P,index:n,inStickyHeader:s})},inFixedNthColumn:!1})),o.createElement(ys,Object.assign({key:`${_}-sticky`},C,{setRef:P=>{this.setCellRef({ref:P,index:n,inStickyHeader:s})},inFixedNthColumn:!!p,lastFixedFirstColumn:n===p-1,style:{left:(w=this.state.columnVisibilityData[n])==null?void 0:w.leftEdge}}))]:o.createElement(ys,Object.assign({key:_},C,{setRef:P=>{this.setCellRef({ref:P,index:n,inStickyHeader:s})},lastFixedFirstColumn:n===p-1,inFixedNthColumn:a}))},this.totalsRowHeading=()=>{const{i18n:r,totals:n,totalsName:a}=this.props,s=a||{singular:r.translate("Polaris.DataTable.totalRowHeading"),plural:r.translate("Polaris.DataTable.totalsRowHeading")};return n&&n.filter(i=>i!=="").length>1?s.plural:s.singular},this.renderTotals=({total:r,index:n})=>{const a=this.fixedFirstColumns(),s=`totals-cell-${n}`,{truncate:i=!1,verticalAlign:l,columnContentTypes:c}=this.props;let u,d;n===0&&(u=this.totalsRowHeading()),r!==""&&n>0&&(d=c[n],u=r);const h=this.props.showTotalsInFooter;return o.createElement(ys,{total:!0,totalInFooter:h,nthColumn:n<=a-1,firstColumn:n===0,key:s,content:u,contentType:d,truncate:i,verticalAlign:l})},this.getColSpan=(r,n,a,s)=>{if(this.fixedFirstColumns())return 1;const l=r||1,c=n||a,u=Math.floor(c/l),d=c%l;return s===0?u+d:u},this.defaultRenderRow=({row:r,index:n,inFixedNthColumn:a,rowHeights:s})=>{const{columnContentTypes:i,truncate:l=!1,verticalAlign:c,hoverable:u=!0,headings:d}=this.props,{condensed:h}=this.state,f=this.fixedFirstColumns(),p=T(ce.TableRow,u&&ce.hoverable);return o.createElement("tr",{key:`row-${n}`,className:p,onMouseEnter:this.handleHover(n),onMouseLeave:this.handleHover()},r.map((g,b)=>{const y=n===this.state.rowHovered,v=`cell-${b}-row-${n}`,E=this.getColSpan(r.length,d.length,i.length,b);return o.createElement(ys,{key:v,content:g,contentType:i[b],nthColumn:b<=f-1,firstColumn:b===0,truncate:l,verticalAlign:c,colSpan:E,hovered:y,style:s?{height:`${s[n]}px`}:{},inFixedNthColumn:h&&a})}))},this.defaultOnSort=r=>{const{onSort:n,defaultSortDirection:a="ascending",initialSortColumnIndex:s}=this.props,{sortDirection:i=a,sortedColumnIndex:l=s}=this.state;let c=a;return l===r&&(c=i==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:c,sortedColumnIndex:r},()=>{n&&n(r,c)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(t){wn(t,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var U,V,W;const{headings:t,totals:r,showTotalsInFooter:n,rows:a,footerContent:s,hideScrollIndicator:i=!1,increasedTableDensity:l=!1,hasZebraStripingOnData:c=!1,stickyHeader:u=!1,hasFixedFirstColumn:d=!1,pagination:h}=this.props,{condensed:f,columnVisibilityData:p,isScrolledFarthestLeft:g,isScrolledFarthestRight:b}=this.state,y=this.fixedFirstColumns(),v=a.length%2===0,E=T(ce.DataTable,f&&ce.condensed,r&&ce.ShowTotals,n&&ce.ShowTotalsInFooter,c&&ce.ZebraStripingOnData,c&&v&&ce.RowCountIsEven),S=T(ce.TableWrapper,f&&ce.condensed,l&&ce.IncreasedTableDensity,u&&ce.StickyHeaderEnabled),_=o.createElement("tr",null,t.map((H,Y)=>this.renderHeading({heading:H,headingIndex:Y,inFixedNthColumn:!1,inStickyHeader:!1}))),R=r?o.createElement("tr",null,r.map((H,Y)=>this.renderTotals({total:H,index:Y}))):null,x=a.map(H=>H.slice(0,y)),C=t.slice(0,y),w=r==null?void 0:r.slice(0,y),P=(U=this.table.current)==null?void 0:U.children[0].childNodes,$=(V=this.table.current)==null?void 0:V.children[1].childNodes,N=Ep(P),M=Ep($),k=f&&y!==0&&o.createElement("table",{className:T(ce.FixedFirstColumn,!g&&ce.separate),style:{width:`${(W=p[y-1])==null?void 0:W.rightEdge}px`}},o.createElement("thead",null,o.createElement("tr",{style:{height:`${N[0]}px`}},C.map((H,Y)=>this.renderHeading({heading:H,headingIndex:Y,inFixedNthColumn:!0,inStickyHeader:!1}))),r&&!n&&o.createElement("tr",{style:{height:`${N[1]}px`}},w==null?void 0:w.map((H,Y)=>this.renderTotals({total:H,index:Y})))),o.createElement("tbody",null,x.map((H,Y)=>this.defaultRenderRow({row:H,index:Y,inFixedNthColumn:!0,rowHeights:M}))),r&&n&&o.createElement("tfoot",null,o.createElement("tr",null,w==null?void 0:w.map((H,Y)=>this.renderTotals({total:H,index:Y}))))),A=a.map((H,Y)=>this.defaultRenderRow({row:H,index:Y,inFixedNthColumn:!1})),O=s?o.createElement("div",{className:ce.Footer},s):null,L=h?o.createElement(Do,Object.assign({type:"table"},h)):null,F=n?null:R,I=n?o.createElement("tfoot",null,R):null,D=H=>i?null:o.createElement(d1,{columnVisibilityData:p,isScrolledFarthestLeft:g,isScrolledFarthestRight:b,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:y,setRef:Y=>{H==="header"?this.headerNav=Y:H==="sticky"&&(this.stickyNav=Y)}}),B=u?o.createElement(cv,null,o.createElement("div",{className:ce.StickyHeaderWrapper,role:"presentation"},o.createElement(Yo,{boundingElement:this.dataTable.current,onStickyChange:H=>{this.changeHeadingFocus(),this.stickyHeaderActive=H}},H=>{const Y=T(ce.StickyHeaderInner,H&&ce["StickyHeaderInner-isSticky"]),j=T(ce.StickyHeaderTable,!g&&ce.separate);return o.createElement("div",{className:Y},o.createElement("div",null,D("sticky")),o.createElement("table",{className:j,ref:this.stickyTable},o.createElement("thead",null,o.createElement("tr",{className:ce.StickyTableHeadingsRow},t.map((J,ge)=>this.renderHeading({heading:J,headingIndex:ge,inFixedNthColumn:!!(ge<=y-1&&y),inStickyHeader:!0}))))))}))):null;return o.createElement("div",{className:S,ref:this.dataTable},B,D("header"),o.createElement("div",{className:E},o.createElement("div",{className:ce.ScrollContainer,ref:this.scrollContainer},o.createElement($t,{event:"resize",handler:this.handleResize}),o.createElement($t,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),k,o.createElement("table",{className:ce.Table,ref:this.table},o.createElement("thead",null,_,F),o.createElement("tbody",null,A),I)),L,O))}fixedFirstColumns(){const{hasFixedFirstColumn:t,fixedFirstColumns:r=0,headings:n}=this.props,a=t&&!r?1:r;return a>=n.length?0:a}}function f1(e){const t=se();return o.createElement(h1,Object.assign({},e,{i18n:t}))}const p1=7;function m1(e,t,r=0){const n=new Date(t,e,1),a=n.getDay(),s=[[]];let i=s[0],l=n;const c=uv(r);for(let u=0;u<c.indexOf(a);u++)i.push(null);for(;l.getMonth()===e;)i.length===p1&&(i=[],s.push(i)),i.push(l),l=new Date(t,e,l.getDate()+1);for(;i.length<7;)i.push(null);return s}function g1(e,t){if(e==null)return!1;const{start:r,end:n}=t;return!!(r&&e>r&&n&&e<n)}function b1(e,t){if(e==null)return!1;const{start:r,end:n}=t;return!!(r&&br(r,e)||n&&br(n,e))}function br(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function y1(e,t){if(e==null)return{start:t,end:t};const{start:r,end:n}=e;return n&&(Vs(r,n)||da(r,n))?{start:t,end:t}:r?da(t,r)?{start:t,end:t}:{start:r,end:t}:n?da(t,n)?{start:t,end:n}:{start:r||n,end:t}:{start:t,end:t}}function Sp(e){return e===11?0:e+1}function _p(e,t){return e===11?t+1:t}function v1(e){return e===0?11:e-1}function E1(e,t){return e===0?t-1:t}function Vs(e,t){return e.getTime()>t.getTime()}function da(e,t){return e.getTime()<t.getTime()}function Os(e,t){return t.some(r=>e.getTime()===r.getTime())}const S1=[0,1,2,3,4,5,6];function uv(e){const t=[...S1];return[...t.splice(e),...t]}function Bs(e){switch(e){case 0:return"january";case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"august";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december"}}function Cp(e){switch(e){case 0:return"sunday";case 1:return"monday";case 2:return"tuesday";case 3:return"wednesday";case 4:return"thursday";case 5:return"friday";case 6:return"saturday"}}var He={DatePicker:"Polaris-DatePicker",MonthLayout:"Polaris-DatePicker__MonthLayout",MonthContainer:"Polaris-DatePicker__MonthContainer",Month:"Polaris-DatePicker__Month",DayCell:"Polaris-DatePicker__DayCell","DayCell-inRange":"Polaris-DatePicker__DayCell--inRange",Day:"Polaris-DatePicker__Day","Day-inRange":"Polaris-DatePicker__Day--inRange","Day-selected":"Polaris-DatePicker__Day--selected","Day-disabled":"Polaris-DatePicker__Day--disabled",EmptyDayCell:"Polaris-DatePicker__EmptyDayCell",Weekday:"Polaris-DatePicker__Weekday",Header:"Polaris-DatePicker__Header",Title:"Polaris-DatePicker__Title","Day-firstInRange":"Polaris-DatePicker__Day--firstInRange","Day-hasRange":"Polaris-DatePicker__Day--hasRange","Day-hoverRight":"Polaris-DatePicker__Day--hoverRight","Day-lastInRange":"Polaris-DatePicker__Day--lastInRange",Week:"Polaris-DatePicker__Week"};const _1=m.memo(function({label:t,title:r,current:n}){return o.createElement("th",{"aria-label":t,scope:"col",className:He.Weekday},o.createElement(G,{as:"span",variant:"bodySm",alignment:"center",fontWeight:n?"bold":"regular",tone:n?void 0:"subdued"},r))}),wp=m.memo(function({day:t,focused:r,onClick:n,onHover:a=Oc,onFocus:s=Oc,selected:i,inRange:l,inHoveringRange:c,disabled:u,lastDayOfMonth:d,isLastSelectedDay:h,isFirstSelectedDay:f,isHoveringRight:p,rangeIsDifferent:g,weekday:b,selectedAccessibilityLabelPrefix:y}){const v=se(),E=m.useRef(null),S=d||t;if(m.useEffect(()=>{r&&E.current&&E.current.focus()},[r]),!t)return o.createElement("td",{className:He.EmptyDayCell,onMouseOver:()=>a(S)});const _=n&&!u?n.bind(null,t):Oc,R=br(new Date,t),x=T(He.DayCell,i&&He["DayCell-selected"],(l||c)&&!u&&He["DayCell-inRange"],h&&He["DayCell-lastInRange"],f&&He["DayCell-firstInRange"],p&&He["DayCell-hoverRight"],g&&He["DayCell-hasRange"]),C=T(He.Day,i&&He["Day-selected"],u&&He["Day-disabled"],(l||c)&&!u&&He["Day-inRange"],h&&He["Day-lastInRange"],f&&He["Day-firstInRange"],p&&He["Day-hoverRight"],g&&He["Day-hasRange"]),w=t.getDate(),P=(r||i||R||w===1)&&!u?0:-1,$=[i&&y?`${y} `:"",`${R?v.translate("Polaris.DatePicker.today"):""}`,`${b||""} `,`${v.translate(`Polaris.DatePicker.months.${Bs(t.getMonth())}`)} `,`${w} `,`${t.getFullYear()}`].join("");return o.createElement("td",{className:x},o.createElement("button",{onFocus:()=>s(t),type:"button",ref:E,tabIndex:P,className:C,onMouseOver:()=>a(S),onClick:_,"aria-label":$,"aria-disabled":u,"aria-pressed":i},o.createElement(G,{as:"span",variant:"bodySm",alignment:"center",fontWeight:R?"bold":"regular"},w)))});function Oc(){}function Pp({focusedDate:e,selected:t,hoverDate:r,disableDatesBefore:n,disableDatesAfter:a,disableSpecificDates:s,allowRange:i,onChange:l=Lc,onHover:c=Lc,onFocus:u=Lc,month:d,year:h,weekStartsOn:f,accessibilityLabelPrefixes:p}){const g=se(),b=i?C1:()=>!1,y=new Date,v=y.getMonth()===d&&y.getFullYear()===h,E=m.useMemo(()=>m1(d,h,f),[d,f,h]),S=uv(f).map(P=>o.createElement(_1,{key:P,title:g.translate(`Polaris.DatePicker.daysAbbreviated.${Cp(P)}`),label:w(P),current:v&&new Date().getDay()===P})),_=m.useCallback(P=>{l(y1(i?t:void 0,P))},[i,l,t]),R=m.useMemo(()=>new Date(h,d+1,0),[d,h]);function x(P,$){if(P==null)return o.createElement(wp,{key:$,onHover:c,lastDayOfMonth:R});const N=n&&da(P,n)||a&&Vs(P,a)||s&&Os(P,s),M=i&&t&&P1(P,t),k=i&&t&&(!br(t.start,t.end)&&w1(P,t)||r&&br(t.start,t.end)&&Vs(r,t.start)&&br(P,r)&&!M),A=!(t&&br(t.start,t.end)),O=r&&da(P,r),[L,F]=p;let I;return i&&M||!i&&L?I=L:i&&k&&(I=F),o.createElement(wp,{selectedAccessibilityLabelPrefix:I,weekday:w($),focused:e!=null&&br(P,e),day:P,key:$,onFocus:u,onClick:_,onHover:c,selected:t!=null&&b1(P,t),inRange:t!=null&&g1(P,t),disabled:N,inHoveringRange:t!=null&&r!=null&&b(P,t,r),isLastSelectedDay:k,isFirstSelectedDay:M,isHoveringRight:O,rangeIsDifferent:A})}const C=E.map((P,$)=>o.createElement("tr",{className:He.Week,key:$},P.map(x)));return o.createElement("div",{className:He.MonthContainer},o.createElement("table",{role:"grid",className:He.Month},o.createElement("caption",{className:He.Title},o.createElement(G,{as:"span",variant:"bodyMd",alignment:"center",fontWeight:v?"bold":"medium"},g.translate(`Polaris.DatePicker.months.${Bs(d)}`)," ",h)),o.createElement("thead",null,o.createElement("tr",{className:He.WeekHeadings},S)),o.createElement("tbody",null,C)));function w(P){return g.translate(`Polaris.DatePicker.days.${Cp(P)}`)}}function Lc(){}function C1(e,t,r){if(e==null)return!1;const{start:n,end:a}=t;return!!(br(n,a)&&e>n&&e<=r)}function w1(e,t){if(e==null)return!1;const{end:r}=t;return!!(r&&br(r,e))}function P1(e,t){if(e==null)return!1;const{start:r}=t;return!!(r&&br(r,e))}function A1({id:e,selected:t,month:r,year:n,allowRange:a,multiMonth:s,disableDatesBefore:i,disableDatesAfter:l,disableSpecificDates:c,weekStartsOn:u=0,dayAccessibilityLabelPrefix:d,onMonthChange:h,onChange:f=T1}){const p=se(),[g,b]=m.useState(void 0),[y,v]=m.useState(void 0);m.useEffect(()=>{v(void 0)},[t]);const E=m.useCallback(W=>{v(W)},[]),S=m.useCallback(W=>{h&&h(W.getMonth(),W.getFullYear()),b(W),v(W)},[h]),_=m.useCallback(W=>{const{end:H}=W;b(H),v(new Date(H)),f(W)},[f]),R=m.useCallback((W,H)=>{h&&(v(void 0),h(W,H))},[h]),x=m.useCallback(W=>{b(W)},[]),C=m.useCallback(W=>{const{key:H}=W,Y=Mc(t),j=y||Y&&Y.start;if(j!=null){if(H==="ArrowUp"){const J=new Date(j);J.setDate(j.getDate()-7),i&&da(J,i)||c&&Os(J,c)||S(J)}if(H==="ArrowDown"){const J=new Date(j);J.setDate(j.getDate()+7),l&&Vs(J,l)||c&&Os(J,c)||S(J)}if(H==="ArrowRight"){const J=new Date(j);J.setDate(j.getDate()+1),l&&Vs(J,l)||c&&Os(J,c)||S(J)}if(H==="ArrowLeft"){const J=new Date(j);J.setDate(j.getDate()-1),i&&da(J,i)||c&&Os(J,c)||S(J)}}},[l,i,c,y,t,S]),w=_p(r,n),P=Sp(r),$=_p(P,w),N=Sp(P),M=E1(r,n),k=v1(r),A=p.translate(`Polaris.DatePicker.months.${Bs(k)}`),O=s?p.translate(`Polaris.DatePicker.months.${Bs(N)}`):p.translate(`Polaris.DatePicker.months.${Bs(P)}`),L=s?$:w,F=m.useMemo(()=>Mc(t),[t]),I=a?p.translate("Polaris.DatePicker.start"):d,D=p.translate("Polaris.DatePicker.end"),B=[I,D],U=s?o.createElement(Pp,{onFocus:E,focusedDate:y,month:P,year:w,selected:F,hoverDate:g,onChange:_,onHover:x,disableDatesBefore:i,disableDatesAfter:l,disableSpecificDates:c,allowRange:a,weekStartsOn:u,accessibilityLabelPrefixes:B}):null,V=T(He.DatePicker);return o.createElement("div",{id:e,className:V,onKeyDown:R1,onKeyUp:C},o.createElement("div",{className:He.Header},o.createElement(ye,{variant:"tertiary",icon:__,accessibilityLabel:p.translate("Polaris.DatePicker.previousMonth",{previousMonthName:A,showPreviousYear:M}),onClick:()=>R(k,M)}),o.createElement(ye,{variant:"tertiary",icon:Ly,accessibilityLabel:p.translate("Polaris.DatePicker.nextMonth",{nextMonth:O,nextYear:L}),onClick:()=>R(P,w)})),o.createElement("div",{className:He.MonthLayout},o.createElement(Pp,{onFocus:E,focusedDate:y,month:r,year:n,selected:Mc(t),hoverDate:g,onChange:_,onHover:x,disableDatesBefore:i,disableDatesAfter:l,disableSpecificDates:c,allowRange:a,weekStartsOn:u,accessibilityLabelPrefixes:B}),U))}function T1(){}function R1(e){const{key:t}=e;(t==="ArrowUp"||t==="ArrowDown"||t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}function Mc(e){return e instanceof Date?{start:e,end:e}:e}var ki={DescriptionList:"Polaris-DescriptionList",Term:"Polaris-DescriptionList__Term",spacingTight:"Polaris-DescriptionList--spacingTight",Description:"Polaris-DescriptionList__Description"};function k1({items:e,gap:t="loose"}){const r=e.reduce((a,{term:s,description:i},l)=>[...a,o.createElement("dt",{key:`dt${l}`,className:ki.Term},o.createElement(G,{as:"span",variant:"headingSm"},s)),o.createElement("dd",{key:`dd${l}`,className:ki.Description},i)],[]),n=T(ki.DescriptionList,t==="tight"&&ki.spacingTight);return o.createElement("dl",{className:n},r)}var x1={Divider:"Polaris-Divider"};const I1=({borderColor:e="border-secondary",borderWidth:t="025"})=>{const r=e==="transparent"?e:`var(--p-color-${e})`;return o.createElement("hr",{className:x1.Divider,style:{borderBlockStart:`var(--p-border-width-${t}) solid ${r}`}})};function dv(e=""){const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}const $1=["dragover","dragenter","drop"];function N1(e,t){return e.type==="application/x-moz-file"||O1(e,t)}function Ap(e){if(L1(e)&&e.dataTransfer){const t=e.dataTransfer;if(t.files&&t.files.length)return Array.from(t.files);if(t.items&&t.items.length)return Array.from(t.items)}else if(M1(e)&&e.target.files)return Array.from(e.target.files);return[]}function O1(e,t){if(e&&t){const r=e.name||"",n=e.type||"",a=n.replace(/\/.*$/,"");return(Array.isArray(t)?t:t.split(",")).some(i=>{const l=i.trim();return l.startsWith(".")?r.toLowerCase().endsWith(l.toLowerCase()):l.endsWith("/*")?a===l.replace(/\/.*$/,""):n===l})}return!0}function L1(e){return $1.indexOf(e.type)>0}function M1(e){return Object.prototype.hasOwnProperty.call(e,"target")}const hv=!0;function fv(e){return e?"allowMultiple":"single"}const pv=m.createContext({disabled:!1,focused:!1,size:"extraLarge",type:"file",measuring:!1,allowMultiple:hv});var dr={DropZone:"Polaris-DropZone",focused:"Polaris-DropZone--focused",noOutline:"Polaris-DropZone--noOutline",hasOutline:"Polaris-DropZone--hasOutline",isDisabled:"Polaris-DropZone--isDisabled",isDragging:"Polaris-DropZone--isDragging",sizeLarge:"Polaris-DropZone--sizeLarge",sizeMedium:"Polaris-DropZone--sizeMedium",sizeSmall:"Polaris-DropZone--sizeSmall",measuring:"Polaris-DropZone--measuring",Container:"Polaris-DropZone__Container",Overlay:"Polaris-DropZone__Overlay",hasError:"Polaris-DropZone--hasError"},$a={FileUpload:"Polaris-DropZone-FileUpload",large:"Polaris-DropZone-FileUpload--large",small:"Polaris-DropZone-FileUpload--small",ActionTitle:"Polaris-DropZone-FileUpload__ActionTitle","ActionTitle-disabled":"Polaris-DropZone-FileUpload__ActionTitle--disabled","ActionTitle-focused":"Polaris-DropZone-FileUpload__ActionTitle--focused",UploadIcon:"Polaris-DropZone-FileUpload__UploadIcon",disabled:"Polaris-DropZone-FileUpload--disabled"};function F1(e){const t=se(),{size:r,measuring:n,type:a,disabled:s,allowMultiple:i}=m.useContext(pv),l=dv(a),c=fv(i),{actionTitle:u=t.translate(`Polaris.DropZone.${c}.actionTitle${l}`),actionHint:d}=e,h=o.createElement(ye,{disabled:s},u),f=T($a.FileUpload,n&&$a.measuring,r==="large"&&$a.large,r==="small"&&$a.small),p=d&&o.createElement(G,{variant:"bodySm",as:"p",tone:"subdued"},d);let g;switch(r){case"large":case"medium":g=o.createElement(rt,{inlineAlign:"center",gap:"200"},h,p);break;case"small":g=o.createElement("div",{className:T($a.UploadIcon,s&&$a.disabled)},o.createElement(le,{source:qd}));break}return o.createElement("div",{className:f},g)}const mv=function({dropOnPage:t,label:r,labelAction:n,labelHidden:a,children:s,disabled:i=!1,outline:l=!0,accept:c,active:u,overlay:d=!0,allowMultiple:h=hv,overlayText:f,errorOverlayText:p,id:g,type:b="file",onClick:y,error:v,openFileDialog:E,variableHeight:S,onFileDialogClose:_,customValidator:R,onDrop:x,onDropAccepted:C,onDropRejected:w,onDragEnter:P,onDragOver:$,onDragLeave:N}){const M=m.useRef(null),k=m.useRef(null),A=m.useRef([]),O=m.useCallback(tr(()=>{if(!M.current)return;if(S){j(!1);return}let ee="large";const oe=M.current.getBoundingClientRect().width;oe<100?ee="small":oe<160&&(ee="medium"),H(ee),Y&&j(!1)},50,{trailing:!0}),[]),[L,F]=m.useState(!1),[I,D]=m.useState(!1),{value:B,setTrue:U,setFalse:V}=Wt(!1),[W,H]=m.useState("large"),[Y,j]=m.useState(!0),J=se(),ge=m.useCallback(ee=>{const oe=[],Re=[];return Array.from(ee).forEach(ke=>{!N1(ke,c)||R&&!R(ke)?Re.push(ke):oe.push(ke)}),h||(oe.splice(1,oe.length),Re.push(...oe.slice(1))),{files:ee,acceptedFiles:oe,rejectedFiles:Re}},[c,h,R]),Oe=m.useCallback(ee=>{if(xi(ee),i)return;const oe=Ap(ee),{files:Re,acceptedFiles:ke,rejectedFiles:Pt}=ge(oe);A.current=[],F(!1),D(Pt.length>0),x&&x(Re,ke,Pt),C&&ke.length&&C(ke),w&&Pt.length&&w(Pt),ee.target&&"value"in ee.target&&(ee.target.value="")},[i,ge,x,C,w]),Ce=m.useCallback(ee=>{if(xi(ee),i)return;const oe=Ap(ee);if(ee.target&&!A.current.includes(ee.target)&&A.current.push(ee.target),L)return;const{rejectedFiles:Re}=ge(oe);F(!0),D(Re.length>0),P&&P()},[i,L,ge,P]),De=m.useCallback(ee=>{xi(ee),!i&&$&&$()},[i,$]),je=m.useCallback(ee=>{ee.preventDefault(),!i&&(A.current=A.current.filter(oe=>{const Re=t&&!Fs?document:M.current;return oe!==ee.target&&Re&&Re.contains(oe)}),!(A.current.length>0)&&(F(!1),D(!1),N&&N()))},[t,i,N]),Le=t&&!Fs?document:M.current;mt("drop",Oe,Le),mt("dragover",De,Le),mt("dragenter",Ce,Le),mt("dragleave",je,Le),mt("resize",O,Fs?null:window),Fo(()=>{O()});const z=m.useId(),ae=g??z,we=dv(b),he=fv(h),be=f===void 0?J.translate(`Polaris.DropZone.${he}.overlayText${we}`):f,ie=p===void 0?J.translate(`Polaris.DropZone.errorOverlayText${we}`):p,pe=r||J.translate(`Polaris.DropZone.${he}.label${we}`),Ae=r?a:!0,qe=T(dr.DropZone,l&&dr.hasOutline,!l&&dr.noOutline,B&&dr.focused,(u||L)&&dr.isDragging,i&&dr.isDisabled,(I||v)&&dr.hasError,!S&&dr[Be("size",W)],Y&&dr.measuring),Fe=(u||L)&&!I&&!v&&d&&Z(qd,be),me=L&&(I||v)&&Z(jb,ie,"critical"),Ue=m.useMemo(()=>({disabled:i,focused:B,size:W,type:b||"file",measuring:Y,allowMultiple:h}),[i,B,Y,W,b,h]),Je=m.useCallback(()=>{k.current&&k.current.click()},[k]),ur=m.useCallback(()=>{Je(),_==null||_()},[Je,_]);function Z(ee,oe,Re){return o.createElement("div",{className:dr.Overlay},o.createElement(rt,{gap:"200",inlineAlign:"center"},W==="small"&&o.createElement(le,{source:ee,tone:Re}),(W==="medium"||W==="large")&&o.createElement(G,{variant:"bodySm",as:"p",fontWeight:"bold"},oe)))}function re(ee){if(!i)return y?y(ee):Je()}return m.useEffect(()=>{E&&ur()},[E,ur]),o.createElement(pv.Provider,{value:Ue},o.createElement(Ys,{id:ae,label:pe,action:n,labelHidden:Ae},o.createElement("div",{ref:M,className:qe,"aria-disabled":i,onClick:re,onDragStart:xi},Fe,me,o.createElement(G,{variant:"bodySm",as:"span",visuallyHidden:!0},o.createElement("input",{id:ae,accept:c,disabled:i,multiple:h,onChange:Oe,onFocus:U,onBlur:V,type:"file",ref:k,autoComplete:"off"})),o.createElement("div",{className:dr.Container},s))))};function xi(e){e.preventDefault(),e.stopPropagation()}mv.FileUpload=F1;var D1="data:image/svg+xml,%3csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",H1=D1;function rh({title:e,description:t,withIllustration:r}){const a=se().translate("Polaris.EmptySearchResult.altText"),s=t?o.createElement("p",null,t):null,i=r?o.createElement(Fr,{alt:a,source:H1,draggable:!1}):null;return o.createElement(_r,{alignment:"center",vertical:!0},i,o.createElement(G,{variant:"headingLg",as:"p"},e),o.createElement(G,{tone:"subdued",as:"span"},s))}var zn={ImageContainer:"Polaris-EmptyState__ImageContainer",Image:"Polaris-EmptyState__Image",loaded:"Polaris-EmptyState--loaded",imageContained:"Polaris-EmptyState--imageContained",SkeletonImageContainer:"Polaris-EmptyState__SkeletonImageContainer",SkeletonImage:"Polaris-EmptyState__SkeletonImage"};function B1({children:e,heading:t,image:r,largeImage:n,imageContained:a,fullWidth:s=!1,action:i,secondaryAction:l,footerContent:c}){const[u,d]=m.useState(!1),h=m.useCallback(()=>{d(!0)},[]),f=T(zn.Image,u&&zn.loaded,a&&zn.imageContained),p=n?o.createElement(Fr,{alt:"",role:"presentation",source:n,className:f,sourceSet:[{source:r,descriptor:"568w"},{source:n,descriptor:"1136w"}],sizes:"(max-width: 568px) 60vw",onLoad:h}):o.createElement(Fr,{alt:"",role:"presentation",className:f,source:r,onLoad:h}),g=T(zn.SkeletonImage,u&&zn.loaded),b=T(zn.ImageContainer,!u&&zn.SkeletonImageContainer),y=o.createElement("div",{className:b},p,o.createElement("div",{className:g})),v=l?Er(l,{}):null,E=c?o.createElement(te,{paddingBlockStart:"400"},o.createElement(G,{as:"span",alignment:"center",variant:"bodySm"},c)):null,S=i?Er(i,{variant:"primary",size:"medium"}):null,_=t?o.createElement(te,{paddingBlockEnd:"150"},o.createElement(G,{variant:"headingMd",as:"p",alignment:"center"},t)):null,R=e?o.createElement(G,{as:"span",alignment:"center",variant:"bodySm"},e):null,x=_||e?o.createElement(te,{paddingBlockEnd:"400"},_,R):null,C=S||v?o.createElement(de,{align:"center",gap:"200"},v,S):null,w=x||C||E?o.createElement(te,{maxWidth:s?"100%":"400px"},o.createElement(rt,{inlineAlign:"center"},x,C,E)):null;return o.createElement(te,{paddingInlineStart:"0",paddingInlineEnd:"0",paddingBlockStart:"500",paddingBlockEnd:"1600"},o.createElement(rt,{inlineAlign:"center"},y,w))}var Gn={ExceptionList:"Polaris-ExceptionList",Item:"Polaris-ExceptionList__Item",Icon:"Polaris-ExceptionList__Icon",statusWarning:"Polaris-ExceptionList--statusWarning",statusCritical:"Polaris-ExceptionList--statusCritical",Bullet:"Polaris-ExceptionList__Bullet",Title:"Polaris-ExceptionList__Title",Description:"Polaris-ExceptionList__Description"},W1={Truncate:"Polaris-Truncate"};function gv({children:e}){return o.createElement("span",{className:W1.Truncate},e)}function U1({items:e}){const t=e.map((r,n)=>{const{status:a,icon:s,title:i,description:l,truncate:c=!1}=r,u=T(Gn.Item,a&&Gn[Be("status",a)]),d=s?o.createElement(le,{source:s}):o.createElement("span",{className:Gn.Bullet}),h=i&&o.createElement("span",{className:Gn.Title},i),f=l&&o.createElement("span",{className:Gn.Description},l),p=c?gv:m.Fragment;return o.createElement("li",{className:u,key:n},o.createElement("span",{className:Gn.Icon},d),o.createElement(p,null,h,f))});return o.createElement("ul",{className:Gn.ExceptionList},t)}var Qt={Container:"Polaris-Filters__Container",SearchField:"Polaris-Filters__SearchField",FiltersWrapper:"Polaris-Filters__FiltersWrapper",hideQueryField:"Polaris-Filters--hideQueryField",FiltersInner:"Polaris-Filters__FiltersInner",AddFilter:"Polaris-Filters__AddFilter",FiltersWrapperWithAddButton:"Polaris-Filters__FiltersWrapperWithAddButton",AddFilterActivatorMultiple:"Polaris-Filters__AddFilterActivatorMultiple",FiltersStickyArea:"Polaris-Filters__FiltersStickyArea",ClearAll:"Polaris-Filters__ClearAll",MultiplePinnedFilterClearAll:"Polaris-Filters__MultiplePinnedFilterClearAll"};function j1({onChange:e,onClear:t,onFocus:r,onBlur:n,focused:a,value:s,placeholder:i,disabled:l,borderlessQueryField:c,loading:u,selectedViewName:d}){const h=se(),f=m.useId(),{mdUp:p}=Ca(),g=s&&d&&p?o.createElement(G,{as:"span",variant:"bodyMd",tone:"subdued"},h.translate("Polaris.Filters.searchInView",{viewName:d})):null;function b(v){e(v??s)}function y(){t?t():e("")}return o.createElement(Nn,{id:f,value:s,onChange:b,onFocus:r,onBlur:n,onClearButtonClick:y,autoComplete:"off",placeholder:i,disabled:l,variant:c?"borderless":"inherit",size:"slim",prefix:p?o.createElement(le,{source:Zs}):void 0,suffix:g,focused:a,label:i,labelHidden:!0,clearButton:!0,autoSize:!!g,loading:u})}function bv(e,t){const r=o.useRef(e);m.useEffect(()=>{const n=r.current;e!==r.current&&(r.current=e,t(e,n))},[e,t])}var sr={FilterButton:"Polaris-Filters-FilterPill__FilterButton",focusedFilterButton:"Polaris-Filters-FilterPill--focusedFilterButton",ActiveFilterButton:"Polaris-Filters-FilterPill__ActiveFilterButton",PlainButton:"Polaris-Filters-FilterPill__PlainButton",ToggleButton:"Polaris-Filters-FilterPill__ToggleButton",clearButton:"Polaris-Filters-FilterPill--clearButton",IconWrapper:"Polaris-Filters-FilterPill__IconWrapper",PopoverWrapper:"Polaris-Filters-FilterPill__PopoverWrapper",ClearButtonWrapper:"Polaris-Filters-FilterPill__ClearButtonWrapper"};function q1({unsavedChanges:e=!1,filterKey:t,label:r,filter:n,disabled:a,hideClearButton:s,selected:i,initialActive:l,closeOnChildOverlayClick:c,onRemove:u,onClick:d}){const h=se(),f=m.useRef(null),{value:p,setTrue:g,setFalse:b}=Wt(!1),[y,v]=m.useState(l);m.useEffect(()=>{var L,F;const A=f.current;if(!A||!y)return;const O=(L=A.parentElement)==null?void 0:L.parentElement;O&&((F=O.scroll)==null||F.call(O,{left:A.offsetLeft}))},[f,y]);const E=m.useCallback(()=>{n&&v(A=>!A),d&&d(t)},[n,t,d]),S=m.useCallback(()=>{E(),i||u==null||u(t)},[u,i,t,E]),_=()=>{u&&u(t),v(!1)},R=T(sr.FilterButton,i&&sr.ActiveFilterButton,y&&sr.FocusFilterButton,p&&sr.focusedFilterButton),x=T(sr.PlainButton,sr.clearButton),C=T(sr.PlainButton,sr.ToggleButton),w=i?null:o.createElement("div",{className:sr.IconWrapper},o.createElement(le,{source:Qs,tone:"base"})),P=o.createElement(te,{paddingInlineStart:e?"0":"050"},o.createElement(de,null,o.createElement(G,{variant:"bodySm",as:"span"},r))),$=e?o.createElement(te,{paddingInlineEnd:"150"},o.createElement(te,{background:"bg-fill-emphasis",borderRadius:"050",width:"6px",minHeight:"6px"})):null,N=i?o.createElement(rr,{onClick:_,className:x,type:"button","aria-label":h.translate("Polaris.FilterPill.clear")},o.createElement("div",{className:sr.IconWrapper},o.createElement(le,{source:pa,tone:"base"}))):null,M=o.createElement("div",{className:R},o.createElement(de,{gap:"0",wrap:!1},o.createElement(rr,{onFocus:g,onBlur:b,onClick:E,className:C,type:"button",accessibilityLabel:e?h.translate("Polaris.FilterPill.unsavedChanges",{label:r}):r},o.createElement(de,{wrap:!1,align:"center",blockAlign:"center",gap:"0"},$,P,w)),N)),k=!s&&o.createElement("div",{className:sr.ClearButtonWrapper},o.createElement(ye,{onClick:_,variant:"plain",disabled:!i,textAlign:"left"},h.translate("Polaris.FilterPill.clear")));return a?null:o.createElement("div",{ref:f},o.createElement(nt,{active:y,activator:M,key:t,onClose:S,preferredAlignment:"left",preventCloseOnChildOverlayClick:!c},o.createElement("div",{className:sr.PopoverWrapper},o.createElement(nt.Section,null,o.createElement(rt,{gap:"100"},n,k)))))}function V1({filters:e,appliedFilters:t,onClearAll:r,disabled:n,hideQueryField:a,disableFilters:s,mountedStateStyles:i,onAddFilterClick:l,closeOnChildOverlayClick:c,children:u}){const d=se(),[h,f]=m.useState(!1),p=m.useRef(!1);m.useEffect(()=>{p.current=!0});const g=()=>f(I=>!I),b=()=>{l==null||l(),g()},y=t==null?void 0:t.map(({key:I})=>I),v=e.filter(({pinned:I})=>I).map(({key:I})=>I),E=e.filter(({pinned:I,key:D})=>!!I||(y==null?void 0:y.includes(D))),[S,_]=m.useState(E.map(({key:I})=>I));bv(e.length,()=>{_(E.map(({key:I})=>I))});const R=S.map(I=>e.find(D=>D.key===I)).reduce((I,D)=>D?[...I,D]:I,[]),x=({key:I,onAction:D})=>()=>{setTimeout(()=>{_(B=>[...new Set([...B,I])]),D==null||D(),g()},0)},C=I=>({...I,content:I.label,onAction:x(I)}),w=e.filter(I=>!R.some(({key:D})=>D===I.key)),P=w.filter(I=>!I.section&&!I.hidden).map(C),$=w.filter(I=>I.section).reduce((I,D)=>{const B=C(D),U=I.findIndex(V=>V.title===D.section);return U===-1?I.push({title:D.section,items:[B]}):I[U].items.push(B),I},[]),N=R.length>=1,M=o.createElement("div",null,o.createElement(rr,{type:"button",className:Qt.AddFilter,onClick:b,"aria-label":d.translate("Polaris.Filters.addFilter"),disabled:n||P.length===0&&$.length===0||s},o.createElement(G,{as:"span",variant:"bodySm",tone:n?"disabled":"base"},d.translate("Polaris.Filters.addFilter")," "),o.createElement(jd,null))),k=()=>{_(v),r==null||r()},A=e.some(I=>!I.pinned)||e.length!==S.length,O=R.map(({key:I,...D})=>{const B=t==null?void 0:t.find(({key:V})=>V===I),U=()=>{_(V=>V.filter(W=>{const H=W===I,Y=v.includes(W);return!H||Y})),B==null||B.onRemove(I)};return o.createElement(q1,Object.assign({key:I},D,{initialActive:p.current&&!D.pinned&&!B,unsavedChanges:B==null?void 0:B.unsavedChanges,label:(B==null?void 0:B.label)||D.label,filterKey:I,selected:y==null?void 0:y.includes(I),onRemove:U,disabled:D.disabled||s,closeOnChildOverlayClick:c}))}),L=A?o.createElement("div",{className:T(Qt.AddFilterActivator,N&&Qt.AddFilterActivatorMultiple)},o.createElement(nt,{active:h&&!n,activator:M,onClose:g},o.createElement(an,{actionRole:"menuitem",items:P,sections:$}))):null,F=t!=null&&t.length?o.createElement("div",{className:T(Qt.ClearAll,N&&A&&Qt.MultiplePinnedFilterClearAll)},o.createElement(ye,{size:"micro",onClick:k,variant:"monochromePlain"},d.translate("Polaris.Filters.clearFilters"))):null;return o.createElement("div",{className:T(Qt.FiltersWrapper,A&&N&&Qt.FiltersWrapperWithAddButton),"aria-live":"polite",style:i},o.createElement("div",{className:T(Qt.FiltersInner)},o.createElement("div",{className:T(Qt.FiltersStickyArea)},O,L,F)),a?o.createElement(te,{paddingInlineEnd:"300",paddingBlockStart:"200",paddingBlockEnd:"200"},o.createElement(de,{align:"start",blockAlign:"center",gap:{xs:"400",md:"300"}},u)):null)}const Xu="var(--p-motion-duration-150)",Zi="-36px",K1={transition:`opacity ${Xu} var(--p-motion-ease)`,opacity:0},z1={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}},G1={transition:`opacity ${Xu} var(--p-motion-ease), margin ${Xu} var(--p-motion-ease)`,opacity:0,marginTop:Zi},J1={entering:{opacity:1,marginTop:0},entered:{opacity:1,marginTop:0},exiting:{opacity:0,marginTop:Zi},exited:{opacity:0,marginTop:Zi},unmounted:{opacity:0,marginTop:Zi}};function yv({queryValue:e,queryPlaceholder:t,focused:r,filters:n,appliedFilters:a,onQueryChange:s,onQueryClear:i,onQueryBlur:l,onQueryFocus:c,onClearAll:u,children:d,disabled:h,hideFilters:f,hideQueryField:p,disableQueryField:g,borderlessQueryField:b,loading:y,disableFilters:v,mountedState:E,onAddFilterClick:S,closeOnChildOverlayClick:_,selectedViewName:R}){const x=f||n.length===0,C=p?null:o.createElement("div",{className:Qt.Container},o.createElement(te,{padding:"200"},o.createElement(de,{align:"start",blockAlign:"center",gap:{xs:"400",md:"300"}},o.createElement("div",{className:Qt.SearchField,style:E?{...K1,...z1[E]}:void 0},o.createElement(j1,{onChange:s,onFocus:c,onBlur:l,onClear:i,value:e,placeholder:t,focused:r,disabled:h||g,borderlessQueryField:b,loading:y,selectedViewName:R})),d))),w=E&&!p?{...G1,...J1[E]}:void 0,P=x?null:o.createElement(V1,{filters:n,appliedFilters:a,onClearAll:u,disabled:h,hideQueryField:p,disableFilters:v,onAddFilterClick:S,closeOnChildOverlayClick:_,mountedStateStyles:w},d);return o.createElement("div",{className:T(Qt.Filters,p&&Qt.hideQueryField)},C,P)}const nh=m.memo(function({children:t,disabled:r,root:n}){return m.useEffect(()=>{if(r||!n)return;const a=X1(n)?n.current:n;!a||a.querySelector("[autofocus]")||Bt(a,!1)},[r,n]),o.createElement(o.Fragment,null,t)});function X1(e){return e.current!==void 0}var Y1={FooterHelp:"Polaris-FooterHelp"};function Z1({children:e,align:t="center"}){const r={"--pc-footer-help-align":t};return o.createElement("div",{className:Y1.FooterHelp,style:r},o.createElement(G,{as:"p",variant:"bodyLg"},e))}function si({acceptCharset:e,action:t,autoComplete:r,children:n,encType:a,implicitSubmit:s=!0,method:i="post",name:l,noValidate:c,preventDefault:u=!0,target:d,onSubmit:h}){const f=se(),p=m.useCallback(y=>{u&&(y.preventDefault(),h(y))},[h,u]),g=Q1(r),b=s?o.createElement(G,{as:"span",visuallyHidden:!0},o.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},f.translate("Polaris.Common.submit"))):null;return o.createElement("form",{acceptCharset:e,action:t,autoComplete:g,encType:a,method:i,name:l,noValidate:c,target:d,onSubmit:p},b,n)}function Q1(e){return e==null?e:e?"on":"off"}function bo(){return bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bo.apply(this,arguments)}function ah(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Yu(e,t){return Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yu(e,t)}function sh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Yu(e,t)}function eR(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function tR(e,t){e.classList?e.classList.add(t):eR(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Tp(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function rR(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Tp(e.className,t):e.setAttribute("class",Tp(e.className&&e.className.baseVal||"",t))}const Rp={disabled:!1},yo=o.createContext(null);var vv=function(t){return t.scrollTop},Ls="unmounted",ea="exited",ta="entering",Ha="entered",Zu="exiting",sn=function(e){sh(t,e);function t(n,a){var s;s=e.call(this,n,a)||this;var i=a,l=i&&!i.isMounting?n.enter:n.appear,c;return s.appearStatus=null,n.in?l?(c=ea,s.appearStatus=ta):c=Ha:n.unmountOnExit||n.mountOnEnter?c=Ls:c=ea,s.state={status:c},s.nextCallback=null,s}t.getDerivedStateFromProps=function(a,s){var i=a.in;return i&&s.status===Ls?{status:ea}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(a){var s=null;if(a!==this.props){var i=this.state.status;this.props.in?i!==ta&&i!==Ha&&(s=ta):(i===ta||i===Ha)&&(s=Zu)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var a=this.props.timeout,s,i,l;return s=i=l=a,a!=null&&typeof a!="number"&&(s=a.exit,i=a.enter,l=a.appear!==void 0?a.appear:i),{exit:s,enter:i,appear:l}},r.updateStatus=function(a,s){if(a===void 0&&(a=!1),s!==null)if(this.cancelNextCallback(),s===ta){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Ai.findDOMNode(this);i&&vv(i)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ea&&this.setState({status:Ls})},r.performEnter=function(a){var s=this,i=this.props.enter,l=this.context?this.context.isMounting:a,c=this.props.nodeRef?[l]:[Ai.findDOMNode(this),l],u=c[0],d=c[1],h=this.getTimeouts(),f=l?h.appear:h.enter;if(!a&&!i||Rp.disabled){this.safeSetState({status:Ha},function(){s.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:ta},function(){s.props.onEntering(u,d),s.onTransitionEnd(f,function(){s.safeSetState({status:Ha},function(){s.props.onEntered(u,d)})})})},r.performExit=function(){var a=this,s=this.props.exit,i=this.getTimeouts(),l=this.props.nodeRef?void 0:Ai.findDOMNode(this);if(!s||Rp.disabled){this.safeSetState({status:ea},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Zu},function(){a.props.onExiting(l),a.onTransitionEnd(i.exit,function(){a.safeSetState({status:ea},function(){a.props.onExited(l)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(a,s){s=this.setNextCallback(s),this.setState(a,s)},r.setNextCallback=function(a){var s=this,i=!0;return this.nextCallback=function(l){i&&(i=!1,s.nextCallback=null,a(l))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},r.onTransitionEnd=function(a,s){this.setNextCallback(s);var i=this.props.nodeRef?this.props.nodeRef.current:Ai.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!i||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var a=this.state.status;if(a===Ls)return null;var s=this.props,i=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var l=ah(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o.createElement(yo.Provider,{value:null},typeof i=="function"?i(a,l):o.cloneElement(o.Children.only(i),l))},t}(o.Component);sn.contextType=yo;sn.propTypes={};function Na(){}sn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Na,onEntering:Na,onEntered:Na,onExit:Na,onExiting:Na,onExited:Na};sn.UNMOUNTED=Ls;sn.EXITED=ea;sn.ENTERING=ta;sn.ENTERED=Ha;sn.EXITING=Zu;const Ks=sn;var nR=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return tR(t,n)})},Fc=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return rR(t,n)})},Mn=function(e){sh(t,e);function t(){for(var n,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=e.call.apply(e,[this].concat(s))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(l,c){var u=n.resolveArguments(l,c),d=u[0],h=u[1];n.removeClasses(d,"exit"),n.addClass(d,h?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(l,c)},n.onEntering=function(l,c){var u=n.resolveArguments(l,c),d=u[0],h=u[1],f=h?"appear":"enter";n.addClass(d,f,"active"),n.props.onEntering&&n.props.onEntering(l,c)},n.onEntered=function(l,c){var u=n.resolveArguments(l,c),d=u[0],h=u[1],f=h?"appear":"enter";n.removeClasses(d,f),n.addClass(d,f,"done"),n.props.onEntered&&n.props.onEntered(l,c)},n.onExit=function(l){var c=n.resolveArguments(l),u=c[0];n.removeClasses(u,"appear"),n.removeClasses(u,"enter"),n.addClass(u,"exit","base"),n.props.onExit&&n.props.onExit(l)},n.onExiting=function(l){var c=n.resolveArguments(l),u=c[0];n.addClass(u,"exit","active"),n.props.onExiting&&n.props.onExiting(l)},n.onExited=function(l){var c=n.resolveArguments(l),u=c[0];n.removeClasses(u,"exit"),n.addClass(u,"exit","done"),n.props.onExited&&n.props.onExited(l)},n.resolveArguments=function(l,c){return n.props.nodeRef?[n.props.nodeRef.current,l]:[l,c]},n.getClassNames=function(l){var c=n.props.classNames,u=typeof c=="string",d=u&&c?c+"-":"",h=u?""+d+l:c[l],f=u?h+"-active":c[l+"Active"],p=u?h+"-done":c[l+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:p}},n}var r=t.prototype;return r.addClass=function(a,s,i){var l=this.getClassNames(s)[i+"ClassName"],c=this.getClassNames("enter"),u=c.doneClassName;s==="appear"&&i==="done"&&u&&(l+=" "+u),i==="active"&&a&&vv(a),l&&(this.appliedClasses[s][i]=l,nR(a,l))},r.removeClasses=function(a,s){var i=this.appliedClasses[s],l=i.base,c=i.active,u=i.done;this.appliedClasses[s]={},l&&Fc(a,l),c&&Fc(a,c),u&&Fc(a,u)},r.render=function(){var a=this.props;a.classNames;var s=ah(a,["classNames"]);return o.createElement(Ks,bo({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o.Component);Mn.defaultProps={classNames:""};Mn.propTypes={};function aR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ih(e,t){var r=function(s){return t&&m.isValidElement(s)?t(s):s},n=Object.create(null);return e&&m.Children.map(e,function(a){return a}).forEach(function(a){n[a.key]=r(a)}),n}function sR(e,t){e=e||{},t=t||{};function r(d){return d in t?t[d]:e[d]}var n=Object.create(null),a=[];for(var s in e)s in t?a.length&&(n[s]=a,a=[]):a.push(s);var i,l={};for(var c in t){if(n[c])for(i=0;i<n[c].length;i++){var u=n[c][i];l[n[c][i]]=r(u)}l[c]=r(c)}for(i=0;i<a.length;i++)l[a[i]]=r(a[i]);return l}function ca(e,t,r){return r[t]!=null?r[t]:e.props[t]}function iR(e,t){return ih(e.children,function(r){return m.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:ca(r,"appear",e),enter:ca(r,"enter",e),exit:ca(r,"exit",e)})})}function oR(e,t,r){var n=ih(e.children),a=sR(t,n);return Object.keys(a).forEach(function(s){var i=a[s];if(m.isValidElement(i)){var l=s in t,c=s in n,u=t[s],d=m.isValidElement(u)&&!u.props.in;c&&(!l||d)?a[s]=m.cloneElement(i,{onExited:r.bind(null,i),in:!0,exit:ca(i,"exit",e),enter:ca(i,"enter",e)}):!c&&l&&!d?a[s]=m.cloneElement(i,{in:!1}):c&&l&&m.isValidElement(u)&&(a[s]=m.cloneElement(i,{onExited:r.bind(null,i),in:u.props.in,exit:ca(i,"exit",e),enter:ca(i,"enter",e)}))}}),a}var lR=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},cR={component:"div",childFactory:function(t){return t}},oh=function(e){sh(t,e);function t(n,a){var s;s=e.call(this,n,a)||this;var i=s.handleExited.bind(aR(s));return s.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},s}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,s){var i=s.children,l=s.handleExited,c=s.firstRender;return{children:c?iR(a,l):oR(a,i,l),firstRender:!1}},r.handleExited=function(a,s){var i=ih(this.props.children);a.key in i||(a.props.onExited&&a.props.onExited(s),this.mounted&&this.setState(function(l){var c=bo({},l.children);return delete c[a.key],{children:c}}))},r.render=function(){var a=this.props,s=a.component,i=a.childFactory,l=ah(a,["component","childFactory"]),c=this.state.contextValue,u=lR(this.state.children).map(i);return delete l.appear,delete l.enter,delete l.exit,s===null?o.createElement(yo.Provider,{value:c},u):o.createElement(yo.Provider,{value:c},o.createElement(s,l,u))},t}(o.Component);oh.propTypes={};oh.defaultProps=cR;const Ev=oh;function Qu(e,t,r){if(!document)return;(r||document.documentElement).style.setProperty(e,t)}var Ze={Frame:"Polaris-Frame",Navigation:"Polaris-Frame__Navigation",hasTopBar:"Polaris-Frame--hasTopBar","Navigation-enter":"Polaris-Frame__Navigation--enter","Navigation-enterActive":"Polaris-Frame__Navigation--enterActive","Navigation-exit":"Polaris-Frame__Navigation--exit","Navigation-exitActive":"Polaris-Frame__Navigation--exitActive",NavigationDismiss:"Polaris-Frame__NavigationDismiss","Navigation-visible":"Polaris-Frame__Navigation--visible",TopBar:"Polaris-Frame__TopBar",ContextualSaveBar:"Polaris-Frame__ContextualSaveBar",Main:"Polaris-Frame__Main",hasNav:"Polaris-Frame--hasNav",Content:"Polaris-Frame__Content",hasSidebar:"Polaris-Frame--hasSidebar",GlobalRibbonContainer:"Polaris-Frame__GlobalRibbonContainer",LoadingBar:"Polaris-Frame__LoadingBar",Skip:"Polaris-Frame__Skip",focused:"Polaris-Frame--focused",pressed:"Polaris-Frame--pressed"};function uR(){const e=m.useRef(!1);return m.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var kp={Loading:"Polaris-Frame-Loading",Level:"Polaris-Frame-Loading__Level"};const xp=99;function dR(){const e=se(),t=uR(),[r,n]=m.useState(0),[a,s]=m.useState(!1);m.useEffect(()=>{r>=xp||a||requestAnimationFrame(()=>{if(!t.current)return;const l=Math.max((xp-r)/10,1);s(!0),n(r+l)})},[r,a,t]);const i={transform:`scaleX(${Math.floor(r)/100})`};return o.createElement("div",{className:kp.Loading,"aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":e.translate("Polaris.Loading.label")},o.createElement("div",{className:kp.Level,style:i,onTransitionEnd:()=>s(!1)}))}var Ip={startFade:"Polaris-Frame-CSSAnimation--startFade",endFade:"Polaris-Frame-CSSAnimation--endFade"},or;(function(e){e.Entering="entering",e.Entered="entered",e.Exiting="exiting",e.Exited="exited"})(or||(or={}));function hR({in:e,className:t,type:r,children:n}){const[a,s]=m.useState(e?or.Entering:or.Exited),i=m.useRef(!1),l=m.useRef(null);m.useEffect(()=>{i.current&&a===or.Entering&&h(or.Entered)},[a]),m.useEffect(()=>{i.current&&(e&&h(or.Entering),!e&&h(or.Exiting))},[e]),m.useEffect(()=>{i.current=!0},[]);const c=T(t,Ip[Be("start",r)],e&&Ip[Be("end",r)]),u=a===or.Exited&&!e?null:n;return o.createElement("div",{className:c,ref:l,onTransitionEnd:d},u);function d(){a===or.Exiting&&h(or.Exited)}function h(f){s(f),f===or.Entering&&l.current&&l.current.getBoundingClientRect()}}function Sv(e,t){if(!e)return null;const r=Object.keys(e);for(const n of r){if(n===t)return e[t];if(C_(e[n])){const a=Sv(e[n],t);if(a)return a}}return null}function lh(e={},t=0,r="width"){const n=typeof e=="number"?e:Sv(e,r);return n?`${n}px`:`${t}px`}var Jn={ContextualSaveBar:"Polaris-Frame-ContextualSaveBar",LogoContainer:"Polaris-Frame-ContextualSaveBar__LogoContainer",ContextControl:"Polaris-Frame-ContextualSaveBar__ContextControl",Contents:"Polaris-Frame-ContextualSaveBar__Contents",fullWidth:"Polaris-Frame-ContextualSaveBar--fullWidth",MessageContainer:"Polaris-Frame-ContextualSaveBar__MessageContainer",ActionContainer:"Polaris-Frame-ContextualSaveBar__ActionContainer",Action:"Polaris-Frame-ContextualSaveBar__Action"},Dc={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},$p={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function _v({children:e,flush:t=!1,subdued:r=!1,titleHidden:n=!1}){const a=T($p.Section,n&&$p.titleHidden);return o.createElement("div",{className:a},o.createElement(te,Object.assign({as:"section",padding:t?"0":"400"},n&&{paddingInlineEnd:"0"},r&&{background:"bg-surface-tertiary"}),e))}var St={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function fR({trapping:e}){const t=m.useContext(aC),r=m.useId();if(!t)throw new Rd("No FocusManager was provided.");const{trapFocusList:n,add:a,remove:s}=t,i=n[0]===r,l=m.useMemo(()=>({canSafelyFocus:i}),[i]);return m.useEffect(()=>{if(e)return a(r),()=>{s(r)}},[a,r,s,e]),l}function Zo({trapping:e=!0,children:t}){const{canSafelyFocus:r}=fR({trapping:e}),n=m.useRef(null),[a,s]=m.useState(!0);m.useEffect(()=>{const c=r&&!(n.current&&n.current.contains(document.activeElement))?!e:!0;s(c)},[r,e]);const i=c=>{const u=n.current&&n.current.contains(document.activeElement);e===!1||!n.current||u||c.target instanceof Element&&c.target.matches(`${w_.selector} *`)||r&&c.target instanceof HTMLElement&&n.current!==c.target&&!n.current.contains(c.target)&&Bt(n.current)},l=c=>{if(e===!1||!n.current)return;const u=P_(n.current),d=A_(n.current);c.target===d&&!c.shiftKey&&(c.preventDefault(),T_(n.current)),c.target===u&&c.shiftKey&&(c.preventDefault(),R_(n.current))};return o.createElement(nh,{disabled:a,root:n.current},o.createElement("div",{ref:n},o.createElement($t,{event:"focusin",handler:i}),o.createElement(vr,{keyCode:it.Tab,keyEvent:"keydown",handler:l}),t))}function pR({instant:e,labelledBy:t,children:r,limitHeight:n,size:a,onClose:s,onExited:i,onEntered:l,setClosing:c,hasToasts:u,...d}){const h=ei(),f=m.useRef(null),p=m.useContext(ai);let g;p&&(g=p.toastMessages);const b=T(St.Modal,a&&St[Be("size",a)],n&&St.limitHeight),y=e?Ks:gR;m.useEffect(()=>{f.current&&!f.current.contains(document.activeElement)&&Bt(f.current)},[]);const v=()=>{c&&c(!0)},E=()=>{c&&c(!1),s()},S=o.createElement("div",{"aria-live":"assertive"},g?g.map(_=>o.createElement(G,{visuallyHidden:!0,as:"p",key:_.id},_.content)):null);return o.createElement(y,Object.assign({},d,{nodeRef:f,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(h.motion["motion-duration-200"],10),onEntered:l,onExited:i}),o.createElement("div",{className:St.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:f},o.createElement(Zo,null,o.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:St.Dialog},o.createElement("div",{className:b},o.createElement(vr,{keyCode:it.Escape,keyEvent:"keydown",handler:v}),o.createElement(vr,{keyCode:it.Escape,handler:E}),r),S))))}const mR={appear:T(St.animateFadeUp,St.entering),appearActive:T(St.animateFadeUp,St.entered),enter:T(St.animateFadeUp,St.entering),enterActive:T(St.animateFadeUp,St.entered),exit:T(St.animateFadeUp,St.exiting),exitActive:T(St.animateFadeUp,St.exited)};function gR({children:e,...t}){return o.createElement(Mn,Object.assign({},t,{classNames:mR}),e)}function Np({pressed:e,onClick:t}){const r=se();return o.createElement(ye,{variant:"tertiary",pressed:e,icon:ni,onClick:t,accessibilityLabel:r.translate("Polaris.Common.close")})}function bR({id:e,children:t,closing:r,titleHidden:n,onClose:a}){const s="400",i="400";return n||!t?o.createElement(te,{position:"absolute",insetInlineEnd:s,insetBlockStart:i,zIndex:"1"},o.createElement(Np,{onClick:a})):o.createElement(te,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:s,paddingInlineEnd:s,borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},o.createElement(go,{columns:{xs:"1fr auto"},gap:"400"},o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(G,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),o.createElement(Np,{pressed:r,onClick:a})))}function yR({primaryAction:e,secondaryActions:t,children:r}){const n=e&&nn(e,{variant:"primary"})||null,a=t&&nn(t)||null,s=n||a?o.createElement(de,{gap:"200"},a,n):null;return o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(te,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},o.createElement(de,{gap:"400",blockAlign:"center",align:"space-between"},o.createElement(te,null,r),s)))}const Op=200,vR=400,nr=function({children:t,title:r,titleHidden:n=!1,src:a,iFrameName:s,open:i,instant:l,sectioned:c,loading:u,size:d,limitHeight:h,footer:f,primaryAction:p,secondaryActions:g,onScrolledToBottom:b,activator:y,activatorWrapper:v="div",onClose:E,onIFrameLoad:S,onTransitionEnd:_,noScroll:R}){const[x,C]=m.useState(Op),[w,P]=m.useState(!1),$=m.useId(),N=m.useRef(null),k=se().translate("Polaris.Modal.iFrameTitle");let A,O;const L=m.useCallback(()=>{_&&_()},[_]),F=m.useCallback(()=>{C(Op);const U=y&&Lp(y)?y&&y.current:N.current;U&&requestAnimationFrame(()=>Bt(U))},[y]),I=m.useCallback(U=>{const V=U.target;if(V&&V.contentWindow)try{C(V.contentWindow.document.body.scrollHeight)}catch{C(vR)}S!=null&&S(U)},[S]);if(i){const U=!f&&!p&&!g?null:o.createElement(yR,{primaryAction:p,secondaryActions:g},f),V=c?Bb(t,_v,{titleHidden:n}):t,W=u?o.createElement(te,{padding:"400"},o.createElement(de,{gap:"400",align:"center",blockAlign:"center"},o.createElement(ha,null))):V,H=R?o.createElement("div",{className:Dc.NoScrollBody},o.createElement(te,{width:"100%",overflowX:"hidden",overflowY:"hidden"},W)):o.createElement(Ga,{shadow:!0,className:Dc.Body,onScrolledToBottom:b},W),Y=a?o.createElement("iframe",{name:s,title:k,src:a,className:Dc.IFrame,onLoad:I,style:{height:`${x}px`}}):H;A=o.createElement(pR,{instant:l,labelledBy:$,onClose:E,onEntered:L,onExited:F,size:d,limitHeight:h,setClosing:P},o.createElement(bR,{titleHidden:n,id:$,closing:w,onClose:E},r),Y,U),O=o.createElement(Jo,{setClosing:P,onClick:E})}const D=!l,B=y&&!Lp(y)?o.createElement(te,{ref:N,as:v},y):null;return o.createElement(ts.Provider,{value:!0},B,o.createElement(Ho,{idPrefix:"modal"},o.createElement(Ev,{appear:D,enter:D,exit:D},A),O))};function Lp(e){return Object.prototype.hasOwnProperty.call(e,"current")}nr.Section=_v;function ER({open:e,onDiscard:t,onCancel:r}){const n=se();return o.createElement(nr,{title:n.translate("Polaris.DiscardConfirmationModal.title"),open:e,onClose:r,primaryAction:{content:n.translate("Polaris.DiscardConfirmationModal.primaryAction"),destructive:!0,onAction:t},secondaryActions:[{content:n.translate("Polaris.DiscardConfirmationModal.secondaryAction"),onAction:r}],sectioned:!0},n.translate("Polaris.DiscardConfirmationModal.message"))}function SR({alignContentFlush:e,message:t,saveAction:r,discardAction:n,fullWidth:a,contextControl:s,secondaryMenu:i}){const l=se(),{logo:c}=wa(),{value:u,toggle:d,setFalse:h}=Wt(!1),f=m.useCallback(()=>{n&&n.onAction&&n.onAction(),h()},[h,n]),p=n&&n.content?n.content:l.translate("Polaris.ContextualSaveBar.discard");let g;n&&n.discardConfirmationModal?g=d:n&&(g=n.onAction);const b=n&&n.onAction&&n.discardConfirmationModal&&o.createElement(ER,{open:u,onCancel:d,onDiscard:f}),y=n&&o.createElement(ye,{variant:"tertiary",size:"large",url:n.url,onClick:g,loading:n.loading,disabled:n.disabled,accessibilityLabel:n.content},p),v=r&&r.content?r.content:l.translate("Polaris.ContextualSaveBar.save"),E=r&&o.createElement(ye,{variant:"primary",tone:"success",size:"large",url:r.url,onClick:r.onAction,loading:r.loading,disabled:r.disabled,accessibilityLabel:r.content},v),S=lh(c,104),_=c&&o.createElement(Fr,{style:{width:S},source:c.contextualSaveBarSource||"",alt:""}),R=e||s?null:o.createElement("div",{className:Jn.LogoContainer,style:{width:S}},_),x=s?o.createElement("div",{className:Jn.ContextControl},s):null,C=T(Jn.Contents,a&&Jn.fullWidth);return o.createElement(o.Fragment,null,o.createElement("div",{className:Jn.ContextualSaveBar},x,R,o.createElement("div",{className:C},o.createElement("div",{className:Jn.MessageContainer},o.createElement(le,{source:Bd}),t&&o.createElement(G,{as:"h2",variant:"headingMd",tone:"text-inverse",truncate:!0},t)),o.createElement("div",{className:Jn.ActionContainer},o.createElement(_r,{spacing:"tight",wrap:!1},i,y,E)))),b)}function Cv(e,t=wn){const r=m.useRef(e);return t(r.current,e)||(r.current=e),r.current}function ch(e,t,r){m.useEffect(e,Cv(t,r))}function _R(e,t,r){return m.useCallback(e,Cv(t,r))}var ra={ToastManager:"Polaris-Frame-ToastManager",ToastWrapper:"Polaris-Frame-ToastManager__ToastWrapper","ToastWrapper-enter":"Polaris-Frame-ToastManager__ToastWrapper--enter","ToastWrapper-exit":"Polaris-Frame-ToastManager__ToastWrapper--exit","ToastWrapper-enter-done":"Polaris-Frame-ToastManager--toastWrapperEnterDone","ToastWrapper--hoverable":"Polaris-Frame-ToastManager--toastWrapperHoverable"},cn={Toast:"Polaris-Frame-Toast",Action:"Polaris-Frame-Toast__Action",error:"Polaris-Frame-Toast--error",CloseButton:"Polaris-Frame-Toast__CloseButton",LeadingIcon:"Polaris-Frame-Toast__LeadingIcon",toneMagic:"Polaris-Frame-Toast--toneMagic",WithActionOnComponent:"Polaris-Frame-Toast__WithActionOnComponent"};const wv=5e3,ed=1e4;function CR({content:e,onDismiss:t,duration:r,error:n,action:a,tone:s,onClick:i,icon:l,isHovered:c}){const d=a&&!r?ed:r||wv,h=m.useRef(d),f=m.useRef(null),p=m.useRef(null);m.useEffect(()=>{function E(){f.current=Date.now(),p.current=setTimeout(()=>{t()},h.current)}function S(){f.current&&(h.current-=Date.now()-f.current),p.current&&clearTimeout(p.current),p.current=null}return c?S():E(),()=>{p.current&&clearTimeout(p.current)}},[c,t]),m.useEffect(()=>{a&&r&&r<ed&&console.log("Toast with action should persist for at least 10,000 milliseconds to give the merchant enough time to act on it.")},[a,r]);const g=o.createElement("button",{type:"button",className:cn.CloseButton,onClick:t},o.createElement(le,{source:pa,tone:"inherit"})),b=a?o.createElement("div",{className:cn.Action},o.createElement(ye,{variant:"monochromePlain",removeUnderline:!0,size:"slim",onClick:a.onAction},a.content)):null;let y=null;n?y=o.createElement("div",{className:cn.LeadingIcon},o.createElement(le,{source:jb,tone:"inherit"})):l&&(y=o.createElement("div",{className:cn.LeadingIcon},o.createElement(le,{source:l,tone:"inherit"})));const v=T(cn.Toast,n&&cn.error,s&&cn[Be("tone",s)]);return!a&&i?o.createElement("button",{"aria-live":"assertive",className:T(v,cn.WithActionOnComponent),type:"button",onClick:i},o.createElement(vr,{keyCode:it.Escape,handler:t}),y,o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(G,Object.assign({as:"span",variant:"bodyMd",fontWeight:"medium"},s==="magic"&&{tone:"magic"}),e))):o.createElement("div",{className:v,"aria-live":"assertive"},o.createElement(vr,{keyCode:it.Escape,handler:t}),y,o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(G,Object.assign({as:"span",variant:"bodyMd",fontWeight:"medium"},s==="magic"&&{tone:"magic"}),e)),b,g)}const wR=10,Mp=30;function PR(e){const t=r=>(r-1)*r/2;return e*wR-t(e)}const AR=m.memo(function({toastMessages:t}){const r=[],[n,a]=m.useState(!1),s=m.useRef(!1),i=m.useRef(null),l=m.useRef(null),c=_R(()=>{const d=t.length-1;t.forEach((h,f)=>{const p=d-f,g=r[f];if(!g.current)return;const b=g.current.clientHeight,y=n?1:.9**p,v=PR(p),E=n?b+(b-8)*p:b+v;g.current.style.setProperty("--pc-toast-manager-translate-y-in",`-${E}px`),g.current.style.setProperty("--pc-toast-manager-scale-in",`${y}`),g.current.style.setProperty("--pc-toast-manager-blur-in",n?"0":`${p*.5}px`),g.current.style.setProperty("--pc-toast-manager-transition-delay-in",`${n?p*Mp:0}ms`),g.current.style.setProperty("--pc-toast-manager-scale-out",`${p===0?.85:y**2}`),g.current.style.setProperty("--pc-toast-manager-translate-y-out",`${-E}px`)})},[t,r,n]);ch(()=>{c(),t.length===0&&a(!1),n?i.current=setTimeout(()=>{s.current=!0},t.length*Mp+400):i.current&&(clearTimeout(i.current),s.current=!1)},[t,n]);const u=t.map((d,h)=>{const f=t.length-h-1,p=m.createRef();r[h]=p;function g(){a(!0)}function b(){s.current&&a(!1)}return o.createElement(Mn,{nodeRef:r[h],key:d.id,timeout:{enter:0,exit:200},classNames:TR},o.createElement("div",{ref:p,onMouseEnter:f>0?g:b},o.createElement("div",{ref:y=>f===0?l.current=y:null},o.createElement(CR,Object.assign({},d,{isHovered:n})))))});return o.createElement(Ho,{idPrefix:"toast"},o.createElement($t,{event:"resize",handler:c}),o.createElement("div",{className:ra.ToastManager,"aria-live":"assertive",onMouseEnter:function(d){var p;const h=d.target,f=(p=l.current)==null?void 0:p.contains(h);a(!f)},onMouseLeave:function(){a(!1)}},o.createElement(Ev,{component:null},u)))}),TR={enter:T(ra.ToastWrapper,ra["ToastWrapper-enter"]),enterDone:T(ra.ToastWrapper,ra["ToastWrapper-enter-done"]),exit:T(ra.ToastWrapper,ra["ToastWrapper-exit"])},Fp="AppFrameMain",RR="AppFrameNav",kR="AppFrameTopBar",xR="AppFrameLoadingBar";class IR extends m.PureComponent{constructor(...t){super(...t),this.state={skipFocused:!1,globalRibbonHeight:0,loadingStack:0,toastMessages:[],showContextualSaveBar:!1},this.contextualSaveBar=null,this.globalRibbonContainer=null,this.navigationNode=m.createRef(),this.setGlobalRibbonHeight=()=>{const{globalRibbonContainer:r}=this;r&&this.setState({globalRibbonHeight:r.offsetHeight},this.setGlobalRibbonRootProperty)},this.setOffset=()=>{const{offset:r="0px"}=this.props;Qu("--pc-frame-offset",r)},this.setGlobalRibbonRootProperty=()=>{const{globalRibbonHeight:r}=this.state;Qu("--pc-frame-global-ribbon-height",`${r}px`)},this.showToast=r=>{this.setState(({toastMessages:n})=>({toastMessages:n.find(({id:s})=>s===r.id)!=null?n:[...n,r]}))},this.hideToast=({id:r})=>{this.setState(({toastMessages:n})=>({toastMessages:n.filter(({id:a})=>r!==a)}))},this.setContextualSaveBar=r=>{const{showContextualSaveBar:n}=this.state;this.contextualSaveBar={...r},n===!0?this.forceUpdate():this.setState({showContextualSaveBar:!0})},this.removeContextualSaveBar=()=>{this.contextualSaveBar=null,this.setState({showContextualSaveBar:!1})},this.startLoading=()=>{this.setState(({loadingStack:r})=>({loadingStack:r+1}))},this.stopLoading=()=>{this.setState(({loadingStack:r})=>({loadingStack:Math.max(0,r-1)}))},this.handleResize=()=>{this.props.globalRibbon&&this.setGlobalRibbonHeight()},this.handleFocus=()=>{this.setState({skipFocused:!0})},this.handleBlur=()=>{this.setState({skipFocused:!1})},this.handleClick=r=>{const{skipToContentTarget:n}=this.props;n&&n.current&&(n.current.focus(),r==null||r.preventDefault())},this.handleNavigationDismiss=()=>{const{onNavigationDismiss:r}=this.props;r!=null&&r()},this.setGlobalRibbonContainer=r=>{this.globalRibbonContainer=r},this.handleNavKeydown=r=>{const{key:n}=r,{mediaQuery:{isNavigationCollapsed:a},showMobileNavigation:s}=this.props;a&&s&&n==="Escape"&&this.handleNavigationDismiss()}}componentDidMount(){this.handleResize(),!this.props.globalRibbon&&(this.setGlobalRibbonRootProperty(),this.setOffset())}componentDidUpdate(t){this.props.globalRibbon!==t.globalRibbon&&this.setGlobalRibbonHeight(),this.setOffset()}render(){const{skipFocused:t,loadingStack:r,toastMessages:n,showContextualSaveBar:a}=this.state,{logo:s,children:i,navigation:l,topBar:c,globalRibbon:u,showMobileNavigation:d=!1,skipToContentTarget:h,i18n:f,sidebar:p,mediaQuery:{isNavigationCollapsed:g}}=this.props,b=T(Ze.Navigation,d&&Ze["Navigation-visible"]),y=g&&!d,v=g&&d,E=v?0:-1,S={...v&&{"aria-modal":!0,role:"dialog"}},_=l?o.createElement(x_,null,L=>o.createElement(Zo,{trapping:v},o.createElement(Mn,{nodeRef:this.navigationNode,appear:g,exit:g,in:d,timeout:parseInt(L.motion["motion-duration-300"],10),classNames:$R},o.createElement("div",Object.assign({key:"NavContent"},S,{"aria-label":f.translate("Polaris.Frame.navigationLabel"),ref:this.navigationNode,className:b,onKeyDown:this.handleNavKeydown,id:RR,hidden:y}),l,o.createElement("button",{type:"button",className:Ze.NavigationDismiss,onClick:this.handleNavigationDismiss,"aria-hidden":y||!g&&!d,"aria-label":f.translate("Polaris.Frame.Navigation.closeMobileNavigationLabel"),tabIndex:E},o.createElement(le,{source:ni})))))):null,R=r>0?o.createElement("div",{className:Ze.LoadingBar,id:xR},o.createElement(dR,null)):null,x=c?o.createElement("div",Object.assign({className:Ze.TopBar},Bu.props,k_.props,{id:kR}),c):null,C=u?o.createElement("div",{className:Ze.GlobalRibbonContainer,ref:this.setGlobalRibbonContainer},u):null,w=T(Ze.Skip,t&&Ze.focused),P=h!=null&&h.current?h.current.id:Fp,$=o.createElement("div",{className:w},o.createElement("a",{href:`#${P}`,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick},o.createElement(G,{as:"span",variant:"bodyLg",fontWeight:"medium"},f.translate("Polaris.Frame.skipToContent")))),N=l?{"data-has-navigation":!0}:{},M=T(Ze.Frame,l&&Ze.hasNav,c&&Ze.hasTopBar,p&&Ze.hasSidebar),k=o.createElement(hR,{in:a,className:Ze.ContextualSaveBar,type:"fade"},o.createElement(SR,this.contextualSaveBar)),A=d&&g?o.createElement(Jo,{belowNavigation:!0,onClick:this.handleNavigationDismiss,onTouchStart:this.handleNavigationDismiss}):null,O={logo:s,showToast:this.showToast,hideToast:this.hideToast,toastMessages:n,startLoading:this.startLoading,stopLoading:this.stopLoading,setContextualSaveBar:this.setContextualSaveBar,removeContextualSaveBar:this.removeContextualSaveBar};return o.createElement(ai.Provider,{value:O},o.createElement("div",Object.assign({className:M},Bu.props,N),$,x,_,k,R,A,o.createElement("main",{className:Ze.Main,id:Fp,"data-has-global-ribbon":!!u},o.createElement("div",{className:Ze.Content},i)),o.createElement(AR,{toastMessages:n}),C,o.createElement($t,{event:"resize",handler:this.handleResize})))}}const $R={enter:T(Ze["Navigation-enter"]),enterActive:T(Ze["Navigation-enterActive"]),enterDone:T(Ze["Navigation-enterActive"]),exit:T(Ze["Navigation-exit"]),exitActive:T(Ze["Navigation-exitActive"])};function NR(e){const t=se(),r=rs();return o.createElement(IR,Object.assign({},e,{i18n:t,mediaQuery:r}))}var Dp={FullscreenBar:"Polaris-FullscreenBar",BackAction:"Polaris-FullscreenBar__BackAction"};function OR({onAction:e,children:t}){const r=se(),n=o.createElement(G,{as:"span",variant:"bodyLg"},r.translate("Polaris.FullscreenBar.back"));return o.createElement("div",{className:Dp.FullscreenBar},o.createElement("button",{className:Dp.BackAction,onClick:e,"aria-label":r.translate("Polaris.FullscreenBar.accessibilityLabel")},o.createElement(le,{source:Wy}),n),t)}var LR={Grid:"Polaris-Grid"},Oa={Cell:"Polaris-Grid-Cell","Cell-1-column-xs":"Polaris-Grid-Cell--cell_1ColumnXs","Cell-2-column-xs":"Polaris-Grid-Cell--cell_2ColumnXs","Cell-3-column-xs":"Polaris-Grid-Cell--cell_3ColumnXs","Cell-4-column-xs":"Polaris-Grid-Cell--cell_4ColumnXs","Cell-5-column-xs":"Polaris-Grid-Cell--cell_5ColumnXs","Cell-6-column-xs":"Polaris-Grid-Cell--cell_6ColumnXs","Cell-1-column-sm":"Polaris-Grid-Cell--cell_1ColumnSm","Cell-2-column-sm":"Polaris-Grid-Cell--cell_2ColumnSm","Cell-3-column-sm":"Polaris-Grid-Cell--cell_3ColumnSm","Cell-4-column-sm":"Polaris-Grid-Cell--cell_4ColumnSm","Cell-5-column-sm":"Polaris-Grid-Cell--cell_5ColumnSm","Cell-6-column-sm":"Polaris-Grid-Cell--cell_6ColumnSm","Cell-1-column-md":"Polaris-Grid-Cell--cell_1ColumnMd","Cell-2-column-md":"Polaris-Grid-Cell--cell_2ColumnMd","Cell-3-column-md":"Polaris-Grid-Cell--cell_3ColumnMd","Cell-4-column-md":"Polaris-Grid-Cell--cell_4ColumnMd","Cell-5-column-md":"Polaris-Grid-Cell--cell_5ColumnMd","Cell-6-column-md":"Polaris-Grid-Cell--cell_6ColumnMd","Cell-1-column-lg":"Polaris-Grid-Cell--cell_1ColumnLg","Cell-2-column-lg":"Polaris-Grid-Cell--cell_2ColumnLg","Cell-3-column-lg":"Polaris-Grid-Cell--cell_3ColumnLg","Cell-4-column-lg":"Polaris-Grid-Cell--cell_4ColumnLg","Cell-5-column-lg":"Polaris-Grid-Cell--cell_5ColumnLg","Cell-6-column-lg":"Polaris-Grid-Cell--cell_6ColumnLg","Cell-7-column-lg":"Polaris-Grid-Cell--cell_7ColumnLg","Cell-8-column-lg":"Polaris-Grid-Cell--cell_8ColumnLg","Cell-9-column-lg":"Polaris-Grid-Cell--cell_9ColumnLg","Cell-10-column-lg":"Polaris-Grid-Cell--cell_10ColumnLg","Cell-11-column-lg":"Polaris-Grid-Cell--cell_11ColumnLg","Cell-12-column-lg":"Polaris-Grid-Cell--cell_12ColumnLg","Cell-1-column-xl":"Polaris-Grid-Cell--cell_1ColumnXl","Cell-2-column-xl":"Polaris-Grid-Cell--cell_2ColumnXl","Cell-3-column-xl":"Polaris-Grid-Cell--cell_3ColumnXl","Cell-4-column-xl":"Polaris-Grid-Cell--cell_4ColumnXl","Cell-5-column-xl":"Polaris-Grid-Cell--cell_5ColumnXl","Cell-6-column-xl":"Polaris-Grid-Cell--cell_6ColumnXl","Cell-7-column-xl":"Polaris-Grid-Cell--cell_7ColumnXl","Cell-8-column-xl":"Polaris-Grid-Cell--cell_8ColumnXl","Cell-9-column-xl":"Polaris-Grid-Cell--cell_9ColumnXl","Cell-10-column-xl":"Polaris-Grid-Cell--cell_10ColumnXl","Cell-11-column-xl":"Polaris-Grid-Cell--cell_11ColumnXl","Cell-12-column-xl":"Polaris-Grid-Cell--cell_12ColumnXl"};function MR({area:e,column:t,columnSpan:r,row:n,children:a}){const s=T(Oa.Cell,(r==null?void 0:r.xs)&&Oa[`Cell-${r.xs}-column-xs`],(r==null?void 0:r.sm)&&Oa[`Cell-${r.sm}-column-sm`],(r==null?void 0:r.md)&&Oa[`Cell-${r.md}-column-md`],(r==null?void 0:r.lg)&&Oa[`Cell-${r.lg}-column-lg`],(r==null?void 0:r.xl)&&Oa[`Cell-${r.xl}-column-xl`]),i={gridArea:e,"--pc-column-xs":t==null?void 0:t.xs,"--pc-column-sm":t==null?void 0:t.sm,"--pc-column-md":t==null?void 0:t.md,"--pc-column-lg":t==null?void 0:t.lg,"--pc-column-xl":t==null?void 0:t.xl,"--pc-row-xs":n==null?void 0:n.xs,"--pc-row-sm":n==null?void 0:n.sm,"--pc-row-md":n==null?void 0:n.md,"--pc-row-lg":n==null?void 0:n.lg,"--pc-row-xl":n==null?void 0:n.xl};return o.createElement("div",{className:s,style:i},a)}const Pv=function({gap:t,areas:r,children:n,columns:a}){const s={"--pc-grid-gap-xs":t==null?void 0:t.xs,"--pc-grid-gap-sm":t==null?void 0:t.sm,"--pc-grid-gap-md":t==null?void 0:t.md,"--pc-grid-gap-lg":t==null?void 0:t.lg,"--pc-grid-gap-xl":t==null?void 0:t.xl,"--pc-grid-columns-xs":a==null?void 0:a.xs,"--pc-grid-columns-sm":a==null?void 0:a.sm,"--pc-grid-columns-md":a==null?void 0:a.md,"--pc-grid-columns-lg":a==null?void 0:a.lg,"--pc-grid-columns-xl":a==null?void 0:a.xl,"--pc-grid-areas-xs":vs(r==null?void 0:r.xs),"--pc-grid-areas-sm":vs(r==null?void 0:r.sm),"--pc-grid-areas-md":vs(r==null?void 0:r.md),"--pc-grid-areas-lg":vs(r==null?void 0:r.lg),"--pc-grid-areas-xl":vs(r==null?void 0:r.xl)};return o.createElement("div",{className:LR.Grid,style:s},n)};function vs(e){if(e)return`'${e==null?void 0:e.join("' '")}'`}Pv.Cell=MR;let Ke;(function(e){e.Default="DEFAULT",e.Filtering="FILTERING",e.EditingColumns="EDITING_COLUMNS"})(Ke||(Ke={}));var ir={IndexFiltersWrapper:"Polaris-IndexFilters__IndexFiltersWrapper",IndexFilters:"Polaris-IndexFilters",IndexFiltersSticky:"Polaris-IndexFilters__IndexFiltersSticky",IndexFiltersStickyFlush:"Polaris-IndexFilters__IndexFiltersStickyFlush",TabsWrapper:"Polaris-IndexFilters__TabsWrapper",SmallScreenTabsWrapper:"Polaris-IndexFilters__SmallScreenTabsWrapper",TabsWrapperLoading:"Polaris-IndexFilters__TabsWrapperLoading",DesktopLoading:"Polaris-IndexFilters__DesktopLoading",TabsLoading:"Polaris-IndexFilters__TabsLoading",ActionWrap:"Polaris-IndexFilters__ActionWrap",Spinner:"Polaris-IndexFilters__Spinner",ButtonWrap:"Polaris-IndexFilters__ButtonWrap"};const FR=250;function DR(e,t,r){const n=typeof window<"u"&&!!window.IntersectionObserver,a={root:null,rootMargin:`${r?"0px":"-56px"} 0px 0px 0px`,threshold:0},[s,i]=m.useState(0),[l,c]=m.useState(!1),u=m.useRef(null),d=m.useRef(null),h=p=>{p.forEach(g=>{c(!g.isIntersecting)})},f=m.useRef(n?new IntersectionObserver(h,a):null);return m.useEffect(()=>{function p(){const b=u.current;if(!b)return{height:0};const v=b.getBoundingClientRect().height;i(v)}p();const g=tr(p,FR,{trailing:!0});return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[u,e]),m.useEffect(()=>{const p=f.current;if(!p)return;const g=d.current;return g&&p.observe(g),()=>{p==null||p.disconnect()}},[d]),{intersectionRef:d,measurerRef:u,isSticky:l&&!t,indexFilteringHeight:s}}function Av(){const[e,t]=m.useState(!1),r=m.useCallback(()=>t(!0),[]);return mt("touchstart",r),e}const Hp=40;function HR({primaryAction:e,cancelAction:t,viewNames:r,disabled:n}){const a=se(),[s,i]=m.useState(""),[l,c]=m.useState(!1),u=m.useRef(null),d=Av();m.useEffect(()=>{!u.current||d||l&&Bt(u.current)},[l,d]);async function h(){(e==null?void 0:e.type)==="save-as"?f():await(e==null?void 0:e.onAction(""))}function f(){c(!0)}function p(){c(!1)}function g(R){i(R)}async function b(){S||(await(e==null?void 0:e.onAction(s)),p())}const y=m.useMemo(()=>{switch(e==null?void 0:e.type){case"save":return a.translate("Polaris.IndexFilters.UpdateButtons.save");case"save-as":default:return a.translate("Polaris.IndexFilters.UpdateButtons.saveAs")}},[e==null?void 0:e.type,a]),v=o.createElement(ye,{size:"micro",onClick:h,disabled:(e==null?void 0:e.disabled)||n},y),E=r.some(R=>R.trim().toLowerCase()===s.trim().toLowerCase()),S=E||!s||(e==null?void 0:e.loading)||s.length>Hp,_=t?o.createElement(ye,{variant:"tertiary",size:"micro",onClick:t.onAction,disabled:n},a.translate("Polaris.IndexFilters.UpdateButtons.cancel")):null;return e?o.createElement(de,{align:"start",blockAlign:"center",gap:"100"},_,e.type==="save-as"?o.createElement(nr,{activator:o.createElement(de,null,v),open:l,title:a.translate("Polaris.IndexFilters.UpdateButtons.modal.title"),onClose:p,primaryAction:{onAction:b,content:a.translate("Polaris.IndexFilters.UpdateButtons.modal.save"),disabled:S},secondaryActions:[{onAction:p,content:a.translate("Polaris.IndexFilters.UpdateButtons.modal.cancel")}]},o.createElement(nr.Section,null,o.createElement(si,{onSubmit:b},o.createElement(ti,null,o.createElement("div",{ref:u},o.createElement(Nn,{label:a.translate("Polaris.IndexFilters.UpdateButtons.modal.label"),value:s,onChange:g,autoComplete:"off",maxLength:Hp,showCharacterCount:!0,error:E?a.translate("Polaris.IndexFilters.UpdateButtons.modal.sameName",{name:s}):void 0})))))):v):_}var Bp={DirectionButton:"Polaris-SortButton-DirectionButton","DirectionButton-active":"Polaris-SortButton-DirectionButton__DirectionButton--active"};function Wp({onClick:e,active:t,children:r,direction:n,value:a}){const s=T(Bp.DirectionButton,t&&Bp["DirectionButton-active"]);function i(){e([a])}return o.createElement(rr,{className:s,onClick:i},o.createElement(le,{source:n==="asc"?My:Oy,tone:"base"}),o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},r))}let vo;(function(e){e.Asc="asc",e.Desc="desc"})(vo||(vo={}));function BR({choices:e,selected:t,onChange:r,disabled:n,onChangeKey:a,onChangeDirection:s}){var E,S,_,R;const i=se(),[l,c]=m.useState(!1),[u,d]=t[0].split(" ");function h(){c(x=>!x)}function f(){c(!1)}function p(x){if(a){const[C]=x[0].split(" ");a(C)}else r(x)}function g(x){if(s){const[,C]=x[0].split(" ");s(C)}else r(x)}const b=m.useMemo(()=>e.reduce((C,w)=>{const P=C.some(M=>M.label===w.label),[,$]=w.value.split(" "),N=$===d;return P?N?C.map(M=>M.label===w.label?w:M):C:[...C,w]},[]),[e,d]),y=e.filter(x=>{const[C]=x.value.split(" ");return C===u}),v=o.createElement(Gt,{content:i.translate("Polaris.IndexFilters.SortButton.tooltip"),preferredPosition:"above",hoverDelay:400},o.createElement(ye,{size:"slim",icon:Ky,onClick:h,disabled:n,accessibilityLabel:i.translate("Polaris.IndexFilters.SortButton.ariaLabel")}));return o.createElement(nt,{active:l&&!n,activator:v,autofocusTarget:"first-node",onClose:f,preferredAlignment:"right",fluidContent:!0},o.createElement(te,{minWidth:"148px",paddingInlineStart:"300",paddingInlineEnd:"300",paddingBlockStart:"200",paddingBlockEnd:"200",borderBlockEndWidth:"025",borderColor:"border-secondary"},o.createElement(lv,{title:i.translate("Polaris.IndexFilters.SortButton.title"),choices:b,selected:t,onChange:p})),o.createElement(te,{paddingInlineStart:"150",paddingInlineEnd:"150",paddingBlockStart:"200",paddingBlockEnd:"200"},o.createElement(Wp,{direction:"asc",active:d===vo.Asc,onClick:g,value:(E=y==null?void 0:y[0])==null?void 0:E.value},(S=y==null?void 0:y[0])==null?void 0:S.directionLabel),o.createElement(Wp,{direction:"desc",active:d===vo.Desc,onClick:g,value:(_=y==null?void 0:y[1])==null?void 0:_.value},(R=y==null?void 0:y[1])==null?void 0:R.directionLabel)))}var WR={Container:"Polaris-IndexFilters-Container"};const UR=({children:e})=>o.createElement("div",{className:WR.Container},e);function Up(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}function jp(e,t,r,n,a){const s=n.reduce((u,d)=>u+d,0),i=e.map((u,d)=>d),l=[],c=[];if(a>s)l.push(...i);else{l.push(t);let u=n[t];i.forEach(d=>{if(d!==t){const h=n[d];if(u+h>=a-r){c.push(d);return}l.push(d),u+=h}})}return{visibleTabs:l,hiddenTabs:c}}var Se={Outer:"Polaris-Tabs__Outer",Wrapper:"Polaris-Tabs__Wrapper",WrapperWithNewButton:"Polaris-Tabs__WrapperWithNewButton",ButtonWrapper:"Polaris-Tabs__ButtonWrapper",Tabs:"Polaris-Tabs",Tab:"Polaris-Tabs__Tab","Tab-active":"Polaris-Tabs__Tab--active","Tab-hasActions":"Polaris-Tabs__Tab--hasActions","Tab-iconOnly":"Polaris-Tabs__Tab--iconOnly",fillSpace:"Polaris-Tabs--fillSpace",TabContainer:"Polaris-Tabs__TabContainer",fitted:"Polaris-Tabs--fitted",titleWithIcon:"Polaris-Tabs--titleWithIcon",List:"Polaris-Tabs__List",Item:"Polaris-Tabs__Item",DisclosureTab:"Polaris-Tabs__DisclosureTab","DisclosureTab-visible":"Polaris-Tabs__DisclosureTab--visible",DisclosureActivator:"Polaris-Tabs__DisclosureActivator",TabsMeasurer:"Polaris-Tabs__TabsMeasurer",NewTab:"Polaris-Tabs__NewTab",ActionListWrap:"Polaris-Tabs__ActionListWrap",Panel:"Polaris-Tabs__Panel","Panel-hidden":"Polaris-Tabs__Panel--hidden"};const Hc=40;function jR({open:e,isModalLoading:t,name:r,onClose:n,onClickPrimaryAction:a,onClickSecondaryAction:s,helpText:i,viewNames:l}){const c=se(),[u,d]=m.useState(r),h=m.useRef(null),f=l==null?void 0:l.some(v=>v.trim().toLowerCase()===u.trim().toLowerCase()),p=t||f||!u||u.length>Hc;m.useEffect(()=>{h.current&&e&&Bt(h.current)},[e]),m.useEffect(()=>{e&&d(r.slice(0,Hc))},[r,e]);const g=m.useCallback(v=>{d(v)},[]);async function b(){p||(await a(u),d(""),n())}function y(){s==null||s(),d(r),n()}return o.createElement(nr,{open:e,onClose:n,title:c.translate("Polaris.Tabs.DuplicateModal.title"),primaryAction:{content:c.translate("Polaris.Tabs.DuplicateModal.create"),onAction:b,disabled:p},secondaryActions:[{content:c.translate("Polaris.Tabs.DuplicateModal.cancel"),onAction:y}],instant:!0},o.createElement(nr.Section,null,o.createElement(si,{onSubmit:b},o.createElement(ti,null,o.createElement("div",{ref:h},o.createElement(Nn,{label:c.translate("Polaris.Tabs.DuplicateModal.label"),value:u,onChange:g,autoComplete:"off",helpText:i,maxLength:Hc,showCharacterCount:!0,error:f?c.translate("Polaris.Tabs.DuplicateModal.errors.sameName",{name:u}):void 0}))))))}function qR({open:e,isModalLoading:t,name:r,onClose:n,onClickPrimaryAction:a,onClickSecondaryAction:s,helpText:i,viewNames:l}){const c=se(),[u,d]=m.useState(r),h=m.useRef(null),f=l==null?void 0:l.filter(v=>v!==r).some(v=>v.trim().toLowerCase()===u.trim().toLowerCase()),p=t||f||u===r||!u;m.useEffect(()=>{h.current&&e&&Bt(h.current)},[e]),m.useEffect(()=>{e&&d(r)},[r,e]);const g=m.useCallback(v=>{d(v)},[]);async function b(){p||(await a(u),d(""),n())}function y(){s==null||s(),d(r),n()}return o.createElement(nr,{open:e,onClose:n,title:c.translate("Polaris.Tabs.RenameModal.title"),primaryAction:{content:c.translate("Polaris.Tabs.RenameModal.create"),onAction:b,disabled:p},secondaryActions:[{content:c.translate("Polaris.Tabs.RenameModal.cancel"),onAction:y}],instant:!0},o.createElement(nr.Section,null,o.createElement(si,{onSubmit:b},o.createElement(ti,null,o.createElement("div",{ref:h},o.createElement(Nn,{label:c.translate("Polaris.Tabs.RenameModal.label"),value:u,onChange:g,autoComplete:"off",helpText:i,maxLength:40,showCharacterCount:!0,error:f?c.translate("Polaris.Tabs.RenameModal.errors.sameName",{name:u}):void 0}))))))}const Eo=m.forwardRef(({content:e,accessibilityLabel:t,badge:r,id:n,panelID:a,url:s,onAction:i,actions:l,disabled:c,isModalLoading:u,icon:d,siblingTabHasFocus:h,measuring:f,focused:p,selected:g,onToggleModal:b,onTogglePopover:y,viewNames:v,tabIndexOverride:E,onFocus:S},_)=>{const R=se(),[x,C]=m.useState(!1),[w,P]=m.useState(null),$=m.useRef(g),N=m.useRef(!1),M=m.useRef(null);m.useEffect(()=>{y(x)},[x,y]),m.useEffect(()=>{b(!!w)},[w,b]),m.useEffect(()=>()=>{b(!1),y(!1)},[b,y]),m.useEffect(()=>{if(f)return;(p||document.activeElement&&document.activeElement.id===n)&&g&&a!=null&&!N.current&&(qp(a),N.current=!0),g&&!$.current&&a!=null?qp(a):p&&M.current!=null&&w==null&&!c&&Bt(M.current),$.current=g},[p,n,e,f,a,g,w,c]);let k;g&&!h&&!f||p&&!f?k=0:k=-1,E!=null&&(k=E);const A=l==null?void 0:l.find(ie=>ie.type==="rename"),O=l==null?void 0:l.find(ie=>ie.type==="duplicate"),L=l==null?void 0:l.find(ie=>ie.type==="delete"),F=m.useCallback(()=>{l!=null&&l.length&&C(ie=>!ie)},[l]),I=m.useCallback(()=>{c||(g?F():i==null||i())},[g,i,F,c]),D=ie=>{P(ie)},B=()=>{P(null)},U=m.useCallback(async ie=>{var pe;await((pe=A==null?void 0:A.onPrimaryAction)==null?void 0:pe.call(A,ie)),setTimeout(()=>{M.current&&Bt(M.current)},250)},[A]),V=m.useCallback(async()=>{var ie;await((ie=L==null?void 0:L.onPrimaryAction)==null?void 0:ie.call(L,e)),B()},[L,e]),W=m.useCallback(async ie=>{var pe;await((pe=O==null?void 0:O.onPrimaryAction)==null?void 0:pe.call(O,ie))},[O]),H={rename:{icon:Wd,content:R.translate("Polaris.Tabs.Tab.rename")},duplicate:{icon:Hy,content:R.translate("Polaris.Tabs.Tab.duplicate")},edit:{icon:By,content:R.translate("Polaris.Tabs.Tab.edit")},"edit-columns":{icon:Ud,content:R.translate("Polaris.Tabs.Tab.editColumns")},delete:{icon:Dy,content:R.translate("Polaris.Tabs.Tab.delete"),destructive:!0}},Y=l==null?void 0:l.map(({type:ie,onAction:pe,onPrimaryAction:Ae,...qe})=>{const Fe=!ie.includes("edit");return{...H[ie],...qe,onAction:()=>{pe==null||pe(e),F(),Fe&&D(ie)}}}),j=m.useCallback(ie=>{ie.key===" "&&(ie.preventDefault(),I())},[I]),J=T(Se.TabContainer,g&&Se.Underline),ge=c||g?void 0:s,Oe=ge?Cr:rr,Ce=T(Se.Tab,d&&Se["Tab-iconOnly"],x&&Se["Tab-popoverActive"],g&&Se["Tab-active"],g&&(l==null?void 0:l.length)&&Se["Tab-hasActions"]),De=r?o.createElement(Tn,{tone:g?void 0:"new"},r):null,je=g&&(l!=null&&l.length)?o.createElement("div",{className:T(Se.IconWrap)},o.createElement(le,{source:Qs})):null,Le=o.createElement(Oe,{id:n,className:Ce,tabIndex:k,"aria-selected":g,"aria-controls":a,"aria-label":t,role:E==null?"tab":void 0,disabled:c,url:ge,onFocus:S,onMouseUp:lo,onClick:I,onKeyDown:j},o.createElement(de,{gap:"200",align:"center",blockAlign:"center",wrap:!1},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},d??e),De),je),z=!g||!(l!=null&&l.length),ae=A?o.createElement(qR,{name:e,open:w==="rename",onClose:B,onClickPrimaryAction:U,isModalLoading:u,viewNames:v}):null,we=O?o.createElement(jR,{open:w==="duplicate",name:R.translate("Polaris.Tabs.Tab.copy",{name:e}),onClose:B,onClickPrimaryAction:W,isModalLoading:u,viewNames:v||[]}):null,he=L?o.createElement(nr,{open:w==="delete",onClose:B,primaryAction:{content:R.translate("Polaris.Tabs.Tab.deleteModal.delete"),onAction:V,destructive:!0,disabled:u},secondaryActions:[{content:R.translate("Polaris.Tabs.Tab.deleteModal.cancel"),onAction:B}],title:R.translate("Polaris.Tabs.Tab.deleteModal.title"),instant:!0},o.createElement(nr.Section,null,R.translate("Polaris.Tabs.Tab.deleteModal.description",{viewName:e}))):null,be=z||c?Le:o.createElement(o.Fragment,null,o.createElement(nt,{active:x,activator:Le,autofocusTarget:"first-node",onClose:F},o.createElement("div",{className:Se.ActionListWrap},o.createElement(an,{actionRole:"menuitem",items:Y}))),ae,we,he);return d?be:o.createElement("li",{className:J,ref:VR([M,_]),role:"presentation"},be)});Eo.displayName="Tab";function qp(e){const t=document.getElementById(e);t&&t.focus({preventScroll:!0})}function VR(e){return t=>{for(const r of e)r!=null&&(r.current=t)}}const KR=m.memo(function({selected:t,tabs:r,activator:n,tabToFocus:a,siblingTabHasFocus:s,handleMeasurement:i}){const l=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{if(!l.current)return;const f=l.current.offsetWidth-20-28,p=l.current.children,b=Array.from(p).map(v=>Math.ceil(v.getBoundingClientRect().width)+4),y=b.pop()||0;i({containerWidth:f,disclosureWidth:y,hiddenTabWidths:b})})},[i]);m.useEffect(()=>{u()},[u,r]),Fo(()=>{});const d=r.map((f,p)=>o.createElement(Eo,{measuring:!0,key:`$${f.id}Hidden`,id:`${f.id}Measurer`,siblingTabHasFocus:s,focused:p===a,selected:p===t,url:f.url,content:f.content,onTogglePopover:Vp,onToggleModal:Vp})),h=T(Se.Tabs,Se.TabsMeasurer);return mt("resize",u),o.createElement("div",{className:h,ref:l},d,n)});function Vp(){}function Kp({hidden:e,id:t,tabID:r,children:n}){const a=T(Se.Panel,e&&Se["Panel-hidden"]);return o.createElement("div",{className:a,id:t,role:"tabpanel","aria-labelledby":r,tabIndex:-1},n)}const zR=m.memo(function({id:t,focused:r,children:n,url:a,accessibilityLabel:s,onClick:i=GR}){const l=m.useRef(null);m.useEffect(()=>{l.current&&l.current instanceof HTMLElement&&r&&l.current.focus()},[l,r]);const c=T(Se.Item),u={id:t,ref:l,onClick:i,className:c,"aria-selected":!1,"aria-label":s},d=a?o.createElement(Cr,Object.assign({},u,{url:a}),n):o.createElement("button",Object.assign({},u,{ref:l,type:"button"}),n);return o.createElement("li",null,d)});function GR(){}function JR({focusIndex:e,disclosureTabs:t,onClick:r=zp,onKeyPress:n=zp}){const a=t.map(({id:s,content:i,...l},c)=>o.createElement(zR,Object.assign({key:s},l,{id:s,focused:c===e,onClick:r.bind(null,s)}),i));return o.createElement("ul",{className:Se.List,onKeyDown:XR,onKeyUp:n},a)}function zp(){}function XR(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}const Gp=40;function YR({activator:e,open:t,onClose:r,onClickPrimaryAction:n,onClickSecondaryAction:a,viewNames:s}){const i=se(),[l,c]=m.useState(""),[u,d]=m.useState(!1),h=m.useRef(null),f=Av(),p=s.some(E=>E.trim().toLowerCase()===l.trim().toLowerCase()),g=!l||p||u||l.length>Gp;m.useEffect(()=>{if(!(!h.current||f)&&t){Bt(h.current);const E=setTimeout(()=>{h.current&&Bt(h.current)},50);return()=>clearTimeout(E)}},[t,f]);const b=m.useCallback(E=>{c(E)},[]);async function y(){p||g||(d(!0),await n(l),d(!1),c(""),r())}function v(){a==null||a(),c(""),r()}return o.createElement(nr,{activator:e,open:t,onClose:r,title:i.translate("Polaris.Tabs.CreateViewModal.title"),primaryAction:{content:i.translate("Polaris.Tabs.CreateViewModal.create"),onAction:y,disabled:g},secondaryActions:[{content:i.translate("Polaris.Tabs.CreateViewModal.cancel"),onAction:v}]},o.createElement(nr.Section,null,o.createElement(si,{onSubmit:y},o.createElement(ti,null,o.createElement("div",{ref:h},o.createElement(Nn,{label:i.translate("Polaris.Tabs.CreateViewModal.label"),value:l,onChange:b,autoComplete:"off",maxLength:Gp,showCharacterCount:!0,error:p?i.translate("Polaris.Tabs.CreateViewModal.errors.sameName",{name:l}):void 0}))))))}const ZR="create-new-view",Tv=({tabs:e,children:t,selected:r,newViewAccessibilityLabel:n,canCreateNewView:a,disabled:s,onCreateNewView:i,onSelect:l,fitted:c,disclosureText:u})=>{const d=se(),{mdDown:h}=Ca(),f=m.useRef(null),p=m.useRef(null),g=m.useRef(null),[b,y]=m.useReducer((Z,re)=>({...Z,...re}),{disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1,isNewViewModalActive:!1,modalSubmitted:!1,isTabsFocused:!1,isTabPopoverOpen:!1,isTabModalOpen:!1}),{tabToFocus:v,visibleTabs:E,hiddenTabs:S,showDisclosure:_,isNewViewModalActive:R,modalSubmitted:x,disclosureWidth:C,tabWidths:w,containerWidth:P,isTabsFocused:$,isTabModalOpen:N,isTabPopoverOpen:M}=b,k=Up(N),A=Up(M);m.useEffect(()=>{k&&!N?y({isTabsFocused:!0,tabToFocus:r}):A&&!M&&!N&&y({isTabsFocused:!0,tabToFocus:r})},[A,M,k,N,r,v]);const O=m.useCallback(Z=>y({isTabPopoverOpen:Z}),[]),L=m.useCallback(Z=>y({isTabModalOpen:Z}),[]),F=()=>{y({isNewViewModalActive:!1})},I=async Z=>{if(!i)return!1;const re=await(i==null?void 0:i(Z));return re&&y({modalSubmitted:!0}),re},D=()=>{y({isNewViewModalActive:!0})},B=m.useCallback(Z=>{const re=e.find(oe=>oe.id===Z);if(re==null)return null;const ee=e.indexOf(re);l==null||l(ee)},[e,l]),U=m.useCallback((Z,re)=>{const ee=()=>{var ke;B(Z.id),(ke=Z.onAction)==null||ke.call(Z)},oe=e.map(({content:ke})=>ke),Re=Z.panelID||`${Z.id}-panel`;return o.createElement(Eo,Object.assign({},Z,{key:`${re}-${Z.id}`,id:Z.id,panelID:t?Re:void 0,disabled:s||Z.disabled,siblingTabHasFocus:v>-1,focused:re===v,selected:re===r,onAction:ee,accessibilityLabel:Z.accessibilityLabel,url:Z.url,content:Z.content,onToggleModal:L,onTogglePopover:O,viewNames:oe,ref:re===r?g:null}))},[s,B,e,t,r,v,L,O]),V=m.useCallback(Z=>{const re=Z.target,ee=re.classList.contains(Se.Item),oe=re.closest("[data-tabs-focus-catchment]")||ee;re.classList.contains(Se.DisclosureActivator)||!oe||y({isTabsFocused:!0})},[]),W=m.useCallback(Z=>{var Pt,Mt,bt;const re=Z.target,ee=Z.relatedTarget,oe=(Pt=ee==null?void 0:ee.closest)==null?void 0:Pt.call(ee,`.${Se.Tabs}`),Re=(bt=(Mt=re==null?void 0:re.classList)==null?void 0:Mt.contains)==null?void 0:bt.call(Mt,Se.Tab),ke=ee==null?void 0:ee.classList.contains(Se.Item);if(!ee&&!N&&!Re&&!ke){y({tabToFocus:-1});return}if(!oe&&!N&&!Re&&!ke){y({tabToFocus:-1});return}y({isTabsFocused:!1})},[N]),H=Z=>{if(M||N||R)return;const{key:re}=Z;(re==="ArrowLeft"||re==="ArrowRight")&&(Z.preventDefault(),Z.stopPropagation())};m.useEffect(()=>{const{visibleTabs:Z,hiddenTabs:re}=jp(e,r,C,w,P);y({visibleTabs:Z,hiddenTabs:re})},[P,C,e,r,w,y]);const Y=m.useCallback(()=>{var re;const Z=(re=g.current)==null?void 0:re.querySelector(`.${Se["Tab-active"]}`);Z&&De(Z.offsetLeft)},[]);m.useEffect(()=>{h&&Y()},[Y,r,h]),m.useEffect(()=>{$&&!_&&y({tabToFocus:r})},[$,r,y,_]);const j=Z=>{const{showDisclosure:re,visibleTabs:ee,hiddenTabs:oe,tabToFocus:Re,isNewViewModalActive:ke}=b;if(N||M||ke)return;const Pt=Z.key,Mt=re||h?ee.concat(oe):[...ee];let bt=Mt.indexOf(Re);Pt==="ArrowRight"&&(bt+=1,bt===Mt.length&&(bt=0)),Pt==="ArrowLeft"&&(bt===-1||bt===0?bt=Mt.length-1:bt-=1);const Ee=Mt[bt];Ee!=null&&y({tabToFocus:Ee})},J=()=>{y({showDisclosure:!_,tabToFocus:S[0]})},ge=()=>{y({showDisclosure:!1})},Oe=m.useCallback(Z=>{const{hiddenTabWidths:re,containerWidth:ee,disclosureWidth:oe}=Z,{visibleTabs:Re,hiddenTabs:ke}=jp(e,r,oe,re,ee);y({visibleTabs:Re,hiddenTabs:ke,disclosureWidth:oe,containerWidth:ee,tabWidths:re})},[e,r,y]),Ce=Z=>{B(Z),ge(),y({isTabsFocused:!0})},De=Z=>{setTimeout(()=>{var re,ee;if(f.current&&typeof f.current.scroll=="function"){const oe=((re=p==null?void 0:p.current)==null?void 0:re.offsetLeft)||0;(ee=f==null?void 0:f.current)==null||ee.scroll({left:Z-oe})}},0)},je=n||d.translate("Polaris.Tabs.newViewAccessibilityLabel"),Le=h?[...E,...S]:E,z=Le.sort((Z,re)=>Z-re).filter(Z=>e[Z]).map(Z=>U(e[Z],Z)),ae=E.length<e.length&&!h,we=T(Se.Tabs,c&&Se.fitted,ae&&Se.fillSpace),he=T(Se.Wrapper,a&&Se.WrapperWithNewButton),be=T(Se.DisclosureTab,ae&&Se["DisclosureTab-visible"]),ie=T(Se.DisclosureActivator),pe=o.createElement(o.Fragment,null,o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},u??d.translate("Polaris.Tabs.toggleTabsLabel")),o.createElement("div",{className:T(Se.IconWrap,ae&&_&&Se["IconWrap-open"])},o.createElement(le,{source:Qs,tone:"subdued"}))),qe=o.createElement(rr,{type:"button",className:ie,onClick:J,"aria-label":u??d.translate("Polaris.Tabs.toggleTabsLabel"),disabled:s},pe),Fe=S.map(Z=>e[Z]),me=e.map(({content:Z})=>Z),Ue=o.createElement(KR,{tabToFocus:v,activator:qe,selected:r,tabs:e,siblingTabHasFocus:v>-1,handleMeasurement:Oe}),Je=o.createElement(Eo,{id:ZR,content:je,actions:[],onAction:D,onFocus:()=>{x&&y({tabToFocus:r,modalSubmitted:!1})},icon:o.createElement(le,{source:jd,accessibilityLabel:je}),disabled:s,onTogglePopover:O,onToggleModal:L,tabIndexOverride:0}),ur=t?e.map((Z,re)=>r===re?o.createElement(Kp,{id:e[re].panelID||`${e[re].id}-panel`,tabID:e[re].id,key:e[re].id},t):o.createElement(Kp,{id:e[re].panelID||`${e[re].id}-panel`,tabID:e[re].id,key:e[re].id,hidden:!0})):null;return o.createElement("div",{className:Se.Outer},o.createElement(te,{padding:{md:"200"}},Ue,o.createElement("div",{className:he,ref:f},o.createElement("div",{className:Se.ButtonWrapper,ref:p},o.createElement("ul",{role:z.length>0?"tablist":void 0,className:we,onFocus:V,onBlur:W,onKeyDown:H,onKeyUp:j,"data-tabs-focus-catchment":!0},z,h||Le.length===0?null:o.createElement("li",{className:be,role:"presentation"},o.createElement(nt,{preferredPosition:"below",preferredAlignment:"left",activator:qe,active:ae&&_,onClose:ge,autofocusTarget:"first-node"},o.createElement(JR,{focusIndex:S.indexOf(v),disclosureTabs:Fe,onClick:Ce,onKeyPress:j})))),a&&Le.length>0?o.createElement("div",{className:Se.NewTab},o.createElement(YR,{open:R,onClose:F,onClickPrimaryAction:I,viewNames:me,activator:s?Je:o.createElement("div",null,o.createElement(Gt,{content:d.translate("Polaris.Tabs.newViewTooltip"),preferredPosition:"above",hoverDelay:400},Je))})):null))),ur)};function QR({onClick:e,label:t,disabled:r,tooltipContent:n,style:a,hideFilters:s,hideQueryField:i}){const l=o.createElement(de,{gap:"0"},i?null:o.createElement(le,{source:Zs,tone:"base"}),s?null:o.createElement(le,{source:Uy,tone:"base"})),c=o.createElement("div",{style:a},o.createElement(ye,{size:"slim",onClick:e,disabled:r,icon:l,accessibilityLabel:t})),u=o.createElement(G,{as:"span",variant:"bodyMd",alignment:"center"},n);return o.createElement(Gt,{content:u,preferredPosition:"above",hoverDelay:400},c)}function ek({onClick:e,disabled:t}){const r=se(),n=o.createElement(G,{as:"span",variant:"bodyMd",alignment:"center"},r.translate("Polaris.IndexFilters.EditColumnsButton.tooltip"));return o.createElement(Gt,{content:n,preferredPosition:"above",hoverDelay:400},o.createElement(ye,{size:"slim",onClick:e,disabled:t,icon:Ud,accessibilityLabel:r.translate("Polaris.IndexFilters.EditColumnsButton.accessibilityLabel")}))}const tk=["INPUT","SELECT","TEXTAREA"],td=150,Bc={transition:`opacity ${td}ms var(--p-motion-ease)`,opacity:0},Wc={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}};function rk({tabs:e,selected:t,onSelect:r,onSort:n,onSortKeyChange:a,onSortDirectionChange:s,onAddFilterClick:i,sortOptions:l,sortSelected:c,queryValue:u="",queryPlaceholder:d,primaryAction:h,cancelAction:f,filters:p,appliedFilters:g,onClearAll:b,onQueryChange:y,onQueryFocus:v,onQueryClear:E,onEditStart:S,disabled:_,disableQueryField:R,hideFilters:x,loading:C,mode:w,setMode:P,disableStickyMode:$,isFlushWhenSticky:N=!1,canCreateNewView:M=!0,onCreateNewView:k,filteringAccessibilityLabel:A,filteringAccessibilityTooltip:O,hideQueryField:L,closeOnChildOverlayClick:F,disableKeyboardShortcuts:I,showEditColumnsButton:D,autoFocusSearchField:B=!0}){const U=se(),{mdDown:V}=Ca(),W=m.useRef(null),H=m.useRef(null),{value:Y,setFalse:j,setTrue:J}=Wt(w===Ke.Filtering&&B);bv(w,Ee=>{Ee===Ke.Filtering&&B?J():j()}),mt("keydown",Ee=>{var jn;if(I||L&&x)return;const{key:Wn}=Ee,Un=(jn=document==null?void 0:document.activeElement)==null?void 0:jn.tagName;if(w!==Ke.Default&&Ee.key==="Escape"&&Re(),Wn==="f"&&w===Ke.Default){if(Un&&tk.includes(Un))return;bt(),Ee.preventDefault()}});const{intersectionRef:Oe,measurerRef:Ce,indexFilteringHeight:De,isSticky:je}=DR(w,!!$,N),Le=e.map(({content:Ee})=>Ee),z=m.useCallback(Ee=>{n==null||n(Ee)},[n]),ae=m.useCallback(Ee=>{y(Ee)},[y]),he=((Ee,ln)=>m.useCallback(async Wn=>{await(Ee==null?void 0:Ee(Wn))&&(P(Ke.Default),ln==null||ln())},[Ee,ln]))(h==null?void 0:h.onAction),be=m.useCallback(()=>{var Ee;(Ee=f==null?void 0:f.onAction)==null||Ee.call(f),P(Ke.Default)},[f,P]),ie=m.useMemo(()=>h?{...h,onAction:he}:void 0,[he,h]),pe=m.useMemo(()=>f?{...f,onAction:be}:void 0,[f,be]),Ae=m.useCallback(Ee=>{P(Ee),S==null||S(Ee)},[S,P]),qe=m.useMemo(()=>pe||ie?o.createElement(HR,{primaryAction:ie,cancelAction:pe,viewNames:Le,disabled:_}):null,[ie,pe,_,Le]),Fe=m.useMemo(()=>l!=null&&l.length?o.createElement(BR,{choices:l,selected:c,onChange:z,onChangeKey:a,onChangeDirection:s,disabled:_}):null,[z,s,a,l,c,_]);function me(){Ae(Ke.EditingColumns)}const Ue=D?o.createElement(ek,{onClick:me,disabled:_}):null,Je=(h==null?void 0:h.loading)||(f==null?void 0:f.loading);function ur(){Ae(Ke.Filtering)}const Z=I?"Polaris.IndexFilters.searchFilterTooltip":"Polaris.IndexFilters.searchFilterTooltipWithShortcut",re=O||U.translate(Z),ee=A||U.translate("Polaris.IndexFilters.searchFilterAccessibilityLabel"),oe=C||Je;function Re(){f==null||f.onAction(),P(Ke.Default)}function ke(){E==null||E()}function Pt(){j()}function Mt(){J(),v==null||v()}function bt(){w===Ke.Default&&Ae(Ke.Filtering)}return o.createElement("div",{className:ir.IndexFiltersWrapper,style:{height:De}},o.createElement("div",{ref:Oe}),o.createElement("div",{className:T(ir.IndexFilters,je&&ir.IndexFiltersSticky,je&&N&&ir.IndexFiltersStickyFlush),ref:Ce},o.createElement(Ks,{nodeRef:W,in:w!==Ke.Filtering,timeout:td},Ee=>o.createElement("div",{ref:W},w!==Ke.Filtering?o.createElement(UR,null,o.createElement(de,{align:"start",blockAlign:"center",gap:{xs:"0",md:"200"},wrap:!1},o.createElement("div",{className:T(ir.TabsWrapper,V&&ir.SmallScreenTabsWrapper,oe&&ir.TabsWrapperLoading)},o.createElement("div",{className:ir.TabsInner,style:{...Bc,...Wc[Ee]}},o.createElement(Tv,{tabs:e,selected:t,onSelect:r,disabled:!!(w!==Ke.Default||_),canCreateNewView:M,onCreateNewView:k})),oe&&V&&o.createElement("div",{className:ir.TabsLoading},o.createElement(ha,{size:"small"}))),o.createElement("div",{className:ir.ActionWrap},oe&&!V&&o.createElement("div",{className:ir.DesktopLoading},oe?o.createElement(ha,{size:"small"}):null),w===Ke.Default?o.createElement(o.Fragment,null,x&&L?null:o.createElement(QR,{onClick:ur,label:ee,tooltipContent:re,disabled:_,hideFilters:x,hideQueryField:L,style:{...Bc,...Wc[Ee]}}),Ue,Fe):null,w===Ke.EditingColumns?qe:null))):null)),o.createElement(Ks,{nodeRef:H,in:w===Ke.Filtering,timeout:td},Ee=>o.createElement("div",{ref:H},w===Ke.Filtering?o.createElement(yv,{queryValue:u,queryPlaceholder:d,onQueryChange:ae,onQueryClear:ke,onQueryFocus:Mt,onQueryBlur:Pt,onAddFilterClick:i,filters:p,appliedFilters:g,onClearAll:b,disableFilters:_,hideFilters:x,hideQueryField:L,disableQueryField:_||R,loading:C||Je,focused:Y,mountedState:V?void 0:Ee,borderlessQueryField:!0,closeOnChildOverlayClick:F},o.createElement("div",{className:ir.ButtonWrap},o.createElement(de,{gap:"200",align:"start",blockAlign:"center"},o.createElement("div",{style:{...Bc,...Wc[Ee]}},qe),Fe))):null))))}function nk(e=Ke.Default){const[t,r]=m.useState(e);return{mode:t,setMode:r}}var q={IndexTable:"Polaris-IndexTable",IndexTableWrapper:"Polaris-IndexTable__IndexTableWrapper","IndexTableWrapper-scrollBarHidden":"Polaris-IndexTable__IndexTableWrapper--scrollBarHidden",IndexTableWrapperWithSelectAllActions:"Polaris-IndexTable__IndexTableWrapperWithSelectAllActions","LoadingContainer-enter":"Polaris-IndexTable__LoadingContainer--enter","LoadingContainer-enter-active":"Polaris-IndexTable--loadingContainerEnterActive","LoadingContainer-exit":"Polaris-IndexTable__LoadingContainer--exit","LoadingContainer-exit-active":"Polaris-IndexTable--loadingContainerExitActive",LoadingPanel:"Polaris-IndexTable__LoadingPanel",LoadingPanelRow:"Polaris-IndexTable__LoadingPanelRow",LoadingPanelText:"Polaris-IndexTable__LoadingPanelText",Table:"Polaris-IndexTable__Table","Table-scrolling":"Polaris-IndexTable__Table--scrolling","TableCell-first":"Polaris-IndexTable__TableCell--first","StickyTable-scrolling":"Polaris-IndexTable__StickyTable--scrolling",TableCell:"Polaris-IndexTable__TableCell","TableHeading-first":"Polaris-IndexTable__TableHeading--first","TableHeading-second":"Polaris-IndexTable__TableHeading--second","Table-sticky":"Polaris-IndexTable__Table--sticky",StickyTable:"Polaris-IndexTable__StickyTable","Table-unselectable":"Polaris-IndexTable__Table--unselectable",TableRow:"Polaris-IndexTable__TableRow","TableRow-unclickable":"Polaris-IndexTable__TableRow--unclickable",toneSuccess:"Polaris-IndexTable--toneSuccess","TableRow-child":"Polaris-IndexTable__TableRow--child",toneWarning:"Polaris-IndexTable--toneWarning",toneCritical:"Polaris-IndexTable--toneCritical",toneSubdued:"Polaris-IndexTable--toneSubdued","TableRow-subheader":"Polaris-IndexTable__TableRow--subheader","TableRow-selected":"Polaris-IndexTable__TableRow--selected","TableRow-hovered":"Polaris-IndexTable__TableRow--hovered","TableRow-disabled":"Polaris-IndexTable__TableRow--disabled",ZebraStriping:"Polaris-IndexTable__ZebraStriping",TableHeading:"Polaris-IndexTable__TableHeading","TableHeading-flush":"Polaris-IndexTable__TableHeading--flush","TableHeading-align-center":"Polaris-IndexTable--tableHeadingAlignCenter","TableHeading-align-end":"Polaris-IndexTable--tableHeadingAlignEnd","TableHeading-extra-padding-right":"Polaris-IndexTable--tableHeadingExtraPaddingRight","TableHeading-sortable":"Polaris-IndexTable__TableHeading--sortable",TableHeadingSortButton:"Polaris-IndexTable__TableHeadingSortButton",TableHeadingSortIcon:"Polaris-IndexTable__TableHeadingSortIcon","TableHeadingSortButton-heading-align-end":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEnd","TableHeadingSortButton-heading-align-end-currently-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndCurrentlySorted","TableHeadingSortIcon-heading-align-end":"Polaris-IndexTable--tableHeadingSortIconHeadingAlignEnd","TableHeadingSortButton-heading-align-end-previously-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndPreviouslySorted","right-aligned-sort-button-slide-out":"Polaris-IndexTable--rightAlignedSortButtonSlideOut","reveal-right-aligned-sort-button-icon":"Polaris-IndexTable--revealRightAlignedSortButtonIcon",TableHeadingUnderline:"Polaris-IndexTable__TableHeadingUnderline",TableHeadingTooltipUnderlinePlaceholder:"Polaris-IndexTable__TableHeadingTooltipUnderlinePlaceholder","TableHeadingSortIcon-visible":"Polaris-IndexTable__TableHeadingSortIcon--visible",TableHeadingSortSvg:"Polaris-IndexTable__TableHeadingSortSvg",SortableTableHeadingWithCustomMarkup:"Polaris-IndexTable__SortableTableHeadingWithCustomMarkup",SortableTableHeaderWrapper:"Polaris-IndexTable__SortableTableHeaderWrapper",ColumnHeaderCheckboxWrapper:"Polaris-IndexTable__ColumnHeaderCheckboxWrapper",FirstStickyHeaderElement:"Polaris-IndexTable__FirstStickyHeaderElement","TableHeading-unselectable":"Polaris-IndexTable__TableHeading--unselectable","TableCell-flush":"Polaris-IndexTable__TableCell--flush","Table-sticky-scrolling":"Polaris-IndexTable--tableStickyScrolling","StickyTableHeader-sticky-scrolling":"Polaris-IndexTable--stickyTableHeaderStickyScrolling","TableHeading-last":"Polaris-IndexTable__TableHeading--last","Table-sticky-last":"Polaris-IndexTable--tableStickyLast","StickyTableHeader-sticky-last":"Polaris-IndexTable--stickyTableHeaderStickyLast","Table-sortable":"Polaris-IndexTable__Table--sortable",StickyTableHeader:"Polaris-IndexTable__StickyTableHeader","StickyTableHeader-isSticky":"Polaris-IndexTable__StickyTableHeader--isSticky",StickyTableHeadings:"Polaris-IndexTable__StickyTableHeadings","StickyTableHeading-second":"Polaris-IndexTable__StickyTableHeading--second",unselectable:"Polaris-IndexTable--unselectable","StickyTableHeading-second-scrolling":"Polaris-IndexTable--stickyTableHeadingSecondScrolling",ScrollLeft:"Polaris-IndexTable__ScrollLeft",ScrollRight:"Polaris-IndexTable__ScrollRight","ScrollRight-onboarding":"Polaris-IndexTable__ScrollRight--onboarding",SelectAllActionsWrapper:"Polaris-IndexTable__SelectAllActionsWrapper",SelectAllActionsWrapperWithPagination:"Polaris-IndexTable__SelectAllActionsWrapperWithPagination",SelectAllActionsWrapperSticky:"Polaris-IndexTable__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-IndexTable__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-IndexTable__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapper:"Polaris-IndexTable__BulkActionsWrapper",BulkActionsWrapperVisible:"Polaris-IndexTable__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-IndexTable__PaginationWrapper",PaginationWrapperScrolledPastTop:"Polaris-IndexTable__PaginationWrapperScrolledPastTop",ScrollBarContainer:"Polaris-IndexTable__ScrollBarContainer",ScrollBarContainerWithPagination:"Polaris-IndexTable__ScrollBarContainerWithPagination",ScrollBarContainerScrolledPastTop:"Polaris-IndexTable__ScrollBarContainerScrolledPastTop",ScrollBarContainerWithSelectAllActions:"Polaris-IndexTable__ScrollBarContainerWithSelectAllActions",ScrollBarContainerSelectAllActionsSticky:"Polaris-IndexTable__ScrollBarContainerSelectAllActionsSticky",scrollBarContainerCondensed:"Polaris-IndexTable--scrollBarContainerCondensed",scrollBarContainerHidden:"Polaris-IndexTable--scrollBarContainerHidden",ScrollBar:"Polaris-IndexTable__ScrollBar",disableTextSelection:"Polaris-IndexTable--disableTextSelection",EmptySearchResultWrapper:"Polaris-IndexTable__EmptySearchResultWrapper",condensedRow:"Polaris-IndexTable--condensedRow",CondensedList:"Polaris-IndexTable__CondensedList",HeaderWrapper:"Polaris-IndexTable__HeaderWrapper","StickyTable-condensed":"Polaris-IndexTable__StickyTable--condensed","StickyTableHeader-condensed":"Polaris-IndexTable__StickyTableHeader--condensed",ScrollBarContent:"Polaris-IndexTable__ScrollBarContent"};const Qr="All";let Qe;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(Qe||(Qe={}));const Rv=m.createContext(void 0),kv=m.createContext(void 0),xv=m.createContext(void 0);function Iv(){const e=m.useContext(kv);if(!e)throw new Error("Missing IndexProvider context");return e}function ak(){const e=m.useContext(xv);if(!e)throw new Error("Missing IndexProvider context");return e}function $v(){const e=m.useContext(Rv);if(!e)throw new Error("Missing IndexProvider context");return e}function sk({selectedItemsCount:e,itemCount:t,hasMoreItems:r,resourceName:n,defaultPaginatedSelectAllText:a}){const s=se(),i=!!e,l=e==="All"||e>0,c={singular:s.translate("Polaris.IndexProvider.defaultItemSingular"),plural:s.translate("Polaris.IndexProvider.defaultItemPlural")},u=n||c,d=g(),h=b(),f=y();let p="indeterminate";return!e||e===0?p=void 0:(e===Qr||e===t)&&(p=!0),{paginatedSelectAllText:d,bulkActionsLabel:h,bulkActionsAccessibilityLabel:f,resourceName:u,selectMode:l,bulkSelectState:p,selectable:i};function g(){if(!(!i||!r)&&e===Qr)return a||s.translate("Polaris.IndexProvider.allItemsSelected",{itemsLength:t,resourceNamePlural:u.plural.toLocaleLowerCase()})}function b(){const v=e===Qr?`${t}+`:e;return s.translate("Polaris.IndexProvider.selected",{selectedItemsCount:v})}function y(){const v=t,E=e===v;return v===1&&E?s.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllSingle",{resourceNameSingular:u.singular}):v===1?s.translate("Polaris.IndexProvider.a11yCheckboxSelectAllSingle",{resourceNameSingular:u.singular}):E?s.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple",{itemsLength:t,resourceNamePlural:u.plural}):s.translate("Polaris.IndexProvider.a11yCheckboxSelectAllMultiple",{itemsLength:t,resourceNamePlural:u.plural})}}function ik({onSelectionChange:e=()=>{}}){const t=m.useRef(null);return m.useCallback((n,a,s,i)=>{const l=t.current;if(Qe.Multi&&typeof i=="number"&&(t.current=i),n===Qe.Single||n===Qe.Multi&&(typeof l!="number"||typeof i!="number"))e(Qe.Single,a,s);else if(n===Qe.Multi){const c=Math.min(l,i),u=Math.max(l,i);e(n,a,[c,u])}else n===Qe.Page||n===Qe.All?e(n,a):n===Qe.Range&&e(Qe.Range,a,s)},[e])}function ok({children:e,resourceName:t,loading:r,onSelectionChange:n,selectedItemsCount:a=0,itemCount:s,hasMoreItems:i,condensed:l,selectable:c=!0,paginatedSelectAllText:u}){const{paginatedSelectAllText:d,bulkActionsLabel:h,bulkActionsAccessibilityLabel:f,resourceName:p,selectMode:g,bulkSelectState:b}=sk({selectedItemsCount:a,itemCount:s,hasMoreItems:i,resourceName:t,defaultPaginatedSelectAllText:u}),y=ik({onSelectionChange:n}),v=m.useMemo(()=>({itemCount:s,selectMode:g&&c,selectable:c,resourceName:p,loading:r,paginatedSelectAllText:d,hasMoreItems:i,bulkActionsLabel:h,bulkActionsAccessibilityLabel:f,bulkSelectState:b,selectedItemsCount:a,condensed:l}),[s,g,c,p,r,d,i,h,f,b,a,l]),E=m.useMemo(()=>({selectable:c,selectMode:g&&c,condensed:l}),[l,g,c]);return o.createElement(Rv.Provider,{value:v},o.createElement(xv.Provider,{value:E},o.createElement(kv.Provider,{value:y},e)))}const lk=m.memo(function({children:t,className:r,flush:n,colSpan:a,headers:s,scope:i,as:l="td",id:c}){const u=T(r,q.TableCell,n&&q["TableCell-flush"]);return o.createElement(l,{id:c,colSpan:a,headers:s,scope:i,className:u},t)});var Jp={TableCellContentContainer:"Polaris-IndexTable-Checkbox__TableCellContentContainer",Wrapper:"Polaris-IndexTable-Checkbox__Wrapper"};const Qo=m.createContext({}),Nv=m.createContext(void 0),Ov={scrollableContainer:null,canScrollLeft:!1,canScrollRight:!1},Lv=m.createContext(Ov),ck=m.memo(function({accessibilityLabel:t}){const r=se(),{resourceName:n}=$v(),{itemId:a,selected:s,disabled:i,onInteraction:l}=m.useContext(Qo),c=t||r.translate("Polaris.IndexTable.selectItem",{resourceName:n.singular});return o.createElement(uk,null,o.createElement("div",{className:Jp.TableCellContentContainer},o.createElement("div",{className:Jp.Wrapper,onClick:l,onKeyUp:dk},o.createElement(Ln,{id:`Select-${a}`,label:c,labelHidden:!0,checked:s,disabled:i}))))});function uk({children:e}){const{position:t}=m.useContext(Qo),r=m.useRef(null),n=m.useCallback(tr(()=>{if(t!==0||!r.current)return;const{width:s}=r.current.getBoundingClientRect();Qu("--pc-checkbox-offset",`${s}px`)}),[t]);m.useEffect(()=>{n()},[n]),m.useEffect(()=>{if(r.current)return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[n]);const a=T(q.TableCell,q["TableCell-first"]);return o.createElement("td",{className:a,ref:r},e)}function dk(){}const hk=m.memo(function({children:t,selected:r,id:n,position:a,tone:s,disabled:i,selectionRange:l,rowType:c="data",accessibilityLabel:u,onNavigation:d,onClick:h}){const{selectable:f,selectMode:p,condensed:g}=ak(),b=Iv(),{value:y,setTrue:v,setFalse:E}=Wt(!1),S=m.useCallback(k=>{k.stopPropagation();let A=Qe.Single;if("key"in k&&k.key!==" "||!b)return;k.nativeEvent.shiftKey?A=Qe.Multi:l&&(A=Qe.Range),b(A,!r,l??n,a)},[n,b,r,l,a]),_=m.useMemo(()=>({itemId:n,selected:r,position:a,onInteraction:S,disabled:i}),[n,r,i,a,S]),R=m.useRef(null),x=m.useRef(!1),C=m.useRef(null),w=m.useCallback(k=>{C.current=k;const A=k==null?void 0:k.querySelector("[data-primary-link]");A&&(R.current=A)},[]),P=T(q.TableRow,c==="subheader"&&q["TableRow-subheader"],c==="child"&&q["TableRow-child"],f&&g&&q.condensedRow,r&&q["TableRow-selected"],y&&!g&&q["TableRow-hovered"],i&&q["TableRow-disabled"],s&&q[Be("tone",s)],!f&&!h&&!R.current&&q["TableRow-unclickable"]);let $;(!i&&f||h||R.current)&&($=k=>{if(c!=="subheader"&&!(!C.current||x.current)){if(k.stopPropagation(),k.preventDefault(),h){h();return}if(R.current&&!p){x.current=!0;const{ctrlKey:A,metaKey:O}=k.nativeEvent;if(d&&d(n),(A||O)&&R.current instanceof HTMLAnchorElement){x.current=!1,window.open(R.current.href,"_blank");return}R.current.dispatchEvent(new MouseEvent(k.type,k.nativeEvent))}else x.current=!1,S(k)}});const N=g?"li":"tr",M=f?o.createElement(ck,{accessibilityLabel:u}):null;return o.createElement(Qo.Provider,{value:_},o.createElement(Nv.Provider,{value:y},o.createElement(N,{key:n,id:n,className:P,onMouseEnter:v,onMouseLeave:E,onClick:$,ref:w},M,t)))});function Xp(e,t){return e?Array.from(e.querySelectorAll(t)):[]}var fk={ScrollContainer:"Polaris-IndexTable-ScrollContainer"};function pk({children:e,scrollableContainerRef:t,onScroll:r}){m.useEffect(()=>{t.current&&t.current.dispatchEvent(new Event("scroll"))},[t]);const[n,a]=m.useState(Ov),s=m.useCallback(tr(()=>{if(!t.current)return;const i=t.current.scrollWidth-t.current.offsetWidth,l=t.current.scrollLeft>0,c=t.current.scrollLeft<i;r(l,c),a({scrollableContainer:t.current,canScrollLeft:l,canScrollRight:c})},40,{trailing:!0,leading:!0,maxWait:40}),[r,t]);return o.createElement(Lv.Provider,{value:n},o.createElement("div",{className:fk.ScrollContainer,ref:t,onScroll:s},e))}const mk=16,gk=300;function bk({headings:e,bulkActions:t=[],promotedBulkActions:r=[],children:n,emptyState:a,sort:s,paginatedSelectAllActionText:i,lastColumnSticky:l=!1,sortable:c,sortDirection:u,defaultSortDirection:d="descending",sortColumnIndex:h,onSort:f,sortToggleLabels:p,hasZebraStriping:g,pagination:b,...y}){const v=ei(),{loading:E,bulkSelectState:S,resourceName:_,bulkActionsAccessibilityLabel:R,selectMode:x,selectable:C=y.selectable,paginatedSelectAllText:w,itemCount:P,hasMoreItems:$,selectedItemsCount:N,condensed:M}=$v(),k=Iv(),A=se(),{value:O,toggle:L}=Wt(!1),F=m.useRef({top:0,left:0}),I=m.useRef([]),D=m.useRef(null),B=m.useRef(null),U=m.useRef(null),V=m.useRef(null),W=m.useRef(null),[H,Y]=m.useState(!1),[j,J]=m.useState(null),[ge,Oe]=m.useState(!0),Ce=m.useRef([]),De=m.useRef([]),je=m.useRef(null),Le=m.useRef(null),z=m.useRef(null),ae=m.useRef(null),we=m.useRef(null),he=m.useRef(!1),be=m.useRef(!1),ie=m.useRef(h),pe=m.useRef(!1),Ae=m.useRef(0),qe=m.useRef(!1);N!==Ae.current&&(pe.current=!0,Ae.current=N),!qe.current&&N!==0&&(qe.current=!0);const Fe=m.useCallback(X=>{X!==null&&!H&&Y(!0),U.current=X},[H]),me=m.useCallback(()=>{k(N===Qr?Qe.Page:Qe.All,!0)},[k,N]),Ue=m.useMemo(()=>tr(()=>{var _e,At;if(!B.current||!D.current)return;const X=D.current.getBoundingClientRect();F.current={top:X.top,left:X.left},I.current=Ce.current.map(Ft=>({offsetWidth:Ft.offsetWidth||0,offsetLeft:Ft.offsetLeft||0})),Ce.current.length!==0&&(C&&Ce.current.length>1&&(Ce.current[1].style.left=`${I.current[0].offsetWidth}px`,(_e=De.current)!=null&&_e.length&&(De.current[1].style.left=`${I.current[0].offsetWidth}px`)),(At=De.current)!=null&&At.length&&De.current.forEach((Ft,Ar)=>{var Ur;Ft.style.minWidth=`${((Ur=I.current[Ar])==null?void 0:Ur.offsetWidth)||0}px`}))}),[C]),Je=m.useCallback(()=>{var X,_e;ae.current&&B.current&&H&&(ae.current.style.setProperty("--pc-index-table-scroll-bar-content-width",`${B.current.offsetWidth-mk}px`),Oe(((X=we.current)==null?void 0:X.offsetWidth)===((_e=B.current)==null?void 0:_e.offsetWidth)))},[H]),ur=m.useCallback(tr(Je,gk,{trailing:!0}),[Je]),[Z,re]=m.useState(!0),ee=m.useCallback(tr(()=>{if(!l||!B.current||!D.current)return;const X=B.current.getBoundingClientRect(),_e=D.current.getBoundingClientRect();re(X.width>_e.width)}),[l]);m.useEffect(()=>{ee()},[ee]);const[oe,Re]=m.useState(!0),ke=m.useCallback(()=>{if(!D.current||!Ce.current.length)return;const X=D.current.getBoundingClientRect(),_e=C?Ce.current[0].getBoundingClientRect().width:0,At=Ce.current[C?1:0].getBoundingClientRect().width,Ft=C?Ce.current.length>2:1,Ar=l&&Ft?Ce.current[Ce.current.length-1].getBoundingClientRect().width:0;Re(X.width>At+_e+Ar+100)},[l,C]);m.useEffect(()=>{H&&ke()},[ke,H]);const Pt=m.useCallback(()=>{var X;(X=ae.current)==null||X.style.setProperty("--pc-index-table-scroll-bar-content-width","0px"),Ue(),ur(),ee(),ke()},[Ue,ur,ee,ke]),Mt=m.useCallback((X,_e)=>{!D.current||!ae.current||(he.current||(be.current=!0,ae.current.scrollLeft=D.current.scrollLeft),he.current=!1,z.current&&(z.current.scrollLeft=D.current.scrollLeft),(X&&!O||!X&&O)&&L(),re(_e))},[O,L]),bt=m.useCallback(()=>{!D.current||!ae.current||(be.current||(he.current=!0,D.current.scrollLeft=ae.current.scrollLeft),be.current=!1)},[]);m.useLayoutEffect(()=>{Ce.current=Xp(B.current,"[data-index-table-heading]"),De.current=Xp(je.current,"[data-index-table-sticky-heading]"),Ue()},[e,Ue,Le,H]),m.useEffect(()=>{Je(),J(M?V.current:B.current)},[H,Je,M]);const Ee=e.map((X,_e)=>Of(X,_e,"th",{"data-index-table-heading":!0},X.id)),ln=e.map((X,_e)=>Of(X,_e,"div",{"data-index-table-sticky-heading":!0})),[Wn,Un]=m.useState(N===Qr?`${P}+`:N);m.useEffect(()=>{(N===Qr||N>0)&&Un(N===Qr?`${P}+`:N)},[N,P]);const jn=A.translate("Polaris.IndexTable.selected",{selectedItemsCount:Wn}),pc=m.useCallback(()=>{k(Qe.Page,!S||S==="indeterminate")},[S,k]),mc=f_(),gc={enter:q["LoadingContainer-enter"],enterActive:q["LoadingContainer-enter-active"],exit:q["LoadingContainer-exit"],exitActive:q["LoadingContainer-exit-active"]},ps=o.createElement(Mn,{in:E,classNames:gc,timeout:parseInt(v.motion["motion-duration-100"],10),nodeRef:W,appear:!0,unmountOnExit:!0},o.createElement("div",{className:q.LoadingPanel,ref:W},o.createElement("div",{className:q.LoadingPanelRow},o.createElement(ha,{size:"small"}),o.createElement("span",{className:q.LoadingPanelText},A.translate("Polaris.IndexTable.resourceLoadingAccessibilityLabel",{resourceNamePlural:_.plural.toLocaleLowerCase()}))))),bc=T(q.StickyTable,O&&q["StickyTable-scrolling"],M&&q["StickyTable-condensed"]),ms=!M||N,ue=ms?r:[],Me=ms?t:[],yt=o.createElement("div",{className:bc,role:"presentation"},o.createElement(Yo,{boundingElement:j},X=>{const _e=T(q.StickyTableHeader,X&&q["StickyTableHeader-isSticky"],oe&&q["StickyTableHeader-sticky"],O&&q["StickyTableHeader-scrolling"],oe&&l&&q["StickyTableHeader-sticky-last"],oe&&l&&Z&&q["StickyTableHeader-sticky-scrolling"]),At=T(q.BulkActionsWrapper,x&&q.BulkActionsWrapperVisible,M&&q["StickyTableHeader-condensed"],X&&q["StickyTableHeader-isSticky"]),Ft=ms&&!M?o.createElement("div",{className:At},o.createElement(eh,{selectMode:x,onToggleAll:pc,paginatedSelectAllText:w,paginatedSelectAllAction:mc,accessibilityLabel:R,selected:S,promotedActions:ue,actions:Me,onSelectModeToggle:M?p_:void 0,label:jn,buttonSize:"micro"})):null,Ar=M?o.createElement("div",{className:T(q.HeaderWrapper,(!C||M)&&q.unselectable)},ps,s):o.createElement("div",{className:_e,ref:je},ps,o.createElement("div",{className:q.StickyTableHeadings,ref:z},ln));return o.createElement(o.Fragment,null,Ar,Ft)})),Wr=T(q.ScrollBarContainer,b&&q.ScrollBarContainerWithPagination,M&&q.scrollBarContainerCondensed,ge&&q.scrollBarContainerHidden),Xt=T(B.current&&H&&q.ScrollBarContent),_i=P>0?o.createElement(cv,{onMount:Je},o.createElement("div",{className:Wr,ref:we},o.createElement("div",{onScroll:bt,className:q.ScrollBar,ref:ae},o.createElement("div",{className:Xt})))):null,gs=c==null?void 0:c.some(X=>X),yc=T(q.Table,O&&q["Table-scrolling"],x&&q.disableTextSelection,!C&&q["Table-unselectable"],oe&&q["Table-sticky"],gs&&q["Table-sortable"],oe&&l&&q["Table-sticky-last"],oe&&l&&Z&&q["Table-sticky-scrolling"],g&&q.ZebraStriping),a_=a||o.createElement(rh,{title:A.translate("Polaris.IndexTable.emptySearchTitle",{resourceNamePlural:_.plural}),description:A.translate("Polaris.IndexTable.emptySearchDescription"),withIllustration:!0}),Nf=o.createElement(o.Fragment,null,o.createElement($t,{event:"resize",handler:Pt}),yt),s_=T(q.CondensedList,g&&q.ZebraStriping),i_=M?o.createElement(o.Fragment,null,Nf,o.createElement("ul",{"data-selectmode":!!x,className:s_,ref:V},n)):o.createElement(o.Fragment,null,Nf,o.createElement(pk,{scrollableContainerRef:D,onScroll:Mt},o.createElement("table",{ref:B,className:yc},o.createElement("thead",null,o.createElement("tr",{className:q.HeadingRow},Ee)),o.createElement("tbody",{ref:Fe},n)))),o_=P>0?i_:o.createElement("div",{className:q.EmptySearchResultWrapper},a_),l_=b?o.createElement("div",{className:q.PaginationWrapper},o.createElement(Do,Object.assign({type:"table"},b))):null;return o.createElement(o.Fragment,null,o.createElement("div",{className:q.IndexTable},o.createElement("div",{className:q.IndexTableWrapper},!M&&ps,o_,_i,l_)));function Of(X,_e,At,Ft,Ar){const Ur=_e===0,xa=_e===e.length-1,jr=c==null?void 0:c.some(Pi=>Pi===!0),Ci=X.alignment||"start",vc=T(q.TableHeading,Ci==="center"&&q["TableHeading-align-center"],Ci==="end"&&q["TableHeading-align-end"],jr&&q["TableHeading-sortable"],Ur&&q["TableHeading-second"],xa&&!X.hidden&&q["TableHeading-last"],!C&&q["TableHeading-unselectable"],X.flush&&q["TableHeading-flush"]),Ec=C!==!1&&Ur&&I.current&&I.current.length>0?{left:I.current[0].offsetWidth}:void 0,qn=o.createElement(At,Object.assign({id:Ar,className:vc,key:yk(X),style:Ec},Ft),d_(X,_e));if(_e!==0||!C)return qn;const wi=T(q.TableHeading,jr&&q["TableHeading-sortable"],_e===0&&q["TableHeading-first"]);return[o.createElement(At,Object.assign({className:wi,key:`${X}-${_e}`},Ft),c_()),qn]}function c_(){return o.createElement("div",{className:q.ColumnHeaderCheckboxWrapper},o.createElement(Ln,{label:A.translate("Polaris.IndexTable.selectAllLabel",{resourceNamePlural:_.plural}),labelHidden:!0,onChange:h_,checked:S}))}function u_(X,_e){pe.current=!1,qe.current=!1,ie.current=h,f==null||f(X,_e)}function d_(X,_e){let At;const Ft={width:X.tooltipWidth??"default",activatorWrapper:"div",dismissOnMouseOut:!0,persistOnClick:X.tooltipPersistsOnClick},Ar={...Ft,padding:"400",borderRadius:"200",content:X.tooltipContent,preferredPosition:"above"},Ur=o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium",visuallyHidden:X.hidden},X.title);X.new?At=o.createElement(_r,{wrap:!1,alignment:"center"},Ur,o.createElement(Tn,{tone:"new"},A.translate("Polaris.IndexTable.onboardingBadgeText"))):At=Ur;const xa={"--pc-index-table-heading-extra-padding-right":X.paddingBlockEnd?`var(--p-space-${X.paddingBlockEnd})`:"0"};if(c!=null&&c[_e]){const jr=_e===h,Ci=!jr&&_e===ie.current,vc=pe.current||!qe.current&&N!==0,Ec=u==="ascending";let qn=X.defaultSortDirection??d,wi=qn==="ascending"?ho:fo;jr&&(qn=Ec?"descending":"ascending",wi=u==="ascending"?ho:fo);const Sc=o.createElement("span",{className:T(q.TableHeadingSortIcon,(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortIcon-heading-align-end"],jr&&q["TableHeadingSortIcon-visible"])},o.createElement(wi,{focusable:"false","aria-hidden":"true",className:q.TableHeadingSortSvg})),Pi={onClick:()=>u_(_e,qn),className:T(q.TableHeadingSortButton,!jr&&(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortButton-heading-align-end"],jr&&(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortButton-heading-align-end-currently-sorted"],Ci&&!vc&&(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortButton-heading-align-end-previously-sorted"]),tabIndex:x?-1:0},Lf=o.createElement(rr,Pi,Sc,o.createElement("span",{className:T(p&&x&&X.tooltipContent&&q.TableHeadingTooltipUnderlinePlaceholder)},At));if(!p||x)return o.createElement("div",{className:q.SortableTableHeadingWithCustomMarkup},Lf);const m_=jr?u:qn,Mf=p[_e][m_];if(!X.tooltipContent)return o.createElement("div",{style:xa,className:T(X.paddingBlockEnd&&q["TableHeading-extra-padding-right"])},o.createElement(Gt,Object.assign({},Ft,{content:Mf,preferredPosition:"above"}),Lf));if(X.tooltipContent)return o.createElement("div",{className:T(q.SortableTableHeadingWithCustomMarkup,X.paddingBlockEnd&&q["TableHeading-extra-padding-right"]),style:xa},o.createElement(rr,Pi,o.createElement(Gt,Ar,o.createElement("span",{className:q.TableHeadingUnderline},At)),o.createElement(Gt,Object.assign({},Ft,{content:Mf,preferredPosition:"above"}),Sc)))}return X.tooltipContent?o.createElement("div",{style:xa,className:T(X.paddingBlockEnd&&q["TableHeading-extra-padding-right"])},o.createElement(Gt,Object.assign({},Ar,{activatorWrapper:"span"}),o.createElement("span",{className:T(q.TableHeadingUnderline,q.SortableTableHeaderWrapper)},At))):o.createElement("div",{style:xa,className:T(X.paddingBlockEnd&&q["TableHeading-extra-padding-right"])},At)}function h_(X){k(Qe.Page,X)}function f_(){if(!C||!$)return;const X=i??A.translate("Polaris.IndexTable.selectAllItems",{itemsLength:P,resourceNamePlural:_.plural.toLocaleLowerCase()});return{content:N===Qr?A.translate("Polaris.IndexTable.undo"):X,onAction:me}}function p_(){k(Qe.All,!1)}}function yk(e){return e.id?e.id:typeof e.title=="string"?e.title:""}function uh({children:e,selectable:t=!0,itemCount:r,selectedItemsCount:n=0,resourceName:a,loading:s,hasMoreItems:i,condensed:l,onSelectionChange:c,paginatedSelectAllText:u,...d}){return o.createElement(o.Fragment,null,o.createElement(ok,{selectable:t&&!l,itemCount:r,selectedItemsCount:n,resourceName:a,loading:s,hasMoreItems:i,condensed:l,onSelectionChange:c,paginatedSelectAllText:u},o.createElement(bk,d,e)))}uh.Cell=lk;uh.Row=hk;var vk={Code:"Polaris-InlineCode__Code"};const Ek=({children:e})=>o.createElement("code",{className:vk.Code},e);var Yp={KeyboardKey:"Polaris-KeyboardKey",small:"Polaris-KeyboardKey--small"};function Sk({children:e="",size:t}){const r=!t&&e.length>1?e.toLowerCase():e.toUpperCase(),n=T(Yp.KeyboardKey,t&&Yp[t]);return o.createElement("kbd",{className:n},r)}var Ve={LegacyFilters:"Polaris-LegacyFilters",LegacyFiltersContainer:"Polaris-LegacyFilters__LegacyFiltersContainer",LegacyFiltersContainerHeader:"Polaris-LegacyFilters__LegacyFiltersContainerHeader",LegacyFiltersDesktopContainerContent:"Polaris-LegacyFilters__LegacyFiltersDesktopContainerContent",LegacyFiltersMobileContainerContent:"Polaris-LegacyFilters__LegacyFiltersMobileContainerContent",LegacyFiltersContainerFooter:"Polaris-LegacyFilters__LegacyFiltersContainerFooter",LegacyFiltersMobileContainerFooter:"Polaris-LegacyFilters__LegacyFiltersMobileContainerFooter",EmptyFooterState:"Polaris-LegacyFilters__EmptyFooterState",FilterTriggerContainer:"Polaris-LegacyFilters__FilterTriggerContainer",FilterTrigger:"Polaris-LegacyFilters__FilterTrigger",FilterTriggerTitle:"Polaris-LegacyFilters__FilterTriggerTitle",AppliedFilterBadgeContainer:"Polaris-LegacyFilters__AppliedFilterBadgeContainer",open:"Polaris-LegacyFilters--open",FilterTriggerLabelContainer:"Polaris-LegacyFilters__FilterTriggerLabelContainer",first:"Polaris-LegacyFilters--first",last:"Polaris-LegacyFilters--last",FilterNodeContainer:"Polaris-LegacyFilters__FilterNodeContainer",SearchIcon:"Polaris-LegacyFilters__SearchIcon",Backdrop:"Polaris-LegacyFilters__Backdrop",HelpText:"Polaris-LegacyFilters__HelpText",TagsContainer:"Polaris-LegacyFilters__TagsContainer"};const dh=m.createContext({});var Zt={ConnectedFilterControl:"Polaris-LegacyFilters-ConnectedFilterControl",CenterContainer:"Polaris-LegacyFilters-ConnectedFilterControl__CenterContainer",right:"Polaris-LegacyFilters-ConnectedFilterControl--right",Item:"Polaris-LegacyFilters-ConnectedFilterControl__Item","Item-focused":"Polaris-LegacyFilters-ConnectedFilterControl__Item--focused",ProxyButtonContainer:"Polaris-LegacyFilters-ConnectedFilterControl__ProxyButtonContainer",RightContainer:"Polaris-LegacyFilters-ConnectedFilterControl__RightContainer",MoreFiltersButtonContainer:"Polaris-LegacyFilters-ConnectedFilterControl__MoreFiltersButtonContainer",queryFieldHidden:"Polaris-LegacyFilters-ConnectedFilterControl--queryFieldHidden",RightContainerWithoutMoreFilters:"Polaris-LegacyFilters-ConnectedFilterControl__RightContainerWithoutMoreFilters",onlyButtonVisible:"Polaris-LegacyFilters-ConnectedFilterControl--onlyButtonVisible",Wrapper:"Polaris-LegacyFilters-ConnectedFilterControl__Wrapper",AuxiliaryContainer:"Polaris-LegacyFilters-ConnectedFilterControl__AuxiliaryContainer"};function Uc({children:e}){const{value:t,setTrue:r,setFalse:n}=Wt(!1),a=T(Zt.Item,t&&Zt["Item-focused"]);return o.createElement("div",{onBlur:n,onFocus:r,className:a},e)}const _k=150;class Ck extends m.Component{constructor(...t){super(...t),this.state={availableWidth:0,proxyButtonsWidth:{}},this.container=m.createRef(),this.proxyButtonContainer=m.createRef(),this.moreFiltersButtonContainer=m.createRef(),this.handleResize=tr(()=>{this.measureProxyButtons(),this.measureAvailableWidth()},40,{leading:!0,trailing:!0,maxWait:40})}componentDidMount(){this.handleResize()}render(){const{children:t,rightPopoverableActions:r,rightAction:n,auxiliary:a,forceShowMorefiltersButton:s=!0,queryFieldHidden:i}=this.props,l=r!=null?this.getActionsToRender(r):[],c=T(Zt.ConnectedFilterControl,r&&Zt.right),u=s||r&&r.length!==l.length,d=T(Zt.RightContainer,!u&&Zt.RightContainerWithoutMoreFilters,i&&Zt.queryFieldHidden),h=l.length>0?o.createElement("div",{className:d},this.popoverFrom(l)):null,f=T(Zt.MoreFiltersButtonContainer,l.length===0&&Zt.onlyButtonVisible),p=n?o.createElement("div",{ref:this.moreFiltersButtonContainer,className:f},u&&o.createElement(Uc,null,n)):null,g=r?o.createElement("div",{className:Zt.ProxyButtonContainer,ref:this.proxyButtonContainer,"aria-hidden":!0},r.map(y=>o.createElement("div",{key:y.key,"data-key":y.key},this.activatorButtonFrom(y,{proxy:!0})))):null,b=a?o.createElement("div",{className:Zt.AuxiliaryContainer},a):null;return o.createElement(o.Fragment,null,g,o.createElement("div",{className:Zt.Wrapper},o.createElement("div",{className:c,ref:this.container},t?o.createElement("div",{className:Zt.CenterContainer},o.createElement(Uc,null,t)):null,h,p,o.createElement($t,{event:"resize",handler:this.handleResize})),b))}measureProxyButtons(){if(this.proxyButtonContainer.current){const t={};this.proxyButtonContainer.current&&Array.from(this.proxyButtonContainer.current.children).forEach(n=>{const a=n.getBoundingClientRect().width+78,s=n instanceof HTMLElement&&n.dataset.key;s&&(t[s]=a)}),this.setState({proxyButtonsWidth:t})}}measureAvailableWidth(){if(this.container.current&&this.moreFiltersButtonContainer.current){const t=this.container.current.getBoundingClientRect().width,r=this.moreFiltersButtonContainer.current.getBoundingClientRect().width,n=0,a=this.props.queryFieldHidden?0:_k,s=t-a-r-n;this.setState({availableWidth:s})}}getActionsToRender(t){let r=this.state.availableWidth;const n=[];for(let a=0;r>0&&a<t.length;a++){const s=t[a],i=this.state.proxyButtonsWidth[s.key];if(i<=r)n.push(s),r-=i;else break}return n}activatorButtonFrom(t,r){const n=r!=null&&r.proxy?void 0:`Activator-${t.key}`;return o.createElement(ye,{onClick:t.onAction,disclosure:!0,disabled:this.props.disabled||t.disabled,id:n,size:"large"},t.content)}popoverFrom(t){return t.map(r=>o.createElement(Uc,{key:r.key},o.createElement(nt,{active:r.popoverOpen,activator:this.activatorButtonFrom(r),onClose:r.onAction,preferredAlignment:"left",sectioned:!0},r.popoverContent)))}}function wk({children:e,hidden:t}){return t?o.createElement(G,{as:"span",visuallyHidden:!0},e):o.createElement(o.Fragment,null,e)}var Yt={Tag:"Polaris-Tag",disabled:"Polaris-Tag--disabled",clickable:"Polaris-Tag--clickable",linkable:"Polaris-Tag--linkable",removable:"Polaris-Tag--removable",Button:"Polaris-Tag__Button",Link:"Polaris-Tag__Link",segmented:"Polaris-Tag--segmented",Text:"Polaris-Tag__Text",sizeLarge:"Polaris-Tag--sizeLarge",overlay:"Polaris-Tag--overlay"};function Mv({children:e,disabled:t=!1,onClick:r,onRemove:n,accessibilityLabel:a,url:s,size:i}){const l=se(),c=n&&s,u=T(Yt.Tag,t&&Yt.disabled,r&&Yt.clickable,n&&Yt.removable,s&&!t&&Yt.linkable,c&&Yt.segmented,i&&Yt[Be("size",i)]);let d=a;d||(d=typeof e=="string"?e:void 0);const h=o.createElement(G,{as:"span",variant:"bodySm",truncate:!0},o.createElement("span",{title:d,className:Yt.Text},e));if(r)return o.createElement("button",{type:"button",disabled:t,className:u,onClick:r},h);const f=l.translate("Polaris.Tag.ariaLabel",{children:d||""}),p=n?o.createElement("button",{type:"button","aria-label":f,className:T(Yt.Button,c&&Yt.segmented),onClick:n,onMouseUp:lo,disabled:t},o.createElement(le,{source:pa})):null,g=s&&!t?o.createElement("a",{className:T(Yt.Link,c&&Yt.segmented),href:s},h):h;return o.createElement("span",{className:u,"aria-disabled":t},g,i==="large"&&o.createElement("span",{className:Yt.overlay}),p)}var ht={Sheet:"Polaris-Sheet",Container:"Polaris-Sheet__Container",Bottom:"Polaris-Sheet__Bottom",enterBottom:"Polaris-Sheet--enterBottom",enterBottomActive:"Polaris-Sheet--enterBottomActive",exitBottom:"Polaris-Sheet--exitBottom",exitBottomActive:"Polaris-Sheet--exitBottomActive",Right:"Polaris-Sheet__Right",enterRight:"Polaris-Sheet--enterRight",enterRightActive:"Polaris-Sheet--enterRightActive",exitRight:"Polaris-Sheet--exitRight",exitRightActive:"Polaris-Sheet--exitRightActive"};const Pk={enter:T(ht.Bottom,ht.enterBottom),enterActive:T(ht.Bottom,ht.enterBottomActive),exit:T(ht.Bottom,ht.exitBottom),exitActive:T(ht.Bottom,ht.exitBottomActive)},Ak={enter:T(ht.Right,ht.enterRight),enterActive:T(ht.Right,ht.enterRightActive),exit:T(ht.Right,ht.exitRight),exitActive:T(ht.Right,ht.exitRightActive)};function rd({children:e,open:t,onClose:r,onEntered:n,onExit:a,accessibilityLabel:s,activator:i}){const l=ei(),{isNavigationCollapsed:c}=rs(),u=m.useRef(null),d=m.useRef(null),h=m.useCallback(()=>{r();const p=i&&Zp(i)?i&&i.current:d.current;p&&requestAnimationFrame(()=>Bt(p))},[i,r]);m.useEffect(()=>{},[]);const f=i&&!Zp(i)?o.createElement("div",{ref:d},i):null;return o.createElement(o.Fragment,null,f,o.createElement(Ho,{idPrefix:"sheet"},o.createElement(Mn,{nodeRef:u,classNames:c?Pk:Ak,timeout:parseInt(l.motion["motion-duration-300"],10),in:t,mountOnEnter:!0,unmountOnExit:!0,onEntered:n,onExit:a},o.createElement("div",Object.assign({className:ht.Container},Bu.props,I_.props,{ref:u}),o.createElement(Zo,{trapping:t},o.createElement("div",{role:"dialog","aria-modal":!0,tabIndex:-1,className:ht.Sheet,"aria-label":s},e)))),o.createElement(vr,{keyCode:it.Escape,handler:h}),t&&o.createElement(Jo,{transparent:!0,onClick:h})))}function Zp(e){return Object.prototype.hasOwnProperty.call(e,"current")}var Nr;(function(e){e.Filter="Filter",e.Shortcut="Shortcut"})(Nr||(Nr={}));class Fv extends m.Component{constructor(...t){super(...t),this.state={open:!1,readyForFocus:!1},this.moreFiltersButtonContainer=m.createRef(),this.moreFiltersDoneButtonContainer=m.createRef(),this.focusNode=m.createRef(),this.closeFilters=()=>{this.setState({open:!1},()=>{this.moreFiltersButtonContainer.current&&Bt(this.moreFiltersButtonContainer.current,!1)})},this.toggleFilters=()=>{this.state.open===!0?this.closeFilters():this.openFilters()},this.setReadyForFocus=r=>()=>{this.setState({readyForFocus:r})},this.handleClearAll=()=>{this.props.onClearAll(),this.moreFiltersDoneButtonContainer.current&&Bt(this.moreFiltersDoneButtonContainer.current,!1)}}render(){const{filters:t,queryValue:r,onQueryBlur:n,onQueryChange:a,onQueryFocus:s,focused:i,onClearAll:l,appliedFilters:c,onQueryClear:u,queryPlaceholder:d,children:h,disabled:f=!1,helpText:p,hideTags:g,hideQueryField:b,disableQueryField:y=!1,i18n:v,mediaQuery:{isNavigationCollapsed:E}}=this.props,{resourceName:S}=this.context,{open:_,readyForFocus:R}=this.state,x=_?o.createElement(o.Fragment,null,o.createElement(Go,null),o.createElement("div",{className:Ve.Backdrop,onClick:this.closeFilters})):null,C=t.map((j,J)=>{const ge=this.state[`${j.key}${Nr.Filter}`]===!0,Oe=ge?N_:Qs,Ce=T(Ve.FilterTriggerContainer,ge&&Ve.open,J===0&&Ve.first,t.length!==1&&J===t.length-1&&Ve.last),De=this.getAppliedFilterContent(j.key),je=De?o.createElement("div",{className:Ve.AppliedFilterBadgeContainer},o.createElement(Tn,{tone:"new"},De)):null,Le=`${j.key}Collapsible`,z=T(Ve.FilterTrigger);return o.createElement("div",{key:j.key,className:Ce},o.createElement("button",{onClick:()=>this.toggleFilter(j.key),className:z,id:`${j.key}ToggleButton`,type:"button","aria-controls":Le,"aria-expanded":ge},o.createElement("div",{className:Ve.FilterTriggerLabelContainer},o.createElement("h3",{className:Ve.FilterTriggerTitle},o.createElement(G,{as:"span",tone:this.props.disabled||j.disabled?"subdued":void 0},j.label)),o.createElement("span",{className:Ve.FilterTriggerIcon},o.createElement(le,{source:Oe,tone:"base"}))),je),o.createElement(Xo,{id:Le,open:ge,onAnimationEnd:this.setReadyForFocus(!0)},o.createElement("div",{className:Ve.FilterNodeContainer},o.createElement(nh,{disabled:!ge||!R||!_,root:this.focusNode},this.generateFilterMarkup(j)))))}),w=c?c.length:0,P=g&&w>0?v.translate("Polaris.Filters.moreFiltersWithCount",{count:w}):v.translate("Polaris.Filters.moreFilters"),$=t.length?o.createElement("div",{ref:this.moreFiltersButtonContainer},o.createElement(ye,{onClick:this.toggleFilters,disabled:f,size:"large"},P)):null,N=S||{singular:v.translate("Polaris.ResourceList.defaultItemSingular"),plural:v.translate("Polaris.ResourceList.defaultItemPlural")},M=this.transformFilters(t),k=o.createElement(Ck,{rightPopoverableActions:M,rightAction:$,auxiliary:h,disabled:f,forceShowMorefiltersButton:t.length>M.length,queryFieldHidden:b},b?null:o.createElement(Nn,{placeholder:d||v.translate("Polaris.Filters.filter",{resourceName:N.plural}),onChange:a,onBlur:n,onFocus:s,value:r,focused:i,label:d||v.translate("Polaris.Filters.filter",{resourceName:N.plural}),labelHidden:!0,prefix:o.createElement("span",{className:Ve.SearchIcon},o.createElement(le,{source:Zs})),clearButton:!0,onClearButtonClick:u,disabled:f||y,autoComplete:"off"})),A=T(Ve.LegacyFiltersContainerHeader),O=o.createElement("div",{className:A},o.createElement(G,{variant:"headingLg",as:"h3"},P),o.createElement(ye,{icon:pa,variant:"plain",accessibilityLabel:v.translate("Polaris.Filters.cancel"),onClick:this.closeFilters})),L=o.createElement("div",{className:A},o.createElement(ye,{icon:pa,variant:"plain",accessibilityLabel:v.translate("Polaris.Filters.cancel"),onClick:this.closeFilters}),o.createElement(G,{variant:"headingLg",as:"h3"},P),o.createElement(ye,{onClick:this.closeFilters,variant:"primary"},v.translate("Polaris.Filters.done"))),F=T(Ve.LegacyFiltersContainerFooter),I=o.createElement("div",{className:F},o.createElement(ye,{onClick:this.handleClearAll,disabled:!this.hasAppliedFilters()},v.translate("Polaris.Filters.clearAllFilters")),o.createElement("div",{ref:this.moreFiltersDoneButtonContainer},o.createElement(ye,{onClick:this.closeFilters,variant:"primary"},v.translate("Polaris.Filters.done")))),D=o.createElement("div",{className:Ve.LegacyFiltersMobileContainerFooter},this.hasAppliedFilters()?o.createElement(ye,{onClick:l,fullWidth:!0},v.translate("Polaris.Filters.clearAllFilters")):o.createElement("div",{className:Ve.EmptyFooterState},o.createElement(G,{tone:"subdued",as:"span"},o.createElement("p",null,v.translate("Polaris.Filters.noFiltersApplied"))))),B=!c||c.length<1,U=g?null:o.createElement(wk,{hidden:B},o.createElement("div",{className:Ve.TagsContainer,"aria-live":"polite"},(c||[]).map(j=>o.createElement(Mv,{key:j.key,onRemove:()=>{j.onRemove(j.key)},disabled:f},j.label)))),V=T(Ve.LegacyFiltersMobileContainerContent),W=T(Ve.LegacyFiltersDesktopContainerContent),H=E?o.createElement(rd,{accessibilityLabel:P,open:_,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1)},L,o.createElement(Ga,{className:V,shadow:!0},C,D)):o.createElement(rd,{accessibilityLabel:P,open:_,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1)},o.createElement("div",{className:Ve.LegacyFiltersContainer},O,o.createElement(Ga,{className:W,shadow:!0},C),I)),Y=p?o.createElement("div",{id:"FiltersHelpText",className:Ve.HelpText},o.createElement(G,{tone:"subdued",as:"span"},p)):null;return o.createElement($_.Provider,{value:!0},o.createElement("div",{className:Ve.LegacyFilters},k,H,U,Y,x,o.createElement(vr,{keyCode:it.Escape,handler:this.closeFilters})))}hasAppliedFilters(){const{appliedFilters:t,queryValue:r}=this.props;return!!(t&&t.length>0)||!!(r&&r!=="")}getAppliedFilterContent(t){const{appliedFilters:r}=this.props;if(!r)return;const n=r.find(a=>a.key===t);return n==null?void 0:n.label}getAppliedFilterRemoveHandler(t){const{appliedFilters:r}=this.props;if(!r)return;const n=r.find(a=>a.key===t);return n==null?void 0:n.onRemove}openFilters(){this.setState({open:!0})}toggleFilter(t){this.state[`${t}${Nr.Filter}`]===!0?this.setState({readyForFocus:!1,[`${t}${Nr.Filter}`]:!1}):this.setState({readyForFocus:!1,[`${t}${Nr.Filter}`]:!0})}openFilterShortcut(t){this.setState({[`${t}${Nr.Shortcut}`]:!0})}closeFilterShortcut(t){this.setState({[`${t}${Nr.Shortcut}`]:!1})}toggleFilterShortcut(t){this.state[`${t}${Nr.Shortcut}`]===!0?this.closeFilterShortcut(t):this.openFilterShortcut(t)}transformFilters(t){const r=[];return Tk(t).forEach(n=>{const{key:a,label:s,disabled:i}=n;r.push({popoverContent:this.generateFilterMarkup(n),popoverOpen:!!this.state[`${a}${Nr.Shortcut}`],key:a,content:s,disabled:i,onAction:()=>this.toggleFilterShortcut(a)})}),r}generateFilterMarkup(t){const r=this.props.i18n,n=this.getAppliedFilterRemoveHandler(t.key),a=n==null?void 0:()=>{n(t.key)},s=!t.hideClearButton&&o.createElement(ye,{variant:"plain",disabled:a==null,onClick:a,accessibilityLabel:r.translate("Polaris.Filters.clearLabel",{filterName:t.label})},r.translate("Polaris.Filters.clear"));return o.createElement("div",{ref:this.focusNode},o.createElement(_r,{vertical:!0,spacing:"tight"},t.filter,s))}}Fv.contextType=dh;function Tk(e){return e.filter(t=>t.shortcut===!0)}function Rk(e){const t=se(),r=rs();return o.createElement(Fv,Object.assign({},e,{i18n:t,mediaQuery:r}))}function Qp(e,t,r,n,a){const s=n.reduce((u,d)=>u+d,0),i=e.map((u,d)=>d),l=[],c=[];if(a>s)l.push(...i);else{l.push(t);let u=n[t];i.forEach(d=>{if(d!==t){const h=n[d];if(u+h>=a-r){c.push(d);return}l.push(d),u+=h}})}return{visibleTabs:l,hiddenTabs:c}}var Ie={LegacyTabs:"Polaris-LegacyTabs",fitted:"Polaris-LegacyTabs--fitted",TabContainer:"Polaris-LegacyTabs__TabContainer",Title:"Polaris-LegacyTabs__Title",fillSpace:"Polaris-LegacyTabs--fillSpace",Tab:"Polaris-LegacyTabs__Tab","Tab-selected":"Polaris-LegacyTabs__Tab--selected",titleWithIcon:"Polaris-LegacyTabs--titleWithIcon",Panel:"Polaris-LegacyTabs__Panel","Panel-hidden":"Polaris-LegacyTabs__Panel--hidden",Item:"Polaris-LegacyTabs__Item",DisclosureTab:"Polaris-LegacyTabs__DisclosureTab","DisclosureTab-visible":"Polaris-LegacyTabs__DisclosureTab--visible",DisclosureActivator:"Polaris-LegacyTabs__DisclosureActivator",TabMeasurer:"Polaris-LegacyTabs__TabMeasurer"};function em({hidden:e,id:t,tabID:r,children:n}){const a=T(Ie.Panel,e&&Ie["Panel-hidden"]);return o.createElement("div",{className:a,id:t,role:"tabpanel","aria-labelledby":r,tabIndex:-1},n)}function Dv({id:e,focused:t,siblingTabHasFocus:r,children:n,onClick:a,selected:s,url:i,panelID:l,measuring:c,accessibilityLabel:u}){const d=m.useRef(s),h=m.useRef(!1),f=m.useRef(null);m.useEffect(()=>{if(c)return;(t||document.activeElement&&document.activeElement.id===e)&&s&&l!=null&&!h.current&&(tm(l),h.current=!0),s&&!d.current&&l!=null?tm(l):t&&f.current!=null&&Bt(f.current),d.current=s},[t,e,c,l,s]);const p=a&&a.bind(null,e),g=T(Ie.Tab,s&&Ie["Tab-selected"]);let b;s&&!r&&!c||t&&!c?b=0:b=-1;const y=T(Ie.TabContainer,s&&Ie.Underline),v=i?o.createElement(Cr,{id:e,url:i,role:"tab",tabIndex:b,onClick:p,className:g,"aria-selected":s,"aria-controls":l,"aria-label":u,onMouseUp:lo},o.createElement("span",{className:Ie.Title},o.createElement(G,{as:"span",variant:"bodyMd",fontWeight:"semibold"},n))):o.createElement("button",{id:e,role:"tab",type:"button",tabIndex:b,className:g,onClick:p,"aria-selected":s,"aria-controls":l,"aria-label":u,onMouseUp:lo},o.createElement("span",{className:Ie.Title},o.createElement(G,{as:"span",variant:"bodyMd",fontWeight:"semibold"},n)));return o.createElement("li",{className:y,ref:f,role:"presentation"},v)}function tm(e){const t=document.getElementById(e);t&&t.focus({preventScroll:!0})}const kk=m.memo(function({selected:t,tabs:r,activator:n,tabToFocus:a,siblingTabHasFocus:s,handleMeasurement:i}){const l=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{if(!l.current)return;const f=l.current.offsetWidth,p=l.current.children,b=Array.from(p).map(v=>Math.ceil(v.getBoundingClientRect().width)),y=b.pop()||0;i({containerWidth:f,disclosureWidth:y,hiddenTabWidths:b})})},[i]);m.useEffect(()=>{u()},[u,r]),Fo(()=>{});const d=r.map((f,p)=>o.createElement(Dv,{measuring:!0,key:`${p}${f.id}Hidden`,id:`${f.id}Measurer`,siblingTabHasFocus:s,focused:p===a,selected:p===t,onClick:xk,url:f.url},f.content)),h=T(Ie.LegacyTabs,Ie.TabMeasurer);return o.createElement("div",{className:h,ref:l},o.createElement($t,{event:"resize",handler:u}),d,n)});function xk(){}let Hv=class extends m.PureComponent{constructor(...t){super(...t),this.focusedNode=null,this.setFocusedNode=r=>{this.focusedNode=r}}componentDidMount(){const{focusedNode:t}=this,{focused:r}=this.props;t&&t instanceof HTMLElement&&r&&t.focus()}componentDidUpdate(){const{focusedNode:t}=this,{focused:r}=this.props;t&&t instanceof HTMLElement&&r&&t.focus()}render(){const{id:t,panelID:r,children:n,url:a,accessibilityLabel:s,onClick:i=Ik}=this.props,l=T(Ie.Item),c={id:t,ref:this.setFocusedNode,onClick:i,className:l,"aria-controls":r,"aria-selected":!1,"aria-label":s},u=a?o.createElement(Cr,Object.assign({},c,{url:a}),n):o.createElement("button",Object.assign({},c,{type:"button"}),n);return o.createElement("li",null,u)}};Hv.contextType=xd;function Ik(){}function $k({focusIndex:e,disclosureTabs:t,onClick:r=rm,onKeyPress:n=rm}){const a=t.map(({id:s,content:i,...l},c)=>o.createElement(Hv,Object.assign({key:s},l,{id:s,focused:c===e,onClick:r.bind(null,s)}),i));return o.createElement("div",{onKeyDown:Nk,onKeyUp:n},o.createElement(te,{as:"ul",padding:"200"},a))}function rm(){}function Nk(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}class Ok extends m.PureComponent{constructor(...t){super(...t),this.state={disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1},this.handleKeyPress=r=>{const{tabToFocus:n,visibleTabs:a,hiddenTabs:s,showDisclosure:i}=this.state,l=r.key,c=i?a.concat(s):[...a];let u=c.indexOf(n);l==="ArrowRight"&&(u+=1,u===c.length&&(u=0)),l==="ArrowLeft"&&(u===-1||u===0?u=c.length-1:u-=1),this.setState({tabToFocus:c[u]})},this.renderTabMarkup=(r,n)=>{const{selected:a,children:s}=this.props,{tabToFocus:i}=this.state,l=r.panelID||`${r.id}-panel`;return o.createElement(Dv,{key:`${n}-${r.id}`,id:r.id,siblingTabHasFocus:i>-1,focused:n===i,selected:n===a,onClick:this.handleTabClick,panelID:s?l:void 0,accessibilityLabel:r.accessibilityLabel,url:r.url},r.content)},this.handleFocus=r=>{const{selected:n,tabs:a}=this.props,s=r.target;if(s.classList.contains(Ie.Tab)||s.classList.contains(Ie.Item)){let l=-1;a.every((c,u)=>c.id===s.id?(l=u,!1):!0),this.setState({tabToFocus:l});return}if(s.classList.contains(Ie.DisclosureActivator))return;if(!r.relatedTarget){this.setState({tabToFocus:n});return}const i=r.relatedTarget;i instanceof HTMLElement&&!i.classList.contains(Ie.Tab)&&!i.classList.contains(Ie.Item)&&!i.classList.contains(Ie.DisclosureActivator)&&this.setState({tabToFocus:n})},this.handleBlur=r=>{if(r.relatedTarget==null){this.setState({tabToFocus:-1});return}const n=r.relatedTarget;n instanceof HTMLElement&&!n.classList.contains(Ie.Tab)&&!n.classList.contains(Ie.Item)&&this.setState({tabToFocus:-1})},this.handleDisclosureActivatorClick=()=>{this.setState(({showDisclosure:r})=>({showDisclosure:!r}))},this.handleClose=()=>{this.setState({showDisclosure:!1})},this.handleMeasurement=r=>{const{tabs:n,selected:a}=this.props,{tabToFocus:s}=this.state,{hiddenTabWidths:i,containerWidth:l,disclosureWidth:c}=r,{visibleTabs:u,hiddenTabs:d}=Qp(n,a,c,i,l);this.setState({tabToFocus:s===-1?-1:a,visibleTabs:u,hiddenTabs:d,disclosureWidth:c,containerWidth:l,tabWidths:i})},this.handleTabClick=r=>{const{tabs:n,onSelect:a=Lk}=this.props,s=n.find(l=>l.id===r);if(s==null)return;const i=n.indexOf(s);a(i)}}static getDerivedStateFromProps(t,r){const{disclosureWidth:n,tabWidths:a,containerWidth:s}=r,{visibleTabs:i,hiddenTabs:l}=Qp(t.tabs,t.selected,n,a,s);return{visibleTabs:i,hiddenTabs:l,selected:t.selected}}render(){const{tabs:t,selected:r,fitted:n,children:a,i18n:s,disclosureText:i}=this.props,{tabToFocus:l,visibleTabs:c,hiddenTabs:u,showDisclosure:d}=this.state,h=u.map(C=>t[C]),f=a?t.map((C,w)=>r===w?o.createElement(em,{id:t[w].panelID||`${t[w].id}-panel`,tabID:t[w].id,key:t[w].id},a):o.createElement(em,{id:t[w].panelID||`${t[w].id}-panel`,tabID:t[w].id,key:t[w].id,hidden:!0})):null,p=c.sort((C,w)=>C-w).map(C=>this.renderTabMarkup(t[C],C)),g=c.length<t.length,b=!!i,y=T(Ie.LegacyTabs,n&&Ie.fitted,g&&Ie.fillSpace),v=T(Ie.DisclosureTab,g&&Ie["DisclosureTab-visible"]),E=T(Ie.DisclosureActivator,b&&Ie.Tab),S=T(Ie.Title,b&&Ie.titleWithIcon),_=b?o.createElement(o.Fragment,null,i,o.createElement(le,{source:Qs,tone:"subdued"})):o.createElement(le,{source:Xs,tone:"subdued"}),R=o.createElement("button",{type:"button",className:E,onClick:this.handleDisclosureActivatorClick,"aria-label":s.translate("Polaris.Tabs.toggleTabsLabel")},o.createElement("span",{className:S},_)),x=i?o.createElement("div",{className:Ie.TabContainer},R):R;return o.createElement("div",null,o.createElement(te,{borderBlockEndWidth:"025",borderColor:"border-secondary",paddingInlineStart:"200",paddingInlineEnd:"200"},o.createElement(kk,{tabToFocus:l,activator:x,selected:r,tabs:t,siblingTabHasFocus:l>-1,handleMeasurement:this.handleMeasurement}),o.createElement("ul",{role:"tablist",className:y,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:Mk,onKeyUp:this.handleKeyPress},p,o.createElement("li",{className:v,role:"presentation"},o.createElement(nt,{preferredPosition:"below",activator:x,active:g&&d,onClose:this.handleClose,autofocusTarget:"first-node"},o.createElement($k,{focusIndex:u.indexOf(l),disclosureTabs:h,onClick:this.handleTabClick,onKeyPress:this.handleKeyPress}))))),f)}}function Lk(){}function Mk(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}function Fk(e){const t=se();return o.createElement(Ok,Object.assign({},e,{i18n:t}))}const Dk=m.memo(function(){const{startLoading:t,stopLoading:r}=wa();return m.useEffect(()=>(t(),()=>{r()}),[t,r]),null});var kr={MediaCard:"Polaris-MediaCard",portrait:"Polaris-MediaCard--portrait",MediaContainer:"Polaris-MediaCard__MediaContainer",sizeSmall:"Polaris-MediaCard--sizeSmall",InfoContainer:"Polaris-MediaCard__InfoContainer",ActionContainer:"Polaris-MediaCard__ActionContainer"};function Hk({title:e,children:t,primaryAction:r,secondaryAction:n,description:a,popoverActions:s=[],portrait:i=!1,size:l="medium",onDismiss:c}){const u=se(),{value:d,toggle:h}=Wt(!1);let f=null;if(e){const w=typeof e=="string"?o.createElement(G,{variant:"headingSm",as:"h2"},e):e;f=o.createElement("div",null,w)}const p=c?o.createElement(ye,{icon:ni,onClick:c,size:"slim",accessibilityLabel:u.translate("Polaris.MediaCard.dismissButton"),variant:"tertiary"}):null,g=o.createElement(de,{blockAlign:"center"},o.createElement(ye,{icon:Xs,onClick:h,size:"slim",accessibilityLabel:u.translate("Polaris.MediaCard.popoverButton"),variant:"tertiary"})),b=s.length>0?o.createElement(nt,{active:d,activator:g,onClose:h,preferredAlignment:"left",preferredPosition:"below"},o.createElement(an,{items:s,onActionAnyItem:h})):null,y=r?o.createElement("div",null,Er(r)):null,v=n?o.createElement("div",null,Er(n)):null,E=T(kr.ActionContainer,i&&kr.portrait),S=y||v?o.createElement("div",{className:E},o.createElement(Sr,null,y,v)):null,_=T(kr.MediaCard,i&&kr.portrait),R=T(kr.MediaContainer,i&&kr.portrait,l==="small"&&kr.sizeSmall),x=T(kr.InfoContainer,i&&kr.portrait,l==="small"&&kr.sizeSmall),C=b||p?o.createElement(te,{position:"absolute",insetInlineEnd:"500",zIndex:"var(--p-z-index-2)"},o.createElement(de,{gap:"100",wrap:!1},b,p)):null;return o.createElement(Rn,null,o.createElement("div",{className:_},o.createElement("div",{className:R},t),o.createElement("div",{className:x},o.createElement(te,{padding:"500"},o.createElement(rt,{gap:"200"},o.createElement(de,{wrap:!1,align:"space-between",gap:"200"},f,C),o.createElement(G,{as:"p",variant:"bodySm"},a),S)))))}const hh=m.createContext({location:""});var ne={Navigation:"Polaris-Navigation",UserMenu:"Polaris-Navigation__UserMenu",ContextControl:"Polaris-Navigation__ContextControl",PrimaryNavigation:"Polaris-Navigation__PrimaryNavigation",LogoContainer:"Polaris-Navigation__LogoContainer",hasLogoSuffix:"Polaris-Navigation--hasLogoSuffix",Logo:"Polaris-Navigation__Logo",LogoLink:"Polaris-Navigation__LogoLink",Item:"Polaris-Navigation__Item","Icon-resized":"Polaris-Navigation__Icon--resized",Badge:"Polaris-Navigation__Badge",ItemInnerWrapper:"Polaris-Navigation__ItemInnerWrapper",ItemWrapper:"Polaris-Navigation__ItemWrapper",ItemInnerDisabled:"Polaris-Navigation__ItemInnerDisabled","ItemInnerWrapper-display-actions-on-hover":"Polaris-Navigation--itemInnerWrapperDisplayActionsOnHover",SecondaryActions:"Polaris-Navigation__SecondaryActions","ItemInnerWrapper-selected":"Polaris-Navigation__ItemInnerWrapper--selected",Text:"Polaris-Navigation__Text","ItemInnerWrapper-open":"Polaris-Navigation__ItemInnerWrapper--open","Item-selected":"Polaris-Navigation__Item--selected","Item-child-active":"Polaris-Navigation--itemChildActive","Item-disabled":"Polaris-Navigation__Item--disabled",Icon:"Polaris-Navigation__Icon","ListItem-hasAction":"Polaris-Navigation__ListItem--hasAction",subNavigationActive:"Polaris-Navigation--subNavigationActive",ListItem:"Polaris-Navigation__ListItem",RollupSection:"Polaris-Navigation__RollupSection",SecondaryNavigation:"Polaris-Navigation__SecondaryNavigation","Text-truncated":"Polaris-Navigation__Text--truncated",ItemWithFloatingActions:"Polaris-Navigation__ItemWithFloatingActions",SecondaryAction:"Polaris-Navigation__SecondaryAction",List:"Polaris-Navigation__List","Item-line":"Polaris-Navigation__Item--line","Item-hover-line":"Polaris-Navigation--itemHoverLine","Item-line-pointer":"Polaris-Navigation--itemLinePointer","Item-hover-pointer":"Polaris-Navigation--itemHoverPointer","SecondaryNavigation-noIcon":"Polaris-Navigation__SecondaryNavigation--noIcon",Section:"Polaris-Navigation__Section","Section-fill":"Polaris-Navigation__Section--fill","Section-withSeparator":"Polaris-Navigation__Section--withSeparator",SectionHeading:"Polaris-Navigation__SectionHeading",Action:"Polaris-Navigation__Action",RollupToggle:"Polaris-Navigation__RollupToggle",Indicator:"Polaris-Navigation__Indicator",SecondaryNavigationOpen:"Polaris-Navigation__SecondaryNavigationOpen","snappy-grow":"Polaris-Navigation__snappy--grow"};let et;(function(e){e[e.MatchForced=0]="MatchForced",e[e.MatchUrl=1]="MatchUrl",e[e.MatchPaths=2]="MatchPaths",e[e.Excluded=3]="Excluded",e[e.NoMatch=4]="NoMatch"})(et||(et={}));function Bk({ItemComponent:e,icon:t,longestMatch:r,subNavigationItems:n,showExpanded:a,truncateText:s,secondaryNavigationId:i}){const l=m.useId(),{onNavigationDismiss:c}=m.useContext(hh),[u,d]=m.useState(),h=n.findIndex(p=>wn(p,r)),f=n.findIndex(p=>wn(p,u));return o.createElement("div",{className:T(ne.SecondaryNavigation,a&&ne.SecondaryNavigationOpen,!t&&ne["SecondaryNavigation-noIcon"])},o.createElement(Xo,{id:i||l,open:a,transition:!1},o.createElement("ul",{className:ne.List},n.map((p,g)=>{const{label:b,...y}=p,v=()=>{c==null||c(),p.onClick&&p.onClick!==c&&p.onClick()},E=g<h;return o.createElement(e,Object.assign({key:b},y,{label:b,showVerticalLine:E,showVerticalHoverPointer:g===f,level:1,onMouseEnter:p.disabled?void 0:()=>d(p),onMouseLeave:p.disabled?void 0:()=>d(void 0),matches:wn(p,r),onClick:v,truncateText:s}))}))))}const nm=2,Wk=1e3;function fh({url:e,icon:t,matchedItemIcon:r,label:n,subNavigationItems:a=[],secondaryAction:s,secondaryActions:i,displayActionsOnHover:l,disabled:c,onClick:u,accessibilityLabel:d,selected:h,badge:f,new:p,matches:g,exactMatch:b,matchPaths:y,excludePaths:v,external:E,onToggleExpandedState:S,expanded:_,shouldResizeIcon:R,truncateText:x,showVerticalLine:C,showVerticalHoverPointer:w,level:P=0,onMouseEnter:$,onMouseLeave:N}){const M=se(),{isNavigationCollapsed:k}=rs(),A=m.useId(),{location:O,onNavigationDismiss:L}=m.useContext(hh),F=m.useRef(null),[I,D]=m.useState(!1);m.useEffect(()=>{!k&&_&&(S==null||S())},[_,k,S]),Mb(()=>{const me=F.current;x&&me&&D(me.scrollHeight>me.clientHeight)},[x]);const B=c?-1:0,V=a.filter(me=>me.new).length>0?o.createElement("span",{className:ne.Indicator},o.createElement(Zd,{pulse:!0})):null,W=_o({url:e,matches:g,exactMatch:b,matchPaths:y,excludePaths:v},O),H=a.filter(me=>{const Ue=_o(me,O);return Ue===et.MatchForced||Ue===et.MatchUrl||Ue===et.MatchPaths}),Y=H.length>0,j=h??(W===et.MatchForced||W===et.MatchUrl||W===et.MatchPaths),J=j||Y?r??t:t,ge=J?o.createElement("div",{className:T(ne.Icon,R&&ne["Icon-resized"])},o.createElement(le,{source:J})):null;let Oe=null;p?Oe=o.createElement(Tn,{tone:"new"},M.translate("Polaris.Badge.TONE_LABELS.new")):typeof f=="string"?Oe=o.createElement(Tn,{tone:"new"},f):Oe=f;const Ce=Oe==null?null:o.createElement("div",{className:ne.Badge},Oe),De=!w&&!g&&P!==0?"subdued":void 0;let je="regular";(g||j)&&!Y?je="semibold":(P===0||w)&&(je="medium");const Le=o.createElement("span",{className:T(ne.Text,x&&ne["Text-truncated"]),ref:F},o.createElement(G,{as:"span",variant:"bodyMd",tone:De,fontWeight:je},n),V);if(e==null){const me=T(ne.Item,c&&ne["Item-disabled"],h&&ne["Item-selected"]);return o.createElement("li",{className:ne.ListItem},o.createElement("div",{className:ne.ItemWrapper},o.createElement("div",{className:T(ne.ItemInnerWrapper,c&&ne.ItemInnerDisabled,h&&ne["ItemInnerWrapper-selected"])},o.createElement("button",{type:"button",className:me,disabled:c,"aria-disabled":c,"aria-label":d,onClick:Fe(u)},ge,Le,Ce))))}const z=i||s&&[s];z&&z.length>nm&&(z.length=nm);const ae=z!=null&&z.length?o.createElement("span",{className:ne.SecondaryActions},z.map(me=>o.createElement(Uk,Object.assign({key:me.accessibilityLabel},me,{tabIndex:B,disabled:c})))):null,we=o.createElement(o.Fragment,null,ge,Le,ae?null:Ce),he=o.createElement(o.Fragment,null,ae?Ce:null),be=j||_||Y,ie=T(ne.Item,c&&ne["Item-disabled"],(j||Y)&&ne["Item-selected"],be&&ne.subNavigationActive,Y&&ne["Item-child-active"],C&&ne["Item-line"],g&&ne["Item-line-pointer"],w&&ne["Item-hover-pointer"]);let pe=null;if(a.length>0){const me=H.sort(({url:Ue},{url:Je})=>Je.length-Ue.length)[0];pe=o.createElement(Bk,{ItemComponent:fh,icon:J,longestMatch:me,subNavigationItems:a,showExpanded:be,truncateText:x,secondaryNavigationId:A})}const Ae=T(ne.ListItem,!!(z&&z.length)&&ne["ListItem-hasAction"]),qe=()=>{const me=o.createElement(Cr,Object.assign({url:e,className:ie,external:E,tabIndex:B,"aria-disabled":c,"aria-label":d,onClick:Fe(u)},Vk(A,a.length>0,be)),we);return I?o.createElement(Gt,{hoverDelay:Wk,content:n,preferredPosition:"above"},me):me};return o.createElement("li",{className:Ae,onMouseEnter:()=>{$==null||$(n)},onMouseLeave:N},o.createElement("div",{className:ne.ItemWrapper},o.createElement("div",{className:T(ne.ItemInnerWrapper,j&&Y&&ne["ItemInnerWrapper-open"]||j&&!Y&&ne["ItemInnerWrapper-selected"],l&&ne["ItemInnerWrapper-display-actions-on-hover"],c&&ne.ItemInnerDisabled)},l&&ae&&Ce?o.createElement("span",{className:ne.ItemWithFloatingActions},qe(),ae):o.createElement(o.Fragment,null,qe(),ae),he)),pe);function Fe(me){return Ue=>{const{currentTarget:Je}=Ue;if(Je.getAttribute("href")===O&&Ue.preventDefault(),a&&a.length>0&&k)Ue.preventDefault(),S==null||S();else if(L){L(),me&&me!==L&&me();return}me&&me()}}}function Uk({url:e,icon:t,accessibilityLabel:r,tooltip:n,onClick:a,disabled:s,tabIndex:i}){const l=e?o.createElement(Cr,{external:!0,url:e,className:ne.SecondaryAction,tabIndex:i,"aria-disabled":s,"aria-label":r,onClick:a},o.createElement(le,{source:t})):o.createElement(rr,{className:ne.SecondaryAction,tabIndex:i,disabled:s,accessibilityLabel:r,onClick:a},o.createElement(le,{source:t}));return n?o.createElement(Gt,n," ",l," "):l}function jk(e,t){const r=_o(e,t),n=e.subNavigationItems&&e.subNavigationItems.filter(i=>{const l=_o(i,t);return l===et.MatchForced||l===et.MatchUrl||l===et.MatchPaths}),a=n&&n.length>0;return r===et.MatchForced||r===et.MatchUrl||r===et.MatchPaths||a}function So(e){const t=e.split("?")[0].split("#")[0];return t.endsWith("/")?t:`${t}/`}function qk(e,t){return So(e)===So(t)}function jc(e,t){return So(e).startsWith(So(t))}function _o({url:e,matches:t,exactMatch:r,matchPaths:n,excludePaths:a},s){return e==null?et.NoMatch:t?et.MatchForced:t===!1||a&&a.some(l=>jc(s,l))?et.Excluded:n&&n.some(l=>jc(s,l))?et.MatchPaths:(r?qk(s,e):jc(s,e))?et.MatchUrl:et.NoMatch}function Vk(e,t,r){return t?{"aria-expanded":r,"aria-controls":e}:void 0}function Kk({title:e,fill:t,action:r,items:n,rollup:a,separator:s}){const{value:i,toggle:l,setFalse:c}=Wt(!1),u=m.useRef(null),{isNavigationCollapsed:d}=rs(),[h,f]=m.useState(),p=(N,M)=>()=>{N&&N(),u.current&&cancelAnimationFrame(u.current),(!M||!d)&&(u.current=requestAnimationFrame(c))};m.useEffect(()=>()=>{u.current&&cancelAnimationFrame(u.current)});const g=T(ne.Section,s&&ne["Section-withSeparator"],t&&ne["Section-fill"]),b=r&&o.createElement("button",{type:"button",className:ne.Action,"aria-label":r.accessibilityLabel,onClick:r.onClick},o.createElement(le,{source:r.icon})),y=r&&(r.tooltip?o.createElement(Gt,r.tooltip,b):b),v=e&&o.createElement("li",{className:ne.SectionHeading},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium",tone:"subdued"},e),y),E=n.map((N,M)=>{const{onClick:k,label:A,subNavigationItems:O,...L}=N,F=O!=null&&O.length>0,I=()=>{f(h===M?-1:M)};return o.createElement(fh,Object.assign({key:A},L,{label:A,subNavigationItems:O,onClick:p(k,F),onToggleExpandedState:I,expanded:h===M}))}),S=T(ne.Item,ne.RollupToggle),_=a&&(i?a.hide:a.view),R=a&&n.length>a.after&&o.createElement("div",{className:ne.ListItem,key:"List Item"},o.createElement("div",{className:ne.ItemWrapper},o.createElement("div",{className:ne.ItemInnerWrapper},o.createElement("button",{type:"button",className:S,onClick:l,"aria-label":_},o.createElement("span",{className:ne.Icon},o.createElement(le,{source:Xs})))))),x=n.findIndex(N=>a?a.activePath===N.url||N.url&&a.activePath.startsWith(N.url)||(N.subNavigationItems?N.subNavigationItems.some(({url:M})=>a.activePath.startsWith(M)):!1):!1),C=a?E.slice(0,a.after):E,w=a?E.slice(a.after):[];a&&x!==-1&&x>a.after-1&&C.push(...w.splice(x-a.after,1));const P=m.useId(),$=a&&w.length>0&&o.createElement("li",{className:ne.RollupSection},o.createElement(Xo,{id:P,open:i},o.createElement("ul",{className:ne.List},w)),R);return o.createElement("ul",{className:g},v,C,$)}const ph=function({children:t,contextControl:r,location:n,onDismiss:a,ariaLabelledBy:s,logoSuffix:i}){const{logo:l}=wa(),c=lh(l,104),u=l?o.createElement("div",{className:T(ne.LogoContainer,i&&ne.hasLogoSuffix)},o.createElement(Cr,{url:l.url||"",className:ne.LogoLink,style:{width:c}},o.createElement(Fr,{source:l.topBarSource||"",alt:l.accessibilityLabel||"",className:ne.Logo,style:{width:c}})),i):null,d=r?o.createElement("div",{className:ne.ContextControl},r):u,h=m.useMemo(()=>({location:n,onNavigationDismiss:a}),[n,a]);return o.createElement(hh.Provider,{value:h},o.createElement(ts.Provider,{value:!0},o.createElement("nav",{className:ne.Navigation,"aria-labelledby":s},d,o.createElement(Ga,{className:ne.PrimaryNavigation},t))))};ph.Item=fh;ph.Section=Kk;function nd(e,t,r){return e.length!==t.length?!1:e.every((n,a)=>{const s=t[a];return r!=null?r(n,s):n===s})}var vt={Option:"Polaris-OptionList-Option",SingleSelectOption:"Polaris-OptionList-Option__SingleSelectOption",focused:"Polaris-OptionList-Option--focused",active:"Polaris-OptionList-Option--active",disabled:"Polaris-OptionList-Option--disabled",select:"Polaris-OptionList-Option--select",Media:"Polaris-OptionList-Option__Media",Label:"Polaris-OptionList-Option__Label",MultiSelectOption:"Polaris-OptionList-Option__MultiSelectOption",CheckboxLabel:"Polaris-OptionList-Option__CheckboxLabel",verticalAlignTop:"Polaris-OptionList-Option--verticalAlignTop",verticalAlignCenter:"Polaris-OptionList-Option--verticalAlignCenter",verticalAlignBottom:"Polaris-OptionList-Option--verticalAlignBottom",Icon:"Polaris-OptionList-Option__Icon",Checkbox:"Polaris-OptionList-Option__Checkbox"};function zk({label:e,value:t,id:r,select:n,active:a,allowMultiple:s,disabled:i,media:l,onClick:c,section:u,index:d,verticalAlign:h,onPointerEnter:f,onFocus:p}){const{value:g,toggle:b}=Wt(!1),y=m.useCallback(()=>{i||c(u,d)},[i,d,c,u]),v=m.useCallback(()=>{i||f(u,d)},[i,f,u,d]),E=m.useCallback(()=>{b(),p(u,d)},[b,p,u,d]),S=l?o.createElement("div",{className:vt.Media},l):null,_=T(vt.SingleSelectOption,g&&vt.focused,i&&vt.disabled,n&&vt.select,a&&vt.active,h&&vt[Be("verticalAlign",h)]),R=T(vt.Label,i&&vt.disabled,a&&vt.active,n&&vt.select,h&&vt[Be("verticalAlign",h)],s&&vt.CheckboxLabel,s&&vt.MultiSelectOption),x=s?o.createElement("label",{htmlFor:r,className:R},o.createElement("div",{className:vt.Checkbox},o.createElement(Ln,{id:r,label:"",ariaDescribedBy:`${r}-label`,value:t,checked:n,disabled:i,onChange:y})),S,o.createElement("span",{id:`${r}-label`},e)):o.createElement("button",{id:r,type:"button",className:_,onClick:y,disabled:i,onFocus:E,onBlur:b,"aria-pressed":a||n},o.createElement(o.Fragment,null,o.createElement(de,{wrap:!1,blockAlign:Gk(h)},S,e),(n||a)&&o.createElement("span",{className:vt.Icon},o.createElement(le,{source:Ko})))),C=a?o.createElement(Ga.ScrollTo,null):null;return o.createElement("li",{key:r,className:vt.Option,tabIndex:-1,onPointerEnter:v},C,x)}function Gk(e){switch(e){case"top":return"start";case"center":return"center";case"bottom":return"end";default:return"start"}}function Jk({options:e,sections:t,title:r,selected:n,allowMultiple:a,role:s,verticalAlign:i,onChange:l,id:c,onPointerEnterOption:u,onFocusOption:d}){const[h,f]=m.useState(am(e,t,r)),p=m.useId(),g=c??p;ch(()=>{f(am(e||[],t||[],r))},[e,t,r],Xk);const b=m.useCallback((_,R)=>{const x=h[_].options[R].value,C=n.indexOf(x);if(a){const w=C===-1?[x,...n]:[...n.slice(0,C),...n.slice(C+1,n.length)];l(w);return}l([x])},[h,n,a,l]),y=m.useCallback((_,R)=>{if(!u)return;const x=h[_].options[R].value;u(x)},[h,u]),v=m.useCallback((_,R)=>{if(!d)return;const x=h[_].options[R].value;d(x)},[h,d]),S=h.length>0?h.map(({title:_,options:R},x)=>{const C=x===0,w=C?"h2":"h3",P=_?o.createElement(te,{paddingBlockStart:C?"050":"300",paddingInlineStart:"150",paddingBlockEnd:"100",paddingInlineEnd:"150",borderColor:"border-secondary"},o.createElement(G,{as:w,variant:"headingSm"},_)):null,$=R&&R.map((k,A)=>{const O=n.includes(k.value),L=k.id||`${g}-${x}-${A}`;return o.createElement(zk,Object.assign({key:L},k,{id:L,section:x,index:A,onClick:b,select:O,allowMultiple:a,verticalAlign:i,onPointerEnter:y,onFocus:v}))}),N=o.createElement(te,{as:"ul",id:`${g}-${x}`,role:s},$),M=C?_?"100":"0":_?"050":"0";return o.createElement(te,{key:_||`noTitle-${x}`,as:"li",paddingBlockStart:M},o.createElement(rt,{gap:C&&t?void 0:"0"},P,N))}):null;return o.createElement(te,{as:"ul",role:s,padding:"150"},S)}function am(e,t,r){if(e==null){const n={options:[],title:r};return t==null?[]:[n,...t]}return t==null?[{title:r,options:e}]:[{title:r,options:e},...t]}function Xk(e,t){return zu(e)&&zu(t)?nd(e,t,Yk):nd(e,t)}function Yk(e,t){const{options:r}=e,{options:n}=t,a=nd(r,n),s=e.title===t.title;return a&&s}var Zk={PageActions:"Polaris-PageActions"};function Qk({primaryAction:e,secondaryActions:t}){let r=null;Ff(e)?r=o.createElement(o.Fragment,null,e):e&&(r=nn(e,{variant:"primary"}));let n=null;return O_(t)&&t.length>0?n=o.createElement(Sr,null,nn(t)):Ff(t)&&(n=o.createElement(o.Fragment,null,t)),o.createElement("div",{className:Zk.PageActions},o.createElement(_r,{distribution:"trailing",spacing:"tight"},n,r))}function ex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var sm={Activator:"Polaris-Picker-Activator",disabled:"Polaris-Picker-Activator--disabled"};const Bv=m.forwardRef(({disabled:e,label:t,placeholder:r,selected:n,onClick:a},s)=>o.createElement("button",{ref:s,disabled:e,onClick:a,className:T(sm.Activator,e&&sm.disabled)},o.createElement(rt,{as:"span",gap:"100"},t&&o.createElement(G,{as:"span",variant:"bodySm",alignment:"start",tone:"subdued"},t),(n!==""||r)&&o.createElement(G,{as:"span",variant:"bodyMd",alignment:"start",tone:n?void 0:"subdued"},n||r)),o.createElement("span",null,o.createElement(le,{tone:"subdued",source:qb}))));Bv.displayName="Activator";var tx={SearchField:"Polaris-Picker-SearchField"};function rx({value:e,id:t,type:r="text",onFocus:n,onBlur:a,onChange:s,label:i,prefix:l,placeholder:c,focused:u}){var P;const d=o.useRef(null),h=Gy(),{activeOptionId:f,listboxId:p,setTextFieldFocused:g,setTextFieldLabelId:b,onTextFieldFocus:y,onTextFieldChange:v,onTextFieldBlur:E}=h,S=m.useId(),_=m.useMemo(()=>t||S,[S,t]),R=m.useMemo(()=>qs(t||S),[S,t]);m.useEffect(()=>{b&&b(R)},[R,b]);const x=m.useCallback($=>{n&&n($),y&&y(),g&&g(!0)},[n,y,g]),C=m.useCallback($=>{a&&a($),E&&E(),g&&g(!1)},[a,E,g]),w=m.useCallback(($,N)=>{s&&s($,N),v&&v($)},[s,v]);return u&&document.activeElement!==d.current&&((P=d.current)==null||P.focus()),o.createElement(de,{gap:"100",blockAlign:"center"},o.createElement(Vb,{id:_},o.createElement(G,{as:"span",visuallyHidden:!0},i),o.createElement("span",null,l)),o.createElement("input",{ref:d,id:_,className:tx.SearchField,value:e,type:r,"aria-activedescendant":f,role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":"true",placeholder:c,"aria-controls":p,onFocus:x,onBlur:C,onChange:({target:$})=>w($.value,_)}))}const nx=e=>new RegExp(e,"i"),ax=e=>new RegExp(`^${ex(e)}$`,"i");function sx({activator:e,allowMultiple:t,searchField:r,options:n=[],willLoadMoreOptions:a,height:s,addAction:i,onScrolledToBottom:l,onClose:c,...u}){var V;const d=o.createRef(),[h,f]=m.useState([]),[p,g]=m.useState(!1),[b,y]=m.useState(),[v,E]=m.useState(),[S,_]=m.useState(),[R,x]=m.useState(""),[C,w]=m.useState(n),P=!p,$=m.useCallback(()=>{var W;g(!1),c==null||c(),(W=d.current)==null||W.focus()},[d,c]),N=m.useCallback(()=>{g(!0)},[]),M=m.useCallback(()=>{P&&N()},[P,N]),k=m.useCallback(()=>{P&&N()},[P,N]),A=m.useCallback(()=>{p&&($(),x(""),w(n))},[p,$,n]),O=m.useMemo(()=>({activeOptionId:b,expanded:p,listboxId:S,setTextFieldLabelId:E,onTextFieldFocus:M,onTextFieldChange:k,onTextFieldBlur:A}),[b,p,S,E,M,k,A]),L=m.useMemo(()=>({allowMultiple:t}),[t]),F=m.useMemo(()=>({listboxId:S,textFieldLabelId:v,textFieldFocused:p,willLoadMoreOptions:a,setActiveOptionId:y,setListboxId:_,onKeyToBottom:l}),[S,v,p,a,y,_,l]),I=m.useCallback(W=>{if(x(W),W===""){w(n);return}const H=n==null?void 0:n.filter(Y=>nx(W).exec(Qi(Y.children)));w(H??[])},[n]),D=m.useCallback(W=>{var H;if(x(""),I(""),(H=u.onSelect)==null||H.call(u,W),!t){$(),f([W]);return}f(Y=>h.includes(W)?Y.filter(j=>j!==W):[...Y,W])},[I,u,t,h,$]),B=Qi((V=n.find(W=>W.value===(h==null?void 0:h[0])))==null?void 0:V.children),U=n.some(W=>{const H=ax(R);return Qi(W.children).match(H)});return o.createElement(nt,{activator:o.createElement(Bv,Object.assign({},e,{onClick:N,selected:B||"",placeholder:e.placeholder,ref:d})),active:p,autofocusTarget:"none",onClose:$,preferredPosition:"cover",preventFocusOnClose:!0},o.createElement(nt.Pane,{onScrolledToBottom:l,height:s},r?o.createElement(te,{paddingBlockStart:"200",paddingBlockEnd:"100",paddingInline:"200",borderBlockEndWidth:"025",borderColor:"border"},o.createElement(Kd.Provider,{value:O},o.createElement(rx,Object.assign({},r,{value:R,onChange:W=>{var H;I(W),(H=r.onChange)==null||H.call(r,W,r.id??"")},prefix:o.createElement(le,{source:Zs}),labelHidden:!0,focused:p})))):null,o.createElement(zd.Provider,{value:F},o.createElement(Gd.Provider,{value:L},o.createElement(te,{paddingBlock:"200"},o.createElement(ot,Object.assign({},u,{onSelect:D}),C==null?void 0:C.map(W=>o.createElement(ot.Option,Object.assign({key:W.value,selected:h.some(H=>H===W.value)},W))),i&&R!==""&&!U?o.createElement(ot.Action,Object.assign({},i,{value:R})):null))))))}const Qi=e=>{var t;return typeof e=="string"?e:m.isValidElement(e)?Qi((t=e==null?void 0:e.props)==null?void 0:t.children):""},ix={isNavigationCollapsed:!1};function ox({strict:e,children:t,i18n:r,link:n,mediaQuery:a,features:s,frame:i,theme:l=U_}){const c=e?m.StrictMode:m.Fragment,u=m.useMemo(()=>new sC(r||{}),[r]),d=m.useMemo(()=>new iC,[]),h=m.useMemo(()=>new L_,[]),f=lx(i),p=oC(ix,a);return o.createElement(c,null,o.createElement(M_.Provider,{value:l},o.createElement(F_.Provider,{value:D_(l)},o.createElement(xd.Provider,{value:s},o.createElement(H_.Provider,{value:u},o.createElement(kd.Provider,{value:d},o.createElement(Ub.Provider,{value:h},o.createElement(B_.Provider,{value:n},o.createElement(W_.Provider,{value:p},o.createElement(zb,null,o.createElement(lC,null,o.createElement(cC,null,o.createElement(ai.Provider,{value:f},t)))))))))))))}function La(){}function lx({logo:e=void 0,showToast:t=La,hideToast:r=La,toastMessages:n=[],setContextualSaveBar:a=La,removeContextualSaveBar:s=La,startLoading:i=La,stopLoading:l=La}={}){return{logo:e,showToast:t,hideToast:r,toastMessages:n,setContextualSaveBar:a,removeContextualSaveBar:s,startLoading:i,stopLoading:l}}var un={ProgressBar:"Polaris-ProgressBar",sizeSmall:"Polaris-ProgressBar--sizeSmall",sizeMedium:"Polaris-ProgressBar--sizeMedium",sizeLarge:"Polaris-ProgressBar--sizeLarge",toneHighlight:"Polaris-ProgressBar--toneHighlight",tonePrimary:"Polaris-ProgressBar--tonePrimary",toneSuccess:"Polaris-ProgressBar--toneSuccess",toneCritical:"Polaris-ProgressBar--toneCritical",Indicator:"Polaris-ProgressBar__Indicator",IndicatorAppearActive:"Polaris-ProgressBar__IndicatorAppearActive",IndicatorAppearDone:"Polaris-ProgressBar__IndicatorAppearDone",Progress:"Polaris-ProgressBar__Progress",Label:"Polaris-ProgressBar__Label"};function cx({progress:e=0,size:t="medium",tone:r="highlight",animated:n=!0,ariaLabelledBy:a}){const s=ei(),i=se(),l=m.useRef(null),c=T(un.ProgressBar,t&&un[Be("size",t)],r&&un[Be("tone",r)]);i.translate(e<0?"Polaris.ProgressBar.negativeWarningMessage":"Polaris.ProgressBar.exceedWarningMessage",{progress:e});const u=ux(e),d=n?s.motion["motion-duration-500"]:s.motion["motion-duration-0"];return o.createElement("div",{className:c},o.createElement("progress",{"aria-labelledby":a,className:un.Progress,value:u,max:"100"}),o.createElement(Mn,{in:!0,appear:!0,timeout:parseInt(d,10),nodeRef:l,classNames:{appearActive:un.IndicatorAppearActive,appearDone:un.IndicatorAppearDone}},o.createElement("div",{ref:l,className:un.Indicator,style:{"--pc-progress-bar-duration":d,"--pc-progress-bar-percent":u/100}},o.createElement("span",{className:un.Label},u,"%"))))}function ux(e,t){let r;return e<0?r=0:e>100?r=100:r=e,r}var Co={RangeSlider:"Polaris-RangeSlider","Track--dashed-after":"Polaris-RangeSlider--trackDashedAfter","Track--dashed":"Polaris-RangeSlider--trackDashed"},at={DualThumb:"Polaris-RangeSlider-DualThumb",TrackWrapper:"Polaris-RangeSlider-DualThumb__TrackWrapper",disabled:"Polaris-RangeSlider-DualThumb--disabled",Track:"Polaris-RangeSlider-DualThumb__Track",error:"Polaris-RangeSlider-DualThumb--error",Thumbs:"Polaris-RangeSlider-DualThumb__Thumbs",Prefix:"Polaris-RangeSlider-DualThumb__Prefix",Suffix:"Polaris-RangeSlider-DualThumb__Suffix",Output:"Polaris-RangeSlider-DualThumb__Output",OutputBubble:"Polaris-RangeSlider-DualThumb__OutputBubble"},_t;(function(e){e[e.Lower=0]="Lower",e[e.Upper=1]="Upper"})(_t||(_t={}));class Wv extends m.Component{constructor(...t){super(...t),this.state={value:qc(this.props.value,this.props.min,this.props.max,this.props.step),trackWidth:0,trackLeft:0},this.track=m.createRef(),this.trackWrapper=m.createRef(),this.thumbLower=m.createRef(),this.thumbUpper=m.createRef(),this.setTrackPosition=tr(()=>{if(this.track.current){const{width:n,left:a}=this.track.current.getBoundingClientRect(),s=n-16,i=a+16/2,l=this.props.max-this.props.min,c=this.props.min/l*s;this.setState({trackWidth:s,trackLeft:i-c})}},40,{leading:!0,trailing:!0,maxWait:40}),this.handleMouseDownThumbLower=r=>{r.button!==0||this.props.disabled||(Ii(this.handleMouseMoveThumbLower),r.stopPropagation())},this.handleMouseMoveThumbLower=r=>{const n=this.state.value[1];this.setValue([this.actualXPosition(r.clientX),n],_t.Upper)},this.handleTouchStartThumbLower=r=>{this.props.disabled||($i(this.handleTouchMoveThumbLower),r.stopPropagation())},this.handleTouchMoveThumbLower=r=>{r.preventDefault();const n=this.state.value[1];this.setValue([this.actualXPosition(r.touches[0].clientX),n],_t.Upper)},this.handleMouseDownThumbUpper=r=>{r.button!==0||this.props.disabled||(Ii(this.handleMouseMoveThumbUpper),r.stopPropagation())},this.handleMouseMoveThumbUpper=r=>{const n=this.state.value[0];this.setValue([n,this.actualXPosition(r.clientX)],_t.Lower)},this.handleTouchStartThumbUpper=r=>{this.props.disabled||($i(this.handleTouchMoveThumbUpper),r.stopPropagation())},this.handleTouchMoveThumbUpper=r=>{r.preventDefault();const n=this.state.value[0];this.setValue([n,this.actualXPosition(r.touches[0].clientX)],_t.Lower)},this.handleKeypressLower=r=>{if(this.props.disabled)return;const{incrementValueLower:n,decrementValueLower:a}=this,i={[it.UpArrow]:n,[it.RightArrow]:n,[it.DownArrow]:a,[it.LeftArrow]:a}[r.keyCode];i!=null&&(r.preventDefault(),r.stopPropagation(),i())},this.handleKeypressUpper=r=>{if(this.props.disabled)return;const{incrementValueUpper:n,decrementValueUpper:a}=this,i={[it.UpArrow]:n,[it.RightArrow]:n,[it.DownArrow]:a,[it.LeftArrow]:a}[r.keyCode];i!=null&&(r.preventDefault(),r.stopPropagation(),i())},this.incrementValueLower=()=>{this.setValue([this.state.value[0]+this.props.step,this.state.value[1]],_t.Upper)},this.decrementValueLower=()=>{this.setValue([this.state.value[0]-this.props.step,this.state.value[1]],_t.Upper)},this.incrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]+this.props.step],_t.Lower)},this.decrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]-this.props.step],_t.Lower)},this.dispatchValue=()=>{const{onChange:r,id:n}=this.props,{value:a}=this.state;r(a,n)},this.setValue=(r,n)=>{const{props:{min:a,max:s,step:i},state:{value:l}}=this,c=qc(r,a,s,i,n);Vc(c,l)===!1&&this.setState({value:c},this.dispatchValue)},this.handleMouseDownTrack=r=>{if(r.button!==0||this.props.disabled)return;r.preventDefault();const n=this.actualXPosition(r.clientX),{value:a}=this.state,s=Math.abs(a[0]-n),i=Math.abs(a[1]-n);s<=i?(this.setValue([n,a[1]],_t.Upper),Ii(this.handleMouseMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([a[0],n],_t.Lower),Ii(this.handleMouseMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.handleTouchStartTrack=r=>{if(this.props.disabled)return;r.preventDefault();const n=this.actualXPosition(r.touches[0].clientX),{value:a}=this.state,s=Math.abs(a[0]-n),i=Math.abs(a[1]-n);s<=i?(this.setValue([n,a[1]],_t.Upper),$i(this.handleTouchMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([a[0],n],_t.Lower),$i(this.handleTouchMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.actualXPosition=r=>{if(this.track.current){const{min:n,max:a}=this.props,{trackLeft:s,trackWidth:i}=this.state;return(r-s)/i*(a-n)}else return 0}}static getDerivedStateFromProps(t,r){const{min:n,step:a,max:s,value:i,onChange:l,id:c}=t,{prevValue:u}=r;if(Vc(u,i))return null;const d=qc(i,n,s,a);return Vc(i,d)||l(d,c),{prevValue:i,value:d}}componentDidMount(){this.setTrackPosition(),this.trackWrapper.current!=null&&this.trackWrapper.current.addEventListener("touchstart",this.handleTouchStartTrack,{passive:!1})}componentWillUnmount(){this.trackWrapper.current!=null&&this.trackWrapper.current.removeEventListener("touchstart",this.handleTouchStartTrack)}render(){const{id:t,min:r,max:n,prefix:a,suffix:s,disabled:i,output:l,error:c,onFocus:u,onBlur:d,label:h,labelAction:f,labelHidden:p,helpText:g}=this.props,{value:b}=this.state,y=t,v=`${t}Upper`,E=[];c&&E.push(`${t}Error`);const S=E.length?E.join(" "):void 0,_=T(at.TrackWrapper,c&&at.error,i&&at.disabled),R=T(at.Thumbs,at.ThumbLower,i&&at.disabled),x=T(at.Thumbs,at.ThumbUpper,i&&at.disabled),C=this.state.trackWidth,w=n-r,P=r/w*C,$=b[0]/w*C-P,N=b[1]/w*C-P,M=T(at.Output,at.OutputLower),k=!i&&l?o.createElement("output",{htmlFor:y,className:M,style:{left:`${$}px`}},o.createElement("div",{className:at.OutputBubble},o.createElement(G,{as:"span",variant:"headingSm",alignment:"center"},b[0]))):null,A=T(at.Output,at.OutputUpper),O=!i&&l?o.createElement("output",{htmlFor:v,className:A,style:{left:`${N}px`}},o.createElement("div",{className:at.OutputBubble},o.createElement(G,{as:"span",variant:"headingSm",alignment:"center"},b[1]))):null,L={"--pc-range-slider-progress-lower":`${$}px`,"--pc-range-slider-progress-upper":`${N}px`},F=a&&o.createElement("div",{className:at.Prefix},a),I=s&&o.createElement("div",{className:at.Suffix},s);return o.createElement(o.Fragment,null,o.createElement(Ys,{id:t,label:h,error:c,action:f,labelHidden:p,helpText:g},o.createElement("div",{className:T(at.DualThumb,Co.RangeSlider)},F,o.createElement("div",{className:_,onMouseDown:this.handleMouseDownTrack,ref:this.trackWrapper},o.createElement("div",{className:at.Track,style:L,ref:this.track}),o.createElement("div",{className:Co["Track--dashed"]}),o.createElement("div",{id:y,className:R,style:{left:`${$}px`},role:"slider","aria-disabled":i,"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":b[0],"aria-invalid":!!c,"aria-describedby":S,"aria-labelledby":qs(t),onFocus:u,onBlur:d,tabIndex:0,onKeyDown:this.handleKeypressLower,onMouseDown:this.handleMouseDownThumbLower,onTouchStart:this.handleTouchStartThumbLower,ref:this.thumbLower}),k,o.createElement("div",{id:v,className:x,style:{left:`${N}px`},role:"slider","aria-disabled":i,"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":b[1],"aria-invalid":!!c,"aria-describedby":S,"aria-labelledby":qs(t),onFocus:u,onBlur:d,tabIndex:0,onKeyDown:this.handleKeypressUpper,onMouseDown:this.handleMouseDownThumbUpper,onTouchStart:this.handleTouchStartThumbUpper,ref:this.thumbUpper}),O),I)),o.createElement($t,{event:"resize",handler:this.setTrackPosition}))}}Wv.contextType=xd;function Ii(e){document.addEventListener("mousemove",e),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",e)},{once:!0})}function $i(e){const t=()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t),document.removeEventListener("touchcancel",t)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t,{once:!0}),document.addEventListener("touchcancel",t,{once:!0})}function qc(e,t,r,n,a=_t.Upper){let s=u(h(e[1])),i=d(h(e[0]));const l=s-n,c=i+n;return a===_t.Upper&&i>l?i=l:a===_t.Lower&&s<c&&(s=c),[i,s];function u(f){const p=t+n;return f<p?p:f>r?r:f}function d(f){const p=r-n;return f<t?t:f>p?p:f}function h(f){return Math.round(f/n)*n}}function Vc(e,t){return e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1]}var Kr={SingleThumb:"Polaris-RangeSlider-SingleThumb",disabled:"Polaris-RangeSlider-SingleThumb--disabled",InputWrapper:"Polaris-RangeSlider-SingleThumb__InputWrapper",Prefix:"Polaris-RangeSlider-SingleThumb__Prefix",Suffix:"Polaris-RangeSlider-SingleThumb__Suffix",Input:"Polaris-RangeSlider-SingleThumb__Input",error:"Polaris-RangeSlider-SingleThumb--error",Output:"Polaris-RangeSlider-SingleThumb__Output",OutputBubble:"Polaris-RangeSlider-SingleThumb__OutputBubble"};function dx(e){return Math.sign(e)===1?-Math.abs(e):Math.sign(e)===-1?Math.abs(e):0}function hx(e){const{id:t,error:r,helpText:n,value:a,min:s,max:i,disabled:l,output:c,prefix:u,suffix:d,label:h,labelAction:f,labelHidden:p,step:g,onBlur:b,onFocus:y}=e,v=Ot(a,s,i),E=[];r&&E.push(`${t}Error`),n&&E.push(Kb(t));const S=E.length?E.join(" "):void 0,_=(v-s)*100/(i-s),R=dx((_-50)/100),x={"--pc-range-slider-min":s,"--pc-range-slider-max":i,"--pc-range-slider-current":v,"--pc-range-slider-progress":`${_}%`,"--pc-range-slider-output-factor":`${R}`},C=!l&&c&&o.createElement("output",{htmlFor:t,className:Kr.Output},o.createElement("div",{className:Kr.OutputBubble},o.createElement(G,{as:"span",variant:"headingSm",alignment:"center"},v))),w=u&&o.createElement("div",{className:Kr.Prefix},u),P=d&&o.createElement("div",{className:Kr.Suffix},d),$=T(Kr.SingleThumb,Co.RangeSlider,r&&Kr.error,l&&Kr.disabled);return o.createElement(Ys,{id:t,label:h,error:r,action:f,labelHidden:p,helpText:n},o.createElement("div",{className:$,style:x},w,o.createElement("div",{className:T(Kr.InputWrapper,Co["Track--dashed-after"])},o.createElement("input",{type:"range",className:Kr.Input,id:t,name:t,min:s,max:i,step:g,value:v,disabled:l,onChange:N,onFocus:y,onBlur:b,"aria-valuemin":s,"aria-valuemax":i,"aria-valuenow":v,"aria-invalid":!!r,"aria-describedby":S}),C),P));function N(M){const{onChange:k}=e;k&&k(parseFloat(M.currentTarget.value),t)}}function fx({min:e=0,max:t=100,step:r=1,value:n,...a}){const i={id:m.useId(),min:e,max:t,step:r,...a};return px(n)?o.createElement(Wv,Object.assign({value:n},i)):o.createElement(hx,Object.assign({value:n},i))}function px(e){return Array.isArray(e)}var Ye={ResourceItem:"Polaris-ResourceItem",Actions:"Polaris-ResourceItem__Actions",ItemWrapper:"Polaris-ResourceItem__ItemWrapper",CheckboxWrapper:"Polaris-ResourceItem__CheckboxWrapper",focusedInner:"Polaris-ResourceItem--focusedInner",focused:"Polaris-ResourceItem--focused",selected:"Polaris-ResourceItem--selected",Link:"Polaris-ResourceItem__Link",Button:"Polaris-ResourceItem__Button",selectable:"Polaris-ResourceItem--selectable",disabled:"Polaris-ResourceItem--disabled",ListItem:"Polaris-ResourceItem__ListItem",hasBulkActions:"Polaris-ResourceItem--hasBulkActions"};const fr="All";class mx extends m.Component{constructor(...t){super(...t),this.state={actionsMenuVisible:!1,focused:!1,focusedInner:!1,selected:im(this.props.id,this.props.context.selectedItems)},this.node=null,this.overlayRef=m.createRef(),this.buttonOverlay=m.createRef(),this.setNode=r=>{this.node=r},this.handleFocus=r=>{r.target===this.buttonOverlay.current||this.node&&r.target===this.overlayRef.current?this.setState({focused:!0,focusedInner:!1}):this.node&&this.node.contains(r.target)&&this.setState({focused:!0,focusedInner:!0})},this.handleBlur=({relatedTarget:r})=>{this.node&&r instanceof Element&&this.node.contains(r)||this.setState({focused:!1,focusedInner:!1})},this.handleMouseOut=()=>{this.state.focused&&this.setState({focused:!1,focusedInner:!1}),this.props.onMouseOut&&this.props.onMouseOut()},this.handleLargerSelectionArea=r=>{Ma(r),this.handleSelection(!this.state.selected,r.nativeEvent.shiftKey)},this.handleSelection=(r,n)=>{const{id:a,sortOrder:s,context:{onSelectionChange:i}}=this.props;a==null||i==null||(this.setState({focused:r,focusedInner:r}),i(r,a,s,n))},this.handleClick=r=>{Ma(r);const{id:n,onClick:a,url:s,context:{selectMode:i}}=this.props,{ctrlKey:l,metaKey:c}=r.nativeEvent,u=this.node&&this.node.querySelector("a");if(i){this.handleLargerSelectionArea(r);return}if(u!==r.target){if(a&&a(n),s&&(l||c)){window.open(s,"_blank");return}s&&u&&u.click()}},this.handleKeyUp=r=>{const{disabled:n,onClick:a=gx,context:{selectMode:s}}=this.props,{key:i}=r;i==="Enter"&&this.props.url&&!s&&!n&&a()},this.handleActionsClick=()=>{this.setState(({actionsMenuVisible:r})=>({actionsMenuVisible:!r}))},this.handleCloseRequest=()=>{this.setState({actionsMenuVisible:!1})}}static getDerivedStateFromProps(t,r){const n=im(t.id,t.context.selectedItems);return r.selected===n?null:{selected:n}}shouldComponentUpdate(t,r){const{children:n,context:{selectedItems:a,...s},...i}=t,{children:l,context:{selectedItems:c,...u},...d}=this.props,h=t.context.selectMode;return!wn(this.state,r)||this.props.context.selectMode!==h||!t.context.selectMode&&(!wn(d,i)||!wn(u,s))}render(){const{children:t,url:r,external:n,media:a,shortcutActions:s,ariaControls:i,ariaExpanded:l,persistActions:c=!1,accessibilityLabel:u,name:d,context:{selectable:h,selectMode:f,hasBulkActions:p,loading:g,resourceName:b},i18n:y,verticalAlignment:v,dataHref:E,breakpoints:S,onMouseOver:_,disabled:R}=this.props,{actionsMenuVisible:x,focused:C,focusedInner:w,selected:P}=this.state;let $=null,N=null;if(h){const B=d||u||y.translate("Polaris.Common.checkbox");N=o.createElement("div",{className:Ye.CheckboxWrapper,onClick:Ma,onChange:this.handleLargerSelectionArea},o.createElement(lm,null,U=>o.createElement(Ln,{id:U,label:B,labelHidden:!0,checked:P,disabled:g||R,bleedInlineStart:"300",bleedInlineEnd:"300",bleedBlockStart:"300",bleedBlockEnd:"300",fill:!0,labelClassName:Ye.CheckboxLabel})))}(a||h)&&($=o.createElement(de,{gap:"300",blockAlign:a&&h?"center":om(v)},N,a));const M=T(Ye.ResourceItem,C&&Ye.focused,h&&Ye.selectable,P&&Ye.selected,f&&Ye.selectMode,c&&Ye.persistActions,w&&Ye.focusedInner,R&&Ye.disabled),k=T(Ye.ListItem,C&&!w&&Ye.focused,p&&Ye.hasBulkActions,P&&Ye.selected,h&&Ye.selectable);let A=null,O=null;if(s&&!g)if(c){A=S!=null&&S.lgUp?o.createElement("div",{className:Ye.Actions,onClick:Ma},o.createElement(Sr,null,nn(s,{variant:"tertiary"}))):null;const B=d?y.translate("Polaris.ResourceList.Item.actionsDropdownLabel",{accessibilityLabel:d}):y.translate("Polaris.ResourceList.Item.actionsDropdown");O=!f&&(S!=null&&S.lgDown)?o.createElement("div",{onClick:Ma},o.createElement(nt,{activator:o.createElement(ye,{accessibilityLabel:B,onClick:this.handleActionsClick,variant:"tertiary",icon:Xs}),onClose:this.handleCloseRequest,active:x},o.createElement(an,{items:s}))):null}else S!=null&&S.lgUp&&(A=o.createElement("div",{className:Ye.Actions,onClick:Ma},o.createElement(te,{position:"absolute",insetBlockStart:"400",insetInlineEnd:"500"},o.createElement(Sr,{variant:"segmented"},nn(s,{size:"slim"})))));const L=o.createElement(te,{id:this.props.id,position:"relative",paddingInlineStart:"300",paddingInlineEnd:"300",paddingBlockStart:"300",paddingBlockEnd:"300",zIndex:"var(--pc-resource-item-content-stacking-order)"},o.createElement(go,{columns:{xs:"1fr auto"}},o.createElement(go,{columns:{xs:a||h?"auto 1fr":"1fr"},gap:"300"},$,o.createElement(de,{blockAlign:om(v)},o.createElement(te,{width:"100%",padding:"0"},t))),A,O)),F=g?-1:0,I=u||y.translate("Polaris.ResourceList.Item.viewItem",{itemName:d||b&&b.singular||""}),D=r?o.createElement(lm,null,B=>o.createElement(Cr,{"aria-describedby":this.props.id,"aria-label":I,className:Ye.Link,url:r,external:n,tabIndex:F,id:B,ref:this.overlayRef})):o.createElement("button",{className:Ye.Button,"aria-label":I,"aria-controls":i,"aria-expanded":l,onClick:this.handleClick,tabIndex:F,ref:this.buttonOverlay});return o.createElement("li",{className:k,"data-href":E},o.createElement("div",{className:Ye.ItemWrapper},o.createElement("div",{ref:this.setNode,className:M,onClick:R?()=>{}:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,onMouseOver:_,onMouseOut:this.handleMouseOut,"data-href":r},R?null:D,L)))}}function gx(){}function Ma(e){e.stopPropagation()}function im(e,t){return!!(t&&(Array.isArray(t)&&t.includes(e)||t===fr))}function Uv(e){const t=Ca();return o.createElement(mx,Object.assign({},e,{breakpoints:t,context:m.useContext(dh),i18n:se()}))}function om(e){switch(e){case"leading":return"start";case"trailing":return"end";case"center":return"center";case"fill":return"stretch";case"baseline":return"baseline";default:return"start"}}function lm(e){const t=m.useId();return e.children(t)}var Ne={FiltersWrapper:"Polaris-ResourceList__FiltersWrapper",ResourceListWrapper:"Polaris-ResourceList__ResourceListWrapper",ResourceList:"Polaris-ResourceList",HeaderOuterWrapper:"Polaris-ResourceList__HeaderOuterWrapper",BulkActionsWrapper:"Polaris-ResourceList__BulkActionsWrapper","HeaderWrapper-disabled":"Polaris-ResourceList__HeaderWrapper--disabled","HeaderWrapper-overlay":"Polaris-ResourceList__HeaderWrapper--overlay",HeaderWrapper:"Polaris-ResourceList__HeaderWrapper","HeaderWrapper-isSticky":"Polaris-ResourceList__HeaderWrapper--isSticky",HeaderContentWrapper:"Polaris-ResourceList__HeaderContentWrapper","HeaderWrapper-inSelectMode":"Polaris-ResourceList__HeaderWrapper--inSelectMode",SortWrapper:"Polaris-ResourceList__SortWrapper",AlternateToolWrapper:"Polaris-ResourceList__AlternateToolWrapper","HeaderWrapper-hasSelect":"Polaris-ResourceList__HeaderWrapper--hasSelect","HeaderWrapper-hasAlternateTool":"Polaris-ResourceList__HeaderWrapper--hasAlternateTool","HeaderWrapper-hasSort":"Polaris-ResourceList__HeaderWrapper--hasSort",HeaderTitleWrapper:"Polaris-ResourceList__HeaderTitleWrapper",SelectAllActionsWrapper:"Polaris-ResourceList__SelectAllActionsWrapper",SelectAllActionsWrapperSticky:"Polaris-ResourceList__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-ResourceList__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-ResourceList__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapperVisible:"Polaris-ResourceList__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-ResourceList__PaginationWrapper",CheckableButtonWrapper:"Polaris-ResourceList__CheckableButtonWrapper",SelectButtonWrapper:"Polaris-ResourceList__SelectButtonWrapper",EmptySearchResultWrapper:"Polaris-ResourceList__EmptySearchResultWrapper",ItemWrapper:"Polaris-ResourceList__ItemWrapper","ItemWrapper-isLoading":"Polaris-ResourceList__ItemWrapper--isLoading",SpinnerContainer:"Polaris-ResourceList__SpinnerContainer",LoadingOverlay:"Polaris-ResourceList__LoadingOverlay",DisabledPointerEvents:"Polaris-ResourceList__DisabledPointerEvents",disableTextSelection:"Polaris-ResourceList--disableTextSelection"},xr={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",error:"Polaris-Select--error",Backdrop:"Polaris-Select__Backdrop",Input:"Polaris-Select__Input",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover",toneMagic:"Polaris-Select--toneMagic"};const cm="";function jv({options:e,label:t,labelAction:r,labelHidden:n,labelInline:a,disabled:s,helpText:i,placeholder:l,id:c,name:u,value:d=cm,error:h,onChange:f,onFocus:p,onBlur:g,requiredIndicator:b,tone:y}){const{value:v,toggle:E}=Wt(!1),S=m.useId(),_=c??S,R=a?!0:n,x=T(xr.Select,h&&xr.error,y&&xr[Be("tone",y)],s&&xr.disabled),C=m.useCallback(I=>{E(),p==null||p(I)},[p,E]),w=m.useCallback(I=>{E(),g==null||g(I)},[g,E]),P=f?I=>f(I.currentTarget.value,_):void 0,$=[];i&&$.push(Kb(_)),h&&$.push(`${_}Error`);let M=(e||[]).map(bx);l&&(M=[{label:l,value:cm,disabled:!0},...M]);const k=a&&o.createElement(te,{paddingInlineEnd:"100"},o.createElement(G,{as:"span",variant:"bodyMd",tone:y&&y==="magic"&&!v?"magic-subdued":"subdued",truncate:!0},t)),A=yx(M,d),O=A.prefix&&o.createElement("div",{className:xr.Prefix},A.prefix),L=o.createElement("div",{className:xr.Content,"aria-hidden":!0,"aria-disabled":s},k,O,o.createElement("span",{className:xr.SelectedOption},A.label),o.createElement("span",{className:xr.Icon},o.createElement(le,{source:qb}))),F=M.map(Ex);return o.createElement(Ys,{id:_,label:t,error:h,action:r,labelHidden:R,helpText:i,requiredIndicator:b,disabled:s},o.createElement("div",{className:x},o.createElement("select",{id:_,name:u,value:d,className:xr.Input,disabled:s,onFocus:C,onBlur:w,onChange:P,"aria-invalid":!!h,"aria-describedby":$.length?$.join(" "):void 0,"aria-required":b},F),L,o.createElement("div",{className:xr.Backdrop})))}function um(e){return typeof e=="string"}function mh(e){return typeof e=="object"&&"options"in e&&e.options!=null}function dm(e){return{label:e,value:e}}function bx(e){if(um(e))return dm(e);if(mh(e)){const{title:t,options:r}=e;return{title:t,options:r.map(n=>um(n)?dm(n):n)}}return e}function yx(e,t){const r=vx(e);let n=r.find(a=>t===a.value);return n===void 0&&(n=r.find(a=>!a.hidden)),n||{value:"",label:""}}function vx(e){let t=[];return e.forEach(r=>{mh(r)?t=t.concat(r.options):t.push(r)}),t}function hm(e){const{value:t,label:r,prefix:n,key:a,...s}=e;return o.createElement("option",Object.assign({key:a??t,value:t},s),r)}function Ex(e){if(mh(e)){const{title:t,options:r}=e;return o.createElement("optgroup",{label:t,key:t},r.map(hm))}return hm(e)}const Sx=28,_x=45;function fm(e,t){return e.map((r,n)=>t(r,n))}const Es=()=>typeof window>"u"?!1:window.innerWidth<parseFloat(q_(V_.breakpoints["breakpoints-sm"])??"");function Cx(e,t){return Object.prototype.hasOwnProperty.call(e,"id")?e.id:t.toString()}function qv({items:e,filterControl:t,flushFilters:r,emptyState:n,emptySearchState:a,resourceName:s,promotedBulkActions:i,bulkActions:l,selectedItems:c=[],isFiltered:u,selectable:d,hasMoreItems:h,loading:f,headerContent:p,showHeader:g,totalItemsCount:b,sortValue:y,sortOptions:v,alternateTool:E,onSortChange:S,onSelectionChange:_,renderItem:R,idForItem:x=Cx,resolveItemId:C,pagination:w}){const P=se(),[$,N]=m.useState(!!(c&&c.length>0)),[M,k]=m.useState(0),[A,O]=m.useState(),[L,F]=m.useState(Es()),I=m.useReducer((ue=0)=>ue+1,0)[1],D=m.useRef(null),B=j_(()=>({singular:P.translate("Polaris.ResourceList.defaultItemSingular"),plural:P.translate("Polaris.ResourceList.defaultItemPlural")})),U=m.useRef(null),V=ue=>{N(ue),!ue&&_&&_([])},W=tr(()=>{const ue=Es();c&&c.length===0&&$&&!ue&&V(!1),L!==ue&&F(ue)},50,{leading:!0,trailing:!0,maxWait:50});mt("resize",W);const H=!!(i&&i.length>0||l&&l.length>0||d)&&!L,Y=m.useMemo(()=>{let ue="indeterminate";return!c||Array.isArray(c)&&c.length===0?ue=!1:(c===fr||Array.isArray(c)&&c.length===e.length)&&(ue=!0),ue},[e.length,c]),j=s||B.current,J=()=>{const ue=e.length,Me=!f&&(!b&&ue===1||b===1)?j.singular:j.plural;return f?P.translate("Polaris.ResourceList.loading",{resource:Me}):b?P.translate("Polaris.ResourceList.showingTotalCount",{itemsCount:ue,totalItemsCount:b,resource:Me}):p||P.translate("Polaris.ResourceList.showing",{itemsCount:ue,resource:Me})},[ge,Oe]=m.useState(c===fr?`${e.length}+`:c.length);m.useEffect(()=>{(c===fr||c.length>0)&&Oe(c===fr?`${e.length}+`:c.length)},[c,e.length]);const Ce=P.translate("Polaris.ResourceList.selected",{selectedItemsCount:ge}),De=m.useMemo(()=>{const ue=c.length,Me=e.length,yt=ue===Me;return Me===1&&yt?P.translate("Polaris.ResourceList.a11yCheckboxDeselectAllSingle",{resourceNameSingular:j.singular}):Me===1?P.translate("Polaris.ResourceList.a11yCheckboxSelectAllSingle",{resourceNameSingular:j.singular}):yt?P.translate("Polaris.ResourceList.a11yCheckboxDeselectAllMultiple",{itemsLength:e.length,resourceNamePlural:j.plural}):P.translate("Polaris.ResourceList.a11yCheckboxSelectAllMultiple",{itemsLength:e.length,resourceNamePlural:j.plural})},[P,e.length,j.singular,j.plural,c.length]),je=m.useMemo(()=>{if(!(!H||!h)&&c===fr)return P.translate(u?"Polaris.ResourceList.allFilteredItemsSelected":"Polaris.ResourceList.allItemsSelected",{itemsLength:e.length,resourceNamePlural:j.plural})},[h,P,u,H,e,j.plural,c]),Le=m.useCallback(()=>{const ue=c===fr?fm(e,x):fr;_&&_(ue)},[x,e,_,c]),z=m.useMemo(()=>!H||!h?void 0:{content:c===fr?P.translate("Polaris.Common.undo"):P.translate(u?"Polaris.ResourceList.selectAllFilteredItems":"Polaris.ResourceList.selectAllItems",{itemsLength:e.length,resourceNamePlural:j.plural}),onAction:Le},[Le,h,P,u,H,e.length,j.plural,c]),ae={title:P.translate("Polaris.ResourceList.emptySearchResultTitle",{resourceNamePlural:j.plural}),description:P.translate("Polaris.ResourceList.emptySearchResultDescription")},we=m.useCallback(()=>{if(U.current!=null){if(typeof window>"u")return;const ue=U.current.getBoundingClientRect(),Me=Math.max(document.documentElement?document.documentElement.clientHeight:0,window.innerHeight||0),yt=Me-ue.height,Wr=e.length===1?Sx:_x,Xt=yt>0?(ue.height-Wr)/2:(Me-ue.top-Wr)/2;k(Xt)}},[U,e.length]),he=e.length>0;m.useEffect(()=>{f&&we()},[f,we]),m.useEffect(()=>{c&&c.length>0&&!$&&N(!0),(!c||c.length===0)&&!Es()&&N(!1)},[c,$]),m.useEffect(()=>{I()},[I,e]);const be=(ue,Me)=>{const yt=x(ue,Me);return R(ue,yt,Me)},ie=(ue,Me,yt)=>{const Wr=Math.min(ue,Me),Xt=Math.max(ue,Me);return e.slice(Wr,Xt+1).map(yt)},pe=(ue,Me,yt,Wr)=>{if(c==null||_==null)return;let Xt=c===fr?fm(e,x):[...c];yt!==void 0&&O(yt);const _i=A;let gs=[Me];if(Wr&&_i!=null&&yt!==void 0&&C&&(gs=ie(_i,yt,C)),Xt=[...new Set([...Xt,...gs])],!ue)for(const yc of gs)Xt.splice(Xt.indexOf(yc),1);Xt.length===0&&!Es()?V(!1):Xt.length>0&&V(!0),_&&_(Xt)},Ae=()=>{let ue;Array.isArray(c)&&c.length===e.length||c===fr?ue=[]:ue=e.map((Me,yt)=>x(Me,yt)),ue.length===0&&!Es()?V(!1):ue.length>0&&V(!0),_&&_(ue),setTimeout(()=>{var Me;(Me=D==null?void 0:D.current)==null||Me.focus()},0)},qe=T(Ne.BulkActionsWrapper,$&&Ne.BulkActionsWrapperVisible),Fe=H?o.createElement("div",{className:qe},o.createElement(eh,{selectMode:$,onSelectModeToggle:V,label:Ce,paginatedSelectAllAction:z,paginatedSelectAllText:je,promotedActions:i,actions:l,disabled:f,accessibilityLabel:De,selected:Y,onToggleAll:Ae,ref:D,buttonSize:"medium"})):null,me=t?o.createElement("div",{className:T(!r&&Ne.FiltersWrapper)},t):null,Ue=v&&v.length>0&&!E?o.createElement("div",{className:Ne.SortWrapper},o.createElement(jv,{label:P.translate("Polaris.ResourceList.sortingLabel"),labelInline:!L,labelHidden:L,options:v,onChange:S,value:y,disabled:$})):null,Je=E&&!Ue?o.createElement("div",{className:Ne.AlternateToolWrapper},E):null,ur=o.createElement("div",{className:Ne.HeaderTitleWrapper},o.createElement(G,{as:"span",variant:"bodyMd"},J())),Z=H?o.createElement("div",{className:Ne.SelectButtonWrapper},o.createElement(ye,{disabled:$,icon:Fy,onClick:()=>V(!0)},P.translate("Polaris.ResourceList.selectButtonText"))):null,re=H?o.createElement("div",{className:Ne.CheckableButtonWrapper},o.createElement(Qd,{accessibilityLabel:De,label:J(),onToggleAll:Ae,disabled:f,ref:D,selected:Y})):null,ee=H||v&&v.length>0||E,oe=f?o.createElement("div",{className:Ne["HeaderWrapper-overlay"]}):null,Re=n&&!he&&!f,ke=!Re&&t&&!he&&!f,Pt=!Re&&g!==!1&&!ke&&(g||ee)&&U.current&&o.createElement("div",{className:Ne.HeaderOuterWrapper},o.createElement(Yo,{boundingElement:U.current},ue=>{const Me=T(Ne.HeaderWrapper,v&&v.length>0&&!E&&Ne["HeaderWrapper-hasSort"],E&&Ne["HeaderWrapper-hasAlternateTool"],H&&Ne["HeaderWrapper-hasSelect"],f&&Ne["HeaderWrapper-disabled"],H&&$&&Fe&&Ne["HeaderWrapper-inSelectMode"],ue&&Ne["HeaderWrapper-isSticky"]);return o.createElement("div",{className:Me},oe,o.createElement("div",{className:Ne.HeaderContentWrapper},ur,re,Je,Ue,Z),Fe)})),Mt=ke?a||o.createElement("div",{className:Ne.EmptySearchResultWrapper},o.createElement(rh,Object.assign({},ae,{withIllustration:!0}))):null,bt=Re?n:null,Wn={paddingTop:`${M>0?M:8}px`},Un=e.length<2?"small":"large",jn=f?o.createElement(o.Fragment,null,o.createElement("li",{className:Ne.SpinnerContainer,style:Wn},o.createElement(ha,{size:Un,accessibilityLabel:"Items are loading"})),o.createElement("li",{className:Ne.LoadingOverlay})):null,pc=T(Ne.ItemWrapper,f&&Ne["ItemWrapper-isLoading"]),mc=f&&!he?o.createElement("div",{className:pc,tabIndex:-1},jn):null,gc=T(Ne.ResourceList,f&&Ne.disabledPointerEvents,$&&Ne.disableTextSelection),ps=he?o.createElement("ul",{className:gc,ref:U,"aria-live":"polite","aria-busy":f},jn,m.Children.toArray(e.map(be))):null,bc=w?o.createElement("div",{className:Ne.PaginationWrapper},o.createElement(Do,Object.assign({type:"table"},w))):null,ms={selectable:H,selectedItems:c,selectMode:$,hasBulkActions:!!l,resourceName:j,loading:f,onSelectionChange:pe};return o.createElement(dh.Provider,{value:ms},me,o.createElement("div",{className:Ne.ResourceListWrapper},Pt,ps,Mt,bt,mc,bc))}qv.Item=Uv;var Ss={SelectAllActions:"Polaris-SelectAllActions","SelectAllActions-not-sticky":"Polaris-SelectAllActions--selectAllActionsNotSticky","SelectAllActions-entering":"Polaris-SelectAllActions__SelectAllActions--entering","SelectAllActions-exiting":"Polaris-SelectAllActions__SelectAllActions--exiting","SelectAllActions-hasPagination":"Polaris-SelectAllActions__SelectAllActions--hasPagination","SelectAllActions-exited":"Polaris-SelectAllActions__SelectAllActions--exited","SelectAllActions-entered":"Polaris-SelectAllActions__SelectAllActions--entered",AllAction:"Polaris-SelectAllActions__AllAction"};const wx=m.forwardRef(function({label:t,selectMode:r,paginatedSelectAllText:n,paginatedSelectAllAction:a,disabled:s,isSticky:i,hasPagination:l,accessibilityLabel:c,selected:u,onToggleAll:d},h){const f=m.useRef(null),p=a?o.createElement(rr,{className:Ss.AllAction,onClick:a.onAction,size:"slim",disabled:s},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},a.content)):null,g=n&&a,y={accessibilityLabel:c,label:g?n:t,selected:u,onToggleAll:d,disabled:s,ariaLive:g?"polite":void 0,ref:h},v=c&&d?o.createElement(Qd,y):null;return o.createElement(Ks,{timeout:0,in:r,key:"markup",nodeRef:f},S=>{const _=T(Ss.SelectAllActions,l&&Ss["SelectAllActions-hasPagination"],!i&&Ss["SelectAllActions-not-sticky"],S&&Ss[`SelectAllActions-${S}`]);return o.createElement("div",{className:_,ref:f},o.createElement(te,{background:"bg-surface-secondary",borderBlockStartWidth:"025",borderColor:"border",width:"100%",paddingBlockStart:"300",paddingBlockEnd:"300",paddingInlineStart:"300",paddingInlineEnd:"400"},o.createElement(de,{gap:"200",align:"start",blockAlign:"center"},v,o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},g?n:t),p)))})});function Px({enabled:e,action:t,children:r}){const n=m.useId(),a=t?Er(t,{role:"switch",ariaChecked:e?"true":"false",size:"slim"}):null;return o.createElement(Rn,{sectioned:!0},o.createElement(zy,{action:a},o.createElement("label",{htmlFor:n},r)))}var pm={SkeletonBodyTextContainer:"Polaris-SkeletonBodyText__SkeletonBodyTextContainer",SkeletonBodyText:"Polaris-SkeletonBodyText"};function Ax({lines:e=3}){const t=[];for(let r=0;r<e;r++)t.push(o.createElement("div",{className:pm.SkeletonBodyText,key:r}));return o.createElement("div",{className:pm.SkeletonBodyTextContainer},t)}var mm={DisplayText:"Polaris-SkeletonDisplayText__DisplayText",sizeSmall:"Polaris-SkeletonDisplayText--sizeSmall",sizeMedium:"Polaris-SkeletonDisplayText--sizeMedium",sizeLarge:"Polaris-SkeletonDisplayText--sizeLarge",sizeExtraLarge:"Polaris-SkeletonDisplayText--sizeExtraLarge"};function Tx({size:e="medium",maxWidth:t}){const r=T(mm.DisplayText,e&&mm[Be("size",e)]),n={"--pc-skeleton-display-text-max-width":t??void 0};return o.createElement("div",{className:r,style:Pd(n)})}var Rx={SkeletonTitle:"Polaris-SkeletonPage__SkeletonTitle"};function kx({children:e,fullWidth:t,narrowWidth:r,primaryAction:n,title:a="",backAction:s}){const i=se(),l=a?o.createElement(G,{as:"h1",variant:"headingLg",fontWeight:"bold"},a):o.createElement("div",{className:Rx.SkeletonTitle},o.createElement(te,{background:"bg-fill-tertiary",minWidth:"120px",minHeight:"28px",borderRadius:"100"})),c=n?o.createElement(te,{id:"SkeletonPage-PrimaryAction",borderRadius:"100",background:"bg-fill-tertiary",minHeight:"2.25rem",minWidth:"6.25rem"}):null,u=s?o.createElement(te,{borderRadius:"100",background:"bg-fill-tertiary",minHeight:"2.25rem",minWidth:"2.25rem",maxWidth:"2.25rem"}):null;return o.createElement(rt,{gap:"400",inlineAlign:"center"},o.createElement(te,Object.assign({width:"100%",padding:"0",paddingInlineStart:{sm:"600"},paddingInlineEnd:{sm:"600"},maxWidth:"var(--pc-skeleton-page-max-width)","aria-label":i.translate("Polaris.SkeletonPage.loadingLabel"),role:"status"},r&&{maxWidth:"var(--pc-skeleton-page-max-width-narrow)"},t&&{maxWidth:"none"}),o.createElement(rt,null,o.createElement(te,{paddingBlockStart:{xs:"400",md:"500"},paddingBlockEnd:{xs:"400",md:"500"},paddingInlineStart:{xs:"400",sm:"0"},paddingInlineEnd:{xs:"400",sm:"0"},width:"100%"},o.createElement(de,{gap:"400",align:"space-between",blockAlign:"center"},o.createElement(de,{gap:"400"},u,o.createElement(te,{paddingBlockStart:"100",paddingBlockEnd:"100"},l)),c)),o.createElement(te,{paddingBlockEnd:"200",width:"100%"},e))))}var Ni={Tabs:"Polaris-SkeletonTabs__Tabs",Tab:"Polaris-SkeletonTabs__Tab",TabText:"Polaris-SkeletonTabs__TabText",fitted:"Polaris-SkeletonTabs--fitted"};function xx({count:e=2,fitted:t=!1}){return o.createElement("div",{className:T(Ni.Tabs,t&&Ni.fitted)},[...Array(e).keys()].map(r=>o.createElement("div",{key:r,className:T(Ni.Tab)},o.createElement("div",{className:Ni.TabText}))))}var gm={SkeletonThumbnail:"Polaris-SkeletonThumbnail",sizeExtraSmall:"Polaris-SkeletonThumbnail--sizeExtraSmall",sizeSmall:"Polaris-SkeletonThumbnail--sizeSmall",sizeMedium:"Polaris-SkeletonThumbnail--sizeMedium",sizeLarge:"Polaris-SkeletonThumbnail--sizeLarge"};function Ix({size:e="medium"}){const t=T(gm.SkeletonThumbnail,e&&gm[Be("size",e)]);return o.createElement("div",{className:t})}var Kc={Thumbnail:"Polaris-Thumbnail",sizeExtraSmall:"Polaris-Thumbnail--sizeExtraSmall",sizeSmall:"Polaris-Thumbnail--sizeSmall",sizeMedium:"Polaris-Thumbnail--sizeMedium",sizeLarge:"Polaris-Thumbnail--sizeLarge",transparent:"Polaris-Thumbnail--transparent"};function $x({source:e,alt:t,size:r="medium",transparent:n}){const a=T(Kc.Thumbnail,r&&Kc[Be("size",r)],n&&Kc.transparent),s=typeof e=="string"?o.createElement(Fr,{alt:t,source:e}):o.createElement(le,{accessibilityLabel:t,source:e});return o.createElement("span",{className:a},s)}const Nx=m.memo(function(t){const r=m.useId(),{showToast:n,hideToast:a}=wa();return ch(()=>(n({id:r,...t}),()=>{a({id:r})}),[t]),null});var Tt={TopBar:"Polaris-TopBar",Container:"Polaris-TopBar__Container",LogoDisplayControl:"Polaris-TopBar__LogoDisplayControl",LogoDisplayContainer:"Polaris-TopBar__LogoDisplayContainer",LogoContainer:"Polaris-TopBar__LogoContainer",hasLogoSuffix:"Polaris-TopBar--hasLogoSuffix",Logo:"Polaris-TopBar__Logo",LogoLink:"Polaris-TopBar__LogoLink",ContextControl:"Polaris-TopBar__ContextControl",NavigationIcon:"Polaris-TopBar__NavigationIcon",focused:"Polaris-TopBar--focused",IconWrapper:"Polaris-TopBar__IconWrapper",LeftContent:"Polaris-TopBar__LeftContent",Search:"Polaris-TopBar__Search",RightContent:"Polaris-TopBar__RightContent",SecondaryMenu:"Polaris-TopBar__SecondaryMenu"},Oi={Search:"Polaris-TopBar-Search",SearchContent:"Polaris-TopBar-Search__SearchContent",visible:"Polaris-TopBar-Search--visible",Results:"Polaris-TopBar-Search__Results"},bm={SearchDismissOverlay:"Polaris-TopBar-SearchDismissOverlay",visible:"Polaris-TopBar-SearchDismissOverlay--visible"};function Ox({onDismiss:e,visible:t}){const r=m.useRef(null),n=m.useCallback(({target:a})=>{a===r.current&&e!=null&&e()},[e]);return o.createElement(o.Fragment,null,t?o.createElement(Go,null):null,o.createElement("div",{ref:r,className:T(bm.SearchDismissOverlay,t&&bm.visible),onClick:n}))}function Lx({visible:e,children:t,onDismiss:r,overlayVisible:n=!1}){if(t==null)return null;const a=e?o.createElement(Ox,{onDismiss:r,visible:n}):null;return o.createElement(o.Fragment,null,a,o.createElement("div",{className:T(Oi.Search,e&&Oi.visible)},o.createElement("div",{className:Oi.SearchContent},o.createElement("div",{className:Oi.Results},t))))}var Xn={SearchField:"Polaris-TopBar-SearchField",focused:"Polaris-TopBar-SearchField--focused",Input:"Polaris-TopBar-SearchField__Input",Backdrop:"Polaris-TopBar-SearchField__Backdrop",BackdropShowFocusBorder:"Polaris-TopBar-SearchField__BackdropShowFocusBorder",Icon:"Polaris-TopBar-SearchField__Icon",Clear:"Polaris-TopBar-SearchField__Clear"};function Mx({value:e,focused:t,active:r,placeholder:n,onChange:a,onFocus:s,onBlur:i,onCancel:l,showFocusBorder:c}){const u=se(),[d,h]=m.useState(!1),f=m.useRef(null),p=m.useId(),g=m.useCallback(({currentTarget:_})=>{a(_.value)},[a]),b=m.useCallback(()=>s&&s(),[s]),y=m.useCallback(()=>i&&i(),[i]),v=m.useCallback(()=>{l&&l(),f.current&&(f.current.value="",a(""),f.current.focus())},[l,a]);m.useEffect(()=>{f.current&&(t?f.current.focus():f.current.blur())},[t]);const E=e!==""&&o.createElement("button",{type:"button","aria-label":u.translate("Polaris.TopBar.SearchField.clearButtonLabel"),className:Xn.Clear,onClick:v,onBlur:()=>{h(!1),v()},onFocus:()=>{b(),h(!0)}},o.createElement(le,{source:K_})),S=T(Xn.SearchField,(t||r||d)&&Xn.focused);return o.createElement("div",{className:S,onFocus:b,onBlur:y},o.createElement(G,{as:"span",visuallyHidden:!0},o.createElement("label",{htmlFor:p},u.translate("Polaris.TopBar.SearchField.search"))),o.createElement("input",{id:p,className:Xn.Input,placeholder:n,type:"search",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",ref:f,value:e,onChange:g,onKeyDown:Fx}),o.createElement("span",{className:Xn.Icon},o.createElement(le,{source:Zs})),E,o.createElement("div",{className:T(Xn.Backdrop,c&&Xn.BackdropShowFocusBorder)}))}function Fx(e){e.key==="Enter"&&e.preventDefault()}var ym={Details:"Polaris-TopBar-UserMenu__Details"},vm={MessageIndicatorWrapper:"Polaris-MessageIndicator__MessageIndicatorWrapper",MessageIndicator:"Polaris-MessageIndicator"};function Dx({children:e,active:t}){const r=t&&o.createElement("div",{className:vm.MessageIndicator});return o.createElement("div",{className:vm.MessageIndicatorWrapper},r,e)}var Li={ActivatorWrapper:"Polaris-TopBar-Menu__ActivatorWrapper",Activator:"Polaris-TopBar-Menu__Activator","Activator-userMenu":"Polaris-TopBar-Menu__Activator--userMenu",Section:"Polaris-TopBar-Menu__Section"},Hx={Section:"Polaris-Menu-Message__Section"};function Bx({title:e,description:t,action:r,link:n,badge:a}){const s=a&&o.createElement(Tn,{tone:a.tone},a.content),{to:i,content:l}=n,{onClick:c,content:u}=r;return o.createElement("div",{className:Hx.Section},o.createElement(nt.Section,null,o.createElement(_r,{vertical:!0,spacing:"tight"},o.createElement(Jb,null,o.createElement(G,{variant:"headingMd",as:"h2"},e,s),o.createElement("p",null,t)),o.createElement(Gb,{url:i},l),o.createElement(ye,{variant:"plain",onClick:c},u))))}function Vv(e){const{actions:t,onOpen:r,onClose:n,open:a,activatorContent:s,message:i,accessibilityLabel:l,customWidth:c,userMenu:u}=e,d=i&&i.badge&&{content:i.badge.content,tone:i.badge.tone},h=i&&o.createElement(Bx,{title:i.title,description:i.description,action:{onClick:i.action.onClick,content:i.action.content},link:{to:i.link.to,content:i.link.content},badge:d});return o.createElement(nt,{activator:o.createElement("div",{className:Li.ActivatorWrapper},o.createElement("button",{type:"button",className:T(Li.Activator,u&&Li["Activator-userMenu"]),onClick:r,"aria-label":l},s)),active:a,onClose:n,fixed:!0,fullHeight:!0,preferredAlignment:"right"},o.createElement("div",{className:Li.MenuItems},o.createElement(te,{width:c},o.createElement(an,{actionRole:"menuitem",onActionAnyItem:n,sections:t}),h)))}function Wx({name:e,detail:t,avatar:r,initials:n,actions:a,message:s,onToggle:i,open:l,accessibilityLabel:c,customActivator:u,customWidth:d}){const h=!!s,f=u||o.createElement(o.Fragment,null,o.createElement("span",{className:ym.Details},o.createElement(G,{as:"p",variant:"bodySm",alignment:"start",fontWeight:"medium",truncate:!0},e),o.createElement("span",{className:ym.Message},o.createElement(G,{as:"p",variant:"bodyXs",alignment:"start",tone:"text-inverse-secondary",truncate:!0},t))),o.createElement(Dx,{active:h},o.createElement(Vd,{size:"md",initials:n&&n.replace(" ",""),source:r,name:e})));return o.createElement(Vv,{activatorContent:f,open:l,onOpen:i,onClose:i,actions:a,message:s,accessibilityLabel:c,customWidth:d,userMenu:!0})}const el=function({showNavigationToggle:t,userMenu:r,searchResults:n,searchField:a,secondaryMenu:s,searchResultsVisible:i,searchResultsOverlayVisible:l=!1,onNavigationToggle:c,onSearchResultsDismiss:u,contextControl:d,logoSuffix:h}){const f=se(),{logo:p}=wa(),{value:g,setTrue:b,setFalse:y}=Wt(!1),v=T(Tt.NavigationIcon,g&&Tt.focused),E=t?o.createElement("button",{type:"button",className:v,onClick:c,onFocus:b,onBlur:y,"aria-label":f.translate("Polaris.TopBar.toggleMenuLabel")},o.createElement("div",{className:Tt.IconWrapper},o.createElement(le,{source:jy}))):null,S=lh(p,104);let _;if(d)_=o.createElement("div",{className:Tt.ContextControl},d);else if(p){const x=T(Tt.LogoContainer,t||a?Tt.LogoDisplayControl:Tt.LogoDisplayContainer,h&&Tt.hasLogoSuffix);_=o.createElement("div",{className:x},o.createElement(Cr,{url:p.url||"",className:Tt.LogoLink,style:{width:S}},o.createElement(Fr,{source:p.topBarSource||"",alt:p.accessibilityLabel||"",className:Tt.Logo,style:{width:S}})),h)}const R=a?o.createElement(o.Fragment,null,a,o.createElement(Lx,{visible:i,onDismiss:u,overlayVisible:l},n)):null;return o.createElement("div",{className:Tt.TopBar},o.createElement("div",{className:Tt.Container},o.createElement("div",{className:Tt.LeftContent},E,_),o.createElement("div",{className:Tt.Search},R),o.createElement("div",{className:Tt.RightContent},o.createElement("div",{className:Tt.SecondaryMenu},s),r)))};el.Menu=Vv;el.SearchField=Mx;el.UserMenu=Wx;function Ux({content:e,onAction:t,...r},n,a){return o.createElement(rr,Object.assign({key:a,onClick:t},r,n),e)}const ad=60,sd=ad*60;function Em(e){return e>9?String(e):`0${e}`}function gh(e){return{hours:Math.floor(e/sd),minutes:Math.floor(e%sd/ad),seconds:e%ad}}function jx(e){const{hours:t,minutes:r,seconds:n}=gh(e),a=e>sd,s=a?`${t}:`:"",i=`${a?Em(r):r}:`,l=`${Em(n)}`;return`${s}${i}${l}`}function qx(e){const{hours:t,minutes:r,seconds:n}=gh(e);let a="Polaris.VideoThumbnail.playButtonA11yLabel.duration";return t?(a+=`.hours.${t>1?"other":"one"}`,n?r>1?a+=`${n>1?".minutesAndSeconds":".minutesAndSecond"}`:r===1?a+=`${n>1?".minuteAndSeconds":".minuteAndSecond"}`:a+=`${n>1?".andSeconds":".andSecond"}`:r?a+=`${r>1?".andMinutes":".andMinute"}`:a+=".only"):r?(a+=`.minutes.${r>1?"other":"one"}`,n?a+=`${n>1?".andSeconds":".andSecond"}`:a+=".only"):n&&(a+=n>1?".seconds.other":".seconds.one"),a}var zr={Thumbnail:"Polaris-VideoThumbnail__Thumbnail",ThumbnailContainer:"Polaris-VideoThumbnail__ThumbnailContainer",PlayButton:"Polaris-VideoThumbnail__PlayButton",Timestamp:"Polaris-VideoThumbnail__Timestamp",PlayIcon:"Polaris-VideoThumbnail__PlayIcon",Progress:"Polaris-VideoThumbnail__Progress",Indicator:"Polaris-VideoThumbnail__Indicator",ProgressBar:"Polaris-VideoThumbnail__ProgressBar",Label:"Polaris-VideoThumbnail__Label"};function Vx({thumbnailUrl:e,videoLength:t=0,videoProgress:r=0,showVideoProgress:n=!1,accessibilityLabel:a,onClick:s,onBeforeStartPlaying:i}){const l=se(),{isNavigationCollapsed:c}=rs();let u;if(a)u=a;else if(t){const{hours:f,minutes:p,seconds:g}=gh(t);u=l.translate("Polaris.VideoThumbnail.playButtonA11yLabel.defaultWithDuration",{duration:l.translate(qx(t),{hourCount:f,minuteCount:p,secondCount:g})})}else u=l.translate("Polaris.VideoThumbnail.playButtonA11yLabel.default");const d=t?o.createElement("div",{className:zr.Timestamp},o.createElement(_r,{alignment:"center",spacing:"extraTight"},o.createElement("span",{className:zr.PlayIcon},o.createElement(le,{source:Vy})),o.createElement(G,{variant:c?"bodyLg":"bodyMd",as:"p",fontWeight:"semibold"},jx(t)))):null;let h=null;if(n){const f=Kx(t,r),p=Math.round(f*100);h=o.createElement("div",{className:zr.Progress},o.createElement("progress",{className:zr.ProgressBar,value:p,max:"100"}),o.createElement("div",{className:zr.Indicator,style:{transform:`scaleX(${f})`}},o.createElement("span",{className:zr.Label},p,"%")))}return o.createElement("div",{className:zr.ThumbnailContainer},o.createElement("div",{className:zr.Thumbnail,style:{backgroundImage:`url(${e})`}}),o.createElement("button",{type:"button",className:zr.PlayButton,"aria-label":u,onClick:s,onMouseEnter:i,onFocus:i,onTouchStart:i},d),h)}function Kx(e,t){if(t>e,t>0&&e>0){const r=parseFloat((t/e).toFixed(2));return r>1?1:r}return 0}function zx(){return m.useContext(Nv)}function Gx(){const{selected:e}=m.useContext(Qo);return e}function Jx(){return m.useContext(Lv)}const Xx=Object.freeze(Object.defineProperty({__proto__:null,AccountConnection:XA,ActionList:an,ActionMenu:z_,AlphaPicker:sx,AppProvider:uC,get AutoSelection(){return Sn},Autocomplete:nv,Avatar:Vd,Backdrop:Jo,Badge:Tn,get BadgeProgressValue(){return G_},get BadgeStatusValue(){return J_},Banner:gT,Bleed:Wb,BlockStack:rt,Box:te,Breadcrumbs:X_,Button:ye,ButtonGroup:Sr,CalloutCard:IT,Card:Db,Checkbox:Ln,ChoiceList:lv,Collapsible:Xo,ColorPicker:XT,Combobox:zo,Connected:Y_,ContextualSaveBar:QT,DATA_ATTRIBUTE:Z_,DEFAULT_LOCALE:NA,DEFAULT_TOAST_DURATION:wv,DEFAULT_TOAST_DURATION_WITH_ACTION:ed,DataTable:f1,DatePicker:A1,DescriptionList:k1,Divider:I1,DropZone:mv,EmptySearchResult:rh,EmptyState:B1,EventListener:$t,ExceptionList:U1,Filters:yv,Focus:nh,FooterHelp:Z1,Form:si,FormLayout:ti,Frame:NR,FrameContext:ai,FullscreenBar:OR,Grid:Pv,INDEX_TABLE_SELECT_ALL_ITEMS:Qr,Icon:le,Image:Fr,IndexFilters:rk,get IndexFiltersMode(){return Ke},IndexTable:uh,get IndexTableSelectionType(){return Qe},Indicator:Zd,InlineCode:Ek,InlineError:Ad,InlineGrid:go,InlineStack:de,get Key(){return it},KeyboardKey:Sk,KeypressListener:vr,Label:Vb,Labelled:Ys,Layout:pC,LegacyCard:Rn,LegacyFilters:Rk,LegacyStack:_r,LegacyTabs:Fk,Link:Gb,List:fC,Listbox:ot,Loading:Dk,MediaCard:Hk,Modal:nr,Navigation:ph,OptionList:Jk,Page:Q_,PageActions:Qk,Pagination:Do,PolarisTestProvider:ox,Popover:nt,get PopoverCloseSource(){return eC},Portal:Ho,PortalsManager:zb,PositionedOverlay:tC,ProgressBar:cx,RadioButton:ov,RangeSlider:fx,ResourceItem:Uv,ResourceList:qv,SUPPORTED_LOCALES:OA,ScrollLock:Go,Scrollable:Ga,Select:jv,SelectAllActions:wx,SettingToggle:Px,Sheet:rd,SkeletonBodyText:Ax,SkeletonDisplayText:Tx,SkeletonPage:kx,SkeletonTabs:xx,SkeletonThumbnail:Ix,Spinner:ha,Sticky:Yo,Tabs:Tv,Tag:Mv,Text:G,TextContainer:Jb,TextField:Nn,ThemeProvider:rC,Thumbnail:$x,Toast:Nx,Tooltip:Gt,TopBar:el,TrapFocus:Zo,Truncate:gv,UnstableBulkActions:eh,UnstyledButton:rr,UnstyledLink:Cr,VideoThumbnail:Vx,_SECRET_INTERNAL_SCROLL_LOCK_MANAGER_CONTEXT:kd,_SECRET_INTERNAL_WITHIN_CONTENT_CONTEXT:ts,buttonFrom:Er,buttonsFrom:nn,errorTextID:Td,hexToRgb:BA,hsbToHex:MA,hsbToRgb:Vo,hslToRgb:FA,isNavigationItemActive:jk,labelID:qs,rgbString:Ry,rgbToHex:ky,rgbToHsb:DA,rgbToHsl:HA,rgbaString:LA,unstyledButtonFrom:Ux,useBreakpoints:Ca,useCopyToClipboard:WA,useEphemeralPresenceManager:nC,useEventListener:mt,useFocus:UA,useFocusIn:jA,useFrame:wa,useHover:qA,useIndexResourceState:zA,useIndexTableContainerScroll:Jx,useIndexTableRowHovered:zx,useIndexTableRowSelected:Gx,useMediaQuery:KA,useSetIndexFiltersMode:nk,useTheme:ei},Symbol.toStringTag,{value:"Module"}));var Kv={},on={},id=function(e,t){return id=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},id(e,t)};function zv(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");id(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wo=function(){return wo=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},wo.apply(this,arguments)};function Gv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Jv(e,t,r,n){var a=arguments.length,s=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function Xv(e,t){return function(r,n){t(r,n,e)}}function Yx(e,t,r,n,a,s){function i(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,p=r.length-1;p>=0;p--){var g={};for(var b in n)g[b]=b==="access"?{}:n[b];for(var b in n.access)g.access[b]=n.access[b];g.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(v||null))};var y=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],g);if(l==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(h=i(y.get))&&(d.get=h),(h=i(y.set))&&(d.set=h),(h=i(y.init))&&a.unshift(h)}else(h=i(y))&&(l==="field"?a.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function Zx(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function Qx(e){return typeof e=="symbol"?e:"".concat(e)}function eI(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Yv(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Zv(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function Qv(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var tl=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function eE(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tl(t,e,r)}function Po(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function bh(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,s=[],i;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function tE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(bh(arguments[t]));return e}function rE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var s=arguments[t],i=0,l=s.length;i<l;i++,a++)n[a]=s[i];return n}function nE(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Ja(e){return this instanceof Ja?(this.v=e,this):new Ja(e)}function aE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(f){n[f]&&(a[f]=function(p){return new Promise(function(g,b){s.push([f,p,g,b])>1||l(f,p)})})}function l(f,p){try{c(n[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof Ja?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function sE(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,s){t[a]=e[a]?function(i){return(r=!r)?{value:Ja(e[a](i)),done:!1}:s?s(i):i}:s}}function iE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Po=="function"?Po(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(l,c){i=e[s](i),a(l,c,i.done,i.value)})}}function a(s,i,l,c){Promise.resolve(c).then(function(u){s({value:u,done:l})},i)}}function oE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var tI=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function lE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&tl(t,e,r);return tI(t,e),t}function cE(e){return e&&e.__esModule?e:{default:e}}function uE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function dE(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function hE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function fE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var rI=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function pE(e){function t(n){e.error=e.hasError?new rI(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(s){return t(s),r()})}catch(s){t(s)}}if(e.hasError)throw e.error}return r()}const nI={__extends:zv,__assign:wo,__rest:Gv,__decorate:Jv,__param:Xv,__metadata:Yv,__awaiter:Zv,__generator:Qv,__createBinding:tl,__exportStar:eE,__values:Po,__read:bh,__spread:tE,__spreadArrays:rE,__spreadArray:nE,__await:Ja,__asyncGenerator:aE,__asyncDelegator:sE,__asyncValues:iE,__makeTemplateObject:oE,__importStar:lE,__importDefault:cE,__classPrivateFieldGet:uE,__classPrivateFieldSet:dE,__classPrivateFieldIn:hE,__addDisposableResource:fE,__disposeResources:pE},aI=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:fE,get __assign(){return wo},__asyncDelegator:sE,__asyncGenerator:aE,__asyncValues:iE,__await:Ja,__awaiter:Zv,__classPrivateFieldGet:uE,__classPrivateFieldIn:hE,__classPrivateFieldSet:dE,__createBinding:tl,__decorate:Jv,__disposeResources:pE,__esDecorate:Yx,__exportStar:eE,__extends:zv,__generator:Qv,__importDefault:cE,__importStar:lE,__makeTemplateObject:oE,__metadata:Yv,__param:Xv,__propKey:Qx,__read:bh,__rest:Gv,__runInitializers:Zx,__setFunctionName:eI,__spread:tE,__spreadArray:nE,__spreadArrays:rE,__values:Po,default:nI},Symbol.toStringTag,{value:"Module"})),ve=$n(aI);var zc={},_s={},hr={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.FeatureDeprecatedError=K.BillingError=K.InvalidRequestError=K.UnsupportedClientType=K.MissingRequiredArgument=K.SessionStorageError=K.MissingWebhookCallbackError=K.InvalidWebhookError=K.InvalidSession=K.CookieNotFound=K.BotActivityDetected=K.InvalidOAuthError=K.GraphqlQueryError=K.RestResourceError=K.HttpThrottlingError=K.HttpInternalError=K.HttpRetriableError=K.HttpResponseError=K.HttpMaxRetriesError=K.HttpRequestError=K.PrivateAppError=K.SafeCompareError=K.InvalidDeliveryMethodError=K.MissingJwtTokenError=K.InvalidJwtError=K.InvalidHostError=K.InvalidShopError=K.InvalidHmacError=K.ShopifyError=void 0;const sI=ve;class We extends Error{constructor(...t){super(...t),Object.setPrototypeOf(this,new.target.prototype)}}K.ShopifyError=We;class iI extends We{}K.InvalidHmacError=iI;class oI extends We{}K.InvalidShopError=oI;class lI extends We{}K.InvalidHostError=lI;class cI extends We{}K.InvalidJwtError=cI;class uI extends We{}K.MissingJwtTokenError=uI;class dI extends We{}K.InvalidDeliveryMethodError=dI;class hI extends We{}K.SafeCompareError=hI;class fI extends We{}K.PrivateAppError=fI;class pI extends We{}K.HttpRequestError=pI;class mI extends We{}K.HttpMaxRetriesError=mI;class mE extends We{constructor({message:t,code:r,statusText:n,body:a,headers:s}){super(t),this.response={code:r,statusText:n,body:a,headers:s}}}K.HttpResponseError=mE;class yh extends mE{}K.HttpRetriableError=yh;class gI extends yh{}K.HttpInternalError=gI;class bI extends yh{constructor(t){var{retryAfter:r}=t,n=sI.__rest(t,["retryAfter"]);super(n),this.response.retryAfter=r}}K.HttpThrottlingError=bI;class yI extends We{}K.RestResourceError=yI;class vI extends We{constructor({message:t,response:r,headers:n,body:a}){super(t),this.response=r,this.headers=n,this.body=a}}K.GraphqlQueryError=vI;class EI extends We{}K.InvalidOAuthError=EI;class SI extends We{}K.BotActivityDetected=SI;class _I extends We{}K.CookieNotFound=_I;class CI extends We{}K.InvalidSession=CI;class gE extends We{constructor({message:t,response:r}){super(t),this.response=r}}K.InvalidWebhookError=gE;class wI extends gE{}K.MissingWebhookCallbackError=wI;class PI extends We{}K.SessionStorageError=PI;class AI extends We{}K.MissingRequiredArgument=AI;class TI extends We{}K.UnsupportedClientType=TI;class RI extends We{}K.InvalidRequestError=RI;class kI extends We{constructor({message:t,errorData:r}){super(t),this.message=t,this.errorData=r}}K.BillingError=kI;class xI extends We{}K.FeatureDeprecatedError=xI;var dn={},Sm;function bE(){if(Sm)return dn;Sm=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.crypto=dn.setCrypto=void 0;let e;try{dn.crypto=e=crypto}catch{}function t(r){dn.crypto=e=r}return dn.setCrypto=t,dn}var Cs={},_m;function rl(){if(_m)return Cs;_m=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.HashFormat=void 0;var e;return function(t){t.Base64="base64",t.Hex="hex"}(e||(Cs.HashFormat=e={})),Cs}var Cm;function yE(){if(Cm)return hr;Cm=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.hashString=hr.asBase64=hr.asHex=hr.createSHA256HMAC=void 0;const e=ve,t=K,r=bE(),n=rl();function a(u,d,h=n.HashFormat.Base64){return e.__awaiter(this,void 0,void 0,function*(){const f=typeof(r.crypto===null||r.crypto===void 0?void 0:r.crypto.webcrypto)>"u"?r.crypto:r.crypto.webcrypto,p=new TextEncoder,g=yield f.subtle.importKey("raw",p.encode(u),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),b=yield f.subtle.sign("HMAC",g,p.encode(d));return h===n.HashFormat.Base64?l(b):s(b)})}hr.createSHA256HMAC=a;function s(u){return[...new Uint8Array(u)].map(d=>d.toString(16).padStart(2,"0")).join("")}hr.asHex=s;const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function l(u){let d="";const h=new Uint8Array(u);for(let f=0;f<h.length;){const p=h[f++],g=h[f++],b=h[f++],y=p>>2,v=(p&3)<<4|g>>4;let E=(g&15)<<2|b>>6,S=b&63;isNaN(g)&&(E=64),isNaN(b)&&(S=64),d+=i[y]+i[v]+i[E]+i[S]}return d}hr.asBase64=l;function c(u,d){const h=new TextEncoder().encode(u);switch(d){case n.HashFormat.Base64:return l(h);case n.HashFormat.Hex:return s(h);default:throw new t.ShopifyError(`Unrecognized hash format '${d}'`)}}return hr.hashString=c,hr}var ws={},wm;function vE(){if(wm)return ws;wm=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.splitN=void 0;function e(t,r,n){const a=t.split(r),s=Math.min(Math.abs(n),a.length);return[...a.slice(0,s-1),a.slice(s-1).join(r)]}return ws.splitN=e,ws}var st={},Pm;function EE(){if(Pm)return st;Pm=1,Object.defineProperty(st,"__esModule",{value:!0}),st.flatHeaders=st.removeHeader=st.canonicalizeHeaders=st.addHeader=st.setHeader=st.getHeader=st.getHeaders=st.canonicalizeHeaderName=void 0;function e(u){return u.replace(/(^|-)(\w+)/g,(d,h,f)=>h+f.slice(0,1).toUpperCase()+f.slice(1).toLowerCase())}st.canonicalizeHeaderName=e;function t(u,d){const h=[];if(!u)return h;const f=e(d);for(const[p,g]of Object.entries(u))e(p)===f&&(Array.isArray(g)?h.push(...g):h.push(g));return h}st.getHeaders=t;function r(u,d){var h;if(u)return(h=t(u,d))===null||h===void 0?void 0:h[0]}st.getHeader=r;function n(u,d,h){i(u),u[e(d)]=[h]}st.setHeader=n;function a(u,d,h){i(u);const f=e(d);let p=u[f];p?Array.isArray(p)||(p=[p]):p=[],u[f]=p,p.push(h)}st.addHeader=a;function s(u){return typeof u=="number"?u.toString():u}function i(u){for(const[d,h]of Object.entries(u)){const f=e(d);u[f]||(u[f]=[]),Array.isArray(u[f])||(u[f]=[s(u[f])]),d!==f&&(delete u[d],u[f].push(...[h].flat().map(p=>s(p))))}return u}st.canonicalizeHeaders=i;function l(u,d){i(u);const h=e(d);delete u[h]}st.removeHeader=l;function c(u){return Object.entries(u).flatMap(([d,h])=>Array.isArray(h)?h.map(f=>[d,f]):[[d,h]])}return st.flatHeaders=c,st}var Am;function II(){if(Am)return _s;Am=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.Cookies=void 0;const e=ve,t=yE(),r=vE(),n=EE();class a{static parseCookies(i){const l=i.filter(u=>u.trim().length>0).map(u=>{const[d,...h]=u.split(";"),[f,p]=(0,r.splitN)(d,"=",2).map(g=>g.trim());return[f,Object.assign({name:f,value:p},Object.fromEntries(h.map(g=>(0,r.splitN)(g,"=",2).map(b=>b.trim()))))]}),c=Object.fromEntries(l);for(const u of Object.values(c))typeof u.expires=="string"&&(u.expires=new Date(u.expires));return c}static encodeCookie(i){let l="";return l+=`${i.name}=${i.value};`,l+=Object.entries(i).filter(([c])=>!["name","value","expires"].includes(c)).map(([c,u])=>`${c}=${u}`).join("; "),i.expires&&(l+=";",l+=`expires=${i.expires.toUTCString()}`),l}constructor(i,l,{keys:c=[]}={}){var u,d;this.response=l,this.receivedCookieJar={},this.outgoingCookieJar={},this.keys=[],c&&(this.keys=c);const h=(u=(0,n.getHeader)(i.headers,"Cookie"))!==null&&u!==void 0?u:"";this.receivedCookieJar=a.parseCookies(h.split(";"));const f=(d=(0,n.getHeaders)(l.headers,"Set-Cookie"))!==null&&d!==void 0?d:[];this.outgoingCookieJar=a.parseCookies(f)}toHeaders(){return Object.values(this.outgoingCookieJar).map(i=>a.encodeCookie(i))}updateHeader(){this.response.headers||(this.response.headers={}),(0,n.removeHeader)(this.response.headers,"Set-Cookie"),this.toHeaders().map(i=>(0,n.addHeader)(this.response.headers,"Set-Cookie",i))}get(i){var l;return(l=this.receivedCookieJar[i])===null||l===void 0?void 0:l.value}deleteCookie(i){this.set(i,"",{path:"/",expires:new Date(0)})}getAndVerify(i){return e.__awaiter(this,void 0,void 0,function*(){const l=this.get(i);if(l&&(yield this.isSignedCookieValid(i)))return l})}get canSign(){var i;return((i=this.keys)===null||i===void 0?void 0:i.length)>0}set(i,l,c={}){this.outgoingCookieJar[i]=Object.assign(Object.assign({},c),{name:i,value:l}),this.updateHeader()}setAndSign(i,l,c={}){return e.__awaiter(this,void 0,void 0,function*(){if(!this.canSign)throw Error("No keys provided for signing.");this.set(i,l,c);const u=`${i}.sig`,d=yield(0,t.createSHA256HMAC)(this.keys[0],l);this.set(u,d,c),this.updateHeader()})}isSignedCookieValid(i){return e.__awaiter(this,void 0,void 0,function*(){const l=`${i}.sig`;if(!this.get(i)||!this.get(l))return this.deleteCookie(l),this.deleteCookie(i),!1;const c=this.get(i),u=this.get(l);return(yield Promise.all(this.keys.map(h=>(0,t.createSHA256HMAC)(h,c)))).includes(u)?!0:(this.deleteCookie(l),this.deleteCookie(i),!1)})}}return _s.Cookies=a,_s}var Gc={},Tm;function $I(){return Tm||(Tm=1,Object.defineProperty(Gc,"__esModule",{value:!0})),Gc}var Rm;function Pa(){return Rm||(Rm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.setAbstractConvertHeadersFunc=e.abstractConvertHeaders=e.setAbstractConvertResponseFunc=e.abstractConvertResponse=e.setAbstractConvertIncomingResponseFunc=e.abstractConvertIncomingResponse=e.setAbstractConvertRequestFunc=e.abstractConvertRequest=e.setAbstractFetchFunc=e.abstractFetch=e.isOK=void 0;const t=ve;t.__exportStar(II(),e),t.__exportStar(EE(),e),t.__exportStar(vE(),e),t.__exportStar($I(),e);function r(p){return p.statusCode>=200&&p.statusCode<=299}e.isOK=r;let n=()=>{throw new Error("Missing adapter implementation for 'abstractFetch' - make sure to import the appropriate adapter for your platform")};e.abstractFetch=n;function a(p){e.abstractFetch=p}e.setAbstractFetchFunc=a;let s=()=>{throw new Error("Missing adapter implementation for 'abstractConvertRequest' - make sure to import the appropriate adapter for your platform")};e.abstractConvertRequest=s;function i(p){e.abstractConvertRequest=p}e.setAbstractConvertRequestFunc=i;let l=()=>Promise.resolve({});e.abstractConvertIncomingResponse=l;function c(p){e.abstractConvertIncomingResponse=p}e.setAbstractConvertIncomingResponseFunc=c;let u=()=>{throw new Error("Missing adapter implementation for 'abstractConvertResponse' - make sure to import the appropriate adapter for your platform")};e.abstractConvertResponse=u;function d(p){e.abstractConvertResponse=p}e.setAbstractConvertResponseFunc=d;let h=()=>{throw new Error("Missing adapter implementation for 'abstractConvertHeaders' - make sure to import the appropriate adapter for your platform")};e.abstractConvertHeaders=h;function f(p){e.abstractConvertHeaders=p}e.setAbstractConvertHeadersFunc=f}(zc)),zc}var Jc={},km;function nl(){return km||(km=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ve;t.__exportStar(rl(),e),t.__exportStar(bE(),e),t.__exportStar(yE(),e)}(Jc)),Jc}var vh={},Xc={},xm;function NI(){return xm||(xm=1,Object.defineProperty(Xc,"__esModule",{value:!0})),Xc}var hn={},Im;function OI(){if(Im)return hn;Im=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.setAbstractRuntimeString=hn.abstractRuntimeString=void 0;let e=()=>{throw new Error("Missing adapter implementation for 'abstractRuntimeString' - make sure to import the appropriate adapter for your platform")};hn.abstractRuntimeString=e;function t(r){hn.abstractRuntimeString=r}return hn.setAbstractRuntimeString=t,hn}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ve;t.__exportStar(NI(),e),t.__exportStar(OI(),e)})(vh);(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ve;t.__exportStar(Pa(),e),t.__exportStar(nl(),e),t.__exportStar(vh,e)})(on);var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.webApiRuntimeString=Lr.webApiConvertResponse=Lr.webApiConvertHeaders=Lr.webApiConvertRequest=void 0;const Eh=ve,SE=on;function LI(e){var t;return Eh.__awaiter(this,void 0,void 0,function*(){const r=e.rawRequest,n={};for(const[a,s]of r.headers.entries())(0,SE.addHeader)(n,a,s);return{headers:n,method:(t=r.method)!==null&&t!==void 0?t:"GET",url:new URL(r.url).toString()}})}Lr.webApiConvertRequest=LI;function _E(e,t){return Eh.__awaiter(this,void 0,void 0,function*(){const r=new Headers;return(0,SE.flatHeaders)(e??{}).forEach(([n,a])=>r.append(n,a)),Promise.resolve(r)})}Lr.webApiConvertHeaders=_E;function MI(e,t){var r;return Eh.__awaiter(this,void 0,void 0,function*(){return new Response(e.body,{status:e.statusCode,statusText:e.statusText,headers:yield _E((r=e.headers)!==null&&r!==void 0?r:{})})})}Lr.webApiConvertResponse=MI;function FI(){return"Web API"}Lr.webApiRuntimeString=FI;const ii=on,al=Lr;(0,ii.setAbstractFetchFunc)(fetch);(0,ii.setAbstractConvertRequestFunc)(al.webApiConvertRequest);(0,ii.setAbstractConvertResponseFunc)(al.webApiConvertResponse);(0,ii.setAbstractConvertHeadersFunc)(al.webApiConvertHeaders);(0,ii.setAbstractRuntimeString)(al.webApiRuntimeString);var Ut={},sl={},ct={};const CE=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,Ao=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const t=e.match(CE);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},$m=e=>e==="*"||e==="x"||e==="X",Nm=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},DI=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],HI=(e,t)=>{if($m(e)||$m(t))return 0;const[r,n]=DI(Nm(e),Nm(t));return r>n?1:r<n?-1:0},Ua=(e,t)=>{for(let r=0;r<Math.max(e.length,t.length);r++){const n=HI(e[r]||"0",t[r]||"0");if(n!==0)return n}return 0},wE=(e,t)=>{const r=Ao(e),n=Ao(t),a=r.pop(),s=n.pop(),i=Ua(r,n);return i!==0?i:a&&s?Ua(a.split("."),s.split(".")):a||s?a?-1:1:0},PE=(e,t,r)=>{BI(r);const n=wE(e,t);return AE[r].includes(n)},AE={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},Om=Object.keys(AE),BI=e=>{if(typeof e!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof e}`);if(Om.indexOf(e)===-1)throw new Error(`Invalid operator, expected one of ${Om.join("|")}`)},eo=(e,t)=>{if(t=t.replace(/([><=]+)\s+/g,"$1"),t.includes("||"))return t.split("||").some(y=>eo(e,y));if(t.includes(" - ")){const[y,v]=t.split(" - ",2);return eo(e,`>=${y} <=${v}`)}else if(t.includes(" "))return t.trim().replace(/\s{2,}/g," ").split(" ").every(y=>eo(e,y));const r=t.match(/^([<>=~^]+)/),n=r?r[1]:"=";if(n!=="^"&&n!=="~")return PE(e,t,n);const[a,s,i,,l]=Ao(e),[c,u,d,,h]=Ao(t),f=[a,s,i],p=[c,u??"x",d??"x"];if(h&&(!l||Ua(f,p)!==0||Ua(l.split("."),h.split("."))===-1))return!1;const g=p.findIndex(y=>y!=="0")+1,b=n==="~"?2:g>1?g:1;return!(Ua(f.slice(0,b),p.slice(0,b))!==0||Ua(f.slice(b),p.slice(b))===-1)},WI=e=>typeof e=="string"&&/^[v\d]/.test(e)&&CE.test(e),UI=e=>typeof e=="string"&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(e),jI=Object.freeze(Object.defineProperty({__proto__:null,compare:PE,compareVersions:wE,satisfies:eo,validate:WI,validateStrict:UI},Symbol.toStringTag,{value:"Module"})),qI=$n(jI);var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.BillingReplacementBehavior=xe.BillingInterval=xe.privacyTopics=xe.ClientType=xe.ShopifyHeader=xe.LATEST_API_VERSION=xe.LIBRARY_NAME=xe.ApiVersion=xe.LogSeverity=void 0;var Lm;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(Lm||(xe.LogSeverity=Lm={}));var od;(function(e){e.October22="2022-10",e.January23="2023-01",e.April23="2023-04",e.July23="2023-07",e.October23="2023-10",e.January24="2024-01",e.April24="2024-04",e.Unstable="unstable"})(od||(xe.ApiVersion=od={}));xe.LIBRARY_NAME="Shopify API Library";xe.LATEST_API_VERSION=od.April24;var Mm;(function(e){e.AccessToken="X-Shopify-Access-Token",e.ApiVersion="X-Shopify-API-Version",e.Domain="X-Shopify-Shop-Domain",e.Hmac="X-Shopify-Hmac-Sha256",e.Topic="X-Shopify-Topic",e.SubTopic="X-Shopify-Sub-Topic",e.WebhookId="X-Shopify-Webhook-Id",e.StorefrontPrivateToken="Shopify-Storefront-Private-Token",e.StorefrontSDKVariant="X-SDK-Variant",e.StorefrontSDKVersion="X-SDK-Version"})(Mm||(xe.ShopifyHeader=Mm={}));var Fm;(function(e){e.Rest="rest",e.Graphql="graphql"})(Fm||(xe.ClientType=Fm={}));xe.privacyTopics=["CUSTOMERS_DATA_REQUEST","CUSTOMERS_REDACT","SHOP_REDACT"];var Dm;(function(e){e.OneTime="ONE_TIME",e.Every30Days="EVERY_30_DAYS",e.Annual="ANNUAL",e.Usage="USAGE"})(Dm||(xe.BillingInterval=Dm={}));var Hm;(function(e){e.ApplyImmediately="APPLY_IMMEDIATELY",e.ApplyOnNextBillingCycle="APPLY_ON_NEXT_BILLING_CYCLE",e.Standard="STANDARD"})(Hm||(xe.BillingReplacementBehavior=Hm={}));var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.SHOPIFY_API_LIBRARY_VERSION=void 0;ns.SHOPIFY_API_LIBRARY_VERSION="9.7.1";var il={};Object.defineProperty(il,"__esModule",{value:!0});il.log=void 0;const Mi=xe;function VI(e){return function(t,r,n={}){if(t>e.logger.level)return;const a=[];e.logger.timestamps&&a.push(`${new Date().toISOString().slice(0,-5)}Z`);let s=n.package||"shopify-api";switch(delete n.package,t){case Mi.LogSeverity.Debug:s=`${s}/DEBUG`;break;case Mi.LogSeverity.Info:s=`${s}/INFO`;break;case Mi.LogSeverity.Warning:s=`${s}/WARNING`;break;case Mi.LogSeverity.Error:s=`${s}/ERROR`;break}a.push(s);const i=[];Object.entries(n).forEach(([c,u])=>{i.push(`${c}: ${u}`)});let l="";i.length>0&&(l=` | {${i.join(", ")}}`),e.logger.log(t,`[${a.join("] [")}] ${r}${l}`)}}il.log=VI;Object.defineProperty(ct,"__esModule",{value:!0});ct.logger=void 0;const Fi=ve,KI=qI,Ms=xe,zI=K,GI=ns,JI=il;function XI(e){const t=(0,JI.log)(e);return{log:t,debug:(r,n={})=>Fi.__awaiter(this,void 0,void 0,function*(){return t(Ms.LogSeverity.Debug,r,n)}),info:(r,n={})=>Fi.__awaiter(this,void 0,void 0,function*(){return t(Ms.LogSeverity.Info,r,n)}),warning:(r,n={})=>Fi.__awaiter(this,void 0,void 0,function*(){return t(Ms.LogSeverity.Warning,r,n)}),error:(r,n={})=>Fi.__awaiter(this,void 0,void 0,function*(){return t(Ms.LogSeverity.Error,r,n)}),deprecated:YI(t)}}ct.logger=XI;function YI(e){return function(t,r){if((0,KI.compare)(GI.SHOPIFY_API_LIBRARY_VERSION,t,">="))throw new zI.FeatureDeprecatedError(`Feature was deprecated in version ${t}`);return e(Ms.LogSeverity.Warning,`[Deprecated | ${t}] ${r}`)}}Object.defineProperty(sl,"__esModule",{value:!0});sl.loadRestResources=void 0;const ZI=ct;function QI({resources:e,config:t,RestClient:r}){const n=Object.keys(e)[0];return t.apiVersion!==e[n].apiVersion&&(0,ZI.logger)(t).warning(`Loading REST resources for API version ${e[n].apiVersion}, which doesn't match the default ${t.apiVersion}`),Object.fromEntries(Object.entries(e).map(([a,s])=>{class i extends s{}return i.setClassProperties({Client:r,config:t}),Object.entries(i.hasOne).map(([l,c])=>{c.setClassProperties({Client:r,config:t})}),Object.entries(i.hasMany).map(([l,c])=>{c.setClassProperties({Client:r,config:t})}),Reflect.defineProperty(i,"name",{value:a}),[a,i]}))}sl.loadRestResources=QI;var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.logDisabledFutureFlags=void 0;function e$(e,t){var r;if(!e._logDisabledFutureFlags)return;const n=(a,s)=>t.info(`Future flag ${a} is disabled.

  ${s}
`);!((r=e.future)===null||r===void 0)&&r.v10_lineItemBilling||n("v10_lineItemBilling","Enable this flag to use the new billing API, that supports multiple line items per plan.")}ol.logDisabledFutureFlags=e$;var ll={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.AuthScopes=void 0;class Yr{constructor(t){let r=[];typeof t=="string"?r=t.split(new RegExp(`${Yr.SCOPE_DELIMITER}\\s*`)):Array.isArray(t)?r=t:t&&(r=Array.from(t.expandedScopes)),r=r.map(i=>i.trim()).filter(i=>i.length);const n=this.getImpliedScopes(r),a=new Set(r),s=new Set(n);this.compressedScopes=new Set([...a].filter(i=>!s.has(i))),this.expandedScopes=new Set([...a,...s])}has(t){let r;return t instanceof Yr?r=t:r=new Yr(t),r.toArray().filter(n=>!this.expandedScopes.has(n)).length===0}equals(t){let r;return t instanceof Yr?r=t:r=new Yr(t),this.compressedScopes.size===r.compressedScopes.size&&this.toArray().filter(n=>!r.has(n)).length===0}toString(){return this.toArray().join(Yr.SCOPE_DELIMITER)}toArray(){return[...this.compressedScopes]}getImpliedScopes(t){return t.reduce((r,n)=>{const a=n.match(/^(unauthenticated_)?write_(.*)$/);return a&&r.push(`${a[1]?a[1]:""}read_${a[2]}`),r},[])}}oi.AuthScopes=Yr;Yr.SCOPE_DELIMITER=",";Object.defineProperty(ll,"__esModule",{value:!0});ll.validateConfig=void 0;const t$=ve,r$=K,ja=xe,Yc=oi,n$=ct;function a$(e){var t;const r={apiKey:"",apiSecretKey:"",scopes:new Yc.AuthScopes([]),hostName:"",hostScheme:"https",apiVersion:ja.LATEST_API_VERSION,isEmbeddedApp:!0,isCustomStoreApp:!1,logger:{log:i$,level:ja.LogSeverity.Info,httpRequests:!1,timestamps:!1},future:{},_logDisabledFutureFlags:!0},n=["apiSecretKey","hostName"];(!("isCustomStoreApp"in e)||!e.isCustomStoreApp)&&(n.push("apiKey"),n.push("scopes")),"isCustomStoreApp"in e&&e.isCustomStoreApp&&(!("adminApiAccessToken"in e)||((t=e.adminApiAccessToken)===null||t===void 0?void 0:t.length)===0)&&n.push("adminApiAccessToken");const a=[];if(n.forEach(g=>{s$(e[g])||a.push(g)}),a.length)throw new r$.ShopifyError(`Cannot initialize Shopify API Library. Missing values for: ${a.join(", ")}`);const{hostScheme:s,isCustomStoreApp:i,adminApiAccessToken:l,userAgentPrefix:c,logger:u,privateAppStorefrontAccessToken:d,customShopDomains:h,billing:f}=e,p=t$.__rest(e,["hostScheme","isCustomStoreApp","adminApiAccessToken","userAgentPrefix","logger","privateAppStorefrontAccessToken","customShopDomains","billing"]);return Object.assign(r,p,{hostName:e.hostName.replace(/\/$/,""),scopes:e.scopes instanceof Yc.AuthScopes?e.scopes:new Yc.AuthScopes(e.scopes),hostScheme:s??r.hostScheme,isCustomStoreApp:i??r.isCustomStoreApp,adminApiAccessToken:l??r.adminApiAccessToken,userAgentPrefix:c??r.userAgentPrefix,logger:Object.assign(Object.assign({},r.logger),u||{}),privateAppStorefrontAccessToken:d??r.privateAppStorefrontAccessToken,customShopDomains:h??r.customShopDomains,billing:f??r.billing}),r.isCustomStoreApp&&e.adminApiAccessToken===e.apiSecretKey&&(0,n$.logger)(r).warning("adminApiAccessToken is set to the same value as apiSecretKey. adminApiAccessToken should be set to the Admin API access token for custom store apps; apiSecretKey should be set to the custom store app's API secret key."),r}ll.validateConfig=a$;function s$(e){return e==null?!1:typeof e=="string"||Array.isArray(e)?e.length>0:!0}function i$(e,t){switch(e){case ja.LogSeverity.Debug:console.debug(t);break;case ja.LogSeverity.Info:console.log(t);break;case ja.LogSeverity.Warning:console.warn(t);break;case ja.LogSeverity.Error:console.error(t);break}}var cl={},Fn={},ma={};const ul="GraphQL Client",Bm=0,Wm=3,TE="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",RE="Response returned unexpected Content-Type:",kE="An unknown error has occurred. The API did not return a data object or any errors in its response.",ld={json:"application/json",multipart:"multipart/mixed"},Um="X-SDK-Variant",jm="X-SDK-Version",o$="shopify-graphql-client",l$="0.10.3",xE=1e3,c$=[429,503],IE=/@(defer)\b/i,qm=`\r
`,u$=/boundary="?([^=";]+)"?/i,Vm=qm+qm;function Pn(e,t=ul){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function as(e){return e instanceof Error?e.message:JSON.stringify(e)}function $E(e){return e instanceof Error&&e.cause?e.cause:void 0}function NE(e){return e.flatMap(({errors:t})=>t??[])}function To({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Bm||t>Wm))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${Bm} or greater than ${Wm}`)}function Kt(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function OE(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:OE(e,n)}function LE(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=LE(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function ME([e,...t]){return t.reduce(LE,{...e})}function FE({clientLogger:e,customFetchApi:t=fetch,client:r=ul,defaultRetryWaitTime:n=xE,retriableCodes:a=c$}){const s=async(i,l,c)=>{const u=l+1,d=c+1;let h;try{if(h=await t(...i),e({type:"HTTP-Response",content:{requestParams:i,response:h}}),!h.ok&&a.includes(h.status)&&u<=d)throw new Error;return h}catch(f){if(u<=d){const p=h==null?void 0:h.headers.get("Retry-After");return await d$(p?parseInt(p,10):n),e({type:"HTTP-Retry",content:{requestParams:i,lastResponse:h,retryAttempt:l,maxRetries:c}}),s(i,u,c)}throw new Error(Pn(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${as(f)}`,r))}};return s}async function d$(e){return new Promise(t=>setTimeout(t,e))}function h$({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:a}){To({client:ul,retries:n});const s={headers:e,url:t,retries:n},i=f$(a),l=FE({customFetchApi:r,clientLogger:i,defaultRetryWaitTime:xE}),c=p$(l,s),u=m$(c),d=_$(c);return{config:s,fetch:c,request:u,requestStream:d}}function f$(e){return t=>{e&&e(t)}}async function DE(e){const{errors:t,data:r,extensions:n}=await e.json();return{...Kt("data",r),...Kt("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:Pn(t?TE:kE),...Kt("graphQLErrors",t),response:e}}:{}}}function p$(e,{url:t,headers:r,retries:n}){return async(a,s={})=>{const{variables:i,headers:l,url:c,retries:u}=s,d=JSON.stringify({query:a,variables:i});To({client:ul,retries:u});const h=Object.entries({...r,...l}).reduce((p,[g,b])=>(p[g]=Array.isArray(b)?b.join(", "):b.toString(),p),{});return!h[Um]&&!h[jm]&&(h[Um]=o$,h[jm]=l$),e([c??t,{method:"POST",headers:h,body:d}],1,u??n)}}function m$(e){return async(...t)=>{if(IE.test(t[0]))throw new Error(Pn("This operation will result in a streamable response - use requestStream() instead."));try{const r=await e(...t),{status:n,statusText:a}=r,s=r.headers.get("content-type")||"";return r.ok?s.includes(ld.json)?DE(r):{errors:{networkStatusCode:n,message:Pn(`${RE} ${s}`),response:r}}:{errors:{networkStatusCode:n,message:Pn(a),response:r}}}catch(r){return{errors:{message:as(r)}}}}}async function*g$(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function b$(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const a=r.lastIndexOf(t),i=r.slice(0,a).split(t).filter(l=>l.trim().length>0).map(l=>l.slice(l.indexOf(Vm)+Vm.length).trim());i.length>0&&(yield i),r=r.slice(a+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${as(r)}`)}}}}function y$(e){return{async*[Symbol.asyncIterator](){yield{...await DE(e),hasNext:!1}}}}function v$(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${as(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:a,extensions:s,errors:i}=t;if(!n)return{data:r||{},...Kt("errors",i),...Kt("extensions",s),hasNext:a};const l=n.map(({data:c,path:u,errors:d})=>({data:c&&u?OE(u,c):{},...Kt("errors",d)}));return{data:l.length===1?l[0].data:ME([...l.map(({data:c})=>c)]),...Kt("errors",NE(l)),hasNext:a}})}function E$(e,t){if(e.length>0)throw new Error(TE,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(kE)}function S$(e,t){var l;const r=(t??"").match(u$),n=`--${r?r[1]:"-"}`;if(!((l=e.body)!=null&&l.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const a=g$(e);let s={},i;return{async*[Symbol.asyncIterator](){var c;try{let u=!0;for await(const d of b$(a,n)){const h=v$(d);i=((c=h.find(p=>p.extensions))==null?void 0:c.extensions)??i;const f=NE(h);s=ME([s,...h.map(({data:p})=>p)]),u=h.slice(-1)[0].hasNext,E$(f,s),yield{...Kt("data",s),...Kt("extensions",i),hasNext:u}}if(u)throw new Error("Response stream terminated unexpectedly")}catch(u){const d=$E(u);yield{...Kt("data",s),...Kt("extensions",i),errors:{message:Pn(as(u)),networkStatusCode:e.status,...Kt("graphQLErrors",d==null?void 0:d.graphQLErrors),response:e},hasNext:!1}}}}}function _$(e){return async(...t)=>{if(!IE.test(t[0]))throw new Error(Pn("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const a=r.headers.get("content-type")||"";switch(!0){case a.includes(ld.json):return y$(r);case a.includes(ld.multipart):return S$(r,a);default:throw new Error(`${RE} ${a}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=$E(r);yield{errors:{message:Pn(as(r)),...Kt("networkStatusCode",n==null?void 0:n.status),...Kt("response",n)},hasNext:!1}}}}}}function HE({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,a=new URL(n);return a.protocol="https",a.origin}catch{throw new Error(`${e}: a valid store domain ("${t}") must be provided`)}}function dl({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const a=`${e}: the provided apiVersion ("${r}")`,s=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${a} is invalid. ${s}`);const i=r.trim();t.includes(i)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${a} is likely deprecated or not supported. ${s}`))}function Ro(e){const t=e*3-2;return t===10?t:`0${t}`}function Zc(e,t,r){const n=t-r;return n<=0?`${e-1}-${Ro(n+4)}`:`${e}-${Ro(n)}`}function C$(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${Ro(n)}`}}function BE(){const{year:e,quarter:t,version:r}=C$(),n=t===4?`${e+1}-01`:`${e}-${Ro(t+1)}`;return[Zc(e,t,3),Zc(e,t,2),Zc(e,t,1),r,n,"unstable"]}function w$(e){return t=>({...t??{},...e.headers})}function P$({getHeaders:e,getApiUrl:t}){return(r,n)=>{const a=[r];if(n&&Object.keys(n).length>0){const{variables:s,apiVersion:i,headers:l,retries:c}=n;a.push({...s?{variables:s}:{},...l?{headers:e(l)}:{},...i?{url:t(i)}:{},...c?{retries:c}:{}})}return a}}const ko="application/json",WE="0.2.8",UE="X-Shopify-Access-Token",er="Admin API Client",A$=[429,500,503],T$=1e3;function jE(e){if(!e)throw new Error(`${er}: an access token must be provided`)}function qE(){if(typeof window<"u")throw new Error(`${er}: this client should not be used in the browser`)}function R$({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,retries:a=0,customFetchApi:s,logger:i}){const l=BE(),c=HE({client:er,storeDomain:e}),u={client:er,currentSupportedApiVersions:l,logger:i};qE(),dl({client:er,currentSupportedApiVersions:l,apiVersion:t,logger:i}),jE(r);const d=k$(c,t,u),h={storeDomain:c,apiVersion:t,accessToken:r,headers:{"Content-Type":ko,Accept:ko,[UE]:r,"User-Agent":`${n?`${n} | `:""}${er} v${WE}`},apiUrl:d(),userAgentPrefix:n},f=h$({headers:h.headers,url:h.apiUrl,retries:a,customFetchApi:s,logger:i}),p=w$(h),g=x$(h,d),b=P$({getHeaders:p,getApiUrl:g});return Object.freeze({config:h,getHeaders:p,getApiUrl:g,fetch:(...v)=>f.fetch(...b(...v)),request:(...v)=>f.request(...b(...v))})}function k$(e,t,r){return n=>{n&&dl({...r,apiVersion:n});const a=(n??t).trim();return`${e}/admin/api/${a}/graphql.json`}}function x$(e,t){return r=>r?t(r):e.apiUrl}var qa;(function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE"})(qa||(qa={}));function I$({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,logger:a,customFetchApi:s=fetch,retries:i=0,scheme:l="https",defaultRetryTime:c=T$,formatPaths:u=!0}){const d=BE(),h=HE({client:er,storeDomain:e}).replace("https://",`${l}://`),f={client:er,currentSupportedApiVersions:d,logger:a};qE(),dl({client:er,currentSupportedApiVersions:d,apiVersion:t,logger:a}),jE(r),To({client:er,retries:i});const p=$$(h,t,f,u),g=N$(a),b=FE({customFetchApi:s,clientLogger:g,defaultRetryWaitTime:c,client:er,retriableCodes:A$}),y=async(v,{method:E,data:S,headers:_,searchParams:R,retries:x=0,apiVersion:C})=>{To({client:er,retries:x});const w=p(v,R??{},C),P=Km(_??{}),$=[...P["user-agent"]?[P["user-agent"]]:[],...n?[n]:[],`${er} v${WE}`].join(" | "),N=Km({"Content-Type":ko,...P,Accept:ko,[UE]:r,"User-Agent":$}),M=S&&typeof S!="string"?JSON.stringify(S):S;return b([w,{method:E,headers:N,...M?{body:M}:void 0}],1,x??i)};return{get:(v,E)=>y(v,{method:qa.Get,...E}),put:(v,E)=>y(v,{method:qa.Put,...E}),post:(v,E)=>y(v,{method:qa.Post,...E}),delete:(v,E)=>y(v,{method:qa.Delete,...E})}}function $$(e,t,r,n=!0){return(a,s,i)=>{i&&dl({...r,apiVersion:i});function l(f,p,g){if(Array.isArray(g)){g.forEach(b=>l(f,`${p}[]`,b));return}else if(typeof g=="object"){Object.entries(g).forEach(([b,y])=>l(f,`${p}[${b}]`,y));return}f.append(p,String(g))}const c=(i??t).trim();let u=a.replace(/^\//,"");n&&(u.startsWith("admin")||(u=`admin/api/${c}/${u}`),u.endsWith(".json")||(u=`${u}.json`));const d=new URLSearchParams;if(s)for(const[f,p]of Object.entries(s))l(d,f,p);const h=d.toString()?`?${d.toString()}`:"";return`${e}/${u}${h}`}}function N$(e){return t=>{e&&e(t)}}function Km(e){const t={};for(const[r,n]of Object.entries(e))t[r.toLowerCase()]=Array.isArray(n)?n.join(", "):String(n);return t}const O$=Object.freeze(Object.defineProperty({__proto__:null,createAdminApiClient:R$,createAdminRestApiClient:I$},Symbol.toStringTag,{value:"Module"})),VE=$n(O$);var lr={},KE={},zE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Method=void 0,function(s){s.Get="GET",s.Post="POST",s.Put="PUT",s.Patch="PATCH",s.Delete="DELETE",s.Head="HEAD",s.Options="OPTIONS",s.Connect="CONNECT"}(e.Method||(e.Method={})),e.StatusCode=void 0,function(s){s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.RequestEntityTooLarge=413]="RequestEntityTooLarge",s[s.RequestUriTooLong=414]="RequestUriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.TooManyRequests=429]="TooManyRequests",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported"}(e.StatusCode||(e.StatusCode={})),e.Header=void 0,function(s){s.Accept="Accept",s.AcceptEncoding="Accept-Encoding",s.AcceptLanguage="Accept-Language",s.AccessControlAllowCredentials="Access-Control-Allow-Credentials",s.AccessControlAllowHeaders="Access-Control-Allow-Headers",s.AccessControlAllowMethods="Access-Control-Allow-Methods",s.AccessControlAllowOrigin="Access-Control-Allow-Origin",s.AccessControlExposeHeaders="Access-Control-Expose-Headers",s.AccessControlMaxAge="Access-Control-Max-Age",s.AccessControlRequestHeaders="Access-Control-Request-Headers",s.AccessControlRequestMethod="Access-Control-Request-Method",s.Authorization="Authorization",s.CacheControl="Cache-Control",s.CacheStatus="Cache-Status",s.Connection="Connection",s.ContentDisposition="Content-Disposition",s.ContentEncoding="Content-Encoding",s.ContentLength="Content-Length",s.ContentSecurityPolicy="Content-Security-Policy",s.ContentSecurityPolicyReportOnly="Content-Security-Policy-Report-Only",s.ContentType="Content-Type",s.ContentTypeOptions="X-Content-Type-Options",s.Cookie="Cookie",s.DownloadOptions="X-Download-Options",s.ETag="ETag",s.Forwarded="Forwarded",s.ForwardedFor="X-Forwarded-For",s.ForwardedHost="X-Forwarded-Host",s.ForwardedProtocol="X-Forwarded-Proto",s.FrameOptions="X-Frame-Options",s.Host="Host",s.IfNoneMatch="If-None-Match",s.Location="Location",s.Origin="Origin",s.ReferrerPolicy="Referrer-Policy",s.ServerTiming="Server-Timing",s.StrictTransportSecurity="Strict-Transport-Security",s.TimingAllowOrigin="Timing-Allow-Origin",s.Trailer="Trailer",s.TransferEncoding="Transfer-Encoding",s.UserAgent="User-Agent",s.WwwAuthenticate="WWW-Authenticate",s.XhrRedirectedTo="X-XHR-Redirected-To",s.XhrReferer="X-XHR-Referer",s.XssProtecton="X-XSS-Protection",s.XContentTypeOptions="X-Content-Type-Options",s.XDownloadOptions="X-Download-Options",s.XForwardedFor="X-Forwarded-For",s.XForwardedHost="X-Forwarded-Host",s.XForwardedProto="X-Forwarded-Proto",s.XFrameOptions="X-Frame-Options",s.XXhrRedirectedTo="X-XHR-Redirected-To",s.XXhrReferer="X-XHR-Referer",s.XXssProtecton="X-XSS-Protection",s.XXssProtection="X-XSS-Protection"}(e.Header||(e.Header={})),e.CspDirective=void 0,function(s){s.ChildSrc="child-src",s.ConnectSrc="connect-src",s.DefaultSrc="default-src",s.FontSrc="font-src",s.FrameSrc="frame-src",s.ImgSrc="img-src",s.ManifestSrc="manifest-src",s.MediaSrc="media-src",s.ObjectSrc="object-src",s.PrefetchSrc="prefetch-src",s.ScriptSrc="script-src",s.StyleSrc="style-src",s.WebrtcSrc="webrtc-src",s.WorkerSrc="worker-src",s.BaseUri="base-uri",s.PluginTypes="plugin-types",s.Sandbox="sandbox",s.FormAction="form-action",s.FrameAncestors="frame-ancestors",s.ReportUri="report-uri",s.BlockAllMixedContent="block-all-mixed-content",s.RequireSriFor="require-sri-for",s.UpgradeInsecureRequests="upgrade-insecure-requests"}(e.CspDirective||(e.CspDirective={})),e.CspSandboxAllow=void 0,function(s){s.Forms="allow-forms",s.SameOrigin="allow-same-origin",s.Scripts="allow-scripts",s.Popups="allow-popups",s.Modals="allow-modals",s.OrientationLock="allow-orientation-lock",s.PointerLock="allow-pointer-lock",s.Presentation="allow-presentation",s.PopupsToEscapeSandbox="allow-popups-to-escape-sandbox",s.TopNavigation="allow-top-navigation"}(e.CspSandboxAllow||(e.CspSandboxAllow={})),e.SpecialSource=void 0,function(s){s.Any="*",s.Self="'self'",s.UnsafeInline="'unsafe-inline'",s.UnsafeEval="'unsafe-eval'",s.None="'none'",s.StrictDynamic="'strict-dynamic'",s.ReportSample="'report-sample'",s.Data="data:",s.Blob="blob:",s.FileSystem="filesystem:"}(e.SpecialSource||(e.SpecialSource={})),e.SriAsset=void 0,function(s){s.Script="script",s.Style="style"}(e.SriAsset||(e.SriAsset={})),e.HashAlgorithm=void 0,function(s){s.Sha256="sha256",s.Sha384="sha384",s.Sha512="sha512"}(e.HashAlgorithm||(e.HashAlgorithm={})),e.ResponseType=void 0,function(s){s.Informational="1xx",s.Success="2xx",s.Redirection="3xx",s.ClientError="4xx",s.ServerError="5xx",s.Unknown="Unknown"}(e.ResponseType||(e.ResponseType={}));function t(s){return s>=100&&s<200?e.ResponseType.Informational:s>=200&&s<300?e.ResponseType.Success:s>=300&&s<400?e.ResponseType.Redirection:s>=400&&s<500?e.ResponseType.ClientError:s>=500&&s<600?e.ResponseType.ServerError:e.ResponseType.Unknown}function r(s){return`'nonce-${s}'`}function n(s,i){return`'${s}-${i}'`}e.CacheControl=void 0,function(s){s.NoCache="no-cache",s.NoStore="no-store",s.MustRevalidate="must-revalidate",s.MaxAge="max-age"}(e.CacheControl||(e.CacheControl={}));const a=`${e.CacheControl.NoCache},${e.CacheControl.NoStore},${e.CacheControl.MustRevalidate},${e.CacheControl.MaxAge}=0`;e.getResponseType=t,e.hashSource=n,e.noCache=a,e.nonceSource=r})(zE);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=zE;Object.defineProperty(e,"CacheControl",{enumerable:!0,get:function(){return t.CacheControl}}),Object.defineProperty(e,"CspDirective",{enumerable:!0,get:function(){return t.CspDirective}}),Object.defineProperty(e,"CspSandboxAllow",{enumerable:!0,get:function(){return t.CspSandboxAllow}}),Object.defineProperty(e,"HashAlgorithm",{enumerable:!0,get:function(){return t.HashAlgorithm}}),Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return t.Header}}),Object.defineProperty(e,"Method",{enumerable:!0,get:function(){return t.Method}}),Object.defineProperty(e,"ResponseType",{enumerable:!0,get:function(){return t.ResponseType}}),Object.defineProperty(e,"SpecialSource",{enumerable:!0,get:function(){return t.SpecialSource}}),Object.defineProperty(e,"SriAsset",{enumerable:!0,get:function(){return t.SriAsset}}),Object.defineProperty(e,"StatusCode",{enumerable:!0,get:function(){return t.StatusCode}}),e.getResponseType=t.getResponseType,e.hashSource=t.hashSource,e.noCache=t.noCache,e.nonceSource=t.nonceSource})(KE);var Sh=KE;Object.defineProperty(lr,"__esModule",{value:!0});lr.throwFailedRequest=lr.clientLoggerFactory=lr.getUserAgent=void 0;const L$=ve,Qc=Sh,Yn=L$.__importStar(K),M$=xe,F$=ns,to=on,eu=ct;function D$(e){let t=`${M$.LIBRARY_NAME} v${F$.SHOPIFY_API_LIBRARY_VERSION} | ${(0,to.abstractRuntimeString)()}`;return e.userAgentPrefix&&(t=`${e.userAgentPrefix} | ${t}`),t}lr.getUserAgent=D$;function H$(e){return t=>{if(e.logger.httpRequests)switch(t.type){case"HTTP-Response":{const r=t.content;(0,eu.logger)(e).debug("Received response for HTTP request",{requestParams:JSON.stringify(r.requestParams),response:JSON.stringify(r.response)});break}case"HTTP-Retry":{const r=t.content;(0,eu.logger)(e).debug("Retrying HTTP request",{requestParams:JSON.stringify(r.requestParams),retryAttempt:r.retryAttempt,maxRetries:r.maxRetries,response:JSON.stringify(r.lastResponse)});break}default:{(0,eu.logger)(e).debug(`HTTP request event: ${t.content}`);break}}}}lr.clientLoggerFactory=H$;function B$(e,t,r){var n,a,s;if(typeof r>"u")throw new Yn.HttpRequestError("Http request error, no response available",{body:e});const i=(0,to.canonicalizeHeaders)(Object.fromEntries((n=r.headers.entries())!==null&&n!==void 0?n:[]));if(r.status===Qc.StatusCode.Ok&&e.errors.graphQLErrors)throw new Yn.GraphqlQueryError({message:(s=(a=e.errors.graphQLErrors)===null||a===void 0?void 0:a[0].message)!==null&&s!==void 0?s:"GraphQL operation failed",response:r,headers:i,body:e});const l=[];e.errors&&l.push(JSON.stringify(e.errors,null,2));const c=(0,to.getHeader)(i,"x-request-id");c&&l.push(`If you report this error, please include this id: ${c}`);const u=l.length?`:
${l.join(`
`)}`:"",d=r.status,h=r.statusText;switch(!0){case r.status===Qc.StatusCode.TooManyRequests:{if(t)throw new Yn.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request.");{const f=(0,to.getHeader)(i,"Retry-After");throw new Yn.HttpThrottlingError({message:`Shopify is throttling requests ${u}`,code:d,statusText:h,body:e,headers:i,retryAfter:f?parseFloat(f):void 0})}}case r.status>=Qc.StatusCode.InternalServerError:throw t?new Yn.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request."):new Yn.HttpInternalError({message:`Shopify internal error${u}`,code:d,statusText:h,body:e,headers:i});default:throw new Yn.HttpResponseError({message:`Received an error response (${r.status} ${r.statusText}) from Shopify${u}`,code:d,statusText:h,body:e,headers:i})}}lr.throwFailedRequest=B$;Object.defineProperty(ma,"__esModule",{value:!0});ma.graphqlClientClass=ma.GraphqlClient=void 0;const cd=ve,W$=VE,zm=ct,Gm=cd.__importStar(K),U$=on,tu=lr;class GE{constructor(t){var r,n;const a=this.graphqlClass().config;if(!a.isCustomStoreApp&&!t.session.accessToken)throw new Gm.MissingRequiredArgument("Missing access token when creating GraphQL client");if(t.apiVersion){const s=t.apiVersion===a.apiVersion?`Admin client has a redundant API version override to the default ${t.apiVersion}`:`Admin client overriding default API version ${a.apiVersion} with ${t.apiVersion}`;(0,zm.logger)(a).debug(s)}this.session=t.session,this.apiVersion=t.apiVersion,this.client=(0,W$.createAdminApiClient)({accessToken:(r=a.adminApiAccessToken)!==null&&r!==void 0?r:this.session.accessToken,apiVersion:(n=this.apiVersion)!==null&&n!==void 0?n:a.apiVersion,storeDomain:this.session.shop,customFetchApi:U$.abstractFetch,logger:(0,tu.clientLoggerFactory)(a),userAgentPrefix:(0,tu.getUserAgent)(a)})}query(t){var r;return cd.__awaiter(this,void 0,void 0,function*(){if((0,zm.logger)(this.graphqlClass().config).deprecated("10.0.0",`The query method is deprecated, and was replaced with the request method.
See the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.`),typeof t.data=="string"&&t.data.length===0||Object.entries(t.data).length===0)throw new Gm.MissingRequiredArgument("Query missing.");let n,a;typeof t.data=="string"?n=t.data:(n=t.data.query,a=t.data.variables);const s=Object.fromEntries(Object.entries((r=t==null?void 0:t.extraHeaders)!==null&&r!==void 0?r:{}).map(([l,c])=>[l,Array.isArray(c)?c.join(", "):c.toString()]));return{body:yield this.request(n,{headers:s,retries:t.tries?t.tries-1:void 0,variables:a}),headers:{}}})}request(t,r){var n;return cd.__awaiter(this,void 0,void 0,function*(){const a=yield this.client.request(t,Object.assign({apiVersion:this.apiVersion||this.graphqlClass().config.apiVersion},r));if(a.errors){const s=a.errors.response;(0,tu.throwFailedRequest)(a,((n=r==null?void 0:r.retries)!==null&&n!==void 0?n:0)>0,s)}return a})}graphqlClass(){return this.constructor}}ma.GraphqlClient=GE;function j$({config:e}){class t extends GE{}return t.config=e,Reflect.defineProperty(t,"name",{value:"GraphqlClient"}),t}ma.graphqlClientClass=j$;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.restClientClass=ga.RestClient=void 0;const na=ve,q$=VE,fn=Sh,ru=lr,Ps=on,Jm=na.__importStar(K),Xm=ct;class Mr{constructor({session:t,apiVersion:r}){var n;this.loggedDeprecations={};const a=this.restClass().config;if(!a.isCustomStoreApp&&!t.accessToken)throw new Jm.MissingRequiredArgument("Missing access token when creating REST client");if(r){const i=r===a.apiVersion?`REST client has a redundant API version override to the default ${r}`:`REST client overriding default API version ${a.apiVersion} with ${r}`;(0,Xm.logger)(a).debug(i)}const s=(n=a.adminApiAccessToken)!==null&&n!==void 0?n:a.apiSecretKey;this.session=t,this.apiVersion=r??a.apiVersion,this.client=(0,q$.createAdminRestApiClient)({scheme:a.hostScheme,storeDomain:t.shop,apiVersion:r??a.apiVersion,accessToken:a.isCustomStoreApp?s:t.accessToken,customFetchApi:Ps.abstractFetch,logger:(0,ru.clientLoggerFactory)(a),userAgentPrefix:(0,ru.getUserAgent)(a),defaultRetryTime:this.restClass().RETRY_WAIT_TIME,formatPaths:this.restClass().formatPaths})}get(t){return na.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:fn.Method.Get},t))})}post(t){return na.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:fn.Method.Post},t))})}put(t){return na.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:fn.Method.Put},t))})}delete(t){return na.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:fn.Method.Delete},t))})}request(t){var r,n,a;return na.__awaiter(this,void 0,void 0,function*(){const s={headers:Object.assign(Object.assign({},t.extraHeaders),t.type?{"Content-Type":t.type.toString()}:{}),retries:t.tries?t.tries-1:void 0,searchParams:t.query};let i;switch(t.method){case fn.Method.Get:i=yield this.client.get(t.path,s);break;case fn.Method.Put:i=yield this.client.put(t.path,Object.assign(Object.assign({},s),{data:t.data}));break;case fn.Method.Post:i=yield this.client.post(t.path,Object.assign(Object.assign({},s),{data:t.data}));break;case fn.Method.Delete:i=yield this.client.delete(t.path,s);break;default:throw new Jm.InvalidRequestError(`Unsupported request method '${t.method}'`)}const l=yield i.json(),c=(0,Ps.canonicalizeHeaders)(Object.fromEntries(i.headers.entries()));i.ok||(0,ru.throwFailedRequest)(l,((r=t.tries)!==null&&r!==void 0?r:1)>1,i);const u={body:l,headers:c};yield this.logDeprecations({method:t.method,url:t.path,headers:s.headers,body:t.data?JSON.stringify(t.data):void 0},u);const d=i.headers.get("Link");if(d!==void 0){const h={limit:!((n=t.query)===null||n===void 0)&&n.limit?(a=t.query)===null||a===void 0?void 0:a.limit.toString():Mr.DEFAULT_LIMIT};if(d){const f=d.split(", ");for(const p of f){const g=p.match(Mr.LINK_HEADER_REGEXP);if(!g)continue;const b=g[2],y=new URL(g[1]),v=y.searchParams.get("fields"),E=y.searchParams.get("page_info");if(!h.fields&&v&&(h.fields=v.split(",")),E)switch(b){case"previous":h.previousPageUrl=g[1],h.prevPage=this.buildRequestParams(g[1]);break;case"next":h.nextPageUrl=g[1],h.nextPage=this.buildRequestParams(g[1]);break}}}u.pageInfo=h}return u})}restClass(){return this.constructor}buildRequestParams(t){const r="^/admin/api/[^/]+/(.*).json$",n=new URL(t);return{path:n.pathname.replace(new RegExp(r),"$1"),query:Object.fromEntries(n.searchParams.entries())}}logDeprecations(t,r){return na.__awaiter(this,void 0,void 0,function*(){const n=this.restClass().config,a=(0,Ps.getHeader)(r.headers,"X-Shopify-API-Deprecated-Reason");if(a){const s={message:a,path:t.url};t.body&&(s.body=`${t.body.substring(0,100)}...`);const i=yield(0,Ps.createSHA256HMAC)(n.apiSecretKey,JSON.stringify(s),Ps.HashFormat.Hex);if(!Object.keys(this.loggedDeprecations).includes(i)||Date.now()-this.loggedDeprecations[i]>=Mr.DEPRECATION_ALERT_DELAY){this.loggedDeprecations[i]=Date.now();const l=new Error().stack,c=`API Deprecation Notice ${new Date().toLocaleString()} : ${JSON.stringify(s)}  -  Stack Trace: ${l}`;yield(0,Xm.logger)(n).warning(c)}}})}}ga.RestClient=Mr;Mr.LINK_HEADER_REGEXP=/<([^<]+)>; rel="([^"]+)"/;Mr.DEFAULT_LIMIT="50";Mr.RETRY_WAIT_TIME=1e3;Mr.DEPRECATION_ALERT_DELAY=3e5;function V$(e){const{config:t,formatPaths:r}=e;class n extends Mr{}return n.config=t,n.formatPaths=r===void 0?!0:r,Reflect.defineProperty(n,"name",{value:"RestClient"}),n}ga.restClientClass=V$;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RestClient=e.restClientClass=e.GraphqlClient=e.graphqlClientClass=void 0;var t=ma;Object.defineProperty(e,"graphqlClientClass",{enumerable:!0,get:function(){return t.graphqlClientClass}}),Object.defineProperty(e,"GraphqlClient",{enumerable:!0,get:function(){return t.GraphqlClient}});var r=ga;Object.defineProperty(e,"restClientClass",{enumerable:!0,get:function(){return r.restClientClass}}),Object.defineProperty(e,"RestClient",{enumerable:!0,get:function(){return r.RestClient}})})(Fn);var JE={},Xa={};const hl="GraphQL Client",Ym=0,Zm=3,XE="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",YE="Response returned unexpected Content-Type:",ZE="An unknown error has occurred. The API did not return a data object or any errors in its response.",ud={json:"application/json",multipart:"multipart/mixed"},Qm="X-SDK-Variant",eg="X-SDK-Version",K$="shopify-graphql-client",z$="0.10.3",QE=1e3,G$=[429,503],e0=/@(defer)\b/i,tg=`\r
`,J$=/boundary="?([^=";]+)"?/i,rg=tg+tg;function An(e,t=hl){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function ss(e){return e instanceof Error?e.message:JSON.stringify(e)}function t0(e){return e instanceof Error&&e.cause?e.cause:void 0}function r0(e){return e.flatMap(({errors:t})=>t??[])}function n0({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Ym||t>Zm))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${Ym} or greater than ${Zm}`)}function zt(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function a0(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:a0(e,n)}function s0(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=s0(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function i0([e,...t]){return t.reduce(s0,{...e})}function X$({clientLogger:e,customFetchApi:t=fetch,client:r=hl,defaultRetryWaitTime:n=QE,retriableCodes:a=G$}){const s=async(i,l,c)=>{const u=l+1,d=c+1;let h;try{if(h=await t(...i),e({type:"HTTP-Response",content:{requestParams:i,response:h}}),!h.ok&&a.includes(h.status)&&u<=d)throw new Error;return h}catch(f){if(u<=d){const p=h==null?void 0:h.headers.get("Retry-After");return await Y$(p?parseInt(p,10):n),e({type:"HTTP-Retry",content:{requestParams:i,lastResponse:h,retryAttempt:l,maxRetries:c}}),s(i,u,c)}throw new Error(An(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${ss(f)}`,r))}};return s}async function Y$(e){return new Promise(t=>setTimeout(t,e))}function Z$({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:a}){n0({client:hl,retries:n});const s={headers:e,url:t,retries:n},i=Q$(a),l=X$({customFetchApi:r,clientLogger:i,defaultRetryWaitTime:QE}),c=eN(l,s),u=tN(c),d=lN(c);return{config:s,fetch:c,request:u,requestStream:d}}function Q$(e){return t=>{e&&e(t)}}async function o0(e){const{errors:t,data:r,extensions:n}=await e.json();return{...zt("data",r),...zt("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:An(t?XE:ZE),...zt("graphQLErrors",t),response:e}}:{}}}function eN(e,{url:t,headers:r,retries:n}){return async(a,s={})=>{const{variables:i,headers:l,url:c,retries:u}=s,d=JSON.stringify({query:a,variables:i});n0({client:hl,retries:u});const h=Object.entries({...r,...l}).reduce((p,[g,b])=>(p[g]=Array.isArray(b)?b.join(", "):b.toString(),p),{});return!h[Qm]&&!h[eg]&&(h[Qm]=K$,h[eg]=z$),e([c??t,{method:"POST",headers:h,body:d}],1,u??n)}}function tN(e){return async(...t)=>{if(e0.test(t[0]))throw new Error(An("This operation will result in a streamable response - use requestStream() instead."));try{const r=await e(...t),{status:n,statusText:a}=r,s=r.headers.get("content-type")||"";return r.ok?s.includes(ud.json)?o0(r):{errors:{networkStatusCode:n,message:An(`${YE} ${s}`),response:r}}:{errors:{networkStatusCode:n,message:An(a),response:r}}}catch(r){return{errors:{message:ss(r)}}}}}async function*rN(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function nN(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const a=r.lastIndexOf(t),i=r.slice(0,a).split(t).filter(l=>l.trim().length>0).map(l=>l.slice(l.indexOf(rg)+rg.length).trim());i.length>0&&(yield i),r=r.slice(a+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${ss(r)}`)}}}}function aN(e){return{async*[Symbol.asyncIterator](){yield{...await o0(e),hasNext:!1}}}}function sN(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${ss(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:a,extensions:s,errors:i}=t;if(!n)return{data:r||{},...zt("errors",i),...zt("extensions",s),hasNext:a};const l=n.map(({data:c,path:u,errors:d})=>({data:c&&u?a0(u,c):{},...zt("errors",d)}));return{data:l.length===1?l[0].data:i0([...l.map(({data:c})=>c)]),...zt("errors",r0(l)),hasNext:a}})}function iN(e,t){if(e.length>0)throw new Error(XE,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(ZE)}function oN(e,t){var l;const r=(t??"").match(J$),n=`--${r?r[1]:"-"}`;if(!((l=e.body)!=null&&l.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const a=rN(e);let s={},i;return{async*[Symbol.asyncIterator](){var c;try{let u=!0;for await(const d of nN(a,n)){const h=sN(d);i=((c=h.find(p=>p.extensions))==null?void 0:c.extensions)??i;const f=r0(h);s=i0([s,...h.map(({data:p})=>p)]),u=h.slice(-1)[0].hasNext,iN(f,s),yield{...zt("data",s),...zt("extensions",i),hasNext:u}}if(u)throw new Error("Response stream terminated unexpectedly")}catch(u){const d=t0(u);yield{...zt("data",s),...zt("extensions",i),errors:{message:An(ss(u)),networkStatusCode:e.status,...zt("graphQLErrors",d==null?void 0:d.graphQLErrors),response:e},hasNext:!1}}}}}function lN(e){return async(...t)=>{if(!e0.test(t[0]))throw new Error(An("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const a=r.headers.get("content-type")||"";switch(!0){case a.includes(ud.json):return aN(r);case a.includes(ud.multipart):return oN(r,a);default:throw new Error(`${YE} ${a}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=t0(r);yield{errors:{message:An(ss(r)),...zt("networkStatusCode",n==null?void 0:n.status),...zt("response",n)},hasNext:!1}}}}}}function cN({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,a=new URL(n);return a.protocol="https",a.origin}catch{throw new Error(`${e}: a valid store domain ("${t}") must be provided`)}}function l0({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const a=`${e}: the provided apiVersion ("${r}")`,s=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${a} is invalid. ${s}`);const i=r.trim();t.includes(i)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${a} is likely deprecated or not supported. ${s}`))}function xo(e){const t=e*3-2;return t===10?t:`0${t}`}function nu(e,t,r){const n=t-r;return n<=0?`${e-1}-${xo(n+4)}`:`${e}-${xo(n)}`}function uN(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${xo(n)}`}}function dN(){const{year:e,quarter:t,version:r}=uN(),n=t===4?`${e+1}-01`:`${e}-${xo(t+1)}`;return[nu(e,t,3),nu(e,t,2),nu(e,t,1),r,n,"unstable"]}function hN(e){return t=>({...t??{},...e.headers})}function fN({getHeaders:e,getApiUrl:t}){return(r,n)=>{const a=[r];if(n&&Object.keys(n).length>0){const{variables:s,apiVersion:i,headers:l,retries:c}=n;a.push({...s?{variables:s}:{},...l?{headers:e(l)}:{},...i?{url:t(i)}:{},...c?{retries:c}:{}})}return a}}const ng="application/json",pN="storefront-api-client",mN="0.3.3",gN="X-Shopify-Storefront-Access-Token",bN="Shopify-Storefront-Private-Token",yN="X-SDK-Variant",vN="X-SDK-Version",EN="X-SDK-Variant-Source",zs="Storefront API Client";function SN(e){if(e&&typeof window<"u")throw new Error(`${zs}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`)}function _N(e,t){if(!e&&!t)throw new Error(`${zs}: a public or private access token must be provided`);if(e&&t)throw new Error(`${zs}: only provide either a public or private access token`)}function CN({storeDomain:e,apiVersion:t,publicAccessToken:r,privateAccessToken:n,clientName:a,retries:s=0,customFetchApi:i,logger:l}){const c=dN(),u=cN({client:zs,storeDomain:e}),d={client:zs,currentSupportedApiVersions:c,logger:l};l0({...d,apiVersion:t}),_N(r,n),SN(n);const h=wN(u,t,d),f={storeDomain:u,apiVersion:t,...r?{publicAccessToken:r}:{privateAccessToken:n},headers:{"Content-Type":ng,Accept:ng,[yN]:pN,[vN]:mN,...a?{[EN]:a}:{},...r?{[gN]:r}:{[bN]:n}},apiUrl:h(),clientName:a},p=Z$({headers:f.headers,url:f.apiUrl,retries:s,customFetchApi:i,logger:l}),g=hN(f),b=PN(f,h),y=fN({getHeaders:g,getApiUrl:b});return Object.freeze({config:f,getHeaders:g,getApiUrl:b,fetch:(...E)=>p.fetch(...y(...E)),request:(...E)=>p.request(...y(...E)),requestStream:(...E)=>p.requestStream(...y(...E))})}function wN(e,t,r){return n=>{n&&l0({...r,apiVersion:n});const a=(n??t).trim();return`${e}/api/${a}/graphql.json`}}function PN(e,t){return r=>r?t(r):e.apiUrl}const AN=Object.freeze(Object.defineProperty({__proto__:null,createStorefrontApiClient:CN},Symbol.toStringTag,{value:"Module"})),TN=$n(AN);Object.defineProperty(Xa,"__esModule",{value:!0});Xa.storefrontClientClass=Xa.StorefrontClient=void 0;const dd=ve,RN=TN,ag=ct,sg=dd.__importStar(K),ig=K,kN=on,au=lr;class c0{constructor(t){var r;const n=this.storefrontClass().config;if(!n.isCustomStoreApp&&!t.session.accessToken)throw new sg.MissingRequiredArgument("Missing access token when creating GraphQL client");if(t.apiVersion){const s=t.apiVersion===n.apiVersion?`Storefront client has a redundant API version override to the default ${t.apiVersion}`:`Storefront client overriding default API version ${n.apiVersion} with ${t.apiVersion}`;(0,ag.logger)(n).debug(s)}let a;if(n.isCustomStoreApp){if(a=n.privateAppStorefrontAccessToken,!a)throw new ig.MissingRequiredArgument("Custom store apps must set the privateAppStorefrontAccessToken property to call the Storefront API.")}else if(a=t.session.accessToken,!a)throw new ig.MissingRequiredArgument("Session missing access token.");this.session=t.session,this.apiVersion=t.apiVersion,this.client=(0,RN.createStorefrontApiClient)({privateAccessToken:a,apiVersion:(r=this.apiVersion)!==null&&r!==void 0?r:n.apiVersion,storeDomain:this.session.shop,customFetchApi:kN.abstractFetch,logger:(0,au.clientLoggerFactory)(n),clientName:(0,au.getUserAgent)(n)})}query(t){var r;return dd.__awaiter(this,void 0,void 0,function*(){if((0,ag.logger)(this.storefrontClass().config).deprecated("10.0.0",`The query method is deprecated, and was replaced with the request method.
See the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.`),typeof t.data=="string"&&t.data.length===0||Object.entries(t.data).length===0)throw new sg.MissingRequiredArgument("Query missing.");let n,a;typeof t.data=="string"?n=t.data:(n=t.data.query,a=t.data.variables);const s=Object.fromEntries(Object.entries((r=t==null?void 0:t.extraHeaders)!==null&&r!==void 0?r:{}).map(([l,c])=>[l,Array.isArray(c)?c.join(", "):c.toString()]));return{body:yield this.request(n,{headers:s,retries:t.tries?t.tries-1:void 0,variables:a}),headers:{}}})}request(t,r){var n;return dd.__awaiter(this,void 0,void 0,function*(){const a=yield this.client.request(t,Object.assign({apiVersion:this.apiVersion||this.storefrontClass().config.apiVersion},r));if(a.errors){const s=a.errors.response;(0,au.throwFailedRequest)(a,((n=r==null?void 0:r.retries)!==null&&n!==void 0?n:0)>0,s)}return a})}storefrontClass(){return this.constructor}}Xa.StorefrontClient=c0;function xN(e){const{config:t}=e;class r extends c0{}return r.config=t,Reflect.defineProperty(r,"name",{value:"StorefrontClient"}),r}Xa.storefrontClientClass=xN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.storefrontClientClass=e.StorefrontClient=void 0;var t=Xa;Object.defineProperty(e,"StorefrontClient",{enumerable:!0,get:function(){return t.StorefrontClient}}),Object.defineProperty(e,"storefrontClientClass",{enumerable:!0,get:function(){return t.storefrontClientClass}})})(JE);var fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.graphqlProxy=void 0;const u0=ve,og=u0.__importStar(K),IN=Fn;function $N(e){return({session:t,rawBody:r})=>u0.__awaiter(this,void 0,void 0,function*(){if(!t.accessToken)throw new og.InvalidSession("Cannot proxy query. Session not authenticated.");const n=(0,IN.graphqlClientClass)({config:e}),a=new n({session:t});let s,i;if(typeof r=="string"?s=r:(s=r.query,i=r.variables),!s)throw new og.MissingRequiredArgument("Query missing.");return{body:yield a.request(s,{variables:i}),headers:{}}})}fl.graphqlProxy=$N;Object.defineProperty(cl,"__esModule",{value:!0});cl.clientClasses=void 0;const lg=Fn,NN=JE,ON=fl;function LN(e){return{Rest:(0,lg.restClientClass)({config:e}),Graphql:(0,lg.graphqlClientClass)({config:e}),Storefront:(0,NN.storefrontClientClass)({config:e}),graphqlProxy:(0,ON.graphqlProxy)(e)}}cl.clientClasses=LN;var pl={},Ya={},_h=Object.defineProperty,MN=Object.getOwnPropertyDescriptor,FN=Object.getOwnPropertyNames,DN=Object.prototype.hasOwnProperty,HN=(e,t)=>{for(var r in t)_h(e,r,{get:t[r],enumerable:!0})},BN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of FN(t))!DN.call(e,a)&&a!==r&&_h(e,a,{get:()=>t[a],enumerable:!(n=MN(t,a))||n.enumerable});return e},WN=e=>BN(_h({},"__esModule",{value:!0}),e),d0={};HN(d0,{createIsbot:()=>GN,createIsbotFromList:()=>JN,isbot:()=>zN,isbotMatch:()=>XN,isbotMatches:()=>YN,isbotNaive:()=>KN,isbotPattern:()=>ZN,isbotPatterns:()=>QN,list:()=>ml,pattern:()=>f0});var UN=WN(d0),jN=" daum[ /]| deusu/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp/|^avsdevicesdk/|^bidtellect/|^biglotron|^bot|^btwebclient/|^clamav[ /]|^client/|^cobweb/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright/|^gozilla/|^hatena|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d \\(compatible;?\\)$|^mozilla/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^tumblr/|^user-agent:|^valid|^venus/fedoraplanet|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves/teoma|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|wordpress|zgrab",qN=new RegExp(" daum[ /]| deusu\\/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel\\/|google\\/))google(?!(app|\\/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:\\/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp\\/|^avsdevicesdk\\/|^bidtellect\\/|^biglotron|^bot|^btwebclient\\/|^clamav[ /]|^client\\/|^cobweb\\/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch\\/\\d|^downcast\\/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright\\/|^gozilla\\/|^hatena|^hobbit|^hotzonu|^hwcdn\\/|^jeode\\/|^jetty\\/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla\\/\\d\\.\\d \\(compatible;?\\)$|^mozilla\\/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor\\/|^tumblr\\/|^user-agent:|^valid|^venus\\/fedoraplanet|^w3c|^webbandit\\/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm\\/\\d|^zoom marketplace\\/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves\\/teoma|bit\\.ly\\/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch\\/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru\\/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler\\/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms\\/|wordpress|zgrab","i"),VN=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","(?<! (?:channel/|google/))google(?!(app|/google| pixel))","(?<! cu)bot(?:[^\\w]|_|$)","(?<! ya(?:yandex)?)search","(?<!(?:lib))http","(?<![hg]m)score","@[a-z]","\\(at\\)[a-z]","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^avsdevicesdk/","^bidtellect/","^biglotron","^bot","^btwebclient/","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^nuclei","^offline explorer","^php","^postman","^postrank","^python","^rank","^read","^reed","^rest","^serf","^snapchat","^space bison","^svn","^swcd ","^taringa","^thumbor/","^tumblr/","^user-agent:","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","classifier","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","headless","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java(?!;)","library","mail\\.ru/","manager","monitor","neustar wpm","nutch","offbyone","optimize","pageburst","parser","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","reputation","resolver","retriever","rexx;","rigor","robot","rss","scan","scrape","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","trace","transcoder","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","whatcms/","wordpress","zgrab"],h0=/bot|spider|crawl|http|lighthouse/i,f0=qN,ml=VN,KN=e=>!!e&&h0.test(e),Di;function zN(e){if(typeof Di>"u")try{Di=new RegExp(jN,"i")}catch{Di=h0}return!!e&&Di.test(e)}var GN=e=>t=>!!t&&e.test(t),JN=e=>{const t=new RegExp(e.join("|"),"i");return r=>!!r&&t.test(r)},XN=e=>{var t;return((t=e==null?void 0:e.match(f0))==null?void 0:t[0])??null},YN=e=>ml.map(t=>{var r;return(r=e==null?void 0:e.match(new RegExp(t,"i")))==null?void 0:r[0]}).filter(Boolean),ZN=e=>e?ml.find(t=>new RegExp(t,"i").test(e))??null:null,QN=e=>e?ml.filter(t=>new RegExp(t,"i").test(e)):[],Hi={},cg;function p0(){if(cg)return Hi;cg=1,Object.defineProperty(Hi,"__esModule",{value:!0});class e{static stringify(r){return!r||Object.keys(r).length===0?"":new e().putAll(r).stringify()}constructor(){this.processedQuery=new URLSearchParams}putAll(r){return Object.entries(r).forEach(([n,a])=>this.put(n,a)),this}put(r,n){Array.isArray(n)?this.putArray(r,n):(n==null?void 0:n.constructor)===Object?this.putObject(r,n):this.putSimple(r,n)}putArray(r,n){n.forEach(a=>this.processedQuery.append(`${r}[]`,`${a}`))}putObject(r,n){Object.entries(n).forEach(([a,s])=>{this.processedQuery.append(`${r}[${a}]`,`${s}`)})}putSimple(r,n){this.processedQuery.append(r,`${n}`)}stringify(r=!1){const n=this.processedQuery.toString();return r?n:`?${n}`}}return Hi.default=e,Hi}var Nt={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.safeCompare=void 0;const eO=ve,tO=eO.__importStar(K),rO=(e,t)=>{if(typeof e==typeof t){const r=new TextEncoder,n=r.encode(JSON.stringify(e)),a=r.encode(JSON.stringify(t));if(n.length===a.length)return nO(n,a)}else throw new tO.SafeCompareError(`Mismatched data types provided: ${typeof e} and ${typeof t}`);return!1};is.safeCompare=rO;function nO(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);let a=0;for(let s=0;s<r.length;s++)a|=r[s]^n[s];return a===0}var Zn={},ug;function os(){if(ug)return Zn;ug=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.ValidationErrorReason=Zn.HmacValidationType=void 0;var e;return function(t){t.Flow="flow",t.Webhook="webhook",t.FulfillmentService="fulfillment_service"}(e||(Zn.HmacValidationType=e={})),Zn.ValidationErrorReason={MissingBody:"missing_body",InvalidHmac:"invalid_hmac",MissingHmac:"missing_hmac"},Zn}Object.defineProperty(Nt,"__esModule",{value:!0});Nt.validateHmacFromRequestFactory=Nt.getCurrentTimeInSec=Nt.validateHmacString=Nt.validateHmac=Nt.generateLocalHmac=void 0;const Dr=ve,m0=ct,aO=xe,dg=Pa(),g0=nl(),b0=rl(),hd=Dr.__importStar(K),y0=is,sO=Dr.__importDefault(p0()),su=os(),iO=90;function oO(e){const t=new sO.default;return Object.keys(e).sort((r,n)=>r.localeCompare(n)).forEach(r=>t.put(r,e[r])),t.stringify(!0)}function lO(e){return Object.entries(e).sort(([t],[r])=>t.localeCompare(r)).reduce((t,[r,n])=>`${t}${r}=${Array.isArray(n)?n.join(","):n}`,"")}function v0(e){return(t,r="admin")=>Dr.__awaiter(this,void 0,void 0,function*(){const n=Dr.__rest(t,["hmac","signature"]),a=r==="admin"?oO(n):lO(n);return(0,g0.createSHA256HMAC)(e.apiSecretKey,a,b0.HashFormat.Hex)})}Nt.generateLocalHmac=v0;function cO(e){return(t,{signator:r}={signator:"admin"})=>Dr.__awaiter(this,void 0,void 0,function*(){if(r==="admin"&&!t.hmac)throw new hd.InvalidHmacError("Query does not contain an HMAC value.");if(r==="appProxy"&&!t.signature)throw new hd.InvalidHmacError("Query does not contain a signature value.");dO(t);const n=r==="appProxy"?t.signature:t.hmac,a=yield v0(e)(t,r);return(0,y0.safeCompare)(n,a)})}Nt.validateHmac=cO;function E0(e,t,r,n){return Dr.__awaiter(this,void 0,void 0,function*(){const a=yield(0,g0.createSHA256HMAC)(e.apiSecretKey,t,n);return(0,y0.safeCompare)(r,a)})}Nt.validateHmacString=E0;function S0(){return Math.trunc(Date.now()/1e3)}Nt.getCurrentTimeInSec=S0;function uO(e){return function(r){var{type:n,rawBody:a}=r,s=Dr.__rest(r,["type","rawBody"]);return Dr.__awaiter(this,void 0,void 0,function*(){const i=yield(0,dg.abstractConvertRequest)(s);if(!a.length)return iu(su.ValidationErrorReason.MissingBody,n,e);const l=(0,dg.getHeader)(i.headers,aO.ShopifyHeader.Hmac);return l?(yield E0(e,a,l,b0.HashFormat.Base64))?hO(n,e):iu(su.ValidationErrorReason.InvalidHmac,n,e):iu(su.ValidationErrorReason.MissingHmac,n,e)})}}Nt.validateHmacFromRequestFactory=uO;function dO(e){if(Math.abs(S0()-Number(e.timestamp))>iO)throw new hd.InvalidHmacError("HMAC timestamp is outside of the tolerance range")}function iu(e,t,r){return Dr.__awaiter(this,void 0,void 0,function*(){return yield(0,m0.logger)(r).debug(`${t} request is not valid`,{reason:e}),{valid:!1,reason:e}})}function hO(e,t){return Dr.__awaiter(this,void 0,void 0,function*(){return yield(0,m0.logger)(t).debug(`${e} request is valid`),{valid:!0}})}var Hr={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.decodeHost=void 0;function fO(e){return atob(e)}li.decodeHost=fO;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.legacyUrlToShopAdminUrl=ba.shopAdminUrlToLegacyUrl=void 0;function pO(e){const t=_0(e);if(!(t.split(".")[0]==="admin"))return null;const n=new RegExp("admin\\..+/store/([^/]+)"),a=t.match(n);if(a&&a.length===2){const s=a[1];return t.includes("spin.dev/store/")?gO(t):`${s}.myshopify.com`}else return null}ba.shopAdminUrlToLegacyUrl=pO;function mO(e){const t=_0(e),r=new RegExp("(.+)\\.myshopify\\.com$"),n=t.match(r);return n&&n.length===2?`admin.shopify.com/store/${n[1]}`:t.endsWith("spin.dev")?bO(t):null}ba.legacyUrlToShopAdminUrl=mO;function gO(e){const t=new RegExp("admin\\.web\\.(.+\\.spin\\.dev)/store/(.+)"),r=e.match(t);if(r&&r.length===3){const n=r[1];return`${r[2]}.shopify.${n}`}else return null}function bO(e){const t=new RegExp("(.+)\\.shopify\\.(.+\\.spin\\.dev)"),r=e.match(t);if(r&&r.length===3){const n=r[1];return`admin.web.${r[2]}/store/${n}`}else return null}function _0(e){return e.replace(/^https?:\/\//,"").replace(/\/$/,"")}Object.defineProperty(Hr,"__esModule",{value:!0});Hr.sanitizeHost=Hr.sanitizeShop=void 0;const C0=K,yO=li,vO=ba;function EO(e){return(t,r=!1)=>{let n=t;const a=["myshopify\\.com","shopify\\.com","myshopify\\.io"];e.customShopDomains&&a.push(...e.customShopDomains.map(u=>typeof u=="string"?u:u.source));const s=new RegExp(`^[a-zA-Z0-9][a-zA-Z0-9-_]*\\.(${a.join("|")})[/]*$`);new RegExp(`^admin\\.(${a.join("|")})/store/([a-zA-Z0-9][a-zA-Z0-9-_]*)$`).test(n)&&(n=(0,vO.shopAdminUrlToLegacyUrl)(n)||"");const c=s.test(n)?n:null;if(!c&&r)throw new C0.InvalidShopError("Received invalid shop argument");return c}}Hr.sanitizeShop=EO;function SO(){return(e,t=!1)=>{let n=/^[0-9a-zA-Z+/]+={0,2}$/.test(e)?e:null;if(n){const{hostname:a}=new URL(`https://${(0,yO.decodeHost)(n)}`),s=["myshopify\\.com","shopify\\.com","myshopify\\.io","spin\\.dev"];new RegExp(`\\.(${s.join("|")})$`).test(a)||(n=null)}if(!n&&t)throw new C0.InvalidHostError("Received invalid host argument");return n}}Hr.sanitizeHost=SO;var ou={},lu={},hg;function _O(){return hg||(hg=1,Object.defineProperty(lu,"__esModule",{value:!0})),lu}var cu={},fg;function CO(){return fg||(fg=1,Object.defineProperty(cu,"__esModule",{value:!0})),cu}var pg;function Ch(){return pg||(pg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphqlClient=e.DataType=void 0;const t=ve;t.__exportStar(_O(),e),t.__exportStar(CO(),e);var r;(function(a){a.JSON="application/json",a.GraphQL="application/graphql",a.URLEncoded="application/x-www-form-urlencoded"})(r||(e.DataType=r={}));var n=ma;Object.defineProperty(e,"GraphqlClient",{enumerable:!0,get:function(){return n.GraphqlClient}})}(ou)),ou}var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.fetchRequestFactory=void 0;const wO=ve,PO=ct,AO=xe,TO=on;function RO(e){return function(r,n){return wO.__awaiter(this,void 0,void 0,function*(){const a=(0,PO.logger)(e),s=e.logger.httpRequests&&e.logger.level===AO.LogSeverity.Debug;s&&a.debug("Making HTTP request",Object.assign({method:(n==null?void 0:n.method)||"GET",url:r},(n==null?void 0:n.body)&&{body:n==null?void 0:n.body}));const i=yield(0,TO.abstractFetch)(r,n);return s&&a.debug("HTTP request completed",{method:(n==null?void 0:n.method)||"GET",url:r,status:i.status}),i})}}ci.fetchRequestFactory=RO;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.STATE_COOKIE_NAME=kn.SESSION_COOKIE_NAME=void 0;kn.SESSION_COOKIE_NAME="shopify_app_session";kn.STATE_COOKIE_NAME="shopify_app_state";var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.nonce=void 0;const uu=nl();function kO(){return(uu.crypto.getRandomValues?uu.crypto.getRandomValues(new Uint8Array(15)):uu.crypto.randomBytes(15)).map(n=>n%10).join("")}ui.nonce=kO;var di={},w0={},gl={},bl={};Object.defineProperty(bl,"__esModule",{value:!0});bl.default=IO;let Bi;const xO=new Uint8Array(16);function IO(){if(!Bi&&(Bi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bi(xO)}var Dn={},Aa={},yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.default=void 0;var $O=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;yl.default=$O;Object.defineProperty(Aa,"__esModule",{value:!0});Aa.default=void 0;var NO=OO(yl);function OO(e){return e&&e.__esModule?e:{default:e}}function LO(e){return typeof e=="string"&&NO.default.test(e)}var MO=LO;Aa.default=MO;Object.defineProperty(Dn,"__esModule",{value:!0});Dn.default=void 0;Dn.unsafeStringify=P0;var FO=DO(Aa);function DO(e){return e&&e.__esModule?e:{default:e}}const Et=[];for(let e=0;e<256;++e)Et.push((e+256).toString(16).slice(1));function P0(e,t=0){return Et[e[t+0]]+Et[e[t+1]]+Et[e[t+2]]+Et[e[t+3]]+"-"+Et[e[t+4]]+Et[e[t+5]]+"-"+Et[e[t+6]]+Et[e[t+7]]+"-"+Et[e[t+8]]+Et[e[t+9]]+"-"+Et[e[t+10]]+Et[e[t+11]]+Et[e[t+12]]+Et[e[t+13]]+Et[e[t+14]]+Et[e[t+15]]}function HO(e,t=0){const r=P0(e,t);if(!(0,FO.default)(r))throw TypeError("Stringified UUID is invalid");return r}var BO=HO;Dn.default=BO;Object.defineProperty(gl,"__esModule",{value:!0});gl.default=void 0;var WO=jO(bl),UO=Dn;function jO(e){return e&&e.__esModule?e:{default:e}}let mg,du,hu=0,fu=0;function qO(e,t,r){let n=t&&r||0;const a=t||new Array(16);e=e||{};let s=e.node||mg,i=e.clockseq!==void 0?e.clockseq:du;if(s==null||i==null){const f=e.random||(e.rng||WO.default)();s==null&&(s=mg=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),i==null&&(i=du=(f[6]<<8|f[7])&16383)}let l=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:fu+1;const u=l-hu+(c-fu)/1e4;if(u<0&&e.clockseq===void 0&&(i=i+1&16383),(u<0||l>hu)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hu=l,fu=c,du=i,l+=122192928e5;const d=((l&268435455)*1e4+c)%4294967296;a[n++]=d>>>24&255,a[n++]=d>>>16&255,a[n++]=d>>>8&255,a[n++]=d&255;const h=l/4294967296*1e4&268435455;a[n++]=h>>>8&255,a[n++]=h&255,a[n++]=h>>>24&15|16,a[n++]=h>>>16&255,a[n++]=i>>>8|128,a[n++]=i&255;for(let f=0;f<6;++f)a[n+f]=s[f];return t||(0,UO.unsafeStringify)(a)}var VO=qO;gl.default=VO;var vl={},xn={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.default=void 0;var KO=zO(Aa);function zO(e){return e&&e.__esModule?e:{default:e}}function GO(e){if(!(0,KO.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var JO=GO;hi.default=JO;Object.defineProperty(xn,"__esModule",{value:!0});xn.URL=xn.DNS=void 0;xn.default=eL;var XO=Dn,YO=ZO(hi);function ZO(e){return e&&e.__esModule?e:{default:e}}function QO(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const A0="6ba7b810-9dad-11d1-80b4-00c04fd430c8";xn.DNS=A0;const T0="6ba7b811-9dad-11d1-80b4-00c04fd430c8";xn.URL=T0;function eL(e,t,r){function n(a,s,i,l){var c;if(typeof a=="string"&&(a=QO(a)),typeof s=="string"&&(s=(0,YO.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+a.length);if(u.set(s),u.set(a,s.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){l=l||0;for(let d=0;d<16;++d)i[l+d]=u[d];return i}return(0,XO.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=A0,n.URL=T0,n}var El={};Object.defineProperty(El,"__esModule",{value:!0});El.default=void 0;function tL(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return rL(nL(aL(e),e.length*8))}function rL(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let a=0;a<r;a+=8){const s=e[a>>5]>>>a%32&255,i=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(i)}return t}function R0(e){return(e+64>>>9<<4)+14+1}function nL(e,t){e[t>>5]|=128<<t%32,e[R0(t)-1]=t;let r=1732584193,n=-271733879,a=-1732584194,s=271733878;for(let i=0;i<e.length;i+=16){const l=r,c=n,u=a,d=s;r=Rt(r,n,a,s,e[i],7,-680876936),s=Rt(s,r,n,a,e[i+1],12,-389564586),a=Rt(a,s,r,n,e[i+2],17,606105819),n=Rt(n,a,s,r,e[i+3],22,-1044525330),r=Rt(r,n,a,s,e[i+4],7,-176418897),s=Rt(s,r,n,a,e[i+5],12,1200080426),a=Rt(a,s,r,n,e[i+6],17,-1473231341),n=Rt(n,a,s,r,e[i+7],22,-45705983),r=Rt(r,n,a,s,e[i+8],7,1770035416),s=Rt(s,r,n,a,e[i+9],12,-1958414417),a=Rt(a,s,r,n,e[i+10],17,-42063),n=Rt(n,a,s,r,e[i+11],22,-1990404162),r=Rt(r,n,a,s,e[i+12],7,1804603682),s=Rt(s,r,n,a,e[i+13],12,-40341101),a=Rt(a,s,r,n,e[i+14],17,-1502002290),n=Rt(n,a,s,r,e[i+15],22,1236535329),r=kt(r,n,a,s,e[i+1],5,-165796510),s=kt(s,r,n,a,e[i+6],9,-1069501632),a=kt(a,s,r,n,e[i+11],14,643717713),n=kt(n,a,s,r,e[i],20,-373897302),r=kt(r,n,a,s,e[i+5],5,-701558691),s=kt(s,r,n,a,e[i+10],9,38016083),a=kt(a,s,r,n,e[i+15],14,-660478335),n=kt(n,a,s,r,e[i+4],20,-405537848),r=kt(r,n,a,s,e[i+9],5,568446438),s=kt(s,r,n,a,e[i+14],9,-1019803690),a=kt(a,s,r,n,e[i+3],14,-187363961),n=kt(n,a,s,r,e[i+8],20,1163531501),r=kt(r,n,a,s,e[i+13],5,-1444681467),s=kt(s,r,n,a,e[i+2],9,-51403784),a=kt(a,s,r,n,e[i+7],14,1735328473),n=kt(n,a,s,r,e[i+12],20,-1926607734),r=xt(r,n,a,s,e[i+5],4,-378558),s=xt(s,r,n,a,e[i+8],11,-2022574463),a=xt(a,s,r,n,e[i+11],16,1839030562),n=xt(n,a,s,r,e[i+14],23,-35309556),r=xt(r,n,a,s,e[i+1],4,-1530992060),s=xt(s,r,n,a,e[i+4],11,1272893353),a=xt(a,s,r,n,e[i+7],16,-155497632),n=xt(n,a,s,r,e[i+10],23,-1094730640),r=xt(r,n,a,s,e[i+13],4,681279174),s=xt(s,r,n,a,e[i],11,-358537222),a=xt(a,s,r,n,e[i+3],16,-722521979),n=xt(n,a,s,r,e[i+6],23,76029189),r=xt(r,n,a,s,e[i+9],4,-640364487),s=xt(s,r,n,a,e[i+12],11,-421815835),a=xt(a,s,r,n,e[i+15],16,530742520),n=xt(n,a,s,r,e[i+2],23,-995338651),r=It(r,n,a,s,e[i],6,-198630844),s=It(s,r,n,a,e[i+7],10,1126891415),a=It(a,s,r,n,e[i+14],15,-1416354905),n=It(n,a,s,r,e[i+5],21,-57434055),r=It(r,n,a,s,e[i+12],6,1700485571),s=It(s,r,n,a,e[i+3],10,-1894986606),a=It(a,s,r,n,e[i+10],15,-1051523),n=It(n,a,s,r,e[i+1],21,-2054922799),r=It(r,n,a,s,e[i+8],6,1873313359),s=It(s,r,n,a,e[i+15],10,-30611744),a=It(a,s,r,n,e[i+6],15,-1560198380),n=It(n,a,s,r,e[i+13],21,1309151649),r=It(r,n,a,s,e[i+4],6,-145523070),s=It(s,r,n,a,e[i+11],10,-1120210379),a=It(a,s,r,n,e[i+2],15,718787259),n=It(n,a,s,r,e[i+9],21,-343485551),r=_n(r,l),n=_n(n,c),a=_n(a,u),s=_n(s,d)}return[r,n,a,s]}function aL(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(R0(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function _n(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function sL(e,t){return e<<t|e>>>32-t}function Sl(e,t,r,n,a,s){return _n(sL(_n(_n(t,e),_n(n,s)),a),r)}function Rt(e,t,r,n,a,s,i){return Sl(t&r|~t&n,e,t,a,s,i)}function kt(e,t,r,n,a,s,i){return Sl(t&n|r&~n,e,t,a,s,i)}function xt(e,t,r,n,a,s,i){return Sl(t^r^n,e,t,a,s,i)}function It(e,t,r,n,a,s,i){return Sl(r^(t|~n),e,t,a,s,i)}var iL=tL;El.default=iL;Object.defineProperty(vl,"__esModule",{value:!0});vl.default=void 0;var oL=k0(xn),lL=k0(El);function k0(e){return e&&e.__esModule?e:{default:e}}const cL=(0,oL.default)("v3",48,lL.default);var uL=cL;vl.default=uL;var _l={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.default=void 0;const dL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var hL={randomUUID:dL};Cl.default=hL;Object.defineProperty(_l,"__esModule",{value:!0});_l.default=void 0;var gg=x0(Cl),fL=x0(bl),pL=Dn;function x0(e){return e&&e.__esModule?e:{default:e}}function mL(e,t,r){if(gg.default.randomUUID&&!t&&!e)return gg.default.randomUUID();e=e||{};const n=e.random||(e.rng||fL.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let a=0;a<16;++a)t[r+a]=n[a];return t}return(0,pL.unsafeStringify)(n)}var gL=mL;_l.default=gL;var wl={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.default=void 0;function bL(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function pu(e,t){return e<<t|e>>>32-t}function yL(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const i=unescape(encodeURIComponent(e));e=[];for(let l=0;l<i.length;++l)e.push(i.charCodeAt(l))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,a=Math.ceil(n/16),s=new Array(a);for(let i=0;i<a;++i){const l=new Uint32Array(16);for(let c=0;c<16;++c)l[c]=e[i*64+c*4]<<24|e[i*64+c*4+1]<<16|e[i*64+c*4+2]<<8|e[i*64+c*4+3];s[i]=l}s[a-1][14]=(e.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<a;++i){const l=new Uint32Array(80);for(let p=0;p<16;++p)l[p]=s[i][p];for(let p=16;p<80;++p)l[p]=pu(l[p-3]^l[p-8]^l[p-14]^l[p-16],1);let c=r[0],u=r[1],d=r[2],h=r[3],f=r[4];for(let p=0;p<80;++p){const g=Math.floor(p/20),b=pu(c,5)+bL(g,u,d,h)+f+t[g]+l[p]>>>0;f=h,h=d,d=pu(u,30)>>>0,u=c,c=b}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+h>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var vL=yL;Pl.default=vL;Object.defineProperty(wl,"__esModule",{value:!0});wl.default=void 0;var EL=I0(xn),SL=I0(Pl);function I0(e){return e&&e.__esModule?e:{default:e}}const _L=(0,EL.default)("v5",80,SL.default);var CL=_L;wl.default=CL;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.default=void 0;var wL="00000000-0000-0000-0000-000000000000";Al.default=wL;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.default=void 0;var PL=AL(Aa);function AL(e){return e&&e.__esModule?e:{default:e}}function TL(e){if(!(0,PL.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var RL=TL;Tl.default=RL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.default}});var t=d(gl),r=d(vl),n=d(_l),a=d(wl),s=d(Al),i=d(Tl),l=d(Aa),c=d(Dn),u=d(hi);function d(h){return h&&h.__esModule?h:{default:h}}})(w0);var As={},bg;function wh(){if(bg)return As;bg=1,Object.defineProperty(As,"__esModule",{value:!0}),As.Session=void 0;const e=K,t=oi,r=["id","shop","state","isOnline","scope","accessToken","expires","onlineAccessInfo"];class n{static fromPropertyArray(s,i=!1){if(!Array.isArray(s))throw new e.InvalidSession("The parameter is not an array: a Session cannot be created from this object.");const l=Object.fromEntries(s.filter(([h,f])=>f!=null).map(([h,f])=>{switch(h.toLowerCase()){case"isonline":return["isOnline",f];case"accesstoken":return["accessToken",f];case"onlineaccessinfo":return["onlineAccessInfo",f];case"userid":return["userId",f];case"firstname":return["firstName",f];case"lastname":return["lastName",f];case"accountowner":return["accountOwner",f];case"emailverified":return["emailVerified",f];default:return[h.toLowerCase(),f]}})),c={},u={associated_user:{}};return Object.entries(l).forEach(([h,f])=>{switch(h){case"isOnline":typeof f=="string"?c[h]=f.toString().toLowerCase()==="true":typeof f=="number"?c[h]=!!f:c[h]=f;break;case"scope":c[h]=f.toString();break;case"expires":c[h]=f?new Date(Number(f)):void 0;break;case"onlineAccessInfo":u.associated_user.id=Number(f);break;case"userId":if(i){u.associated_user.id=Number(f);break}case"firstName":if(i){u.associated_user.first_name=String(f);break}case"lastName":if(i){u.associated_user.last_name=String(f);break}case"email":if(i){u.associated_user.email=String(f);break}case"accountOwner":if(i){u.associated_user.account_owner=!!f;break}case"locale":if(i){u.associated_user.locale=String(f);break}case"collaborator":if(i){u.associated_user.collaborator=!!f;break}case"emailVerified":if(i){u.associated_user.email_verified=!!f;break}default:c[h]=f}}),c.isOnline&&(c.onlineAccessInfo=u),new n(c)}constructor(s){Object.assign(this,s)}isActive(s){return!this.isScopeChanged(s)&&!!this.accessToken&&!this.isExpired()}isScopeChanged(s){return!(s instanceof t.AuthScopes?s:new t.AuthScopes(s)).equals(this.scope)}isExpired(s=0){return!!(this.expires&&this.expires.getTime()-s<Date.now())}toObject(){const s={id:this.id,shop:this.shop,state:this.state,isOnline:this.isOnline};return this.scope&&(s.scope=this.scope),this.expires&&(s.expires=this.expires),this.accessToken&&(s.accessToken=this.accessToken),this.onlineAccessInfo&&(s.onlineAccessInfo=this.onlineAccessInfo),s}equals(s){if(!s||!(this.id===s.id&&this.shop===s.shop&&this.state===s.state&&this.isOnline===s.isOnline))return!1;const l=this.toPropertyArray(!0);l.sort(([u],[d])=>u<d?-1:1);const c=s.toPropertyArray(!0);return c.sort(([u],[d])=>u<d?-1:1),JSON.stringify(l)===JSON.stringify(c)}toPropertyArray(s=!1){return Object.entries(this).filter(([i,l])=>r.includes(i)&&l!==void 0&&l!==null).flatMap(([i,l])=>{var c,u,d,h,f,p,g,b;switch(i){case"expires":return[[i,l?l.getTime():void 0]];case"onlineAccessInfo":return s?[["userId",(c=l==null?void 0:l.associated_user)===null||c===void 0?void 0:c.id],["firstName",(u=l==null?void 0:l.associated_user)===null||u===void 0?void 0:u.first_name],["lastName",(d=l==null?void 0:l.associated_user)===null||d===void 0?void 0:d.last_name],["email",(h=l==null?void 0:l.associated_user)===null||h===void 0?void 0:h.email],["locale",(f=l==null?void 0:l.associated_user)===null||f===void 0?void 0:f.locale],["emailVerified",(p=l==null?void 0:l.associated_user)===null||p===void 0?void 0:p.email_verified],["accountOwner",(g=l==null?void 0:l.associated_user)===null||g===void 0?void 0:g.account_owner],["collaborator",(b=l==null?void 0:l.associated_user)===null||b===void 0?void 0:b.collaborator]]:[[i,l.associated_user.id]];default:return[[i,l]]}}).filter(([i,l])=>l!==void 0)}}return As.Session=n,As}var yr={},ls={};const fe=crypto,Jt=e=>e instanceof CryptoKey,$0=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await fe.subtle.digest(r,t))},Xe=new TextEncoder,cr=new TextDecoder,Io=2**32;function Br(...e){const t=e.reduce((a,{length:s})=>a+s,0),r=new Uint8Array(t);let n=0;for(const a of e)r.set(a,n),n+=a.length;return r}function kL(e,t){return Br(Xe.encode(e),new Uint8Array([0]),t)}function fd(e,t,r){if(t<0||t>=Io)throw new RangeError(`value must be >= 0 and <= ${Io-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function N0(e){const t=Math.floor(e/Io),r=e%Io,n=new Uint8Array(8);return fd(n,t,0),fd(n,r,4),n}function Ph(e){const t=new Uint8Array(4);return fd(t,e),t}function mu(e){return Br(Ph(e.length),e)}async function xL(e,t,r){const n=Math.ceil((t>>3)/32),a=new Uint8Array(n*32);for(let s=0;s<n;s++){const i=new Uint8Array(4+e.length+r.length);i.set(Ph(s+1)),i.set(e,4),i.set(r,4+e.length),a.set(await $0("sha256",i),s*32)}return a.slice(0,t>>3)}const Ah=e=>{let t=e;typeof t=="string"&&(t=Xe.encode(t));const r=32768,n=[];for(let a=0;a<t.length;a+=r)n.push(String.fromCharCode.apply(null,t.subarray(a,a+r)));return btoa(n.join(""))},tt=e=>Ah(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),O0=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},pt=e=>{let t=e;t instanceof Uint8Array&&(t=cr.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return O0(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class wt extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}class qt extends wt{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class pd extends wt{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class $o extends wt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Te extends wt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Gs extends wt{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class Q extends wt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class $e extends wt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Vt extends wt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class L0 extends wt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Th extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class Rh extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class M0 extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class F0 extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class kh extends wt{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const IL=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:$o,JOSEError:wt,JOSENotSupported:Te,JWEDecryptionFailed:Gs,JWEInvalid:Q,JWKInvalid:L0,JWKSInvalid:Th,JWKSMultipleMatchingKeys:M0,JWKSNoMatchingKey:Rh,JWKSTimeout:F0,JWSInvalid:$e,JWSSignatureVerificationFailed:kh,JWTClaimValidationFailed:qt,JWTExpired:pd,JWTInvalid:Vt},Symbol.toStringTag,{value:"Module"})),Rl=fe.getRandomValues.bind(fe);function D0(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Te(`Unsupported JWE Algorithm: ${e}`)}}const $L=e=>Rl(new Uint8Array(D0(e)>>3)),H0=(e,t)=>{if(t.length<<3!==D0(e))throw new Q("Invalid Initialization Vector length")},No=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new Q(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},NL=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,a=-1;for(;++a<r;)n|=e[a]^t[a];return n===0};function Ct(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Cn(e,t){return e.name===t}function ro(e){return parseInt(e.name.slice(4),10)}function OL(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function B0(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function LL(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!Cn(e.algorithm,"HMAC"))throw Ct("HMAC");const n=parseInt(t.slice(2),10);if(ro(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Cn(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Ct("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(ro(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Cn(e.algorithm,"RSA-PSS"))throw Ct("RSA-PSS");const n=parseInt(t.slice(2),10);if(ro(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw Ct("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!Cn(e.algorithm,"ECDSA"))throw Ct("ECDSA");const n=OL(t);if(e.algorithm.namedCurve!==n)throw Ct(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}B0(e,r)}function In(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Cn(e.algorithm,"AES-GCM"))throw Ct("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Ct(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Cn(e.algorithm,"AES-KW"))throw Ct("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Ct(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Ct("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Cn(e.algorithm,"PBKDF2"))throw Ct("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Cn(e.algorithm,"RSA-OAEP"))throw Ct("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(ro(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}B0(e,r)}function W0(e,t,...r){var n;if(r.length>2){const a=r.pop();e+=`one of type ${r.join(", ")}, or ${a}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(n=t.constructor)!=null&&n.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Lt=(e,...t)=>W0("Key must be ",e,...t);function U0(e,t,...r){return W0(`Key for the ${e} algorithm must be `,t,...r)}const j0=e=>Jt(e),Ge=["CryptoKey"];async function ML(e,t,r,n,a,s){if(!(t instanceof Uint8Array))throw new TypeError(Lt(t,"Uint8Array"));const i=parseInt(e.slice(1,4),10),l=await fe.subtle.importKey("raw",t.subarray(i>>3),"AES-CBC",!1,["decrypt"]),c=await fe.subtle.importKey("raw",t.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),u=Br(s,n,r,N0(s.length<<3)),d=new Uint8Array((await fe.subtle.sign("HMAC",c,u)).slice(0,i>>3));let h;try{h=NL(a,d)}catch{}if(!h)throw new Gs;let f;try{f=new Uint8Array(await fe.subtle.decrypt({iv:n,name:"AES-CBC"},l,r))}catch{}if(!f)throw new Gs;return f}async function FL(e,t,r,n,a,s){let i;t instanceof Uint8Array?i=await fe.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(In(t,e,"decrypt"),i=t);try{return new Uint8Array(await fe.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},i,Br(r,a)))}catch{throw new Gs}}const q0=async(e,t,r,n,a,s)=>{if(!Jt(t)&&!(t instanceof Uint8Array))throw new TypeError(Lt(t,...Ge,"Uint8Array"));if(!n)throw new Q("JWE Initialization Vector missing");if(!a)throw new Q("JWE Authentication Tag missing");switch(H0(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&No(t,parseInt(e.slice(-3),10)),ML(e,t,r,n,a,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&No(t,parseInt(e.slice(1,4),10)),FL(e,t,r,n,a,s);default:throw new Te("Unsupported JWE Content Encryption Algorithm")}},fi=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const a=Object.keys(n);if(!r||r.size===0){r=new Set(a);continue}for(const s of a){if(r.has(s))return!1;r.add(s)}}return!0};function DL(e){return typeof e=="object"&&e!==null}function gt(e){if(!DL(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const kl=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function V0(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function K0(e,t,r){if(Jt(e))return In(e,t,r),e;if(e instanceof Uint8Array)return fe.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(Lt(e,...Ge,"Uint8Array"))}const md=async(e,t,r)=>{const n=await K0(t,e,"wrapKey");V0(n,e);const a=await fe.subtle.importKey("raw",r,...kl);return new Uint8Array(await fe.subtle.wrapKey("raw",a,n,"AES-KW"))},gd=async(e,t,r)=>{const n=await K0(t,e,"unwrapKey");V0(n,e);const a=await fe.subtle.unwrapKey("raw",r,n,"AES-KW",...kl);return new Uint8Array(await fe.subtle.exportKey("raw",a))};async function z0(e,t,r,n,a=new Uint8Array(0),s=new Uint8Array(0)){if(!Jt(e))throw new TypeError(Lt(e,...Ge));if(In(e,"ECDH"),!Jt(t))throw new TypeError(Lt(t,...Ge));In(t,"ECDH","deriveBits");const i=Br(mu(Xe.encode(r)),mu(a),mu(s),Ph(n));let l;e.algorithm.name==="X25519"?l=256:e.algorithm.name==="X448"?l=448:l=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const c=new Uint8Array(await fe.subtle.deriveBits({name:e.algorithm.name,public:e},t,l));return xL(c,n,i)}async function HL(e){if(!Jt(e))throw new TypeError(Lt(e,...Ge));return fe.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function G0(e){if(!Jt(e))throw new TypeError(Lt(e,...Ge));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function BL(e){if(!(e instanceof Uint8Array)||e.length<8)throw new Q("PBES2 Salt Input must be 8 or more octets")}function WL(e,t){if(e instanceof Uint8Array)return fe.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Jt(e))return In(e,t,"deriveBits","deriveKey"),e;throw new TypeError(Lt(e,...Ge,"Uint8Array"))}async function J0(e,t,r,n){BL(e);const a=kL(t,e),s=parseInt(t.slice(13,16),10),i={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:a},l={length:s,name:"AES-KW"},c=await WL(n,t);if(c.usages.includes("deriveBits"))return new Uint8Array(await fe.subtle.deriveBits(i,c,s));if(c.usages.includes("deriveKey"))return fe.subtle.deriveKey(i,c,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const UL=async(e,t,r,n=2048,a=Rl(new Uint8Array(16)))=>{const s=await J0(a,e,n,t);return{encryptedKey:await md(e.slice(-6),s,r),p2c:n,p2s:tt(a)}},jL=async(e,t,r,n,a)=>{const s=await J0(a,e,n,t);return gd(e.slice(-6),s,r)};function Oo(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Te(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const xl=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},qL=async(e,t,r)=>{if(!Jt(t))throw new TypeError(Lt(t,...Ge));if(In(t,e,"encrypt","wrapKey"),xl(e,t),t.usages.includes("encrypt"))return new Uint8Array(await fe.subtle.encrypt(Oo(e),t,r));if(t.usages.includes("wrapKey")){const n=await fe.subtle.importKey("raw",r,...kl);return new Uint8Array(await fe.subtle.wrapKey("raw",n,t,Oo(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},VL=async(e,t,r)=>{if(!Jt(t))throw new TypeError(Lt(t,...Ge));if(In(t,e,"decrypt","unwrapKey"),xl(e,t),t.usages.includes("decrypt"))return new Uint8Array(await fe.subtle.decrypt(Oo(e),t,r));if(t.usages.includes("unwrapKey")){const n=await fe.subtle.unwrapKey("raw",r,t,Oo(e),...kl);return new Uint8Array(await fe.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function xh(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Te(`Unsupported JWE Algorithm: ${e}`)}}const sa=e=>Rl(new Uint8Array(xh(e)>>3)),X0=(e,t)=>{const r=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},Y0=async(e,t,r)=>{if(!Jt(r))throw new TypeError(Lt(r,...Ge));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return X0(Ah(new Uint8Array(await fe.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},KL=e=>Y0("public","spki",e),zL=e=>Y0("private","pkcs8",e),mn=(e,t,r=0)=>{r===0&&(t.unshift(t.length),t.unshift(6));const n=e.indexOf(t[0],r);if(n===-1)return!1;const a=e.subarray(n,n+t.length);return a.length!==t.length?!1:a.every((s,i)=>s===t[i])||mn(e,t,n+1)},yg=e=>{switch(!0){case mn(e,[42,134,72,206,61,3,1,7]):return"P-256";case mn(e,[43,129,4,0,34]):return"P-384";case mn(e,[43,129,4,0,35]):return"P-521";case mn(e,[43,101,110]):return"X25519";case mn(e,[43,101,111]):return"X448";case mn(e,[43,101,112]):return"Ed25519";case mn(e,[43,101,113]):return"Ed448";default:throw new Te("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Z0=async(e,t,r,n,a)=>{let s,i;const l=new Uint8Array(atob(r.replace(e,"")).split("").map(u=>u.charCodeAt(0))),c=t==="spki";switch(n){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},i=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},i=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},i=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},i=c?["verify"]:["sign"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},i=c?["verify"]:["sign"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},i=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const u=yg(l);s=u.startsWith("P-")?{name:"ECDH",namedCurve:u}:{name:u},i=c?[]:["deriveBits"];break}case"EdDSA":s={name:yg(l)},i=c?["verify"]:["sign"];break;default:throw new Te('Invalid or unsupported "alg" (Algorithm) value')}return fe.subtle.importKey(t,l,s,(a==null?void 0:a.extractable)??!1,i)},GL=(e,t,r)=>Z0(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),Q0=(e,t,r)=>Z0(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function vg(e){const t=[];let r=0;for(;r<e.length;){const n=eS(e.subarray(r));t.push(n),r+=n.byteLength}return t}function eS(e){let t=0,r=e[0]&31;if(t++,r===31){for(r=0;e[t]>=128;)r=r*128+e[t]-128,t++;r=r*128+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else if(n===128){for(n=0;e[t+n]!==0||e[t+n+1]!==0;){if(n>e.byteLength)throw new TypeError("invalid indefinite form length");n++}const s=t+n+2;return{byteLength:s,contents:e.subarray(t,t+n),raw:e.subarray(0,s)}}else{const s=e[t]&127;t++,n=0;for(let i=0;i<s;i++)n=n*256+e[t],t++}const a=t+n;return{byteLength:a,contents:e.subarray(t,a),raw:e.subarray(0,a)}}function JL(e){const t=vg(vg(eS(e).contents)[0].contents);return Ah(t[t[0].raw[0]===160?6:5].raw)}function XL(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=O0(t);return X0(JL(r),"PUBLIC KEY")}const YL=(e,t,r)=>{let n;try{n=XL(e)}catch(a){throw new TypeError("Failed to parse the X.509 certificate",{cause:a})}return Q0(n,t,r)};function ZL(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Te('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const QL=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=ZL(e),n=[t,e.ext??!1,e.key_ops??r],a={...e};return delete a.alg,delete a.use,fe.subtle.importKey("jwk",a,...n)},eM=QL;async function tM(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return Q0(e,t,r)}async function rM(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return YL(e,t,r)}async function nM(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return GL(e,t,r)}async function Il(e,t){if(!gt(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return pt(e.k);case"RSA":if(e.oth!==void 0)throw new Te('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return eM({...e,alg:t});default:throw new Te('Unsupported "kty" (Key Type) Parameter value')}}const aM=(e,t)=>{if(!(t instanceof Uint8Array)){if(!j0(t))throw new TypeError(U0(e,t,...Ge,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Ge.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},sM=(e,t,r)=>{if(!j0(t))throw new TypeError(U0(e,t,...Ge));if(t.type==="secret")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},$l=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?aM(e,t):sM(e,t,r)};async function iM(e,t,r,n,a){if(!(r instanceof Uint8Array))throw new TypeError(Lt(r,"Uint8Array"));const s=parseInt(e.slice(1,4),10),i=await fe.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),l=await fe.subtle.importKey("raw",r.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await fe.subtle.encrypt({iv:n,name:"AES-CBC"},i,t)),u=Br(a,n,c,N0(a.length<<3)),d=new Uint8Array((await fe.subtle.sign("HMAC",l,u)).slice(0,s>>3));return{ciphertext:c,tag:d,iv:n}}async function oM(e,t,r,n,a){let s;r instanceof Uint8Array?s=await fe.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(In(r,e,"encrypt"),s=r);const i=new Uint8Array(await fe.subtle.encrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},s,t)),l=i.slice(-16);return{ciphertext:i.slice(0,-16),tag:l,iv:n}}const tS=async(e,t,r,n,a)=>{if(!Jt(r)&&!(r instanceof Uint8Array))throw new TypeError(Lt(r,...Ge,"Uint8Array"));switch(n?H0(e,n):n=$L(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&No(r,parseInt(e.slice(-3),10)),iM(e,t,r,n,a);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&No(r,parseInt(e.slice(1,4),10)),oM(e,t,r,n,a);default:throw new Te("Unsupported JWE Content Encryption Algorithm")}};async function lM(e,t,r,n){const a=e.slice(0,7),s=await tS(a,r,t,n,new Uint8Array(0));return{encryptedKey:s.ciphertext,iv:tt(s.iv),tag:tt(s.tag)}}async function cM(e,t,r,n,a){const s=e.slice(0,7);return q0(s,t,r,n,a,new Uint8Array(0))}async function uM(e,t,r,n,a){switch($l(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new Q("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new Q("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!gt(n.epk))throw new Q('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!G0(t))throw new Te("ECDH with the provided key is not allowed or not supported by your javascript runtime");const s=await Il(n.epk,e);let i,l;if(n.apu!==void 0){if(typeof n.apu!="string")throw new Q('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=pt(n.apu)}catch{throw new Q("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new Q('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{l=pt(n.apv)}catch{throw new Q("Failed to base64url decode the apv")}}const c=await z0(s,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?xh(n.enc):parseInt(e.slice(-5,-2),10),i,l);if(e==="ECDH-ES")return c;if(r===void 0)throw new Q("JWE Encrypted Key missing");return gd(e.slice(-6),c,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new Q("JWE Encrypted Key missing");return VL(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new Q("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new Q('JOSE Header "p2c" (PBES2 Count) missing or invalid');const s=(a==null?void 0:a.maxPBES2Count)||1e4;if(n.p2c>s)throw new Q('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new Q('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let i;try{i=pt(n.p2s)}catch{throw new Q("Failed to base64url decode the p2s")}return jL(e,t,r,n.p2c,i)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new Q("JWE Encrypted Key missing");return gd(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new Q("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new Q('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new Q('JOSE Header "tag" (Authentication Tag) missing or invalid');let s;try{s=pt(n.iv)}catch{throw new Q("Failed to base64url decode the iv")}let i;try{i=pt(n.tag)}catch{throw new Q("Failed to base64url decode the tag")}return cM(e,t,r,s,i)}default:throw new Te('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function pi(e,t,r,n,a){if(a.crit!==void 0&&(n==null?void 0:n.crit)===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(i=>typeof i!="string"||i.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;r!==void 0?s=new Map([...Object.entries(r),...t.entries()]):s=t;for(const i of n.crit){if(!s.has(i))throw new Te(`Extension Header Parameter "${i}" is not recognized`);if(a[i]===void 0)throw new e(`Extension Header Parameter "${i}" is missing`);if(s.get(i)&&n[i]===void 0)throw new e(`Extension Header Parameter "${i}" MUST be integrity protected`)}return new Set(n.crit)}const bd=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function Ih(e,t,r){if(!gt(e))throw new Q("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new Q("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new Q("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new Q("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new Q("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new Q("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new Q("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new Q("JWE AAD incorrect type");if(e.header!==void 0&&!gt(e.header))throw new Q("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!gt(e.unprotected))throw new Q("JWE Per-Recipient Unprotected Header incorrect type");let n;if(e.protected)try{const S=pt(e.protected);n=JSON.parse(cr.decode(S))}catch{throw new Q("JWE Protected Header is invalid")}if(!fi(n,e.header,e.unprotected))throw new Q("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...n,...e.header,...e.unprotected};if(pi(Q,new Map,r==null?void 0:r.crit,n,a),a.zip!==void 0)throw new Te('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:s,enc:i}=a;if(typeof s!="string"||!s)throw new Q("missing JWE Algorithm (alg) in JWE Header");if(typeof i!="string"||!i)throw new Q("missing JWE Encryption Algorithm (enc) in JWE Header");const l=r&&bd("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&bd("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(l&&!l.has(s)||!l&&s.startsWith("PBES2"))throw new $o('"alg" (Algorithm) Header Parameter value not allowed');if(c&&!c.has(i))throw new $o('"enc" (Encryption Algorithm) Header Parameter value not allowed');let u;if(e.encrypted_key!==void 0)try{u=pt(e.encrypted_key)}catch{throw new Q("Failed to base64url decode the encrypted_key")}let d=!1;typeof t=="function"&&(t=await t(n,e),d=!0);let h;try{h=await uM(s,t,u,a,r)}catch(S){if(S instanceof TypeError||S instanceof Q||S instanceof Te)throw S;h=sa(i)}let f,p;if(e.iv!==void 0)try{f=pt(e.iv)}catch{throw new Q("Failed to base64url decode the iv")}if(e.tag!==void 0)try{p=pt(e.tag)}catch{throw new Q("Failed to base64url decode the tag")}const g=Xe.encode(e.protected??"");let b;e.aad!==void 0?b=Br(g,Xe.encode("."),Xe.encode(e.aad)):b=g;let y;try{y=pt(e.ciphertext)}catch{throw new Q("Failed to base64url decode the ciphertext")}const E={plaintext:await q0(i,h,y,f,p,b)};if(e.protected!==void 0&&(E.protectedHeader=n),e.aad!==void 0)try{E.additionalAuthenticatedData=pt(e.aad)}catch{throw new Q("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(E.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(E.unprotectedHeader=e.header),d?{...E,key:t}:E}async function rS(e,t,r){if(e instanceof Uint8Array&&(e=cr.decode(e)),typeof e!="string")throw new Q("Compact JWE must be a string or Uint8Array");const{0:n,1:a,2:s,3:i,4:l,length:c}=e.split(".");if(c!==5)throw new Q("Invalid Compact JWE");const u=await Ih({ciphertext:i,iv:s||void 0,protected:n,tag:l||void 0,encrypted_key:a||void 0},t,r),d={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return typeof t=="function"?{...d,key:u.key}:d}async function dM(e,t,r){if(!gt(e))throw new Q("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(gt))throw new Q("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new Q("JWE Recipients has no members");for(const n of e.recipients)try{return await Ih({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new Gs}const hM=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:tt(e)};if(!Jt(e))throw new TypeError(Lt(e,...Ge,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:a,...s}=await fe.subtle.exportKey("jwk",e);return s},fM=hM;async function pM(e){return KL(e)}async function mM(e){return zL(e)}async function nS(e){return fM(e)}async function aS(e,t,r,n,a={}){let s,i,l;switch($l(e,r,"encrypt"),e){case"dir":{l=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!G0(r))throw new Te("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:u}=a;let{epk:d}=a;d||(d=(await HL(r)).privateKey);const{x:h,y:f,crv:p,kty:g}=await nS(d),b=await z0(r,d,e==="ECDH-ES"?t:e,e==="ECDH-ES"?xh(t):parseInt(e.slice(-5,-2),10),c,u);if(i={epk:{x:h,crv:p,kty:g}},g==="EC"&&(i.epk.y=f),c&&(i.apu=tt(c)),u&&(i.apv=tt(u)),e==="ECDH-ES"){l=b;break}l=n||sa(t);const y=e.slice(-6);s=await md(y,b,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{l=n||sa(t),s=await qL(e,r,l);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=n||sa(t);const{p2c:c,p2s:u}=a;({encryptedKey:s,...i}=await UL(e,r,l,c,u));break}case"A128KW":case"A192KW":case"A256KW":{l=n||sa(t),s=await md(e,r,l);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=n||sa(t);const{iv:c}=a;({encryptedKey:s,...i}=await lM(e,r,l,c));break}default:throw new Te('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:s,parameters:i}}const sS=Symbol();class Lo{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Q("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!fi(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Q("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(pi(Q,new Map,r==null?void 0:r.crit,this._protectedHeader,n),n.zip!==void 0)throw new Te('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:a,enc:s}=n;if(typeof a!="string"||!a)throw new Q('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof s!="string"||!s)throw new Q('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let i;if(this._cek&&(a==="dir"||a==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${a}`);let l;{let b;({cek:l,encryptedKey:i,parameters:b}=await aS(a,s,t,this._cek,this._keyManagementParameters)),b&&(r&&sS in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...b}:this.setUnprotectedHeader(b):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...b}:this.setProtectedHeader(b))}let c,u,d;this._protectedHeader?u=Xe.encode(tt(JSON.stringify(this._protectedHeader))):u=Xe.encode(""),this._aad?(d=tt(this._aad),c=Br(u,Xe.encode("."),Xe.encode(d))):c=u;const{ciphertext:h,tag:f,iv:p}=await tS(s,this._plaintext,l,this._iv,c),g={ciphertext:tt(h)};return p&&(g.iv=tt(p)),f&&(g.tag=tt(f)),i&&(g.encrypted_key=tt(i)),d&&(g.aad=d),this._protectedHeader&&(g.protected=cr.decode(u)),this._sharedUnprotectedHeader&&(g.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(g.header=this._unprotectedHeader),g}}class gM{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class bM{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){const n=new gM(this,t,{crit:r==null?void 0:r.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(){var a,s,i;if(!this._recipients.length)throw new Q("at least one recipient must be added");if(this._recipients.length===1){const[l]=this._recipients,c=await new Lo(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(l.unprotectedHeader).encrypt(l.key,{...l.options}),u={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(u.aad=c.aad),c.protected&&(u.protected=c.protected),c.unprotected&&(u.unprotected=c.unprotected),c.encrypted_key&&(u.recipients[0].encrypted_key=c.encrypted_key),c.header&&(u.recipients[0].header=c.header),u}let t;for(let l=0;l<this._recipients.length;l++){const c=this._recipients[l];if(!fi(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new Q("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const u={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:d}=u;if(typeof d!="string"||!d)throw new Q('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(d==="dir"||d==="ECDH-ES")throw new Q('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof u.enc!="string"||!u.enc)throw new Q('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!t)t=u.enc;else if(t!==u.enc)throw new Q('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(pi(Q,new Map,c.options.crit,this._protectedHeader,u),u.zip!==void 0)throw new Te('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const r=sa(t),n={ciphertext:"",iv:"",recipients:[],tag:""};for(let l=0;l<this._recipients.length;l++){const c=this._recipients[l],u={};n.recipients.push(u);const h={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+l:void 0;if(l===0){const g=await new Lo(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(r).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:h}).encrypt(c.key,{...c.options,[sS]:!0});n.ciphertext=g.ciphertext,n.iv=g.iv,n.tag=g.tag,g.aad&&(n.aad=g.aad),g.protected&&(n.protected=g.protected),g.unprotected&&(n.unprotected=g.unprotected),u.encrypted_key=g.encrypted_key,g.header&&(u.header=g.header);continue}const{encryptedKey:f,parameters:p}=await aS(((a=c.unprotectedHeader)==null?void 0:a.alg)||((s=this._protectedHeader)==null?void 0:s.alg)||((i=this._unprotectedHeader)==null?void 0:i.alg),t,c.key,r,{p2c:h});u.encrypted_key=tt(f),(c.unprotectedHeader||p)&&(u.header={...c.unprotectedHeader,...p})}return n}}function iS(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new Te(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function oS(e,t,r){if(Jt(t))return LL(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Lt(t,...Ge));return fe.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Lt(t,...Ge,"Uint8Array"))}const yM=async(e,t,r,n)=>{const a=await oS(e,t,"verify");xl(e,a);const s=iS(e,a.algorithm);try{return await fe.subtle.verify(s,a,r,n)}catch{return!1}};async function $h(e,t,r){if(!gt(e))throw new $e("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new $e('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new $e("JWS Protected Header incorrect type");if(e.payload===void 0)throw new $e("JWS Payload missing");if(typeof e.signature!="string")throw new $e("JWS Signature missing or incorrect type");if(e.header!==void 0&&!gt(e.header))throw new $e("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{const b=pt(e.protected);n=JSON.parse(cr.decode(b))}catch{throw new $e("JWS Protected Header is invalid")}if(!fi(n,e.header))throw new $e("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...n,...e.header},s=pi($e,new Map([["b64",!0]]),r==null?void 0:r.crit,n,a);let i=!0;if(s.has("b64")&&(i=n.b64,typeof i!="boolean"))throw new $e('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=a;if(typeof l!="string"||!l)throw new $e('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=r&&bd("algorithms",r.algorithms);if(c&&!c.has(l))throw new $o('"alg" (Algorithm) Header Parameter value not allowed');if(i){if(typeof e.payload!="string")throw new $e("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new $e("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof t=="function"&&(t=await t(n,e),u=!0),$l(l,t,"verify");const d=Br(Xe.encode(e.protected??""),Xe.encode("."),typeof e.payload=="string"?Xe.encode(e.payload):e.payload);let h;try{h=pt(e.signature)}catch{throw new $e("Failed to base64url decode the signature")}if(!await yM(l,t,h,d))throw new kh;let p;if(i)try{p=pt(e.payload)}catch{throw new $e("Failed to base64url decode the payload")}else typeof e.payload=="string"?p=Xe.encode(e.payload):p=e.payload;const g={payload:p};return e.protected!==void 0&&(g.protectedHeader=n),e.header!==void 0&&(g.unprotectedHeader=e.header),u?{...g,key:t}:g}async function lS(e,t,r){if(e instanceof Uint8Array&&(e=cr.decode(e)),typeof e!="string")throw new $e("Compact JWS must be a string or Uint8Array");const{0:n,1:a,2:s,length:i}=e.split(".");if(i!==3)throw new $e("Invalid Compact JWS");const l=await $h({payload:a,protected:n,signature:s},t,r),c={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...c,key:l.key}:c}async function vM(e,t,r){if(!gt(e))throw new $e("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(gt))throw new $e("JWS Signatures missing or incorrect type");for(const n of e.signatures)try{return await $h({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new kh}const gn=e=>Math.floor(e.getTime()/1e3),cS=60,uS=cS*60,Nh=uS*24,EM=Nh*7,SM=Nh*365.25,_M=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ws=e=>{const t=_M.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),n=t[3].toLowerCase();let a;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(r*cS);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(r*uS);break;case"day":case"days":case"d":a=Math.round(r*Nh);break;case"week":case"weeks":case"w":a=Math.round(r*EM);break;default:a=Math.round(r*SM);break}return t[1]==="-"||t[4]==="ago"?-a:a},Eg=e=>e.toLowerCase().replace(/^application\//,""),CM=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,Oh=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||Eg(e.typ)!==Eg(n)))throw new qt('unexpected "typ" JWT header value',"typ","check_failed");let a;try{a=JSON.parse(cr.decode(t))}catch{}if(!gt(a))throw new Vt("JWT Claims Set must be a top-level JSON object");const{requiredClaims:s=[],issuer:i,subject:l,audience:c,maxTokenAge:u}=r,d=[...s];u!==void 0&&d.push("iat"),c!==void 0&&d.push("aud"),l!==void 0&&d.push("sub"),i!==void 0&&d.push("iss");for(const g of new Set(d.reverse()))if(!(g in a))throw new qt(`missing required "${g}" claim`,g,"missing");if(i&&!(Array.isArray(i)?i:[i]).includes(a.iss))throw new qt('unexpected "iss" claim value',"iss","check_failed");if(l&&a.sub!==l)throw new qt('unexpected "sub" claim value',"sub","check_failed");if(c&&!CM(a.aud,typeof c=="string"?[c]:c))throw new qt('unexpected "aud" claim value',"aud","check_failed");let h;switch(typeof r.clockTolerance){case"string":h=Ws(r.clockTolerance);break;case"number":h=r.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=r,p=gn(f||new Date);if((a.iat!==void 0||u)&&typeof a.iat!="number")throw new qt('"iat" claim must be a number',"iat","invalid");if(a.nbf!==void 0){if(typeof a.nbf!="number")throw new qt('"nbf" claim must be a number',"nbf","invalid");if(a.nbf>p+h)throw new qt('"nbf" claim timestamp check failed',"nbf","check_failed")}if(a.exp!==void 0){if(typeof a.exp!="number")throw new qt('"exp" claim must be a number',"exp","invalid");if(a.exp<=p-h)throw new pd('"exp" claim timestamp check failed',"exp","check_failed")}if(u){const g=p-a.iat,b=typeof u=="number"?u:Ws(u);if(g-h>b)throw new pd('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(g<0-h)throw new qt('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return a};async function wM(e,t,r){var i;const n=await lS(e,t,r);if((i=n.protectedHeader.crit)!=null&&i.includes("b64")&&n.protectedHeader.b64===!1)throw new Vt("JWTs MUST NOT use unencoded payload");const s={payload:Oh(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return typeof t=="function"?{...s,key:n.key}:s}async function PM(e,t,r){const n=await rS(e,t,r),a=Oh(n.protectedHeader,n.plaintext,r),{protectedHeader:s}=n;if(s.iss!==void 0&&s.iss!==a.iss)throw new qt('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(s.sub!==void 0&&s.sub!==a.sub)throw new qt('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(s.aud!==void 0&&JSON.stringify(s.aud)!==JSON.stringify(a.aud))throw new qt('replicated "aud" claim header parameter mismatch',"aud","mismatch");const i={payload:a,protectedHeader:s};return typeof t=="function"?{...i,key:n.key}:i}class dS{constructor(t){this._flattened=new Lo(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){const n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const AM=async(e,t,r)=>{const n=await oS(e,t,"sign");xl(e,n);const a=await fe.subtle.sign(iS(e,n.algorithm),n,r);return new Uint8Array(a)};class Lh{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new $e("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!fi(this._protectedHeader,this._unprotectedHeader))throw new $e("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},a=pi($e,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let s=!0;if(a.has("b64")&&(s=this._protectedHeader.b64,typeof s!="boolean"))throw new $e('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=n;if(typeof i!="string"||!i)throw new $e('JWS "alg" (Algorithm) Header Parameter missing or invalid');$l(i,t,"sign");let l=this._payload;s&&(l=Xe.encode(tt(l)));let c;this._protectedHeader?c=Xe.encode(tt(JSON.stringify(this._protectedHeader))):c=Xe.encode("");const u=Br(c,Xe.encode("."),l),d=await AM(i,t,u),h={signature:tt(d),payload:""};return s&&(h.payload=cr.decode(l)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=cr.decode(c)),h}}class hS{constructor(t){this._flattened=new Lh(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class TM{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class RM{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){const n=new TM(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new $e("at least one signature must be added");const t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const n=this._signatures[r],a=new Lh(this._payload);a.setProtectedHeader(n.protectedHeader),a.setUnprotectedHeader(n.unprotectedHeader);const{payload:s,...i}=await a.sign(n.key,n.options);if(r===0)t.payload=s;else if(t.payload!==s)throw new $e("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(i)}return t}}function Qn(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class Mh{constructor(t={}){if(!gt(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:Qn("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:Qn("setNotBefore",gn(t))}:this._payload={...this._payload,nbf:gn(new Date)+Ws(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:Qn("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:Qn("setExpirationTime",gn(t))}:this._payload={...this._payload,exp:gn(new Date)+Ws(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:gn(new Date)}:t instanceof Date?this._payload={...this._payload,iat:Qn("setIssuedAt",gn(t))}:typeof t=="string"?this._payload={...this._payload,iat:Qn("setIssuedAt",gn(new Date)+Ws(t))}:this._payload={...this._payload,iat:Qn("setIssuedAt",t)},this}}class kM extends Mh{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var a;const n=new hS(Xe.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray((a=this._protectedHeader)==null?void 0:a.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Vt("JWTs MUST NOT use unencoded payload");return n.sign(t,r)}}class xM extends Mh{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){const n=new dS(Xe.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}}const pn=(e,t)=>{if(typeof e!="string"||!e)throw new L0(`${t} missing or invalid`)};async function fS(e,t){if(!gt(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":pn(e.crv,'"crv" (Curve) Parameter'),pn(e.x,'"x" (X Coordinate) Parameter'),pn(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":pn(e.crv,'"crv" (Subtype of Key Pair) Parameter'),pn(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":pn(e.e,'"e" (Exponent) Parameter'),pn(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":pn(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new Te('"kty" (Key Type) Parameter missing or unsupported')}const n=Xe.encode(JSON.stringify(r));return tt(await $0(t,n))}async function IM(e,t){t??(t="sha256");const r=await fS(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function $M(e,t){const r={...e,...t==null?void 0:t.header};if(!gt(r.jwk))throw new $e('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await Il({...r.jwk,ext:!0},r.alg);if(n instanceof Uint8Array||n.type!=="public")throw new $e('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function NM(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Te('Unsupported "alg" value for a JSON Web Key Set')}}function OM(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(LM)}function LM(e){return gt(e)}function MM(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class FM{constructor(t){if(this._cached=new WeakMap,!OM(t))throw new Th("JSON Web Key Set malformed");this._jwks=MM(t)}async getKey(t,r){const{alg:n,kid:a}={...t,...r==null?void 0:r.header},s=NM(n),i=this._jwks.keys.filter(u=>{let d=s===u.kty;if(d&&typeof a=="string"&&(d=a===u.kid),d&&typeof u.alg=="string"&&(d=n===u.alg),d&&typeof u.use=="string"&&(d=u.use==="sig"),d&&Array.isArray(u.key_ops)&&(d=u.key_ops.includes("verify")),d&&n==="EdDSA"&&(d=u.crv==="Ed25519"||u.crv==="Ed448"),d)switch(n){case"ES256":d=u.crv==="P-256";break;case"ES256K":d=u.crv==="secp256k1";break;case"ES384":d=u.crv==="P-384";break;case"ES512":d=u.crv==="P-521";break}return d}),{0:l,length:c}=i;if(c===0)throw new Rh;if(c!==1){const u=new M0,{_cached:d}=this;throw u[Symbol.asyncIterator]=async function*(){for(const h of i)try{yield await Sg(d,h,n)}catch{}},u}return Sg(this._cached,l,n)}}async function Sg(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const a=await Il({...t,ext:!0},r);if(a instanceof Uint8Array||a.type!=="public")throw new Th("JSON Web Key Set members must be public keys");n[r]=a}return n[r]}function pS(e){const t=new FM(e);return async(r,n)=>t.getKey(r,n)}const DM=async(e,t,r)=>{let n,a,s=!1;typeof AbortController=="function"&&(n=new AbortController,a=setTimeout(()=>{s=!0,n.abort()},t));const i=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(l=>{throw s?new F0:l});if(a!==void 0&&clearTimeout(a),i.status!==200)throw new wt("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await i.json()}catch{throw new wt("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function HM(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let yd;var Xi,Lb;(typeof navigator>"u"||!((Lb=(Xi=navigator.userAgent)==null?void 0:Xi.startsWith)!=null&&Lb.call(Xi,"Mozilla/5.0 ")))&&(yd="jose/v5.2.4");class BM{constructor(t,r){if(!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._local||!this.fresh())&&await this.reload();try{return await this._local(t,r)}catch(n){if(n instanceof Rh&&this.coolingDown()===!1)return await this.reload(),this._local(t,r);throw n}}async reload(){this._pendingFetch&&HM()&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);yd&&!t.has("User-Agent")&&(t.set("User-Agent",yd),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||(this._pendingFetch=DM(this._url,this._timeoutDuration,this._options).then(r=>{this._local=pS(r),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}}function WM(e,t){const r=new BM(e,t);return async(n,a)=>r.getKey(n,a)}class UM extends Mh{encode(){const t=tt(JSON.stringify({alg:"none"})),r=tt(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new Vt("Unsecured JWT must be a string");const{0:n,1:a,2:s,length:i}=t.split(".");if(i!==3||s!=="")throw new Vt("Invalid Unsecured JWT");let l;try{if(l=JSON.parse(cr.decode(pt(n))),l.alg!=="none")throw new Error}catch{throw new Vt("Invalid Unsecured JWT")}return{payload:Oh(l,pt(a),r),header:l}}}const jM=tt,Fh=pt,qM=Object.freeze(Object.defineProperty({__proto__:null,decode:Fh,encode:jM},Symbol.toStringTag,{value:"Module"}));function VM(e){let t;if(typeof e=="string"){const r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const r=JSON.parse(cr.decode(Fh(t)));if(!gt(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function KM(e){if(typeof e!="string")throw new Vt("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Vt("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Vt("Invalid JWT");if(!t)throw new Vt("JWTs must contain a payload");let n;try{n=Fh(t)}catch{throw new Vt("Failed to base64url decode the payload")}let a;try{a=JSON.parse(cr.decode(n))}catch{throw new Vt("Failed to parse the decoded payload as JSON")}if(!gt(a))throw new Vt("Invalid JWT Claims Set");return a}async function zM(e,t){let r,n,a;switch(e){case"HS256":case"HS384":case"HS512":r=parseInt(e.slice(-3),10),n={name:"HMAC",hash:`SHA-${r}`,length:r},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r=parseInt(e.slice(-3),10),Rl(new Uint8Array(r>>3));case"A128KW":case"A192KW":case"A256KW":r=parseInt(e.slice(1,4),10),n={name:"AES-KW",length:r},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10),n={name:"AES-GCM",length:r},a=["encrypt","decrypt"];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return fe.subtle.generateKey(n,(t==null?void 0:t.extractable)??!1,a)}function gu(e){const t=(e==null?void 0:e.modulusLength)??2048;if(typeof t!="number"||t<2048)throw new Te("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function GM(e,t){let r,n;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:gu(t)},n=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:gu(t)},n=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:gu(t)},n=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},n=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},n=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},n=["sign","verify"];break;case"EdDSA":{n=["sign","verify"];const a=(t==null?void 0:t.crv)??"Ed25519";switch(a){case"Ed25519":case"Ed448":r={name:a};break;default:throw new Te("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{n=["deriveKey","deriveBits"];const a=(t==null?void 0:t.crv)??"P-256";switch(a){case"P-256":case"P-384":case"P-521":{r={name:"ECDH",namedCurve:a};break}case"X25519":case"X448":r={name:a};break;default:throw new Te("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return fe.subtle.generateKey(r,(t==null?void 0:t.extractable)??!1,n)}async function JM(e,t){return GM(e,t)}async function XM(e,t){return zM(e,t)}const YM="WebCryptoAPI",ZM=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:dS,CompactSign:hS,EmbeddedJWK:$M,EncryptJWT:xM,FlattenedEncrypt:Lo,FlattenedSign:Lh,GeneralEncrypt:bM,GeneralSign:RM,SignJWT:kM,UnsecuredJWT:UM,base64url:qM,calculateJwkThumbprint:fS,calculateJwkThumbprintUri:IM,compactDecrypt:rS,compactVerify:lS,createLocalJWKSet:pS,createRemoteJWKSet:WM,cryptoRuntime:YM,decodeJwt:KM,decodeProtectedHeader:VM,errors:IL,exportJWK:nS,exportPKCS8:mM,exportSPKI:pM,flattenedDecrypt:Ih,flattenedVerify:$h,generalDecrypt:dM,generalVerify:vM,generateKeyPair:JM,generateSecret:XM,importJWK:Il,importPKCS8:nM,importSPKI:tM,importX509:rM,jwtDecrypt:PM,jwtVerify:wM},Symbol.toStringTag,{value:"Module"})),QM=$n(ZM);var Ts={},_g;function eF(){if(_g)return Ts;_g=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.getHMACKey=void 0;function e(t){const r=new Uint8Array(t.length);for(let n=0,a=t.length;n<a;n++)r[n]=t.charCodeAt(n);return r}return Ts.getHMACKey=e,Ts}Object.defineProperty(ls,"__esModule",{value:!0});ls.decodeSessionToken=void 0;const Dh=ve,tF=Dh.__importStar(QM),Cg=Dh.__importStar(K),rF=eF(),nF=10;function aF(e){return(t,{checkAudience:r=!0}={})=>Dh.__awaiter(this,void 0,void 0,function*(){let n;try{n=(yield tF.jwtVerify(t,(0,rF.getHMACKey)(e.apiSecretKey),{algorithms:["HS256"],clockTolerance:nF})).payload}catch(a){throw new Cg.InvalidJwtError(`Failed to parse session token '${t}': ${a.message}`)}if(r&&n.aud!==e.apiKey)throw new Cg.InvalidJwtError("Session token had invalid API key");return n})}ls.decodeSessionToken=aF;Object.defineProperty(yr,"__esModule",{value:!0});yr.customAppSession=yr.getCurrentSessionId=yr.getOfflineId=yr.getJwtSessionId=void 0;const vd=ve,sF=kn,wg=Pa(),Hh=Hr,iF=ct,oF=vd.__importStar(K),lF=ls,cF=wh();function mS(e){return(t,r)=>`${(0,Hh.sanitizeShop)(e)(t,!0)}_${r}`}yr.getJwtSessionId=mS;function gS(e){return t=>`offline_${(0,Hh.sanitizeShop)(e)(t,!0)}`}yr.getOfflineId=gS;function uF(e){return function(r){var{isOnline:n}=r,a=vd.__rest(r,["isOnline"]);return vd.__awaiter(this,void 0,void 0,function*(){const s=yield(0,wg.abstractConvertRequest)(a),i=(0,iF.logger)(e);if(e.isEmbeddedApp){i.debug("App is embedded, looking for session id in JWT payload",{isOnline:n});const l=s.headers.Authorization;if(l){const c=(typeof l=="string"?l:l[0]).match(/^Bearer (.+)$/);if(!c)throw i.error("Missing Bearer token in authorization header",{isOnline:n}),new oF.MissingJwtTokenError("Missing Bearer token in authorization header");const u=yield(0,lF.decodeSessionToken)(e)(c[1]),d=u.dest.replace(/^https:\/\//,"");return i.debug("Found valid JWT payload",{shop:d,isOnline:n}),n?mS(e)(d,u.sub):gS(e)(d)}else i.error("Missing Authorization header, was the request made with authenticatedFetch?",{isOnline:n})}else return i.debug("App is not embedded, looking for session id in cookies",{isOnline:n}),new wg.Cookies(s,{},{keys:[e.apiSecretKey]}).getAndVerify(sF.SESSION_COOKIE_NAME)})}}yr.getCurrentSessionId=uF;function dF(e){return t=>new cF.Session({id:"",shop:`${(0,Hh.sanitizeShop)(e)(t,!0)}`,state:"",isOnline:!1})}yr.customAppSession=dF;Object.defineProperty(di,"__esModule",{value:!0});di.createSession=void 0;const hF=ve,fF=w0,Pg=wh(),pF=ct,Ag=yr;function mF({config:e,accessTokenResponse:t,shop:r,state:n}){const s=!!t.associated_user;if((0,pF.logger)(e).info("Creating new session",{shop:r,isOnline:s}),s){let i;const l=t,{access_token:c,scope:u}=l,d=hF.__rest(l,["access_token","scope"]),h=new Date(Date.now()+l.expires_in*1e3);return e.isEmbeddedApp?i=(0,Ag.getJwtSessionId)(e)(r,`${d.associated_user.id}`):i=(0,fF.v4)(),new Pg.Session({id:i,shop:r,state:n,isOnline:s,accessToken:c,scope:u,expires:h,onlineAccessInfo:d})}else return new Pg.Session({id:(0,Ag.getOfflineId)(e)(r),shop:r,state:n,isOnline:s,accessToken:t.access_token,scope:t.scope})}di.createSession=mF;Object.defineProperty(Ya,"__esModule",{value:!0});Ya.callback=Ya.begin=void 0;const ya=ve,bS=UN,gF=lr,bF=ya.__importDefault(p0()),no=ya.__importStar(K),yF=Nt,yS=Hr,En=Pa(),vS=ct,Tg=Ch(),vF=ci,ao=kn,EF=ui,SF=is,_F=di,ES=({request:e,log:t,func:r})=>{t.debug(`Possible bot request to auth ${r}: `,{userAgent:e.headers["User-Agent"]})};function CF(e){return t=>ya.__awaiter(this,void 0,void 0,function*(){var{shop:r,callbackPath:n,isOnline:a}=t,s=ya.__rest(t,["shop","callbackPath","isOnline"]);SS(e.isCustomStoreApp,"Cannot perform OAuth for private apps");const i=(0,vS.logger)(e);i.info("Beginning OAuth",{shop:r,isOnline:a,callbackPath:n});const l=yield(0,En.abstractConvertRequest)(s),c=yield(0,En.abstractConvertIncomingResponse)(s);let u=l.headers["User-Agent"];if(Array.isArray(u)&&(u=u[0]),(0,bS.isbot)(u))return ES({request:l,log:i,func:"begin"}),c.statusCode=410,(0,En.abstractConvertResponse)(c,s);const d=new En.Cookies(l,c,{keys:[e.apiSecretKey],secure:!0}),h=(0,EF.nonce)();yield d.setAndSign(ao.STATE_COOKIE_NAME,h,{expires:new Date(Date.now()+6e4),sameSite:"lax",secure:!0,path:n});const f={client_id:e.apiKey,scope:e.scopes.toString(),redirect_uri:`${e.hostScheme}://${e.hostName}${n}`,state:h,"grant_options[]":a?"per-user":""},p=new bF.default;p.putAll(f);const b=`https://${(0,yS.sanitizeShop)(e)(r,!0)}/admin/oauth/authorize${p.stringify()}`;return c.statusCode=302,c.statusText="Found",c.headers=Object.assign(Object.assign(Object.assign({},c.headers),d.response.headers),{Location:b}),i.debug(`OAuth started, redirecting to ${b}`,{shop:r,isOnline:a}),(0,En.abstractConvertResponse)(c,s)})}Ya.begin=CF;function wF(e){return function(r){var n=ya.__rest(r,[]);return ya.__awaiter(this,void 0,void 0,function*(){SS(e.isCustomStoreApp,"Cannot perform OAuth for private apps");const a=(0,vS.logger)(e),s=yield(0,En.abstractConvertRequest)(n),i=new URL(s.url,`${e.hostScheme}://${e.hostName}`).searchParams,l=i.get("shop"),c={};let u=s.headers["User-Agent"];if(Array.isArray(u)&&(u=u[0]),(0,bS.isbot)(u))throw ES({request:s,log:a,func:"callback"}),new no.BotActivityDetected("Invalid OAuth callback initiated by bot");a.info("Completing OAuth",{shop:l});const d=new En.Cookies(s,c,{keys:[e.apiSecretKey],secure:!0}),h=yield d.getAndVerify(ao.STATE_COOKIE_NAME);if(d.deleteCookie(ao.STATE_COOKIE_NAME),!h)throw a.error("Could not find OAuth cookie",{shop:l}),new no.CookieNotFound(`Cannot complete OAuth process. Could not find an OAuth cookie for shop url: ${l}`);const f=Object.fromEntries(i.entries());if(!(yield PF({config:e,query:f,stateFromCookie:h})))throw a.error("Invalid OAuth callback",{shop:l,stateFromCookie:h}),new no.InvalidOAuthError("Invalid OAuth callback.");a.debug("OAuth request is valid, requesting access token",{shop:l});const p={client_id:e.apiKey,client_secret:e.apiSecretKey,code:i.get("code")},g=(0,yS.sanitizeShop)(e)(i.get("shop"),!0),b=yield(0,vF.fetchRequestFactory)(e)(`https://${g}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":Tg.DataType.JSON,Accept:Tg.DataType.JSON}});b.ok||(0,gF.throwFailedRequest)(yield b.json(),!1,b);const y=(0,_F.createSession)({accessTokenResponse:yield b.json(),shop:g,state:h,config:e});return e.isEmbeddedApp||(yield d.setAndSign(ao.SESSION_COOKIE_NAME,y.id,{expires:y.expires,sameSite:"lax",secure:!0,path:"/"})),{headers:yield(0,En.abstractConvertHeaders)(d.response.headers,n),session:y}})}}Ya.callback=wF;function PF({config:e,query:t,stateFromCookie:r}){return ya.__awaiter(this,void 0,void 0,function*(){return(yield(0,yF.validateHmac)(e)(t))&&(0,SF.safeCompare)(t.state,r)})}function SS(e,t){if(e)throw new no.PrivateAppError(t)}var va={};Object.defineProperty(va,"__esModule",{value:!0});va.buildEmbeddedAppUrl=va.getEmbeddedAppUrl=void 0;const Ed=ve,bu=Ed.__importStar(K),AF=Pa(),TF=Hr,RF=li;function kF(e){return t=>Ed.__awaiter(this,void 0,void 0,function*(){var r=Ed.__rest(t,[]);const n=yield(0,AF.abstractConvertRequest)(r);if(!n)throw new bu.MissingRequiredArgument("getEmbeddedAppUrl requires a request object argument");if(!n.url)throw new bu.InvalidRequestError("Request does not contain a URL");const s=new URL(n.url,`https://${n.headers.host}`).searchParams.get("host");if(typeof s!="string")throw new bu.InvalidRequestError("Request does not contain a host query parameter");return _S(e)(s)})}va.getEmbeddedAppUrl=kF;function _S(e){return t=>((0,TF.sanitizeHost)()(t,!0),`https://${(0,RF.decodeHost)(t)}/apps/${e.apiKey}`)}va.buildEmbeddedAppUrl=_S;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.tokenExchange=Ea.RequestedTokenType=void 0;const xF=ve,IF=lr,$F=ls,NF=Hr,Rg=Ch(),OF=ci,LF=di;var kg;(function(e){e.OnlineAccessToken="urn:shopify:params:oauth:token-type:online-access-token",e.OfflineAccessToken="urn:shopify:params:oauth:token-type:offline-access-token"})(kg||(Ea.RequestedTokenType=kg={}));const MF="urn:ietf:params:oauth:grant-type:token-exchange",FF="urn:ietf:params:oauth:token-type:id_token";function DF(e){return({shop:t,sessionToken:r,requestedTokenType:n})=>xF.__awaiter(this,void 0,void 0,function*(){yield(0,$F.decodeSessionToken)(e)(r);const a={client_id:e.apiKey,client_secret:e.apiSecretKey,grant_type:MF,subject_token:r,subject_token_type:FF,requested_token_type:n},s=(0,NF.sanitizeShop)(e)(t,!0),i=yield(0,OF.fetchRequestFactory)(e)(`https://${s}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":Rg.DataType.JSON,Accept:Rg.DataType.JSON}});return i.ok||(0,IF.throwFailedRequest)(yield i.json(),!1,i),{session:(0,LF.createSession)({accessTokenResponse:yield i.json(),shop:s,state:"",config:e})}})}Ea.tokenExchange=DF;Object.defineProperty(pl,"__esModule",{value:!0});pl.shopifyAuth=void 0;const xg=Ya,HF=ui,BF=is,Ig=va,WF=Ea;function UF(e){return{begin:(0,xg.begin)(e),callback:(0,xg.callback)(e),nonce:HF.nonce,safeCompare:BF.safeCompare,getEmbeddedAppUrl:(0,Ig.getEmbeddedAppUrl)(e),buildEmbeddedAppUrl:(0,Ig.buildEmbeddedAppUrl)(e),tokenExchange:(0,WF.tokenExchange)(e)}}pl.shopifyAuth=UF;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.shopifySession=void 0;const jF=ls,Wi=yr;function qF(e){return{customAppSession:(0,Wi.customAppSession)(e),getCurrentId:(0,Wi.getCurrentSessionId)(e),getOfflineId:(0,Wi.getOfflineId)(e),getJwtSessionId:(0,Wi.getJwtSessionId)(e),decodeSessionToken:(0,jF.decodeSessionToken)(e)}}Nl.shopifySession=qF;var Ol={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.versionPriorTo=Za.versionCompatible=void 0;const VF=xe;function CS(e){return(t,r=e.apiVersion)=>{if(r===VF.ApiVersion.Unstable)return!0;const n=i=>parseInt(i.replace("-",""),10),a=n(r),s=n(t);return a>=s}}Za.versionCompatible=CS;function KF(e){return(t,r=e.apiVersion)=>!CS(e)(t,r)}Za.versionPriorTo=KF;Object.defineProperty(Ol,"__esModule",{value:!0});Ol.shopifyUtils=void 0;const $g=Hr,zF=Nt,Ng=Za,Og=ba;function GF(e){return{sanitizeShop:(0,$g.sanitizeShop)(e),sanitizeHost:(0,$g.sanitizeHost)(),validateHmac:(0,zF.validateHmac)(e),versionCompatible:(0,Ng.versionCompatible)(e),versionPriorTo:(0,Ng.versionPriorTo)(e),shopAdminUrlToLegacyUrl:Og.shopAdminUrlToLegacyUrl,legacyUrlToShopAdminUrl:Og.legacyUrlToShopAdminUrl}}Ol.shopifyUtils=GF;var Ll={},ft={},Gr={},Lg;function mi(){if(Lg)return Gr;Lg=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.WebhookValidationErrorReason=Gr.WebhookOperation=Gr.DeliveryMethod=void 0;const e=os();var t;(function(n){n.Http="http",n.EventBridge="eventbridge",n.PubSub="pubsub"})(t||(Gr.DeliveryMethod=t={}));var r;return function(n){n.Create="create",n.Update="update",n.Delete="delete"}(r||(Gr.WebhookOperation=r={})),Gr.WebhookValidationErrorReason=Object.assign(Object.assign({},e.ValidationErrorReason),{MissingHeaders:"missing_headers"}),Gr}Object.defineProperty(ft,"__esModule",{value:!0});ft.addHostToCallbackUrl=ft.handlerIdentifier=ft.getHandlers=ft.getTopicsAdded=ft.addHandlers=ft.topicForStorage=ft.registry=void 0;const wS=K,JF=ct,so=mi();function XF(){return{}}ft.registry=XF;function Bh(e){return e.toUpperCase().replace(/\/|\./g,"_")}ft.topicForStorage=Bh;function YF(e,t){return function(n){for(const[a,s]of Object.entries(n)){const i=Bh(a);if(Array.isArray(s))for(const l of s)Mg(e,t,i,l);else Mg(e,t,i,s)}}}ft.addHandlers=YF;function ZF(e){return function(){return Object.keys(e)}}ft.getTopicsAdded=ZF;function QF(e){return function(r){return e[Bh(r)]||[]}}ft.getHandlers=QF;function Sd(e,t){const r=t.deliveryMethod;switch(t.deliveryMethod){case so.DeliveryMethod.Http:return`${r}_${PS(e,t.callbackUrl)}`;case so.DeliveryMethod.EventBridge:return`${r}_${t.arn}`;case so.DeliveryMethod.PubSub:return`${r}_${t.pubSubProject}:${t.pubSubTopic}`;default:throw new wS.InvalidDeliveryMethodError(`Unrecognized delivery method '${t.deliveryMethod}'`)}}ft.handlerIdentifier=Sd;function PS(e,t){return t.startsWith("/")?`${e.hostScheme}://${e.hostName}${t}`:t}ft.addHostToCallbackUrl=PS;function Mg(e,t,r,n){var a,s;const i=(0,JF.logger)(e);if((a=n.includeFields)===null||a===void 0||a.sort(),(s=n.metafieldNamespaces)===null||s===void 0||s.sort(),!(r in t)){t[r]=[n];return}const l=Sd(e,n);for(const c in t[r]){if(!Object.prototype.hasOwnProperty.call(t[r],c))continue;const u=t[r][c],d=Sd(e,u);if(l===d)if(n.deliveryMethod===so.DeliveryMethod.Http){i.info(`Detected multiple handlers for '${r}', webhooks.process will call them sequentially`);break}else throw new wS.InvalidDeliveryMethodError(`Can only add multiple handlers for a topic when deliveryMethod is Http. Please be sure that you used addHandler method once after creating ShopifyApi instance in your app.  Invalid handler: ${JSON.stringify(n)}`)}t[r].push(n)}var AS={},Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.queryTemplate=void 0;function e2(e,t){let r=e;return Object.entries(t).forEach(([n,a])=>{r=r.replace(`{{${n}}}`,a)}),r}Ml.queryTemplate=e2;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TEMPLATE_MUTATION=e.TEMPLATE_GET_HANDLERS=e.register=void 0;const t=ve,r=Fn,n=K,a=ct,s=xe,i=ft,l=Ml,c=mi();function u(C,w){return function({session:$}){return t.__awaiter(this,void 0,void 0,function*(){const N=(0,a.logger)(C);N.info("Registering webhooks",{shop:$.shop});const M=Object.keys(w).reduce((A,O)=>(A[O]=[],A),{}),k=yield d(C,$);N.debug(`Existing topics: [${Object.keys(k).join(", ")}]`,{shop:$.shop});for(const A in w)Object.prototype.hasOwnProperty.call(w,A)&&(s.privacyTopics.includes(A)||(M[A]=yield p({config:C,session:$,topic:A,existingHandlers:k[A]||[],handlers:(0,i.getHandlers)(w)(A)}),delete k[A]));for(const A in k){if(!Object.prototype.hasOwnProperty.call(k,A))continue;const O=(0,r.graphqlClientClass)({config:C}),L=new O({session:$});M[A]=yield v({config:C,client:L,topic:A,handlers:k[A],operation:c.WebhookOperation.Delete})}return M})}}e.register=u;function d(C,w){var P,$,N,M,k,A;return t.__awaiter(this,void 0,void 0,function*(){const O=(0,r.graphqlClientClass)({config:C}),L=new O({session:w}),F={};let I,D=null;do{const B=h(D),U=yield L.request(B);($=(P=U.data)===null||P===void 0?void 0:P.webhookSubscriptions)===null||$===void 0||$.edges.forEach(V=>{const W=f(V);F[V.node.topic]||(F[V.node.topic]=[]),F[V.node.topic].push(W)}),D=(M=(N=U.data)===null||N===void 0?void 0:N.webhookSubscriptions)===null||M===void 0?void 0:M.pageInfo.endCursor,I=(A=(k=U.data)===null||k===void 0?void 0:k.webhookSubscriptions)===null||A===void 0?void 0:A.pageInfo.hasNextPage}while(I);return F})}function h(C){return(0,l.queryTemplate)(e.TEMPLATE_GET_HANDLERS,{END_CURSOR:JSON.stringify(C)})}function f(C){var w,P;const $=C.node.endpoint;let N;switch($.__typename){case"WebhookHttpEndpoint":N={deliveryMethod:c.DeliveryMethod.Http,callbackUrl:$.callbackUrl,callback:()=>t.__awaiter(this,void 0,void 0,function*(){})};break;case"WebhookEventBridgeEndpoint":N={deliveryMethod:c.DeliveryMethod.EventBridge,arn:$.arn};break;case"WebhookPubSubEndpoint":N={deliveryMethod:c.DeliveryMethod.PubSub,pubSubProject:$.pubSubProject,pubSubTopic:$.pubSubTopic};break}return N.id=C.node.id,N.includeFields=C.node.includeFields,N.metafieldNamespaces=C.node.metafieldNamespaces,(w=N.includeFields)===null||w===void 0||w.sort(),(P=N.metafieldNamespaces)===null||P===void 0||P.sort(),N}function p({config:C,session:w,topic:P,existingHandlers:$,handlers:N}){return t.__awaiter(this,void 0,void 0,function*(){let M=[];const{toCreate:k,toUpdate:A,toDelete:O}=g(C,$,N),L=(0,r.graphqlClientClass)({config:C}),F=new L({session:w});let I=c.WebhookOperation.Create;return M=M.concat(yield v({config:C,client:F,topic:P,operation:I,handlers:k})),I=c.WebhookOperation.Update,M=M.concat(yield v({config:C,client:F,topic:P,operation:I,handlers:A})),I=c.WebhookOperation.Delete,M=M.concat(yield v({config:C,client:F,topic:P,operation:I,handlers:O})),M})}function g(C,w,P){const $=P.reduce((O,L)=>(O[(0,i.handlerIdentifier)(C,L)]=L,O),{}),N=w.reduce((O,L)=>(O[(0,i.handlerIdentifier)(C,L)]=L,O),{}),M=Object.assign({},$),k={},A={};for(const O in N){if(!Object.prototype.hasOwnProperty.call(N,O))continue;const L=N[O],F=$[O];O in $?(delete M[O],b(L,F)||(k[O]=F,k[O].id=L.id)):A[O]=L}return{toCreate:Object.values(M),toUpdate:Object.values(k),toDelete:Object.values(A)}}function b(C,w){const P=y(C.includeFields||[],w.includeFields||[]),$=y(C.metafieldNamespaces||[],w.metafieldNamespaces||[]);return P&&$}function y(C,w){if(C.length!==w.length)return!1;for(let P=0;P<C.length;P++)if(C[P]!==w[P])return!1;return!0}function v({config:C,client:w,topic:P,handlers:$,operation:N}){return t.__awaiter(this,void 0,void 0,function*(){const M=[];for(const k of $)M.push(yield E({config:C,client:w,topic:P,handler:k,operation:N}));return M})}function E({config:C,client:w,topic:P,handler:$,operation:N}){return t.__awaiter(this,void 0,void 0,function*(){let M;(0,a.logger)(C).debug("Running webhook mutation",{topic:P,operation:N});try{const k=S(C,P,$,N),A=yield w.request(k);M={deliveryMethod:$.deliveryMethod,success:x(A,$,N),result:A,operation:N}}catch(k){if(k instanceof n.InvalidDeliveryMethodError)M={deliveryMethod:$.deliveryMethod,success:!1,result:{message:k.message},operation:N};else throw k}return M})}function S(C,w,P,$){const N={};let M;P.id?M=`id: "${P.id}"`:M=`topic: ${w}`;const k={MUTATION_NAME:_(P,$),IDENTIFIER:M,MUTATION_PARAMS:""};if($!==c.WebhookOperation.Delete){switch(P.deliveryMethod){case c.DeliveryMethod.Http:N.callbackUrl=`"${(0,i.addHostToCallbackUrl)(C,P.callbackUrl)}"`;break;case c.DeliveryMethod.EventBridge:N.arn=`"${P.arn}"`;break;case c.DeliveryMethod.PubSub:N.pubSubProject=`"${P.pubSubProject}"`,N.pubSubTopic=`"${P.pubSubTopic}"`;break;default:throw new n.InvalidDeliveryMethodError(`Unrecognized delivery method '${P.deliveryMethod}'`)}if(P.includeFields&&(N.includeFields=JSON.stringify(P.includeFields)),P.metafieldNamespaces&&(N.metafieldNamespaces=JSON.stringify(P.metafieldNamespaces)),P.subTopic){const O=`subTopic: "${P.subTopic}",`;k.MUTATION_PARAMS=O}const A=Object.entries(N).map(([O,L])=>`${O}: ${L}`).join(", ");k.MUTATION_PARAMS+=`webhookSubscription: {${A}}`}return(0,l.queryTemplate)(e.TEMPLATE_MUTATION,k)}function _(C,w){switch(w){case c.WebhookOperation.Create:return`${R(C)}Create`;case c.WebhookOperation.Update:return`${R(C)}Update`;case c.WebhookOperation.Delete:return"webhookSubscriptionDelete";default:throw new n.ShopifyError(`Unrecognized operation '${w}'`)}}function R(C){switch(C.deliveryMethod){case c.DeliveryMethod.Http:return"webhookSubscription";case c.DeliveryMethod.EventBridge:return"eventBridgeWebhookSubscription";case c.DeliveryMethod.PubSub:return"pubSubWebhookSubscription";default:throw new n.ShopifyError(`Unrecognized delivery method '${C.deliveryMethod}'`)}}function x(C,w,P){const $=_(w,P);return!!(C.data&&C.data[$]&&C.data[$].userErrors.length===0)}e.TEMPLATE_GET_HANDLERS=`query shopifyApiReadWebhookSubscriptions {
  webhookSubscriptions(
    first: 250,
    after: {{END_CURSOR}},
  ) {
    edges {
      node {
        id
        topic
        includeFields
        metafieldNamespaces
        endpoint {
          __typename
          ... on WebhookHttpEndpoint {
            callbackUrl
          }
          ... on WebhookEventBridgeEndpoint {
            arn
          }
          ... on WebhookPubSubEndpoint {
            pubSubProject
            pubSubTopic
          }
        }
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}`,e.TEMPLATE_MUTATION=`
  mutation shopifyApiCreateWebhookSubscription {
    {{MUTATION_NAME}}(
      {{IDENTIFIER}},
      {{MUTATION_PARAMS}}
    ) {
      userErrors {
        field
        message
      }
    }
  }
`})(AS);var Fl={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.validateFactory=void 0;const Fg=ve,t2=ct,r2=Nt,yu=os(),TS=Pa(),ia=xe,RS=mi(),n2=ft,kS={subTopic:ia.ShopifyHeader.SubTopic},a2=Object.assign({apiVersion:ia.ShopifyHeader.ApiVersion,domain:ia.ShopifyHeader.Domain,hmac:ia.ShopifyHeader.Hmac,topic:ia.ShopifyHeader.Topic,webhookId:ia.ShopifyHeader.WebhookId},kS);function s2(e){return function(r){var{rawBody:n}=r,a=Fg.__rest(r,["rawBody"]);return Fg.__awaiter(this,void 0,void 0,function*(){const s=yield(0,TS.abstractConvertRequest)(a),i=yield(0,r2.validateHmacFromRequestFactory)(e)(Object.assign({type:yu.HmacValidationType.Webhook,rawBody:n},a));return i.valid?i2(s.headers):i.reason===yu.ValidationErrorReason.MissingHmac?{valid:!1,reason:RS.WebhookValidationErrorReason.MissingHeaders,missingHeaders:[ia.ShopifyHeader.Hmac]}:(i.reason===yu.ValidationErrorReason.InvalidHmac&&(yield(0,t2.logger)(e).debug("Webhook HMAC validation failed. Please note that events manually triggered from a store's Notifications settings will fail this validation. To test this, please use the CLI or trigger the actual event in a development store.")),i)})}}gi.validateFactory=s2;function i2(e){const t=[],n=Object.entries(a2).reduce((a,[s,i])=>{const l=(0,TS.getHeader)(e,i);return l?a[s]=l:s in kS||t.push(i),a},{});return t.length?{valid:!1,reason:RS.WebhookValidationErrorReason.MissingHeaders,missingHeaders:t}:Object.assign(Object.assign(Object.assign({valid:!0},n),n.subTopic?{subTopic:n.subTopic}:{}),{topic:(0,n2.topicForStorage)(n.topic)})}Object.defineProperty(Fl,"__esModule",{value:!0});Fl.process=void 0;const Qa=ve,Dt=Sh,vu=Pa(),xS=Qa.__importStar(K),Wh=ct,io=mi(),o2=gi,Dg={[Dt.StatusCode.Ok]:"OK",[Dt.StatusCode.BadRequest]:"Bad Request",[Dt.StatusCode.Unauthorized]:"Unauthorized",[Dt.StatusCode.NotFound]:"Not Found",[Dt.StatusCode.InternalServerError]:"Internal Server Error"};function l2(e,t){return function(n){var{context:a,rawBody:s}=n,i=Qa.__rest(n,["context","rawBody"]);return Qa.__awaiter(this,void 0,void 0,function*(){const l={statusCode:Dt.StatusCode.Ok,statusText:Dg[Dt.StatusCode.Ok],headers:{}};yield(0,Wh.logger)(e).info("Receiving webhook request");const c=yield(0,o2.validateFactory)(e)(Object.assign({rawBody:s},i));let u="Unknown error while handling webhook";if(c.valid){const h=yield c2(e,t,c,s,a);l.statusCode=h.statusCode,(0,vu.isOK)(l)||(u=h.errorMessage||u)}else{const h=yield u2(e,c);l.statusCode=h.statusCode,l.statusText=Dg[l.statusCode],u=h.errorMessage}const d=yield(0,vu.abstractConvertResponse)(l,i);if(!(0,vu.isOK)(l))throw new xS.InvalidWebhookError({message:u,response:d});return Promise.resolve(d)})}}Fl.process=l2;function c2(e,t,r,n,a){return Qa.__awaiter(this,void 0,void 0,function*(){const s=(0,Wh.logger)(e),i=Qa.__rest(r,["hmac","valid"]);yield s.debug("Webhook request is valid, looking for HTTP handlers to call",i);const l=t[r.topic]||[],c={statusCode:Dt.StatusCode.Ok};let u=!1;for(const d of l)if(d.deliveryMethod===io.DeliveryMethod.Http){if(!d.callback)throw c.statusCode=Dt.StatusCode.InternalServerError,c.errorMessage="Cannot call webhooks.process with a webhook handler that doesn't have a callback",new xS.MissingWebhookCallbackError({message:c.errorMessage,response:c});u=!0,yield s.debug("Found HTTP handler, triggering it",i);try{yield d.callback(r.topic,r.domain,n,r.webhookId,r.apiVersion,...r!=null&&r.subTopic?r.subTopic:"",a)}catch(h){c.statusCode=Dt.StatusCode.InternalServerError,c.errorMessage=h.message}}return u||(yield s.debug("No HTTP handlers found",i),c.statusCode=Dt.StatusCode.NotFound,c.errorMessage=`No HTTP webhooks registered for topic ${r.topic}`),c})}function u2(e,t){return Qa.__awaiter(this,void 0,void 0,function*(){const r={statusCode:Dt.StatusCode.InternalServerError,errorMessage:"Unknown error while handling webhook"};switch(t.reason){case io.WebhookValidationErrorReason.MissingHeaders:r.statusCode=Dt.StatusCode.BadRequest,r.errorMessage=`Missing one or more of the required HTTP headers to process webhooks: [${t.missingHeaders.join(", ")}]`;break;case io.WebhookValidationErrorReason.MissingBody:r.statusCode=Dt.StatusCode.BadRequest,r.errorMessage="No body was received when processing webhook";break;case io.WebhookValidationErrorReason.InvalidHmac:r.statusCode=Dt.StatusCode.Unauthorized,r.errorMessage="Could not validate request HMAC";break}return yield(0,Wh.logger)(e).debug(`Webhook request is invalid, returning ${r.statusCode}: ${r.errorMessage}`),r})}Object.defineProperty(Ll,"__esModule",{value:!0});Ll.shopifyWebhooks=void 0;const Ui=ft,d2=AS,h2=Fl,f2=gi;function p2(e){const t=(0,Ui.registry)();return{addHandlers:(0,Ui.addHandlers)(e,t),getTopicsAdded:(0,Ui.getTopicsAdded)(t),getHandlers:(0,Ui.getHandlers)(t),register:(0,d2.register)(e,t),process:(0,h2.process)(e,t),validate:(0,f2.validateFactory)(e)}}Ll.shopifyWebhooks=p2;var Dl={},Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.check=void 0;const IS=ve,m2=Fn,g2=K;function b2(e){return function({session:r,plans:n,isTest:a=!0,returnObject:s=!1}){return IS.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new g2.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});const i=(0,m2.graphqlClientClass)({config:e}),l=new i({session:r}),c=Array.isArray(n)?n:[n];return y2({plans:c,client:l,isTest:a,returnObject:s})})}}Hl.check=b2;function y2({plans:e,client:t,isTest:r,returnObject:n}){var a;return IS.__awaiter(this,void 0,void 0,function*(){const s=n?{hasActivePayment:!1,oneTimePurchases:[],appSubscriptions:[]}:!1;let i,l=null;do{if(i=(a=(yield t.request(S2,{variables:{endCursor:l}})).data)===null||a===void 0?void 0:a.currentAppInstallation,n)i.activeSubscriptions.map(u=>{$S({plans:e,isTest:r,subscription:u})&&(s.hasActivePayment=!0,s.appSubscriptions.push(u))}),i.oneTimePurchases.edges.map(u=>{NS({plans:e,isTest:r,purchase:u.node})&&(s.hasActivePayment=!0,s.oneTimePurchases.push(u.node))});else{const u={plans:e,isTest:r,installation:i};if(v2(u)||E2(u))return!0}l=i.oneTimePurchases.pageInfo.endCursor}while(i!=null&&i.oneTimePurchases.pageInfo.hasNextPage);return s})}function $S({plans:e,isTest:t,subscription:r}){return e.includes(r.name)&&(t||!r.test)}function NS({plans:e,isTest:t,purchase:r}){return e.includes(r.name)&&(t||!r.test)&&r.status==="ACTIVE"}function v2({plans:e,isTest:t,installation:r}){return r.activeSubscriptions.some(n=>$S({plans:e,isTest:t,subscription:n}))}function E2({plans:e,isTest:t,installation:r}){return r.oneTimePurchases.edges.some(n=>NS({plans:e,isTest:t,purchase:n.node}))}const S2=`
  query appSubscription($endCursor: String) {
    currentAppInstallation {
      activeSubscriptions {
        id
        name
        test
        lineItems {
          id
          plan {
            pricingDetails {
              ... on AppRecurringPricing {
                price {
                  amount
                  currencyCode
                }
                interval
                discount {
                  durationLimitInIntervals
                  remainingDurationInIntervals
                  priceAfterDiscount {
                    amount
                  }
                  value {
                    ... on AppSubscriptionDiscountAmount {
                      amount {
                        amount
                        currencyCode
                      }
                    }
                    ... on AppSubscriptionDiscountPercentage {
                      percentage
                    }
                  }
                }
              }
              ... on AppUsagePricing {
                balanceUsed {
                  amount
                  currencyCode
                }
                cappedAmount {
                  amount
                  currencyCode
                }
                terms
              }
            }
          }
        }
      }
      oneTimePurchases(first: 250, sortKey: CREATED_AT, after: $endCursor) {
        edges {
          node {
            id
            name
            test
            status
          }
        }
        pageInfo {
          hasNextPage
          endCursor
        }
      }
    }
  }
`;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.request=void 0;const es=ve,Us=xe,Sa=K,_2=va,C2=Fn,w2=nl(),P2=rl();function A2(e){return function(t){var r,{session:n,plan:a,isTest:s=!0,returnUrl:i,returnObject:l=!1}=t,c=es.__rest(t,["session","plan","isTest","returnUrl","returnObject"]);return es.__awaiter(this,void 0,void 0,function*(){if(!e.billing||!e.billing[a])throw new Sa.BillingError({message:`Could not find plan ${a} in billing settings`,errorData:[]});const u=Object.assign({},e.billing[a]),d=Object.fromEntries(Object.entries(c).filter(([_,R])=>R!==void 0)),h=n.shop.replace(".myshopify.com",""),f=(0,_2.buildEmbeddedAppUrl)(e)((0,w2.hashString)(`admin.shopify.com/store/${h}`,P2.HashFormat.Base64)),p=`${e.hostScheme}://${e.hostName}?shop=${n.shop}`,g=i||(e.isEmbeddedApp?f:p),b=(0,C2.graphqlClientClass)({config:e}),y=new b({session:n});function v(_){return"lineItems"in _}function E(_){return _.interval===Us.BillingInterval.OneTime}let S;if(v(u)){const _=I2(u,d);S=(yield T2({billingConfig:_,plan:a,client:y,returnUrl:g,isTest:s})).appSubscriptionCreate}else if(E(u))S=(yield x2({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:y,returnUrl:g,isTest:s})).appPurchaseOneTimeCreate;else switch(u.interval){case Us.BillingInterval.Usage:{S=(yield k2({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:y,returnUrl:g,isTest:s})).appSubscriptionCreate;break}default:S=(yield R2({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:y,returnUrl:g,isTest:s})).appSubscriptionCreate}if(!((r=S.userErrors)===null||r===void 0)&&r.length)throw new Sa.BillingError({message:"Error while billing the store",errorData:S.userErrors});return l?S:S.confirmationUrl})}}Bl.request=A2;function T2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return es.__awaiter(this,void 0,void 0,function*(){const s=e.lineItems.map(l=>{if(l.interval===Us.BillingInterval.Every30Days||l.interval===Us.BillingInterval.Annual){const c={interval:l.interval,price:{amount:l.amount,currencyCode:l.currencyCode}};return l.discount&&(c.discount={durationLimitInIntervals:l.discount.durationLimitInIntervals,value:{amount:l.discount.value.amount,percentage:l.discount.value.percentage}}),{plan:{appRecurringPricingDetails:c}}}else{if(l.interval===Us.BillingInterval.Usage)return{plan:{appUsagePricingDetails:{terms:l.terms,cappedAmount:{amount:l.amount,currencyCode:l.currencyCode}}}};throw new Sa.BillingError({message:"Invalid interval provided",errorData:[l]})}}),i=yield r.request(Uh,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:n,test:a,lineItems:s}});if(i.errors)throw new Sa.BillingError({message:"Error while billing the store",errorData:i.errors});return i.data})}function R2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){var s,i,l,c,u;return es.__awaiter(this,void 0,void 0,function*(){const d=yield r.request(Uh,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:n,test:a,lineItems:[{plan:{appRecurringPricingDetails:{interval:e.interval,price:{amount:e.amount,currencyCode:e.currencyCode},discount:{durationLimitInIntervals:(s=e.discount)===null||s===void 0?void 0:s.durationLimitInIntervals,value:{amount:(l=(i=e.discount)===null||i===void 0?void 0:i.value)===null||l===void 0?void 0:l.amount,percentage:(u=(c=e.discount)===null||c===void 0?void 0:c.value)===null||u===void 0?void 0:u.percentage}}}}}]}});if(d.errors)throw new Sa.BillingError({message:"Error while billing the store",errorData:d.errors});return d.data})}function k2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return es.__awaiter(this,void 0,void 0,function*(){const s=yield r.request(Uh,{variables:{name:t,returnUrl:n,test:a,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,lineItems:[{plan:{appUsagePricingDetails:{terms:e.usageTerms,cappedAmount:{amount:e.amount,currencyCode:e.currencyCode}}}}]}});if(s.errors)throw new Sa.BillingError({message:`Error while billing the store:: ${s.errors}`,errorData:s.errors});return s.data})}function x2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return es.__awaiter(this,void 0,void 0,function*(){const s=yield r.request($2,{variables:{name:t,returnUrl:n,test:a,price:{amount:e.amount,currencyCode:e.currencyCode}}});if(s.errors)throw new Sa.BillingError({message:"Error while billing the store",errorData:s.errors});return s.data})}function I2(e,t){const r=Object.assign(Object.assign({},e),t),n=[];if(e.lineItems&&t.lineItems){for(const a of e.lineItems){let s=!1;for(const i of t.lineItems)if(a.interval===i.interval){n.push(Object.assign(Object.assign({},a),i)),s=!0;break}s||n.push(a)}r.lineItems=n}return r}const Uh=`
  mutation test(
    $name: String!
    $lineItems: [AppSubscriptionLineItemInput!]!
    $returnUrl: URL!
    $test: Boolean
    $trialDays: Int
    $replacementBehavior: AppSubscriptionReplacementBehavior
  ) {
    appSubscriptionCreate(
      name: $name
      lineItems: $lineItems
      returnUrl: $returnUrl
      test: $test
      trialDays: $trialDays
      replacementBehavior: $replacementBehavior
    ) {
      appSubscription {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`,$2=`
  mutation test(
    $name: String!
    $price: MoneyInput!
    $returnUrl: URL!
    $test: Boolean
  ) {
    appPurchaseOneTimeCreate(
      name: $name
      price: $price
      returnUrl: $returnUrl
      test: $test
    ) {
      appPurchaseOneTime {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`;var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.cancel=void 0;const N2=ve,O2=Fn,Eu=K,L2=`
  mutation appSubscriptionCancel($id: ID!, $prorate: Boolean) {
    appSubscriptionCancel(id: $id, prorate: $prorate) {
      appSubscription {
        id
        name
        test
      }
      userErrors {
        field
        message
      }
    }
  }
`;function M2(e){return function(t){var r,n,a,s,i,l,c;return N2.__awaiter(this,void 0,void 0,function*(){const{session:u,subscriptionId:d,prorate:h=!0}=t,f=(0,O2.graphqlClientClass)({config:e}),p=new f({session:u});try{const g=yield p.request(L2,{variables:{id:d,prorate:h}});if(!((n=(r=g.data)===null||r===void 0?void 0:r.appSubscriptionCancel)===null||n===void 0)&&n.userErrors.length)throw new Eu.BillingError({message:"Error while canceling a subscription",errorData:(s=(a=g.data)===null||a===void 0?void 0:a.appSubscriptionCancel)===null||s===void 0?void 0:s.userErrors});return(l=(i=g.data)===null||i===void 0?void 0:i.appSubscriptionCancel)===null||l===void 0?void 0:l.appSubscription}catch(g){throw g instanceof Eu.GraphqlQueryError?new Eu.BillingError({message:g.message,errorData:(c=g.response)===null||c===void 0?void 0:c.errors}):g}})}}Wl.cancel=M2;var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.subscriptions=void 0;const F2=ve,D2=K,H2=Fn,B2=`
query appSubscription {
  currentAppInstallation {
    activeSubscriptions {
      id
      name
      test
      lineItems {
        id
        plan {
          pricingDetails {
            ... on AppRecurringPricing {
              price {
                amount
                currencyCode
              }
              interval
              discount {
                durationLimitInIntervals
                remainingDurationInIntervals
                priceAfterDiscount {
                  amount
                }
                value {
                  ... on AppSubscriptionDiscountAmount {
                    amount {
                      amount
                      currencyCode
                    }
                  }
                  ... on AppSubscriptionDiscountPercentage {
                    percentage
                  }
                }
              }
            }
            ... on AppUsagePricing {
              balanceUsed {
                amount
                currencyCode
              }
              cappedAmount {
                amount
                currencyCode
              }
              terms
            }
          }
        }
      }
    }
  }
}
`;function W2(e){return function({session:t}){var r;return F2.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new D2.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});const n=(0,H2.graphqlClientClass)({config:e});return(r=(yield new n({session:t}).request(B2)).data)===null||r===void 0?void 0:r.currentAppInstallation})}}Ul.subscriptions=W2;Object.defineProperty(Dl,"__esModule",{value:!0});Dl.shopifyBilling=void 0;const U2=Hl,j2=Bl,q2=Wl,V2=Ul;function K2(e){return{check:(0,U2.check)(e),request:(0,j2.request)(e),cancel:(0,q2.cancel)(e),subscriptions:(0,V2.subscriptions)(e)}}Dl.shopifyBilling=K2;var jl={},ql={};Object.defineProperty(ql,"__esModule",{value:!0});ql.validateFactory=void 0;const Hg=ve,z2=os(),G2=Nt;function J2(e){return function(r){var{rawBody:n}=r,a=Hg.__rest(r,["rawBody"]);return Hg.__awaiter(this,void 0,void 0,function*(){return(0,G2.validateHmacFromRequestFactory)(e)(Object.assign({type:z2.HmacValidationType.Flow,rawBody:n},a))})}}ql.validateFactory=J2;Object.defineProperty(jl,"__esModule",{value:!0});jl.shopifyFlow=void 0;const X2=ql;function Y2(e){return{validate:(0,X2.validateFactory)(e)}}jl.shopifyFlow=Y2;var Vl={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.validateFactory=void 0;const Bg=ve,Z2=Nt,Q2=os();function eD(e){return function(r){var{rawBody:n}=r,a=Bg.__rest(r,["rawBody"]);return Bg.__awaiter(this,void 0,void 0,function*(){return(0,Z2.validateHmacFromRequestFactory)(e)(Object.assign({type:Q2.HmacValidationType.FulfillmentService,rawBody:n},a))})}}Kl.validateFactory=eD;Object.defineProperty(Vl,"__esModule",{value:!0});Vl.fulfillmentService=void 0;const tD=Kl;function rD(e){return{validate:(0,tD.validateFactory)(e)}}Vl.fulfillmentService=rD;var Su={},Wg;function nD(){return Wg||(Wg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var t=wh();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return t.Session}})}(Su)),Su}var _u={},Ug;function aD(){return Ug||(Ug=1,Object.defineProperty(_u,"__esModule",{value:!0})),_u}var Cu={},jg;function sD(){return jg||(jg=1,Object.defineProperty(Cu,"__esModule",{value:!0})),Cu}var wu={},qg;function iD(){return qg||(qg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequestedTokenType=void 0,ve.__exportStar(kn,e);var r=Ea;Object.defineProperty(e,"RequestedTokenType",{enumerable:!0,get:function(){return r.RequestedTokenType}})}(wu)),wu}var Pu={},Vg;function oD(){return Vg||(Vg=1,Object.defineProperty(Pu,"__esModule",{value:!0})),Pu}var Au={},Kg;function lD(){return Kg||(Kg=1,Object.defineProperty(Au,"__esModule",{value:!0})),Au}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shopifyApi=void 0;const t=ve,r=sl,n=vh,a=ol,s=ll,i=cl,l=pl,c=Nl,u=Ol,d=Ll,h=Dl,f=ct,p=ns,g=ga,b=jl,y=Vl;t.__exportStar(K,e),t.__exportStar(nD(),e),t.__exportStar(aD(),e),t.__exportStar(xe,e),t.__exportStar(sD(),e),t.__exportStar(iD(),e),t.__exportStar(oD(),e),t.__exportStar(Ch(),e),t.__exportStar(lD(),e),t.__exportStar(mi(),e),t.__exportStar(os(),e);function v(E){var{future:S,restResources:_}=E,R=t.__rest(E,["future","restResources"]);const x=Object.assign(Object.assign({},R),{future:S,restResources:_}),C=(0,s.validateConfig)(x),w={config:C,clients:(0,i.clientClasses)(C),auth:(0,l.shopifyAuth)(C),session:(0,c.shopifySession)(C),utils:(0,u.shopifyUtils)(C),webhooks:(0,d.shopifyWebhooks)(C),billing:(0,h.shopifyBilling)(C),flow:(0,b.shopifyFlow)(C),fulfillmentService:(0,y.fulfillmentService)(C),logger:(0,f.logger)(C),rest:{}};return _&&(w.rest=(0,r.loadRestResources)({resources:_,config:C,RestClient:(0,g.restClientClass)({config:C})})),w.logger.info(`version ${p.SHOPIFY_API_LIBRARY_VERSION}, environment ${(0,n.abstractRuntimeString)()}`).catch(P=>console.log(P)),(0,a.logDisabledFutureFlags)(C,w.logger),w}e.shopifyApi=v})(Ut);var cs={};Object.defineProperty(cs,"__esModule",{value:!0});let cD=function(e){return e.AppStore="app_store",e.SingleMerchant="single_merchant",e.ShopifyAdmin="shopify_admin",e}({}),uD=function(e){return e.MissingShop="MISSING_SHOP",e.InvalidShop="INVALID_SHOP",e}({});cs.AppDistribution=cD;cs.LoginErrorType=uD;var jh={},qh={};Object.defineProperty(qh,"__esModule",{value:!0});function dD(e){const{parentHeaders:t,loaderHeaders:r,actionHeaders:n,errorHeaders:a}=e;return a&&Array.from(a.entries()).length>0?a:new Headers([...t?Array.from(t.entries()):[],...r?Array.from(r.entries()):[],...n?Array.from(n.entries()):[]])}qh.headersBoundary=dD;var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});var hD=gr;function fD(e){if(e.constructor.name==="ErrorResponse"||e.constructor.name==="ErrorResponseImpl")return hD.jsx("div",{dangerouslySetInnerHTML:{__html:e.data||"Handling response"}});throw e}Vh.errorBoundary=fD;Object.defineProperty(jh,"__esModule",{value:!0});var pD=qh,mD=Vh;const gD={error:mD.errorBoundary,headers:pD.headersBoundary};jh.boundary=gD;var Kh={},zl={};Object.defineProperty(zl,"__esModule",{value:!0});const bD="2.8.0";zl.SHOPIFY_REMIX_LIBRARY_VERSION=bD;var zh={};Object.defineProperty(zh,"__esModule",{value:!0});function yD({api:e,logger:t}){return async function({session:n}){return e.webhooks.register({session:n}).then(a=>(Object.entries(a).forEach(([s,i])=>{i.forEach(({success:l,...c})=>{l?t.debug("Registered webhook",{topic:s,shop:n.shop,operation:c.operation}):t.error("Failed to register webhook",{topic:s,shop:n.shop,result:JSON.stringify(c.result)})})}),a)).catch(a=>{var s,i;if((((s=a.body)===null||s===void 0||(i=s.errors)===null||i===void 0?void 0:i.graphQLErrors)||[]).find(({extensions:{code:u}})=>u==="THROTTLED"))t.error("Failed to register webhooks",{shop:n.shop,error:JSON.stringify(a)});else throw a})}}zh.registerWebhooksFactory=yD;var Gh={},bi={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const vD="https://cdn.shopify.com/shopifycloud/app-bridge.js",ED="X-Shopify-API-Request-Failure-Reauthorize-Url",SD={"X-Shopify-Retry-Invalid-Session-Request":"1"};Hn.APP_BRIDGE_URL=vD;Hn.REAUTH_URL_HEADER=ED;Hn.RETRY_INVALID_SESSION_HEADER=SD;Object.defineProperty(bi,"__esModule",{value:!0});var _D=Hn;function CD(e,t,r=[]){const{logger:n,config:a}=e;return function(i){const l=t.headers.get("Origin");if(l&&l!==a.appUrl){n.debug("Request comes from a different origin, adding CORS headers");const c=new Set(["Authorization","Content-Type",...r]);i.headers.set("Access-Control-Allow-Origin","*"),i.headers.set("Access-Control-Allow-Headers",[...c].join(", ")),i.headers.set("Access-Control-Expose-Headers",_D.REAUTH_URL_HEADER)}return i}}bi.ensureCORSHeadersFactory=CD;var Gl={},Jl={},Xl={};const Ta=$n(SA);Object.defineProperty(Xl,"__esModule",{value:!0});var wD=Ta;const PD=(e,t)=>{const{config:r}=e,n=t.searchParams;throw n.delete("id_token"),n.set("shopify-reload",`${r.appUrl}${t.pathname}?${n.toString()}`),wD.redirect(`${r.auth.patchSessionTokenPath}?${n.toString()}`)};Xl.redirectToBouncePage=PD;Object.defineProperty(Jl,"__esModule",{value:!0});var AD=Xl,TD=Hn;function RD({params:e,request:t,retryRequest:r=!1}){const{api:n,logger:a,config:s}=e;if(!t.headers.get("authorization"))return AD.redirectToBouncePage({api:n,logger:a,config:s},new URL(t.url));throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:r?TD.RETRY_INVALID_SESSION_HEADER:{}})}Jl.respondToInvalidSessionToken=RD;Object.defineProperty(Gl,"__esModule",{value:!0});var kD=Jl;async function xD(e,t,r,{checkAudience:n=!0}={}){const{api:a,logger:s}=e;s.debug("Validating session token");try{const i=await a.session.decodeSessionToken(r,{checkAudience:n});return s.debug("Session token is valid",{payload:JSON.stringify(i)}),i}catch(i){throw s.debug(`Failed to validate session token: ${i.message}`),kD.respondToInvalidSessionToken({params:e,request:t,retryRequest:!0})}}Gl.validateSessionToken=xD;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});const ID="id_token";function $D(e){var t;return(t=e.headers.get("authorization"))===null||t===void 0?void 0:t.replace("Bearer ","")}function ND(e){return new URL(e.url).searchParams.get(ID)}Ra.getSessionTokenFromUrlParam=ND;Ra.getSessionTokenHeader=$D;var Yl={};function OD(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function LD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OS(e){var t=LD(e,"string");return typeof t=="symbol"?t:String(t)}function MD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OS(n.key),n)}}function FD(e,t,r){return t&&zg(e.prototype,t),r&&zg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gg(e,t,r){return t=OS(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LS(e,t){return DD(e)||OD(e,t)||HD(e,t)||BD()}function DD(e){if(Array.isArray(e))return e}function HD(e,t){if(e){if(typeof e=="string")return Jg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jg(e,t)}}function Jg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Or(e,t){var r=FS(e,t,"get");return WD(e,r)}function MS(e,t,r){var n=FS(e,t,"set");return UD(e,n,r),r}function FS(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function WD(e,t){return t.get?t.get.call(e):t.value}function UD(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function Rs(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function DS(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xg(e,t,r){DS(e,t),t.set(e,r)}function Yg(e,t){DS(e,t),t.add(e)}var HS=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(\\)]+(/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?)?$","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^anonymous","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^btwebclient/","^castro","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^lwp[-: ]","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^offline explorer","^php","^postman","^postrank","^python","^read","^reed","^restsharp/","^snapchat","^space bison","^svn","^swcd ","^taringa","^test certificate info","^thumbor/","^tumblr/","^user-agent:mozilla","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java","library","mail\\.ru/","manager","monitor","morningscore/","neustar wpm","nutch","offbyone","optimize","pageburst","pagespeed","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","rexx;","rigor","rss","scan","scrape","search","serp ?reputation ?management","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];function jD(e){try{new RegExp("(?<! cu)bot").test("dangerbot")}catch{return e}return[["bot","(?<! cu)bot"],["google","(?<! (?:channel/|google/))google(?!(app|/google| pixel))"],["http","(?<!(?:lib))http"],["java","java(?!;)"],["search","(?<! ya(?:yandex)?)search"]].forEach(function(t){var r=LS(t,2),n=r[0],a=r[1],s=e.lastIndexOf(n);~s&&e.splice(s,1,a)}),e}jD(HS);var BS="i",vn=new WeakMap,Ba=new WeakMap,ji=new WeakSet,Tu=new WeakSet,qD=function(){function e(t){var r=this;MD(this,e),Yg(this,Tu),Yg(this,ji),Xg(this,vn,{writable:!0,value:void 0}),Xg(this,Ba,{writable:!0,value:void 0}),MS(this,vn,t||HS.slice()),Rs(this,ji,Ru).call(this);var n=function(s){return r.test(s)};return Object.defineProperties(n,Object.entries(Object.getOwnPropertyDescriptors(e.prototype)).reduce(function(a,s){var i=LS(s,2),l=i[0],c=i[1];return typeof c.value=="function"&&Object.assign(a,Gg({},l,{value:r[l].bind(r)})),typeof c.get=="function"&&Object.assign(a,Gg({},l,{get:function(){return r[l]}})),a},{}))}return FD(e,[{key:"pattern",get:function(){return new RegExp(Or(this,Ba))}},{key:"test",value:function(r){return!!r&&Or(this,Ba).test(r)}},{key:"isbot",value:function(r){return!!r&&Or(this,Ba).test(r)}},{key:"find",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=r.match(Or(this,Ba));return n&&n[0]}},{key:"matches",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Or(this,vn).filter(function(n){return new RegExp(n,BS).test(r)})}},{key:"clear",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.exclude(this.matches(r))}},{key:"extend",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];[].push.apply(Or(this,vn),n.filter(function(a){return Rs(r,Tu,Zg).call(r,a)===-1}).map(function(a){return a.toLowerCase()})),Rs(this,ji,Ru).call(this)}},{key:"exclude",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=r.length;n--;){var a=Rs(this,Tu,Zg).call(this,r[n]);a>-1&&Or(this,vn).splice(a,1)}Rs(this,ji,Ru).call(this)}},{key:"spawn",value:function(r){return new e(r||Or(this,vn))}}]),e}();function Ru(){MS(this,Ba,new RegExp(Or(this,vn).join("|"),BS))}function Zg(e){return Or(this,vn).indexOf(e.toLowerCase())}var VD=new qD,KD=VD;Object.defineProperty(Yl,"__esModule",{value:!0});var zD=KD;function GD(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var JD=GD(zD);function XD({logger:e},t){if(JD.default(t.headers.get("User-Agent")))throw e.debug("Request is from a bot, skipping auth"),new Response(void 0,{status:410,statusText:"Gone"})}Yl.respondToBotRequest=XD;var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});var YD=bi;function ZD(e,t,r){if(t.method==="OPTIONS")throw YD.ensureCORSHeadersFactory(e,t,r)(new Response(null,{status:204,headers:{"Access-Control-Max-Age":"7200"}}))}Zl.respondToOptionsRequest=ZD;var Jh={},ka={},Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});async function QD(e,t,r,n){const{api:a,config:s}=e;throw await a.auth.begin({shop:n,callbackPath:s.auth.callbackPath,isOnline:r,rawRequest:t})}Ql.beginAuth=QD;var ec={};Object.defineProperty(ec,"__esModule",{value:!0});var eH=Ta;function tH(e,t,r){const{api:n,config:a}=e,i=new URL(t.url).searchParams,l=n.utils.sanitizeHost(i.get("host"));i.set("shop",r);let c=`${a.auth.path}?shop=${r}`;throw l&&(i.set("host",l),c=`${c}&host=${l}`),i.set("exitIframe",c),eH.redirect(`${a.auth.exitIframePath}?${i.toString()}`)}ec.redirectWithExitIframe=tH;var us={};Object.defineProperty(us,"__esModule",{value:!0});var rH=Hn;function nH(e){throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:WS(e)})}function WS(e){return new Headers({[rH.REAUTH_URL_HEADER]:e})}us.getAppBridgeHeaders=WS;us.redirectWithAppBridgeHeaders=nH;Object.defineProperty(ka,"__esModule",{value:!0});var aH=Ql,sH=ec,iH=us;async function oH(e,t,r,n=!1){const{config:a}=e,i=new URL(t.url).searchParams.get("embedded")==="1";if(t.headers.get("authorization")){const c=new URL(a.auth.path,a.appUrl);c.searchParams.set("shop",r),iH.redirectWithAppBridgeHeaders(c.toString())}else if(i)sH.redirectWithExitIframe(e,t,r);else throw await aH.beginAuth(e,t,n,r)}ka.redirectToAuthPage=oH;Object.defineProperty(Jh,"__esModule",{value:!0});var lH=Ut,cH=ka;function uH(e,t,r){return async function(a){const{api:s,logger:i,config:l}=e;i.debug("Cancelling billing",{shop:r.shop,...a});try{return await s.billing.cancel({session:r,subscriptionId:a.subscriptionId,isTest:a.isTest,prorate:a.prorate})}catch(c){throw c instanceof lH.HttpResponseError&&c.response.code===401?(i.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await l.sessionStorage.deleteSession(r.id),await cH.redirectToAuthPage(e,t,r.shop)):c}}}Jh.cancelBillingFactory=uH;var Xh={};Object.defineProperty(Xh,"__esModule",{value:!0});var dH=Ut,hH=ka;function fH(e,t,r){const{api:n,logger:a,config:s}=e;return async function(l){const c={shop:r.shop,plans:l.plans,isTest:l.isTest};a.debug("Checking billing for the shop",c);let u;try{u=await n.billing.check({session:r,plans:l.plans,isTest:l.isTest,returnObject:!0})}catch(d){throw d instanceof dH.HttpResponseError&&d.response.code===401?(a.debug("API token was invalid, redirecting to OAuth",c),await s.sessionStorage.deleteSession(r.id),await hH.redirectToAuthPage(e,t,r.shop)):d}if(!u.hasActivePayment)throw a.debug("Billing check failed",c),await l.onFailure(new Error("Billing check failed"));return a.debug("Billing check succeeded",c),u}}Xh.requireBillingFactory=fH;var Yh={};Object.defineProperty(Yh,"__esModule",{value:!0});var pH=Ut,Qg=Ta,mH=ka,gH=us;function bH(e,t,r){return async function({plan:a,isTest:s,returnUrl:i,...l}){const{api:c,logger:u,config:d}=e;u.info("Requesting billing",{shop:r.shop,plan:a,isTest:s,returnUrl:i});let h;try{h=await c.billing.request({plan:a,session:r,isTest:s,returnUrl:i,returnObject:!0,...l})}catch(f){throw f instanceof pH.HttpResponseError&&f.response.code===401?(u.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await d.sessionStorage.deleteSession(r.id),await mH.redirectToAuthPage(e,t,r.shop)):f}throw yH(e,t,h.confirmationUrl,r.shop)}}function yH(e,t,r,n){const{config:a,logger:s}=e;s.debug("Redirecting out of app",{url:r});const i=new URL(t.url),l=i.searchParams.get("embedded")==="1";if(t.headers.get("authorization"))throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:gH.getAppBridgeHeaders(r)});if(l){const u=new URLSearchParams({shop:n,host:i.searchParams.get("host"),exitIframe:r});throw Qg.redirect(`${a.auth.exitIframePath}?${u.toString()}`)}else throw Qg.redirect(r)}Yh.requestBillingFactory=bH;var Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});var vH=Ut,EH=ka;function SH(e,t,r){return async function(a){const{api:s,logger:i,config:l}=e;i.debug("Checking billing plans",{shop:r.shop,...a});try{return await s.billing.check({session:r,plans:a.plans,isTest:a.isTest,returnObject:!0})}catch(c){throw c instanceof vH.HttpResponseError&&c.response.code===401?(i.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await l.sessionStorage.deleteSession(r.id),await EH.redirectToAuthPage(e,t,r.shop)):c}}}Zh.checkBillingFactory=SH;var tc={},Bn={},Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});function _H({params:e,handleClientError:t,session:r}){return async function(a,s){const i=new e.api.clients.Graphql({session:r,apiVersion:s==null?void 0:s.apiVersion});try{const l=await i.request(a,{variables:s==null?void 0:s.variables,retries:s!=null&&s.tries?s.tries-1:0,headers:s==null?void 0:s.headers});return new Response(JSON.stringify(l))}catch(l){throw t?await t({error:l,params:e,session:r}):l}}}Qh.graphqlClientFactory=_H;var ef={};Object.defineProperty(ef,"__esModule",{value:!0});function CH({params:e,handleClientError:t,session:r}){const{api:n}=e,a=new wH({params:e,handleClientError:t,session:r});if(n.rest){a.resources={};const s=PH({params:e,handleClientError:t,session:r});Object.entries(n.rest).forEach(([i,l])=>{class c extends l{}c.Client=s,Reflect.defineProperty(c,"name",{value:i}),Reflect.set(a.resources,i,c)})}return a}class wH{constructor({params:t,session:r,handleClientError:n}){this.session=void 0,this.params=void 0,this.handleClientError=void 0,this.params=t,this.handleClientError=n,this.session=r}async get(t){return this.makeRequest({method:"GET",...t})}async post(t){return this.makeRequest({method:"POST",...t})}async put(t){return this.makeRequest({method:"PUT",...t})}async delete(t){return this.makeRequest({method:"DELETE",...t})}async makeRequest(t){const r=new this.params.api.clients.Rest({session:this.session}),n=Reflect.get(r,"request");try{const a=await n.call(r,t);return new Response(JSON.stringify(a.body),{headers:a.headers})}catch(a){throw this.handleClientError?await this.handleClientError({error:a,session:this.session,params:this.params}):new Error(a)}}}function PH({params:e,handleClientError:t,session:r}){const{api:n}=e,a=n.clients.Rest;return class extends a{async request(i){const l=new n.clients.Rest({session:r}),c=Reflect.get(l,"request");try{return await c.call(l,i)}catch(u){throw t?await t({error:u,params:e,session:r}):new Error(u)}}}}ef.restClientFactory=CH;Object.defineProperty(Bn,"__esModule",{value:!0});var AH=Qh,TH=ef;function RH({params:e,handleClientError:t,session:r}){return{rest:TH.restClientFactory({params:e,session:r,handleClientError:t}),graphql:AH.graphqlClientFactory({params:e,session:r,handleClientError:t})}}Bn.adminClientFactory=RH;Object.defineProperty(tc,"__esModule",{value:!0});var kH=Bn;function xH(e,t,r){return kH.adminClientFactory({session:e,params:t,handleClientError:r})}tc.createAdminApiContext=xH;var tf={},rc={};Object.defineProperty(rc,"__esModule",{value:!0});var IH=Ta;async function $H(e,t,r){const{api:n}=t,a=new URL(e.url),s=n.utils.sanitizeHost(a.searchParams.get("host")),i=n.utils.sanitizeShop(a.searchParams.get("shop")),l=n.config.isEmbeddedApp?await n.auth.getEmbeddedAppUrl({rawRequest:e}):`/?shop=${i}&host=${encodeURIComponent(s)}`;throw IH.redirect(l,{headers:r})}rc.redirectToShopifyOrAppRoot=$H;Object.defineProperty(tf,"__esModule",{value:!0});var NH=rc;const OH=async(e,t)=>{const{api:r,logger:n,config:a}=e,s=new URL(t.url),i=s.searchParams.get("shop");r.config.isEmbeddedApp&&s.searchParams.get("embedded")!=="1"&&(n.debug("App is not embedded, redirecting to Shopify",{shop:i}),await NH.redirectToShopifyOrAppRoot(t,{api:r,logger:n,config:a}))};tf.ensureAppIsEmbeddedIfRequired=OH;var rf={};Object.defineProperty(rf,"__esModule",{value:!0});var LH=Xl;const MH="id_token",FH=async(e,t)=>{const{api:r,logger:n}=e,a=new URL(t.url),s=a.searchParams.get("shop"),i=a.searchParams.get(MH),l=a.searchParams.get("embedded")==="1";r.config.isEmbeddedApp&&l&&!i&&(n.debug("Missing session token in search params, going to bounce page",{shop:s}),LH.redirectToBouncePage(e,a))};rf.ensureSessionTokenSearchParamIfRequired=FH;var nf={},nc={},ac={};Object.defineProperty(ac,"__esModule",{value:!0});var DH=Hn;let US;function HH(e){US=e}function BH(){return US||DH.APP_BRIDGE_URL}ac.appBridgeUrl=BH;ac.setAppBridgeUrlOverride=HH;var yi={};Object.defineProperty(yi,"__esModule",{value:!0});function WH(e){const{api:t,config:r}=e;return function(n,a){const{searchParams:s}=new URL(n.url),i=t.utils.sanitizeShop(s.get("shop"));jS(a,r.isEmbeddedApp,i)}}function jS(e,t,r){r&&e.set("Link",'<https://cdn.shopify.com/shopifycloud/app-bridge.js>; rel="preload"; as="script";'),t?r&&e.set("Content-Security-Policy",`frame-ancestors https://${r} https://admin.shopify.com https://*.spin.dev;`):e.set("Content-Security-Policy","frame-ancestors 'none';")}yi.addDocumentResponseHeaders=jS;yi.addDocumentResponseHeadersFactory=WH;var af={};Object.defineProperty(af,"__esModule",{value:!0});var UH=Ut;const jH=/\/\/\//,qH=/[/\\][/\\]/,VH=/\s/,KH=["https:","http:"];function zH(e,t,r=!0){if(typeof t!="string"||jH.test(t)||VH.test(t))return!1;let n;try{n=new URL(t,e)}catch{return!1}return!(qH.test(n.pathname)||!KH.includes(n.protocol)||r&&n.protocol!=="https:")}function GH(e,t,r={}){if(zH(e,t,r.requireSSL))return new URL(t,e);if(r.throwOnInvalid===!1)return;throw new UH.ShopifyError("Invalid URL. Refusing to redirect")}af.sanitizeRedirectUrl=GH;Object.defineProperty(nc,"__esModule",{value:!0});var JH=ac,XH=yi,YH=af;function ZH({config:e},t,r){let n="";if(r){var a;const i=YH.sanitizeRedirectUrl(e.appUrl,r.url),l=(a=r.target)!==null&&a!==void 0?a:"_top";n=`<script>window.open(${JSON.stringify(i.toString())}, ${JSON.stringify(l)})<\/script>`}const s=new Headers({"content-type":"text/html;charset=utf-8"});throw XH.addDocumentResponseHeaders(s,e.isEmbeddedApp,new URL(t.url).searchParams.get("shop")),new Response(`
      <script data-api-key="${e.apiKey}" src="${JH.appBridgeUrl()}"><\/script>
      ${n}
    `,{headers:s})}nc.renderAppBridge=ZH;Object.defineProperty(nf,"__esModule",{value:!0});var eb=Ta,qS=Ra,tb=nc,QH=us;function e5(e,t){const{config:r}=e;return function(a,s){const{searchParams:i}=new URL(t.url),l=new URL(a,r.appUrl);(l.origin===r.appUrl||a.startsWith("/"))&&i.forEach((d,h)=>{l.searchParams.has(h)||l.searchParams.set(h,d)});const u=typeof s!="number"&&(s==null?void 0:s.target)||"_self";if(u==="_self"){if(VS(t))throw tb.renderAppBridge(e,t,{url:l.toString(),target:u});return eb.redirect(l.toString(),s)}else{if(t5(t))throw QH.redirectWithAppBridgeHeaders(l.toString());if(KS(t))throw tb.renderAppBridge(e,t,{url:l.toString(),target:u})}return eb.redirect(a,s)}}function VS(e){return!!qS.getSessionTokenHeader(e)&&e.headers.has("X-Shopify-Bounce")}function t5(e){const t=e.method==="GET";return!!qS.getSessionTokenHeader(e)&&!VS(e)&&(!KS(e)||!t)}function KS(e){const{searchParams:t}=new URL(e.url);return t.get("embedded")==="1"}nf.redirectFactory=e5;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});var rb=Ta;function r5(e,t){const{api:r,config:n,logger:a}=e;if(n.isEmbeddedApp){const s=new URL(t.url),i=r.utils.sanitizeShop(s.searchParams.get("shop"));if(!i)throw a.debug("Missing or invalid shop, redirecting to login path",{shop:i}),rb.redirect(n.auth.loginPath);if(!r.utils.sanitizeHost(s.searchParams.get("host")))throw a.debug("Invalid host, redirecting to login path",{host:s.searchParams.get("host")}),rb.redirect(n.auth.loginPath)}}sc.validateShopAndHostParams=r5;Object.defineProperty(Gh,"__esModule",{value:!0});var nb=bi,n5=Gl,_d=Ra,a5=Yl,s5=Zl,i5=Jh,o5=Xh,l5=Yh,c5=Zh,u5=tc,d5=tf,h5=rf,f5=nf,ab=nc,p5=sc;function m5({strategy:e,...t}){const{api:r,logger:n,config:a}=t;async function s(c){if(new URL(c.url).pathname===a.auth.patchSessionTokenPath)throw n.debug("Rendering bounce page"),ab.renderAppBridge({config:a,logger:n,api:r},c)}async function i(c){const u=new URL(c.url);if(u.pathname===a.auth.exitIframePath){const d=u.searchParams.get("exitIframe");throw n.debug("Rendering exit iframe page",{destination:d}),ab.renderAppBridge({config:a,logger:n,api:r},c,{url:d})}}function l(c,u,d,h){const f={admin:u5.createAdminApiContext(u,t,d.handleClientError(c)),billing:{require:o5.requireBillingFactory(t,c,u),check:c5.checkBillingFactory(t,c,u),request:l5.requestBillingFactory(t,c,u),cancel:i5.cancelBillingFactory(t,c,u)},session:u,cors:nb.ensureCORSHeadersFactory(t,c)};return a.isEmbeddedApp?{...f,sessionToken:h,redirect:f5.redirectFactory(t,c)}:f}return async function(u){try{a5.respondToBotRequest(t,u),s5.respondToOptionsRequest(t,u),await s(u),await i(u),await e.respondToOAuthRequests(u),_d.getSessionTokenHeader(u)||(p5.validateShopAndHostParams(t,u),await d5.ensureAppIsEmbeddedIfRequired(t,u),await h5.ensureSessionTokenSearchParamIfRequired(t,u)),n.info("Authenticating admin request");const{payload:d,shop:h,sessionId:f,sessionToken:p}=await g5(t,u);n.debug("Loading session from storage",{sessionId:f});const g=f?await a.sessionStorage.loadSession(f):void 0,b=await e.authenticate(u,{session:g,sessionToken:p,shop:h});return n.debug("Request is valid, loaded session from session token",{shop:b.shop,isOnline:b.isOnline}),l(u,b,e,d)}catch(d){throw d instanceof Response&&nb.ensureCORSHeadersFactory(t,u)(d),d}}}async function g5(e,t){const{api:r,config:n,logger:a}=e,s=_d.getSessionTokenHeader(t),i=_d.getSessionTokenFromUrlParam(t),l=s||i;if(a.debug("Attempting to authenticate session token",{sessionToken:JSON.stringify({header:s,search:i})}),n.isEmbeddedApp){const h=await n5.validateSessionToken(e,t,l),p=new URL(h.dest).hostname;a.debug("Session token is valid",{shop:p,payload:h});const g=n.useOnlineTokens?r.session.getJwtSessionId(p,h.sub):r.session.getOfflineId(p);return{shop:p,payload:h,sessionId:g,sessionToken:l}}const u=new URL(t.url).searchParams.get("shop"),d=await r.session.getCurrentId({isOnline:n.useOnlineTokens,rawRequest:t});return{shop:u,sessionId:d,payload:void 0,sessionToken:l}}Gh.authStrategyFactory=m5;var sf={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});var b5=Ut;function y5({request:e,onError:t}){return async function({error:n,params:a,session:s}){throw n instanceof b5.HttpResponseError?(a.logger.debug(`Got an HTTP response error from the API: ${n.message}`,{code:n.response.code,statusText:n.response.statusText,body:JSON.stringify(n.response.body)}),t&&await t({request:e,session:s,error:n}),new Response(JSON.stringify(n.response.body),{status:n.response.code,headers:{"Content-Type":n.response.headers["Content-Type"]}})):(a.logger.debug(`Got a response error from the API: ${n.message}`),n)}}vi.handleClientErrorFactory=y5;Object.defineProperty(sf,"__esModule",{value:!0});var v5=Ut,E5=Bn,S5=vi;function _5(e){const{api:t,config:r,logger:n}=e;return async function(s){if(s.method!=="POST")throw n.debug("Received a non-POST request for a webhook. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const i=await s.text(),l=await t.webhooks.validate({rawBody:i,rawRequest:s});if(!l.valid)throw l.reason===v5.WebhookValidationErrorReason.InvalidHmac?(n.debug("Webhook HMAC validation failed",l),new Response(void 0,{status:401,statusText:"Unauthorized"})):(n.debug("Webhook validation failed",l),new Response(void 0,{status:400,statusText:"Bad Request"}));const c=t.session.getOfflineId(l.domain),u=await r.sessionStorage.loadSession(c),d={apiVersion:l.apiVersion,shop:l.domain,topic:l.topic,webhookId:l.webhookId,payload:JSON.parse(i),subTopic:l.subTopic||void 0,session:void 0,admin:void 0};if(!u)return d;let h;if(r.future.v3_webhookAdminContext)h=E5.adminClientFactory({params:e,session:u,handleClientError:S5.handleClientErrorFactory({request:s})});else{const f=new t.clients.Rest({session:u,apiVersion:l.apiVersion}),p=new t.clients.Graphql({session:u,apiVersion:l.apiVersion});Object.entries(t.rest).forEach(([g,b])=>{Reflect.set(f,g,b)}),h={rest:f,graphql:p}}return{...d,session:u,admin:h}}}sf.authenticateWebhookFactory=_5;var of={},Cd={exports:{}};const C5="2.0.0",zS=256,w5=Number.MAX_SAFE_INTEGER||9007199254740991,P5=16,A5=zS-6,T5=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ic={MAX_LENGTH:zS,MAX_SAFE_COMPONENT_LENGTH:P5,MAX_SAFE_BUILD_LENGTH:A5,MAX_SAFE_INTEGER:w5,RELEASE_TYPES:T5,SEMVER_SPEC_VERSION:C5,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ku={};const R5=typeof process=="object"&&ku&&ku.NODE_DEBUG&&/\bsemver\b/i.test(ku.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var oc=R5;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=ic,s=oc;t=e.exports={};const i=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[h,n]],p=b=>{for(const[y,v]of f)b=b.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return b},g=(b,y,v)=>{const E=p(y),S=d++;s(b,S,y),u[b]=S,c[S]=y,i[S]=new RegExp(y,v?"g":void 0),l[S]=new RegExp(E,v?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${h}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Cd,Cd.exports);var Ei=Cd.exports;const k5=Object.freeze({loose:!0}),x5=Object.freeze({}),I5=e=>e?typeof e!="object"?k5:e:x5;var lf=I5;const sb=/^[0-9]+$/,GS=(e,t)=>{const r=sb.test(e),n=sb.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},$5=(e,t)=>GS(t,e);var JS={compareIdentifiers:GS,rcompareIdentifiers:$5};const qi=oc,{MAX_LENGTH:ib,MAX_SAFE_INTEGER:Vi}=ic,{safeRe:ob,t:lb}=Ei,N5=lf,{compareIdentifiers:Fa}=JS;let O5=class Ir{constructor(t,r){if(r=N5(r),t instanceof Ir){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ib)throw new TypeError(`version is longer than ${ib} characters`);qi("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?ob[lb.LOOSE]:ob[lb.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Vi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vi||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const s=+a;if(s>=0&&s<Vi)return s}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(qi("SemVer.compare",this.version,this.options,t),!(t instanceof Ir)){if(typeof t=="string"&&t===this.version)return 0;t=new Ir(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ir||(t=new Ir(t,this.options)),Fa(this.major,t.major)||Fa(this.minor,t.minor)||Fa(this.patch,t.patch)}comparePre(t){if(t instanceof Ir||(t=new Ir(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],a=t.prerelease[r];if(qi("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return Fa(n,a)}while(++r)}compareBuild(t){t instanceof Ir||(t=new Ir(t,this.options));let r=0;do{const n=this.build[r],a=t.build[r];if(qi("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return Fa(n,a)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let s=[r,a];n===!1&&(s=[r]),Fa(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var jt=O5;const cb=jt,L5=(e,t,r=!1)=>{if(e instanceof cb)return e;try{return new cb(e,t)}catch(n){if(!r)return null;throw n}};var ds=L5;const M5=ds,F5=(e,t)=>{const r=M5(e,t);return r?r.version:null};var D5=F5;const H5=ds,B5=(e,t)=>{const r=H5(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var W5=B5;const ub=jt,U5=(e,t,r,n,a)=>{typeof r=="string"&&(a=n,n=r,r=void 0);try{return new ub(e instanceof ub?e.version:e,r).inc(t,n,a).version}catch{return null}};var j5=U5;const db=ds,q5=(e,t)=>{const r=db(e,null,!0),n=db(t,null,!0),a=r.compare(n);if(a===0)return null;const s=a>0,i=s?r:n,l=s?n:r,c=!!i.prerelease.length;if(!!l.prerelease.length&&!c)return!l.patch&&!l.minor?"major":i.patch?"patch":i.minor?"minor":"major";const d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};var V5=q5;const K5=jt,z5=(e,t)=>new K5(e,t).major;var G5=z5;const J5=jt,X5=(e,t)=>new J5(e,t).minor;var Y5=X5;const Z5=jt,Q5=(e,t)=>new Z5(e,t).patch;var eB=Q5;const tB=ds,rB=(e,t)=>{const r=tB(e,t);return r&&r.prerelease.length?r.prerelease:null};var nB=rB;const hb=jt,aB=(e,t,r)=>new hb(e,r).compare(new hb(t,r));var wr=aB;const sB=wr,iB=(e,t,r)=>sB(t,e,r);var oB=iB;const lB=wr,cB=(e,t)=>lB(e,t,!0);var uB=cB;const fb=jt,dB=(e,t,r)=>{const n=new fb(e,r),a=new fb(t,r);return n.compare(a)||n.compareBuild(a)};var cf=dB;const hB=cf,fB=(e,t)=>e.sort((r,n)=>hB(r,n,t));var pB=fB;const mB=cf,gB=(e,t)=>e.sort((r,n)=>mB(n,r,t));var bB=gB;const yB=wr,vB=(e,t,r)=>yB(e,t,r)>0;var lc=vB;const EB=wr,SB=(e,t,r)=>EB(e,t,r)<0;var uf=SB;const _B=wr,CB=(e,t,r)=>_B(e,t,r)===0;var XS=CB;const wB=wr,PB=(e,t,r)=>wB(e,t,r)!==0;var YS=PB;const AB=wr,TB=(e,t,r)=>AB(e,t,r)>=0;var df=TB;const RB=wr,kB=(e,t,r)=>RB(e,t,r)<=0;var hf=kB;const xB=XS,IB=YS,$B=lc,NB=df,OB=uf,LB=hf,MB=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return xB(e,r,n);case"!=":return IB(e,r,n);case">":return $B(e,r,n);case">=":return NB(e,r,n);case"<":return OB(e,r,n);case"<=":return LB(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var ZS=MB;const FB=jt,DB=ds,{safeRe:Ki,t:zi}=Ei,HB=(e,t)=>{if(e instanceof FB)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Ki[zi.COERCEFULL]:Ki[zi.COERCE]);else{const c=t.includePrerelease?Ki[zi.COERCERTLFULL]:Ki[zi.COERCERTL];let u;for(;(u=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],a=r[3]||"0",s=r[4]||"0",i=t.includePrerelease&&r[5]?`-${r[5]}`:"",l=t.includePrerelease&&r[6]?`+${r[6]}`:"";return DB(`${n}.${a}.${s}${i}${l}`,t)};var BB=HB,xu,pb;function WB(){return pb||(pb=1,xu=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),xu}var UB=Pe;Pe.Node=_a;Pe.create=Pe;function Pe(e){var t=this;if(t instanceof Pe||(t=new Pe),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(a){t.push(a)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Pe.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pe.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pe.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pe.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)qB(this,arguments[e]);return this.length};Pe.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)VB(this,arguments[e]);return this.length};Pe.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pe.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pe.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Pe.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Pe.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Pe.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Pe.prototype.map=function(e,t){t=t||this;for(var r=new Pe,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Pe.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Pe,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Pe.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;n!==null;a++)r=e(r,n.value,a),n=n.next;return r};Pe.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;n!==null;a--)r=e(r,n.value,a),n=n.prev;return r};Pe.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Pe.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Pe.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Pe;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,a=this.head;a!==null&&n<e;n++)a=a.next;for(;a!==null&&n<t;n++,a=a.next)r.push(a.value);return r};Pe.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Pe;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,a=this.tail;a!==null&&n>t;n--)a=a.prev;for(;a!==null&&n>e;n--,a=a.prev)r.push(a.value);return r};Pe.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,a=this.head;a!==null&&n<e;n++)a=a.next;for(var s=[],n=0;a&&n<t;n++)s.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var n=0;n<r.length;n++)a=jB(this,a,r[n]);return s};Pe.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function jB(e,t,r){var n=t===e.head?new _a(r,null,t,e):new _a(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function qB(e,t){e.tail=new _a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function VB(e,t){e.head=new _a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function _a(e,t,r,n){if(!(this instanceof _a))return new _a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{WB()(Pe)}catch{}const KB=UB,oa=Symbol("max"),Zr=Symbol("length"),Da=Symbol("lengthCalculator"),js=Symbol("allowStale"),ua=Symbol("maxAge"),Xr=Symbol("dispose"),mb=Symbol("noDisposeOnSet"),ut=Symbol("lruList"),mr=Symbol("cache"),QS=Symbol("updateAgeOnGet"),Iu=()=>1;class zB{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[oa]=t.max||1/0;const r=t.length||Iu;if(this[Da]=typeof r!="function"?Iu:r,this[js]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[ua]=t.maxAge||0,this[Xr]=t.dispose,this[mb]=t.noDisposeOnSet||!1,this[QS]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[oa]=t||1/0,ks(this)}get max(){return this[oa]}set allowStale(t){this[js]=!!t}get allowStale(){return this[js]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[ua]=t,ks(this)}get maxAge(){return this[ua]}set lengthCalculator(t){typeof t!="function"&&(t=Iu),t!==this[Da]&&(this[Da]=t,this[Zr]=0,this[ut].forEach(r=>{r.length=this[Da](r.value,r.key),this[Zr]+=r.length})),ks(this)}get lengthCalculator(){return this[Da]}get length(){return this[Zr]}get itemCount(){return this[ut].length}rforEach(t,r){r=r||this;for(let n=this[ut].tail;n!==null;){const a=n.prev;gb(this,t,n,r),n=a}}forEach(t,r){r=r||this;for(let n=this[ut].head;n!==null;){const a=n.next;gb(this,t,n,r),n=a}}keys(){return this[ut].toArray().map(t=>t.key)}values(){return this[ut].toArray().map(t=>t.value)}reset(){this[Xr]&&this[ut]&&this[ut].length&&this[ut].forEach(t=>this[Xr](t.key,t.value)),this[mr]=new Map,this[ut]=new KB,this[Zr]=0}dump(){return this[ut].map(t=>Mo(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ut]}set(t,r,n){if(n=n||this[ua],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const a=n?Date.now():0,s=this[Da](r,t);if(this[mr].has(t)){if(s>this[oa])return za(this,this[mr].get(t)),!1;const c=this[mr].get(t).value;return this[Xr]&&(this[mb]||this[Xr](t,c.value)),c.now=a,c.maxAge=n,c.value=r,this[Zr]+=s-c.length,c.length=s,this.get(t),ks(this),!0}const i=new GB(t,r,s,a,n);return i.length>this[oa]?(this[Xr]&&this[Xr](t,r),!1):(this[Zr]+=i.length,this[ut].unshift(i),this[mr].set(t,this[ut].head),ks(this),!0)}has(t){if(!this[mr].has(t))return!1;const r=this[mr].get(t).value;return!Mo(this,r)}get(t){return $u(this,t,!0)}peek(t){return $u(this,t,!1)}pop(){const t=this[ut].tail;return t?(za(this,t),t.value):null}del(t){za(this,this[mr].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const a=t[n],s=a.e||0;if(s===0)this.set(a.k,a.v);else{const i=s-r;i>0&&this.set(a.k,a.v,i)}}}prune(){this[mr].forEach((t,r)=>$u(this,r,!1))}}const $u=(e,t,r)=>{const n=e[mr].get(t);if(n){const a=n.value;if(Mo(e,a)){if(za(e,n),!e[js])return}else r&&(e[QS]&&(n.value.now=Date.now()),e[ut].unshiftNode(n));return a.value}},Mo=(e,t)=>{if(!t||!t.maxAge&&!e[ua])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[ua]&&r>e[ua]},ks=e=>{if(e[Zr]>e[oa])for(let t=e[ut].tail;e[Zr]>e[oa]&&t!==null;){const r=t.prev;za(e,t),t=r}},za=(e,t)=>{if(t){const r=t.value;e[Xr]&&e[Xr](r.key,r.value),e[Zr]-=r.length,e[mr].delete(r.key),e[ut].removeNode(t)}};class GB{constructor(t,r,n,a,s){this.key=t,this.value=r,this.length=n,this.now=a,this.maxAge=s||0}}const gb=(e,t,r,n)=>{let a=r.value;Mo(e,a)&&(za(e,r),e[js]||(a=void 0)),a&&t.call(n,a.value,a.key,e)};var JB=zB,Nu,bb;function Pr(){if(bb)return Nu;bb=1;class e{constructor(A,O){if(O=n(O),A instanceof e)return A.loose===!!O.loose&&A.includePrerelease===!!O.includePrerelease?A:new e(A.raw,O);if(A instanceof a)return this.raw=A.value,this.set=[[A]],this.format(),this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=A.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(F=>!g(F[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&b(F[0])){this.set=[F];break}}}this.format()}format(){return this.range=this.set.map(A=>A.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(A){const L=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+A,F=r.get(L);if(F)return F;const I=this.options.loose,D=I?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];A=A.replace(D,N(this.options.includePrerelease)),s("hyphen replace",A),A=A.replace(l[c.COMPARATORTRIM],u),s("comparator trim",A),A=A.replace(l[c.TILDETRIM],d),s("tilde trim",A),A=A.replace(l[c.CARETTRIM],h),s("caret trim",A);let B=A.split(" ").map(H=>v(H,this.options)).join(" ").split(/\s+/).map(H=>$(H,this.options));I&&(B=B.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(l[c.COMPARATORLOOSE])))),s("range list",B);const U=new Map,V=B.map(H=>new a(H,this.options));for(const H of V){if(g(H))return[H];U.set(H.value,H)}U.size>1&&U.has("")&&U.delete("");const W=[...U.values()];return r.set(L,W),W}intersects(A,O){if(!(A instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>y(L,O)&&A.set.some(F=>y(F,O)&&L.every(I=>F.every(D=>I.intersects(D,O)))))}test(A){if(!A)return!1;if(typeof A=="string")try{A=new i(A,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(M(this.set[O],A,this.options))return!0;return!1}}Nu=e;const t=JB,r=new t({max:1e3}),n=lf,a=cc(),s=oc,i=jt,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:h}=Ei,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=ic,g=k=>k.value==="<0.0.0-0",b=k=>k.value==="",y=(k,A)=>{let O=!0;const L=k.slice();let F=L.pop();for(;O&&L.length;)O=L.every(I=>F.intersects(I,A)),F=L.pop();return O},v=(k,A)=>(s("comp",k,A),k=R(k,A),s("caret",k),k=S(k,A),s("tildes",k),k=C(k,A),s("xrange",k),k=P(k,A),s("stars",k),k),E=k=>!k||k.toLowerCase()==="x"||k==="*",S=(k,A)=>k.trim().split(/\s+/).map(O=>_(O,A)).join(" "),_=(k,A)=>{const O=A.loose?l[c.TILDELOOSE]:l[c.TILDE];return k.replace(O,(L,F,I,D,B)=>{s("tilde",k,L,F,I,D,B);let U;return E(F)?U="":E(I)?U=`>=${F}.0.0 <${+F+1}.0.0-0`:E(D)?U=`>=${F}.${I}.0 <${F}.${+I+1}.0-0`:B?(s("replaceTilde pr",B),U=`>=${F}.${I}.${D}-${B} <${F}.${+I+1}.0-0`):U=`>=${F}.${I}.${D} <${F}.${+I+1}.0-0`,s("tilde return",U),U})},R=(k,A)=>k.trim().split(/\s+/).map(O=>x(O,A)).join(" "),x=(k,A)=>{s("caret",k,A);const O=A.loose?l[c.CARETLOOSE]:l[c.CARET],L=A.includePrerelease?"-0":"";return k.replace(O,(F,I,D,B,U)=>{s("caret",k,F,I,D,B,U);let V;return E(I)?V="":E(D)?V=`>=${I}.0.0${L} <${+I+1}.0.0-0`:E(B)?I==="0"?V=`>=${I}.${D}.0${L} <${I}.${+D+1}.0-0`:V=`>=${I}.${D}.0${L} <${+I+1}.0.0-0`:U?(s("replaceCaret pr",U),I==="0"?D==="0"?V=`>=${I}.${D}.${B}-${U} <${I}.${D}.${+B+1}-0`:V=`>=${I}.${D}.${B}-${U} <${I}.${+D+1}.0-0`:V=`>=${I}.${D}.${B}-${U} <${+I+1}.0.0-0`):(s("no pr"),I==="0"?D==="0"?V=`>=${I}.${D}.${B}${L} <${I}.${D}.${+B+1}-0`:V=`>=${I}.${D}.${B}${L} <${I}.${+D+1}.0-0`:V=`>=${I}.${D}.${B} <${+I+1}.0.0-0`),s("caret return",V),V})},C=(k,A)=>(s("replaceXRanges",k,A),k.split(/\s+/).map(O=>w(O,A)).join(" ")),w=(k,A)=>{k=k.trim();const O=A.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return k.replace(O,(L,F,I,D,B,U)=>{s("xRange",k,L,F,I,D,B,U);const V=E(I),W=V||E(D),H=W||E(B),Y=H;return F==="="&&Y&&(F=""),U=A.includePrerelease?"-0":"",V?F===">"||F==="<"?L="<0.0.0-0":L="*":F&&Y?(W&&(D=0),B=0,F===">"?(F=">=",W?(I=+I+1,D=0,B=0):(D=+D+1,B=0)):F==="<="&&(F="<",W?I=+I+1:D=+D+1),F==="<"&&(U="-0"),L=`${F+I}.${D}.${B}${U}`):W?L=`>=${I}.0.0${U} <${+I+1}.0.0-0`:H&&(L=`>=${I}.${D}.0${U} <${I}.${+D+1}.0-0`),s("xRange return",L),L})},P=(k,A)=>(s("replaceStars",k,A),k.trim().replace(l[c.STAR],"")),$=(k,A)=>(s("replaceGTE0",k,A),k.trim().replace(l[A.includePrerelease?c.GTE0PRE:c.GTE0],"")),N=k=>(A,O,L,F,I,D,B,U,V,W,H,Y,j)=>(E(L)?O="":E(F)?O=`>=${L}.0.0${k?"-0":""}`:E(I)?O=`>=${L}.${F}.0${k?"-0":""}`:D?O=`>=${O}`:O=`>=${O}${k?"-0":""}`,E(V)?U="":E(W)?U=`<${+V+1}.0.0-0`:E(H)?U=`<${V}.${+W+1}.0-0`:Y?U=`<=${V}.${W}.${H}-${Y}`:k?U=`<${V}.${W}.${+H+1}-0`:U=`<=${U}`,`${O} ${U}`.trim()),M=(k,A,O)=>{for(let L=0;L<k.length;L++)if(!k[L].test(A))return!1;if(A.prerelease.length&&!O.includePrerelease){for(let L=0;L<k.length;L++)if(s(k[L].semver),k[L].semver!==a.ANY&&k[L].semver.prerelease.length>0){const F=k[L].semver;if(F.major===A.major&&F.minor===A.minor&&F.patch===A.patch)return!0}return!1}return!0};return Nu}var Ou,yb;function cc(){if(yb)return Ou;yb=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=r(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),i("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(d){const h=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],f=d.match(h);if(!f)throw new TypeError(`Invalid comparator: ${d}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new l(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(i("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return s(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,h).test(d.semver):(h=r(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||s(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||s(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Ou=t;const r=lf,{safeRe:n,t:a}=Ei,s=ZS,i=oc,l=jt,c=Pr();return Ou}const XB=Pr(),YB=(e,t,r)=>{try{t=new XB(t,r)}catch{return!1}return t.test(e)};var uc=YB;const ZB=Pr(),QB=(e,t)=>new ZB(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var eW=QB;const tW=jt,rW=Pr(),nW=(e,t,r)=>{let n=null,a=null,s=null;try{s=new rW(t,r)}catch{return null}return e.forEach(i=>{s.test(i)&&(!n||a.compare(i)===-1)&&(n=i,a=new tW(n,r))}),n};var aW=nW;const sW=jt,iW=Pr(),oW=(e,t,r)=>{let n=null,a=null,s=null;try{s=new iW(t,r)}catch{return null}return e.forEach(i=>{s.test(i)&&(!n||a.compare(i)===1)&&(n=i,a=new sW(n,r))}),n};var lW=oW;const Lu=jt,cW=Pr(),vb=lc,uW=(e,t)=>{e=new cW(e,t);let r=new Lu("0.0.0");if(e.test(r)||(r=new Lu("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const a=e.set[n];let s=null;a.forEach(i=>{const l=new Lu(i.semver.version);switch(i.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||vb(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),s&&(!r||vb(r,s))&&(r=s)}return r&&e.test(r)?r:null};var dW=uW;const hW=Pr(),fW=(e,t)=>{try{return new hW(e,t).range||"*"}catch{return null}};var pW=fW;const mW=jt,e_=cc(),{ANY:gW}=e_,bW=Pr(),yW=uc,Eb=lc,Sb=uf,vW=hf,EW=df,SW=(e,t,r,n)=>{e=new mW(e,n),t=new bW(t,n);let a,s,i,l,c;switch(r){case">":a=Eb,s=vW,i=Sb,l=">",c=">=";break;case"<":a=Sb,s=EW,i=Eb,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yW(e,t,n))return!1;for(let u=0;u<t.set.length;++u){const d=t.set[u];let h=null,f=null;if(d.forEach(p=>{p.semver===gW&&(p=new e_(">=0.0.0")),h=h||p,f=f||p,a(p.semver,h.semver,n)?h=p:i(p.semver,f.semver,n)&&(f=p)}),h.operator===l||h.operator===c||(!f.operator||f.operator===l)&&s(e,f.semver))return!1;if(f.operator===c&&i(e,f.semver))return!1}return!0};var ff=SW;const _W=ff,CW=(e,t,r)=>_W(e,t,">",r);var wW=CW;const PW=ff,AW=(e,t,r)=>PW(e,t,"<",r);var TW=AW;const _b=Pr(),RW=(e,t,r)=>(e=new _b(e,r),t=new _b(t,r),e.intersects(t,r));var kW=RW;const xW=uc,IW=wr;var $W=(e,t,r)=>{const n=[];let a=null,s=null;const i=e.sort((d,h)=>IW(d,h,r));for(const d of i)xW(d,t,r)?(s=d,a||(a=d)):(s&&n.push([a,s]),s=null,a=null);a&&n.push([a,null]);const l=[];for(const[d,h]of n)d===h?l.push(d):!h&&d===i[0]?l.push("*"):h?d===i[0]?l.push(`<=${h}`):l.push(`${d} - ${h}`):l.push(`>=${d}`);const c=l.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t};const Cb=Pr(),pf=cc(),{ANY:Mu}=pf,xs=uc,mf=wr,NW=(e,t,r={})=>{if(e===t)return!0;e=new Cb(e,r),t=new Cb(t,r);let n=!1;e:for(const a of e.set){for(const s of t.set){const i=LW(a,s,r);if(n=n||i!==null,i)continue e}if(n)return!1}return!0},OW=[new pf(">=0.0.0-0")],wb=[new pf(">=0.0.0")],LW=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Mu){if(t.length===1&&t[0].semver===Mu)return!0;r.includePrerelease?e=OW:e=wb}if(t.length===1&&t[0].semver===Mu){if(r.includePrerelease)return!0;t=wb}const n=new Set;let a,s;for(const p of e)p.operator===">"||p.operator===">="?a=Pb(a,p,r):p.operator==="<"||p.operator==="<="?s=Ab(s,p,r):n.add(p.semver);if(n.size>1)return null;let i;if(a&&s){if(i=mf(a.semver,s.semver,r),i>0)return null;if(i===0&&(a.operator!==">="||s.operator!=="<="))return null}for(const p of n){if(a&&!xs(p,String(a),r)||s&&!xs(p,String(s),r))return null;for(const g of t)if(!xs(p,String(g),r))return!1;return!0}let l,c,u,d,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const p of t){if(d=d||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",a){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(l=Pb(a,p,r),l===p&&l!==a)return!1}else if(a.operator===">="&&!xs(a.semver,String(p),r))return!1}if(s){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator==="<"||p.operator==="<="){if(c=Ab(s,p,r),c===p&&c!==s)return!1}else if(s.operator==="<="&&!xs(s.semver,String(p),r))return!1}if(!p.operator&&(s||a)&&i!==0)return!1}return!(a&&u&&!s&&i!==0||s&&d&&!a&&i!==0||f||h)},Pb=(e,t,r)=>{if(!e)return t;const n=mf(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ab=(e,t,r)=>{if(!e)return t;const n=mf(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var MW=NW;const Fu=Ei,Tb=ic,FW=jt,Rb=JS,DW=ds,HW=D5,BW=W5,WW=j5,UW=V5,jW=G5,qW=Y5,VW=eB,KW=nB,zW=wr,GW=oB,JW=uB,XW=cf,YW=pB,ZW=bB,QW=lc,eU=uf,tU=XS,rU=YS,nU=df,aU=hf,sU=ZS,iU=BB,oU=cc(),lU=Pr(),cU=uc,uU=eW,dU=aW,hU=lW,fU=dW,pU=pW,mU=ff,gU=wW,bU=TW,yU=kW,vU=$W,EU=MW;var SU={parse:DW,valid:HW,clean:BW,inc:WW,diff:UW,major:jW,minor:qW,patch:VW,prerelease:KW,compare:zW,rcompare:GW,compareLoose:JW,compareBuild:XW,sort:YW,rsort:ZW,gt:QW,lt:eU,eq:tU,neq:rU,gte:nU,lte:aU,cmp:sU,coerce:iU,Comparator:oU,Range:lU,satisfies:cU,toComparators:uU,maxSatisfying:dU,minSatisfying:hU,minVersion:fU,validRange:pU,outside:mU,gtr:gU,ltr:bU,intersects:yU,simplifyRange:vU,subset:EU,SemVer:FW,re:Fu.re,src:Fu.src,tokens:Fu.t,SEMVER_SPEC_VERSION:Tb.SEMVER_SPEC_VERSION,RELEASE_TYPES:Tb.RELEASE_TYPES,compareIdentifiers:Rb.compareIdentifiers,rcompareIdentifiers:Rb.rcompareIdentifiers};Object.defineProperty(of,"__esModule",{value:!0});var _U=SU,CU=Ut,wU=zl;function PU(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var AU=PU(_U);function TU(e){const t={package:"shopify-app"},r=(a,s={})=>e.warning(a,{...t,...s});function n(a){return function(s,i){if(AU.default.gte(wU.SHOPIFY_REMIX_LIBRARY_VERSION,s))throw new CU.FeatureDeprecatedError(`Feature was deprecated in version ${s}`);return a(`[Deprecated | ${s}] ${i}`)}}return{...e,log:(a,s,i={})=>e.log(a,s,{...t,...i}),debug:(a,s={})=>e.debug(a,{...t,...s}),info:(a,s={})=>e.info(a,{...t,...s}),warning:r,error:(a,s={})=>e.error(a,{...t,...s}),deprecated:n(r)}}of.overrideLogger=TU;var gf={};Object.defineProperty(gf,"__esModule",{value:!0});var RU=Ta,kb=cs;function kU(e){const{api:t,config:r,logger:n}=e;return async function(s){const l=new URL(s.url).searchParams.get("shop");if(s.method==="GET"&&!l)return{};const c=l||(await s.formData()).get("shop");if(!c)return n.debug("Missing shop parameter",{shop:c}),{shop:kb.LoginErrorType.MissingShop};const u=c.replace(/^https?:\/\//,"").replace(/\/$/,""),d=(c==null?void 0:c.indexOf("."))===-1?`${u}.myshopify.com`:u,h=t.utils.sanitizeShop(d);if(!h)return n.debug("Invalid shop parameter",{shop:c}),{shop:kb.LoginErrorType.InvalidShop};const f=`${r.appUrl}${r.auth.path}?shop=${h}`,g=`https://${t.utils.legacyUrlToShopAdminUrl(h)}/oauth/install?client_id=${r.apiKey}`,y=r.isEmbeddedApp&&r.future.unstable_newEmbeddedAuthStrategy?g:f;throw n.info(`Redirecting login request to ${y}`,{shop:h}),RU.redirect(y)}}gf.loginFactory=kU;var bf={},Si={};Object.defineProperty(Si,"__esModule",{value:!0});var xU=Ut;class IU extends xU.ShopifyError{}Si.SessionNotFoundError=IU;var dc={};Object.defineProperty(dc,"__esModule",{value:!0});async function $U(e,{api:t,config:r}){const n=t.session.getOfflineId(e);return await r.sessionStorage.loadSession(n)}dc.getOfflineSession=$U;Object.defineProperty(bf,"__esModule",{value:!0});var NU=Si,OU=Bn,LU=dc;function MU(e){return async t=>{const r=await LU.getOfflineSession(t,e);if(!r)throw new NU.SessionNotFoundError(`Could not find a session for shop ${t} when creating unauthenticated admin context`);return{session:r,admin:OU.adminClientFactory({params:e,session:r})}}}bf.unauthenticatedAdminContextFactory=MU;var yf={},vf={};Object.defineProperty(vf,"__esModule",{value:!0});var FU=bi,DU=Gl,HU=Ra,BU=Yl,WU=Zl;function UU(e){return async function(r,n={}){var a;const{logger:s}=e,i=(a=n.corsHeaders)!==null&&a!==void 0?a:[];BU.respondToBotRequest(e,r),WU.respondToOptionsRequest(e,r,i);const l=HU.getSessionTokenHeader(r);if(s.info("Authenticating checkout request"),!l)throw s.debug("Request did not contain a session token"),new Response(void 0,{status:401,statusText:"Unauthorized"});return{sessionToken:await DU.validateSessionToken(e,r,l,{checkAudience:!1}),cors:FU.ensureCORSHeadersFactory(e,r,i)}}}vf.authenticateCheckoutFactory=UU;var Ef={},hc={};Object.defineProperty(hc,"__esModule",{value:!0});function jU({params:e,session:t}){const{api:r}=e;return{graphql:async(n,a={})=>{const i=await new r.clients.Storefront({session:t,apiVersion:a.apiVersion}).request(n,{variables:a==null?void 0:a.variables,retries:a!=null&&a.tries?a.tries-1:0,headers:a==null?void 0:a.headers});return new Response(JSON.stringify(i))}}}hc.storefrontClientFactory=jU;Object.defineProperty(Ef,"__esModule",{value:!0});var qU=Bn,VU=hc;function KU(e){const{api:t,config:r,logger:n}=e;return async function(s){n.info("Authenticating app proxy request");const i=new URL(s.url);if(!await zU(e,i))throw n.info("App proxy request has invalid signature"),new Response(void 0,{status:400,statusText:"Bad Request"});const l=i.searchParams.get("shop"),c=t.session.getOfflineId(l),u=await r.sessionStorage.loadSession(c);return u?{liquid:xb,session:u,admin:qU.adminClientFactory({params:e,session:u}),storefront:VU.storefrontClientFactory({params:e,session:u})}:{liquid:xb,session:void 0,admin:void 0,storefront:void 0}}}const xb=(e,t)=>{const r=GU(e);if(typeof t!="object")return new Response(r,{status:t||200,headers:{"Content-Type":"application/liquid"}});const{layout:n,...a}=t||{},s=n===!1?`{% layout none %} ${r}`:r,i=new Headers(a.headers);return i.set("Content-Type","application/liquid"),new Response(s,{...a,headers:i})};async function zU(e,t){const{api:r,logger:n}=e;try{let a=new URLSearchParams(t.search);a.get("index")||a.delete("index");let s=await r.utils.validateHmac(Object.fromEntries(a.entries()),{signator:"appProxy"});if(!s){const l=`routes%2F${t.pathname.replace(/^\//,"").replace(/\/$/,"").replaceAll("/",".")}`;if(a=new URLSearchParams(`?_data=${l}&${a.toString().replace(/^\?/,"")}`),s=await r.utils.validateHmac(Object.fromEntries(a.entries()),{signator:"appProxy"}),!s){const c=new URLSearchParams(`?_data=${l}._index&${t.search.replace(/^\?/,"")}`);s=await r.utils.validateHmac(Object.fromEntries(c.entries()),{signator:"appProxy"})}}return s}catch(a){throw n.info(a.message),new Response(void 0,{status:400,statusText:"Bad Request"})}}function GU(e){return e.replaceAll(/<(form[^>]+)action="(\/[^"?]+)(\?[^"]+)?">/g,'<$1action="$2/$3">').replaceAll(/<(a[^>]+)href="(\/[^"?]+)(\?[^"]+)?">/g,'<$1href="$2/$3">')}Ef.authenticateAppProxyFactory=KU;Object.defineProperty(yf,"__esModule",{value:!0});var JU=vf,XU=Ef;function YU(e){const{logger:t,config:r}=e,n=JU.authenticateCheckoutFactory(e),a=XU.authenticateAppProxyFactory(e);if(r.future.v3_authenticatePublic)return{checkout:n,appProxy:a};const s=(i,l)=>(t.deprecated("3.0.0","authenticate.public() will be deprecated in v3. Use authenticate.public.checkout() instead."),n(i,l));return s.checkout=n,s.appProxy=a,s}yf.authenticatePublicFactory=YU;var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});var ZU=Si,QU=hc,e3=dc;function t3(e){return async t=>{const r=await e3.getOfflineSession(t,e);if(!r)throw new ZU.SessionNotFoundError(`Could not find a session for shop ${t} when creating unauthenticated storefront context`);return{session:r,storefront:QU.storefrontClientFactory({params:e,session:r})}}}Sf.unauthenticatedStorefrontContextFactory=t3;var _f={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});var r3=tc;async function n3(e,t,r,n){const{config:a,logger:s}=e;a.hooks.afterAuth&&(s.info("Running afterAuth hook"),await a.hooks.afterAuth({session:t,admin:r3.createAdminApiContext(t,e,n.handleClientError(r))}))}fc.triggerAfterAuthHook=n3;Object.defineProperty(_f,"__esModule",{value:!0});var Is=Ut,Gi=Ql,a3=rc,s3=vi,Du=ka,Ib=ec,i3=Ra,o3=fc,l3=sc;class c3{constructor({api:t,config:r,logger:n}){this.api=void 0,this.config=void 0,this.logger=void 0,this.api=t,this.config=r,this.logger=n}async respondToOAuthRequests(t){const{api:r,config:n}=this,a=new URL(t.url),s=a.pathname===n.auth.path,i=a.pathname===n.auth.callbackPath;if(s||i){const l=r.utils.sanitizeShop(a.searchParams.get("shop"));throw l?s?await this.handleAuthBeginRequest(t,l):await this.handleAuthCallbackRequest(t,l):new Response("Shop param is invalid",{status:400})}i3.getSessionTokenHeader(t)||await this.ensureInstalledOnShop(t)}async authenticate(t,r){const{api:n,config:a,logger:s}=this,{shop:i,session:l}=r;return l?l.isActive(a.scopes)||(s.debug("Found a session, but it has expired, redirecting to OAuth",{shop:i}),await Du.redirectToAuthPage({config:a,logger:s,api:n},t,i)):(s.debug("No session found, redirecting to OAuth",{shop:i}),await Du.redirectToAuthPage({config:a,logger:s,api:n},t,i)),s.debug("Found a valid session",{shop:i}),l}handleClientError(t){const{api:r,config:n,logger:a}=this;return s3.handleClientErrorFactory({request:t,onError:async({session:s,error:i})=>{if(i.response.code===401)throw await Du.redirectToAuthPage({api:r,config:n,logger:a},t,s.shop)}})}async ensureInstalledOnShop(t){const{api:r,config:n,logger:a}=this;l3.validateShopAndHostParams({api:r,config:n,logger:a},t);const s=new URL(t.url);let i=s.searchParams.get("shop");if(a.debug("Ensuring app is installed on shop",{shop:i}),!await this.hasValidOfflineId(t))throw a.info("Could not find a shop, can't authenticate request"),new Response(void 0,{status:400,statusText:"Bad Request"});const l=await this.getOfflineSession(t),c=s.searchParams.get("embedded")==="1";if(!l)if(a.info("Shop hasn't installed app yet, redirecting to OAuth",{shop:i}),c)Ib.redirectWithExitIframe({api:r,config:n,logger:a},t,i);else throw await Gi.beginAuth({api:r,config:n,logger:a},t,!1,i);if(i=i||l.shop,n.isEmbeddedApp&&!c)try{a.debug("Ensuring offline session is valid before embedding",{shop:i}),await this.testSession(l),a.debug("Offline session is still valid, embedding app",{shop:i})}catch(u){await this.handleInvalidOfflineSession(u,t,i)}}async handleAuthBeginRequest(t,r){const{api:n,config:a,logger:s}=this;throw s.info("Handling OAuth begin request",{shop:r}),a.isEmbeddedApp&&t.headers.get("Sec-Fetch-Dest")==="iframe"?(s.debug("Auth request in iframe detected, exiting iframe",{shop:r}),Ib.redirectWithExitIframe({api:n,config:a,logger:s},t,r)):await Gi.beginAuth({api:n,config:a,logger:s},t,!1,r)}async handleAuthCallbackRequest(t,r){const{api:n,config:a,logger:s}=this;s.info("Handling OAuth callback request");try{const{session:i,headers:l}=await n.auth.callback({rawRequest:t});throw await a.sessionStorage.storeSession(i),a.useOnlineTokens&&!i.isOnline&&(s.info("Requesting online access token for offline session"),await Gi.beginAuth({api:n,config:a,logger:s},t,!0,r)),await o3.triggerAfterAuthHook({api:n,config:a,logger:s},i,t,this),await a3.redirectToShopifyOrAppRoot(t,{api:n,config:a,logger:s},l)}catch(i){throw i instanceof Response?i:await this.oauthCallbackError(i,t,r)}}async getOfflineSession(t){const r=await this.getOfflineSessionId(t);return this.config.sessionStorage.loadSession(r)}async hasValidOfflineId(t){return!!await this.getOfflineSessionId(t)}async getOfflineSessionId(t){const{api:r}=this,a=new URL(t.url).searchParams.get("shop");return a?r.session.getOfflineId(a):r.session.getCurrentId({isOnline:!1,rawRequest:t})}async testSession(t){const{api:r}=this;await new r.clients.Graphql({session:t}).request(`#graphql
      query shopifyAppShopName {
        shop {
          name
        }
      }
    `)}async oauthCallbackError(t,r,n){const{logger:a}=this;return a.error("Error during OAuth callback",{error:t.message}),t instanceof Is.CookieNotFound?this.handleAuthBeginRequest(r,n):t instanceof Is.InvalidHmacError||t instanceof Is.InvalidOAuthError?new Response(void 0,{status:400,statusText:"Invalid OAuth Request"}):new Response(void 0,{status:500,statusText:"Internal Server Error"})}async handleInvalidOfflineSession(t,r,n){const{api:a,logger:s,config:i}=this;if(t instanceof Is.HttpResponseError){if(t.response.code===401)throw s.info("Shop session is no longer valid, redirecting to OAuth",{shop:n}),await Gi.beginAuth({api:a,config:i,logger:s},r,!1,n);{const l=JSON.stringify(t.response.body,null,2);throw s.error(`Unexpected error during session validation: ${l}`,{shop:n}),new Response(void 0,{status:t.response.code,statusText:t.response.statusText})}}else if(t instanceof Is.GraphqlQueryError){const l={shop:n};throw t.response&&(l.response=JSON.stringify(t.body)),s.error(`Unexpected error during session validation: ${t.message}`,l),new Response(void 0,{status:500,statusText:"Internal Server Error"})}}}_f.AuthCodeFlowStrategy=c3;var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});var $s=Ut,$b=Jl,u3=vi,d3=fc;class h3{constructor({api:t,config:r,logger:n}){this.api=void 0,this.config=void 0,this.logger=void 0,this.api=t,this.config=r,this.logger=n}async respondToOAuthRequests(t){}async authenticate(t,r){const{api:n,config:a,logger:s}=this,{shop:i,session:l,sessionToken:c}=r;if(!c)throw new $s.InvalidJwtError;if(!l||l.isExpired()){s.info("No valid session found"),s.info("Requesting offline access token");const{session:u}=await this.exchangeToken({request:t,sessionToken:c,shop:i,requestedTokenType:$s.RequestedTokenType.OfflineAccessToken});await a.sessionStorage.storeSession(u);let d=u;if(a.useOnlineTokens){s.info("Requesting online access token");const{session:h}=await this.exchangeToken({request:t,sessionToken:c,shop:i,requestedTokenType:$s.RequestedTokenType.OnlineAccessToken});await a.sessionStorage.storeSession(h),d=h}try{await this.handleAfterAuthHook({api:n,config:a,logger:s},d,t,c)}catch{throw new Response(void 0,{status:500,statusText:"Internal Server Error"})}return d}return l}handleClientError(t){const{api:r,config:n,logger:a}=this;return u3.handleClientErrorFactory({request:t,onError:async({session:s,error:i})=>{i.response.code===401&&(n.sessionStorage.deleteSession(s.id),$b.respondToInvalidSessionToken({params:{config:n,api:r,logger:a},request:t}))}})}async exchangeToken({request:t,shop:r,sessionToken:n,requestedTokenType:a}){const{api:s,config:i,logger:l}=this;try{return await s.auth.tokenExchange({sessionToken:n,shop:r,requestedTokenType:a})}catch(u){var c;throw u instanceof $s.InvalidJwtError||u instanceof $s.HttpResponseError&&u.response.code===400&&((c=u.response.body)===null||c===void 0?void 0:c.error)==="invalid_subject_token"?$b.respondToInvalidSessionToken({params:{api:s,config:i,logger:l},request:t,retryRequest:!0}):new Response(void 0,{status:500,statusText:"Internal Server Error"})}}async handleAfterAuthHook(t,r,n,a){const{config:s}=t;await s.idempotentPromiseHandler.handlePromise({promiseFunction:()=>d3.triggerAfterAuthHook(t,r,n,this),identifier:a})}}Cf.TokenExchangeStrategy=h3;var wf={};Object.defineProperty(wf,"__esModule",{value:!0});const f3=6e4;class p3{constructor(){this.identifiers=void 0,this.identifiers=new Map}async handlePromise({promiseFunction:t,identifier:r}){try{this.isPromiseRunnable(r)&&await t()}finally{this.clearStaleIdentifiers()}return Promise.resolve()}isPromiseRunnable(t){return this.identifiers.has(t)?!1:(this.identifiers.set(t,Date.now()),!0)}async clearStaleIdentifiers(){this.identifiers.forEach((t,r,n)=>{Date.now()-t>f3&&n.delete(r)})}}wf.IdempotentPromiseHandler=p3;var Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});var m3=Bn;function g3(e){const{api:t,config:r,logger:n}=e;return async function(s){if(n.info("Authenticating flow request"),s.method!=="POST")throw n.debug("Received a non-POST request for flow. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const i=await s.text(),l=await t.flow.validate({rawBody:i,rawRequest:s});if(!l.valid)throw n.error("Received an invalid flow request",{reason:l.reason}),new Response(void 0,{status:400,statusText:"Bad Request"});const c=JSON.parse(i);n.debug("Flow request is valid, looking for an offline session",{shop:c.shopify_domain});const u=t.session.getOfflineId(c.shopify_domain),d=await r.sessionStorage.loadSession(u);if(!d)throw n.info("Flow request could not find session",{shop:c.shopify_domain}),new Response(void 0,{status:400,statusText:"Bad Request"});return n.debug("Found a session for the flow request",{shop:d.shop}),{session:d,payload:c,admin:m3.adminClientFactory({params:e,session:d})}}}Pf.authenticateFlowFactory=g3;var Af={};Object.defineProperty(Af,"__esModule",{value:!0});var b3=Ut,y3=Bn;function v3(e){const{api:t,config:r,logger:n}=e;return async function(s){if(n.info("Authenticating fulfillment service request"),s.method!=="POST")throw n.debug("Received a non-POST request for fulfillment service. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const i=await s.text(),l=await t.fulfillmentService.validate({rawBody:i,rawRequest:s});if(!l.valid)throw n.error("Received an invalid fulfillment service request",{reason:l.reason}),new Response(void 0,{status:400,statusText:"Bad Request"});const c=JSON.parse(i),u=s.headers.get(b3.ShopifyHeader.Domain)||"";n.debug("Fulfillment service request is valid, looking for an offline session",{shop:u});const d=t.session.getOfflineId(u),h=await r.sessionStorage.loadSession(d);if(!h)throw n.info("Fulfillment service request could not find session",{shop:u}),new Response(void 0,{status:400,statusText:"Bad Request"});return n.debug("Found a session for the fulfillment service request",{shop:u}),{session:h,payload:c,admin:y3.adminClientFactory({params:e,session:h})}}}Af.authenticateFulfillmentServiceFactory=v3;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});function E3(e,t){const r=(n,a)=>t.info(`Future flag ${n} is disabled.

  ${a}
`);e.future.v3_authenticatePublic||r("v3_authenticatePublic","Enable this flag to allow appProxy and checkout in `shopify.authenticate.public`."),e.future.v3_lineItemBilling||r("v3_lineItemBilling","Enable this flag to allow billing plans with multiple line items."),e.future.v3_webhookAdminContext||r("v3_webhookAdminContext","Enable this flag to use the standard Admin context when calling `shopify.authenticate.webhook`."),e.future.unstable_newEmbeddedAuthStrategy||r("unstable_newEmbeddedAuthStrategy",`Enable this to use OAuth token exchange instead of auth code to generate API access tokens.
  Your app must be using Shopify managed install: https://shopify.dev/docs/apps/auth/installation`)}Tf.logDisabledFutureFlags=E3;var Nb={};Object.defineProperty(Kh,"__esModule",{value:!0});var oo=Ut,Js=cs,S3=zl,_3=zh,C3=Gh,w3=sf,P3=of,A3=yi,T3=gf,R3=bf,k3=yf,x3=Sf,I3=_f,$3=Cf,N3=wf,O3=Pf,L3=Af,M3=Tf;function F3(e){const t=B3(e),r=W3(e,t.config),n=P3.overrideLogger(t.logger);e.webhooks&&t.webhooks.addHandlers(e.webhooks);const a={api:t,config:r,logger:n},s=C3.authStrategyFactory({...a,strategy:r.future.unstable_newEmbeddedAuthStrategy&&r.isEmbeddedApp?new $3.TokenExchangeStrategy(a):new I3.AuthCodeFlowStrategy(a)}),i={sessionStorage:r.sessionStorage,addDocumentResponseHeaders:A3.addDocumentResponseHeadersFactory(a),registerWebhooks:_3.registerWebhooksFactory(a),authenticate:{admin:s,flow:O3.authenticateFlowFactory(a),public:k3.authenticatePublicFactory(a),fulfillmentService:L3.authenticateFulfillmentServiceFactory(a),webhook:w3.authenticateWebhookFactory(a)},unauthenticated:{admin:R3.unauthenticatedAdminContextFactory(a),storefront:x3.unauthenticatedStorefrontContextFactory(a)}};return(D3(i,e)||H3(i,e))&&(i.login=T3.loginFactory(a)),M3.logDisabledFutureFlags(r,n),i}function D3(e,t){return t.distribution===Js.AppDistribution.AppStore}function H3(e,t){return t.distribution===Js.AppDistribution.SingleMerchant}function B3(e){var t,r,n;let a;try{a=new URL(e.appUrl)}catch{throw new oo.ShopifyError("Invalid appUrl provided. Please provide a valid URL.")}a.hostname==="localhost"&&!a.port&&Nb.PORT&&(a.port=Nb.PORT),e.appUrl=a.origin;let s=`Shopify Remix Library v${S3.SHOPIFY_REMIX_LIBRARY_VERSION}`;return e.userAgentPrefix&&(s=`${e.userAgentPrefix} | ${s}`),oo.shopifyApi({...e,hostName:a.host,hostScheme:a.protocol.replace(":",""),userAgentPrefix:s,isEmbeddedApp:(t=e.isEmbeddedApp)!==null&&t!==void 0?t:!0,apiVersion:(r=e.apiVersion)!==null&&r!==void 0?r:oo.LATEST_API_VERSION,isCustomStoreApp:e.distribution===Js.AppDistribution.ShopifyAdmin,future:{v10_lineItemBilling:(n=e.future)===null||n===void 0?void 0:n.v3_lineItemBilling},_logDisabledFutureFlags:!1})}function W3(e,t){var r,n,a,s;if(!e.sessionStorage)throw new oo.ShopifyError("Please provide a valid session storage. Refer to https://github.com/Shopify/shopify-app-js/blob/main/README.md#session-storage-options for options.");const i=e.authPathPrefix||"/auth";return e.distribution=(r=e.distribution)!==null&&r!==void 0?r:Js.AppDistribution.AppStore,{...e,...t,idempotentPromiseHandler:new N3.IdempotentPromiseHandler,canUseLoginForm:e.distribution!==Js.AppDistribution.ShopifyAdmin,useOnlineTokens:(n=e.useOnlineTokens)!==null&&n!==void 0?n:!1,hooks:(a=e.hooks)!==null&&a!==void 0?a:{},sessionStorage:e.sessionStorage,future:(s=e.future)!==null&&s!==void 0?s:{},auth:{path:i,callbackPath:`${i}/callback`,patchSessionTokenPath:`${i}/session-token`,exitIframePath:`${i}/exit-iframe`,loginPath:`${i}/login`}}}Kh.shopifyApp=F3;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=on,r=Ut,n=cs,a=jh,s=Kh,i=Si;t.setAbstractRuntimeString(()=>"Remix"),Object.defineProperty(e,"ApiVersion",{enumerable:!0,get:function(){return r.ApiVersion}}),Object.defineProperty(e,"BillingInterval",{enumerable:!0,get:function(){return r.BillingInterval}}),Object.defineProperty(e,"DeliveryMethod",{enumerable:!0,get:function(){return r.DeliveryMethod}}),Object.defineProperty(e,"LATEST_API_VERSION",{enumerable:!0,get:function(){return r.LATEST_API_VERSION}}),Object.defineProperty(e,"LogSeverity",{enumerable:!0,get:function(){return r.LogSeverity}}),e.AppDistribution=n.AppDistribution,e.LoginErrorType=n.LoginErrorType,e.boundary=a.boundary,e.shopifyApp=s.shopifyApp,e.SessionNotFoundError=i.SessionNotFoundError})(Kv);var hs={},Rf={};const U3=$n(Xx),j3={ActionMenu:{Actions:{moreActions:"More actions"},RollupActions:{rollupButton:"View actions"}},ActionList:{SearchField:{clearButtonLabel:"Clear",search:"Search",placeholder:"Search actions"}},Avatar:{label:"Avatar",labelWithInitials:"Avatar with initials {initials}"},Autocomplete:{spinnerAccessibilityLabel:"Loading",ellipsis:"{content}…"},Badge:{PROGRESS_LABELS:{incomplete:"Incomplete",partiallyComplete:"Partially complete",complete:"Complete"},TONE_LABELS:{info:"Info",success:"Success",warning:"Warning",critical:"Critical",attention:"Attention",new:"New",readOnly:"Read-only",enabled:"Enabled"},progressAndTone:"{toneLabel} {progressLabel}"},Banner:{dismissButton:"Dismiss notification"},Button:{spinnerAccessibilityLabel:"Loading"},Common:{checkbox:"checkbox",undo:"Undo",cancel:"Cancel",clear:"Clear",close:"Close",submit:"Submit",more:"More"},ContextualSaveBar:{save:"Save",discard:"Discard"},DataTable:{sortAccessibilityLabel:"sort {direction} by",navAccessibilityLabel:"Scroll table {direction} one column",totalsRowHeading:"Totals",totalRowHeading:"Total"},DatePicker:{previousMonth:"Show previous month, {previousMonthName} {showPreviousYear}",nextMonth:"Show next month, {nextMonth} {nextYear}",today:"Today ",start:"Start of range",end:"End of range",months:{january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},days:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},daysAbbreviated:{monday:"Mo",tuesday:"Tu",wednesday:"We",thursday:"Th",friday:"Fr",saturday:"Sa",sunday:"Su"}},DiscardConfirmationModal:{title:"Discard all unsaved changes",message:"If you discard changes, you’ll delete any edits you made since you last saved.",primaryAction:"Discard changes",secondaryAction:"Continue editing"},DropZone:{single:{overlayTextFile:"Drop file to upload",overlayTextImage:"Drop image to upload",overlayTextVideo:"Drop video to upload",actionTitleFile:"Add file",actionTitleImage:"Add image",actionTitleVideo:"Add video",actionHintFile:"or drop file to upload",actionHintImage:"or drop image to upload",actionHintVideo:"or drop video to upload",labelFile:"Upload file",labelImage:"Upload image",labelVideo:"Upload video"},allowMultiple:{overlayTextFile:"Drop files to upload",overlayTextImage:"Drop images to upload",overlayTextVideo:"Drop videos to upload",actionTitleFile:"Add files",actionTitleImage:"Add images",actionTitleVideo:"Add videos",actionHintFile:"or drop files to upload",actionHintImage:"or drop images to upload",actionHintVideo:"or drop videos to upload",labelFile:"Upload files",labelImage:"Upload images",labelVideo:"Upload videos"},errorOverlayTextFile:"File type is not valid",errorOverlayTextImage:"Image type is not valid",errorOverlayTextVideo:"Video type is not valid"},EmptySearchResult:{altText:"Empty search results"},Frame:{skipToContent:"Skip to content",navigationLabel:"Navigation",Navigation:{closeMobileNavigationLabel:"Close navigation"}},FullscreenBar:{back:"Back",accessibilityLabel:"Exit fullscreen mode"},Filters:{moreFilters:"More filters",moreFiltersWithCount:"More filters ({count})",filter:"Filter {resourceName}",noFiltersApplied:"No filters applied",cancel:"Cancel",done:"Done",clearAllFilters:"Clear all filters",clear:"Clear",clearLabel:"Clear {filterName}",addFilter:"Add filter",clearFilters:"Clear all",searchInView:"in:{viewName}"},FilterPill:{clear:"Clear",unsavedChanges:"Unsaved changes - {label}"},IndexFilters:{searchFilterTooltip:"Search and filter",searchFilterTooltipWithShortcut:"Search and filter (F)",searchFilterAccessibilityLabel:"Search and filter results",sort:"Sort your results",addView:"Add a new view",newView:"Custom search",SortButton:{ariaLabel:"Sort the results",tooltip:"Sort",title:"Sort by",sorting:{asc:"Ascending",desc:"Descending",az:"A-Z",za:"Z-A"}},EditColumnsButton:{tooltip:"Edit columns",accessibilityLabel:"Customize table column order and visibility"},UpdateButtons:{cancel:"Cancel",update:"Update",save:"Save",saveAs:"Save as",modal:{title:"Save view as",label:"Name",sameName:"A view with this name already exists. Please choose a different name.",save:"Save",cancel:"Cancel"}}},IndexProvider:{defaultItemSingular:"Item",defaultItemPlural:"Items",allItemsSelected:"All {itemsLength}+ {resourceNamePlural} are selected",selected:"{selectedItemsCount} selected",a11yCheckboxDeselectAllSingle:"Deselect {resourceNameSingular}",a11yCheckboxSelectAllSingle:"Select {resourceNameSingular}",a11yCheckboxDeselectAllMultiple:"Deselect all {itemsLength} {resourceNamePlural}",a11yCheckboxSelectAllMultiple:"Select all {itemsLength} {resourceNamePlural}"},IndexTable:{emptySearchTitle:"No {resourceNamePlural} found",emptySearchDescription:"Try changing the filters or search term",onboardingBadgeText:"New",resourceLoadingAccessibilityLabel:"Loading {resourceNamePlural}…",selectAllLabel:"Select all {resourceNamePlural}",selected:"{selectedItemsCount} selected",undo:"Undo",selectAllItems:"Select all {itemsLength}+ {resourceNamePlural}",selectItem:"Select {resourceName}",selectButtonText:"Select",sortAccessibilityLabel:"sort {direction} by"},Loading:{label:"Page loading bar"},Modal:{iFrameTitle:"body markup",modalWarning:"These required properties are missing from Modal: {missingProps}"},Page:{Header:{rollupActionsLabel:"View actions for {title}",pageReadyAccessibilityLabel:"{title}. This page is ready"}},Pagination:{previous:"Previous",next:"Next",pagination:"Pagination"},ProgressBar:{negativeWarningMessage:"Values passed to the progress prop shouldn’t be negative. Resetting {progress} to 0.",exceedWarningMessage:"Values passed to the progress prop shouldn’t exceed 100. Setting {progress} to 100."},ResourceList:{sortingLabel:"Sort by",defaultItemSingular:"item",defaultItemPlural:"items",showing:"Showing {itemsCount} {resource}",showingTotalCount:"Showing {itemsCount} of {totalItemsCount} {resource}",loading:"Loading {resource}",selected:"{selectedItemsCount} selected",allItemsSelected:"All {itemsLength}+ {resourceNamePlural} in your store are selected",allFilteredItemsSelected:"All {itemsLength}+ {resourceNamePlural} in this filter are selected",selectAllItems:"Select all {itemsLength}+ {resourceNamePlural} in your store",selectAllFilteredItems:"Select all {itemsLength}+ {resourceNamePlural} in this filter",emptySearchResultTitle:"No {resourceNamePlural} found",emptySearchResultDescription:"Try changing the filters or search term",selectButtonText:"Select",a11yCheckboxDeselectAllSingle:"Deselect {resourceNameSingular}",a11yCheckboxSelectAllSingle:"Select {resourceNameSingular}",a11yCheckboxDeselectAllMultiple:"Deselect all {itemsLength} {resourceNamePlural}",a11yCheckboxSelectAllMultiple:"Select all {itemsLength} {resourceNamePlural}",Item:{actionsDropdownLabel:"Actions for {accessibilityLabel}",actionsDropdown:"Actions dropdown",viewItem:"View details for {itemName}"},BulkActions:{actionsActivatorLabel:"Actions",moreActionsActivatorLabel:"More actions"}},SkeletonPage:{loadingLabel:"Page loading"},Tabs:{newViewAccessibilityLabel:"Create new view",newViewTooltip:"Create view",toggleTabsLabel:"More views",Tab:{rename:"Rename view",duplicate:"Duplicate view",edit:"Edit view",editColumns:"Edit columns",delete:"Delete view",copy:"Copy of {name}",deleteModal:{title:"Delete view?",description:"This can’t be undone. {viewName} view will no longer be available in your admin.",cancel:"Cancel",delete:"Delete view"}},RenameModal:{title:"Rename view",label:"Name",cancel:"Cancel",create:"Save",errors:{sameName:"A view with this name already exists. Please choose a different name."}},DuplicateModal:{title:"Duplicate view",label:"Name",cancel:"Cancel",create:"Create view",errors:{sameName:"A view with this name already exists. Please choose a different name."}},CreateViewModal:{title:"Create new view",label:"Name",cancel:"Cancel",create:"Create view",errors:{sameName:"A view with this name already exists. Please choose a different name."}}},Tag:{ariaLabel:"Remove {children}"},TextField:{characterCount:"{count} characters",characterCountWithMaxLength:"{count} of {limit} characters used"},TooltipOverlay:{accessibilityLabel:"Tooltip: {label}"},TopBar:{toggleMenuLabel:"Toggle menu",SearchField:{clearButtonLabel:"Clear",search:"Search"}},MediaCard:{dismissButton:"Dismiss",popoverButton:"Actions"},VideoThumbnail:{playButtonA11yLabel:{default:"Play video",defaultWithDuration:"Play video of length {duration}",duration:{hours:{other:{only:"{hourCount} hours",andMinutes:"{hourCount} hours and {minuteCount} minutes",andMinute:"{hourCount} hours and {minuteCount} minute",minutesAndSeconds:"{hourCount} hours, {minuteCount} minutes, and {secondCount} seconds",minutesAndSecond:"{hourCount} hours, {minuteCount} minutes, and {secondCount} second",minuteAndSeconds:"{hourCount} hours, {minuteCount} minute, and {secondCount} seconds",minuteAndSecond:"{hourCount} hours, {minuteCount} minute, and {secondCount} second",andSeconds:"{hourCount} hours and {secondCount} seconds",andSecond:"{hourCount} hours and {secondCount} second"},one:{only:"{hourCount} hour",andMinutes:"{hourCount} hour and {minuteCount} minutes",andMinute:"{hourCount} hour and {minuteCount} minute",minutesAndSeconds:"{hourCount} hour, {minuteCount} minutes, and {secondCount} seconds",minutesAndSecond:"{hourCount} hour, {minuteCount} minutes, and {secondCount} second",minuteAndSeconds:"{hourCount} hour, {minuteCount} minute, and {secondCount} seconds",minuteAndSecond:"{hourCount} hour, {minuteCount} minute, and {secondCount} second",andSeconds:"{hourCount} hour and {secondCount} seconds",andSecond:"{hourCount} hour and {secondCount} second"}},minutes:{other:{only:"{minuteCount} minutes",andSeconds:"{minuteCount} minutes and {secondCount} seconds",andSecond:"{minuteCount} minutes and {secondCount} second"},one:{only:"{minuteCount} minute",andSeconds:"{minuteCount} minute and {secondCount} seconds",andSecond:"{minuteCount} minute and {secondCount} second"}},seconds:{other:"{secondCount} seconds",one:"{secondCount} second"}}}}},q3={Polaris:j3};var kf={};Object.defineProperty(kf,"__esModule",{value:!0});const V3="https://cdn.shopify.com/shopifycloud/app-bridge.js";kf.APP_BRIDGE_URL=V3;var xf={};const t_=$n($A);Object.defineProperty(xf,"__esModule",{value:!0});var K3=m,z3=t_,G3=gr;function J3(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var X3=J3(K3);const Y3=X3.default.forwardRef((e,t)=>{var r;return G3.jsx(z3.Link,{...e,to:(r=e.url)!==null&&r!==void 0?r:e.to,ref:t})});xf.RemixPolarisLink=Y3;Object.defineProperty(Rf,"__esModule",{value:!0});var Z3=U3,Q3=q3,e7=kf,t7=xf,Ji=gr;function r7(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var n7=r7(Q3);function a7(e){const{children:t,apiKey:r,i18n:n,isEmbeddedApp:a=!0,__APP_BRIDGE_URL:s=e7.APP_BRIDGE_URL,...i}=e;return Ji.jsxs(Ji.Fragment,{children:[a&&Ji.jsx("script",{src:s,"data-api-key":r}),Ji.jsx(Z3.AppProvider,{...i,linkComponent:t7.RemixPolarisLink,i18n:n||n7.default,children:t})]})}Rf.AppProvider=a7;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});var wd=m,Ob=gr;const r_=wd.createContext(null);function s7(e){const{children:t,appUrl:r}=e,[n,a]=wd.useState();return wd.useEffect(()=>a(new URL(window.location.href)),[a]),Ob.jsxs(r_.Provider,{value:{appUrl:r,requestUrl:n,formatUrl:i7(n)},children:[Ob.jsx("base",{href:r}),t]})}function i7(e){return(t,r=!0)=>{if(!t)return t;let n=t;return r&&e&&n.startsWith("/")&&(n=new URL(`${e.origin}${t}`).href),n.endsWith("/")||(n=`${n}/`),n}}fs.AppProxyProvider=s7;fs.AppProxyProviderContext=r_;var If={};Object.defineProperty(If,"__esModule",{value:!0});var o7=m,l7=t_,c7=fs,u7=gr;function d7(e){const t=o7.useContext(c7.AppProxyProviderContext);if(!t)throw new Error("AppProxyForm must be used within an AppProxyProvider component");const{children:r,action:n,...a}=e;return u7.jsx(l7.Form,{action:t.formatUrl(n,!1),...a,children:r})}If.AppProxyForm=d7;var $f={};Object.defineProperty($f,"__esModule",{value:!0});var h7=m,f7=fs,p7=gr;function m7(e){const t=h7.useContext(f7.AppProxyProviderContext);if(!t)throw new Error("AppProxyLink must be used within an AppProxyProvider component");const{children:r,href:n,...a}=e;return p7.jsx("a",{href:t.formatUrl(n),...a,children:r})}$f.AppProxyLink=m7;Object.defineProperty(hs,"__esModule",{value:!0});var g7=Rf,n_=fs,b7=If,y7=$f,v7=hs.AppProvider=g7.AppProvider;hs.AppProxyProvider=n_.AppProxyProvider;hs.AppProxyProviderContext=n_.AppProxyProviderContext;hs.AppProxyForm=b7.AppProxyForm;hs.AppProxyLink=y7.AppProxyLink;const x7=()=>[{rel:"stylesheet",href:dC}];function I7(){const{apiKey:e}=Zb();return gr.jsxs(v7,{isEmbeddedApp:!0,apiKey:e,children:[gr.jsxs("ui-nav-menu",{children:[gr.jsx(Wu,{to:"/app",rel:"home",children:"Home"}),gr.jsx(Wu,{to:"/app/additional",children:"Additional page"})]}),gr.jsx(Yb,{})]})}function $7(){return Kv.boundary.error(Qb())}export{$7 as ErrorBoundary,I7 as default,x7 as links};
